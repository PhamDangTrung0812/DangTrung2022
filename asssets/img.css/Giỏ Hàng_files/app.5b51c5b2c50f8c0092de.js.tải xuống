/*! For license information please see app.5b51c5b2c50f8c0092de.js.LICENSE.txt */
(()=>{var e,t,n,r,a,o,i,c={98724:(e,t,n)=>{"use strict";n.d(t,{t:()=>a});n(39730);var r=n(58518),a=r.default.t.bind(r.default)},97238:(e,t,n)=>{"use strict";n(44088),n(62850),n(62773);var r=n(26842),a="VN",o="live";(0,r.init)(a,o,"7.3.4"),n.p="https://".concat(location.host.includes("cn")?"deo.shopeesz.com":"deo.shopeemobile.com","/shopee/shopee-seller-").concat(o,"-").concat(a.toLowerCase(),"/chateasy/");var i=n(67294),c=n(73935),s=n(50558),l=n(57209),u=n(28366),d=(n(90785),n(2091)),p=n(20590),h=n.n(p),m=n(4942),f=n(70885),v=(n(81822),n(27476),n(95767),n(98837),n(94882),n(24336),n(98351),n(37470),n(48388),n(45697)),y=n.n(v),w=n(29697),g=n(9568),b=n(37764),C=(n(78225),n(71720)),S=(n(19371),n(82139),n(15671)),k=n(43144),E=n(79340),R=n(6215),O=n(61120),M=n(44925);const N="GQ50PLeMMa",P="dVVn4enqmj";var I=n(83253),x=n.n(I),Z=(n(59357),n(98724).t),D=function(e,t){var n=null;return function(){for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];n&&(clearTimeout(n),n=null),n=setTimeout((function(){e.apply(void 0,a)}),t)}},_=function(e){return"string"==typeof e?e:Z(e.key,e.vars)},T=n(80862),j=n.n(T);const A="RvOWac_JHC",F="uLKTuh4Ns7",L="vDTA9rTOOF",q="IIQka8N782",U="a49nTFu43M",B="tyqL83FbZF",H="evXOieJe8R",V="EgjeRPsDGK spZ9VcPhW5",W="eD64uvyQRG spZ9VcPhW5";function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,O.Z)(e);if(t){var a=(0,O.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,R.Z)(this,n)}}var G=function(e){(0,E.Z)(n,e);var t=z(n);function n(){return(0,S.Z)(this,n),t.apply(this,arguments)}return(0,k.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.closeModal,a=e.additions,o=a.modalStyle,c=a.withCloseIcon,s=void 0!==c&&c,l=a.content,u=a.contentStyle,d=a.renderContentAsHtml,p=a.confirmStyle,m=e.actions,f=m.confirm,v=m.cancel,y=t&&_(t),w=l&&_(l),g="".concat(U," ").concat(y?"":B);return i.createElement("div",{className:A,style:o,onClick:function(e){return e.stopPropagation()},"data-cy":"minichat-confirm-modal-root"},i.createElement("div",{className:F},y&&i.createElement("div",{className:L,"data-cy":"minichat-confirm-modal-title"},y),s&&i.createElement(h(),{svg:j(),className:q,onClick:v&&v.handler||n})),w&&(d?i.createElement("div",{className:g,style:u,dangerouslySetInnerHTML:{__html:w}}):i.createElement("div",{className:g,style:u},w)),i.createElement("div",{className:H},!(0,r.checkEmptyObject)(v)&&i.createElement("div",{className:V,onClick:v.handler,"data-cy":"minichat-confirm-modal-action-cancel"},_(v.label)),!(0,r.checkEmptyObject)(f)&&i.createElement("div",{className:W,onClick:f.handler||n,style:p,"data-cy":"minichat-confirm-modal-action-confirm"},_(f.label))))}}]),n}(i.PureComponent);G.propTypes={title:y().oneOfType([y().string,y().object]),additions:y().object,closeModal:y().func,actions:y().shape({confirm:y().oneOfType([y().string,y().object]),cancel:y().oneOfType([y().string,y().object])})};const X=G;var Q=n(97326);n(39730);const Y="VR7Tt0_ExH",K="eBHFce743h",J="ERZ1QHYNzM",$="_yAfKG6dac",ee="LL_iCk_Dz6",te="_4jGK3dffP",ne="g5Uji1MQMC";function re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,O.Z)(e);if(t){var a=(0,O.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,R.Z)(this,n)}}var ae=function(e){(0,E.Z)(n,e);var t=re(n);function n(){return(0,S.Z)(this,n),t.apply(this,arguments)}return(0,k.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.closeModal,r=e.noCancel,a="".concat($," ").concat(r?"":te);return i.createElement("div",{className:a},i.createElement("div",{className:ee},t),!r&&i.createElement(h(),{svg:j(),className:ne,onClick:n}))}}]),n}(i.PureComponent);ae.propTypes={title:y().string,closeModal:y().func,noCancel:y().bool};const oe=ae,ie="VV_Lk7fLaV";n(50110);const ce={btn:"B3MzZrKwPY","shopee-btn":"WGLxNzLWNP B3MzZrKwPY",shopeeBtn:"WGLxNzLWNP B3MzZrKwPY",disabled:"xJ3w8i_00z","size-tiny":"uc2n9RaFSV",sizeTiny:"uc2n9RaFSV","size-small":"CMrXLFtoSF",sizeSmall:"CMrXLFtoSF","size-large":"h2ys2Kl52z",sizeLarge:"h2ys2Kl52z","size-custome":"Cu84AlLjjB",sizeCustome:"Cu84AlLjjB","theme-primary":"RlskquOdLF",themePrimary:"RlskquOdLF","shape-outline":"aLZr1sRfLU",shapeOutline:"aLZr1sRfLU","shape-frameless":"XO3r7u2Fwv",shapeFrameless:"XO3r7u2Fwv","button-rounded":"Y9TnvixdwV",buttonRounded:"Y9TnvixdwV","theme-red":"HaocZtWpJL",themeRed:"HaocZtWpJL","theme-blue":"IBnABoX2Pe",themeBlue:"IBnABoX2Pe"};var se=["onClick","text","style"];function le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,O.Z)(e);if(t){var a=(0,O.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,R.Z)(this,n)}}var ue=function(e){(0,E.Z)(n,e);var t=le(n);function n(e){var r;return(0,S.Z)(this,n),(r=t.call(this,e)).getRenderClass=r.getRenderClass.bind((0,Q.Z)(r)),r.uppercaseFirstLetter=r.uppercaseFirstLetter.bind((0,Q.Z)(r)),r}return(0,k.Z)(n,[{key:"uppercaseFirstLetter",value:function(e){return"".concat(e[0].toUpperCase()).concat(e.slice(1))}},{key:"getRenderClass",value:function(e){var t=e.size,n=e.shape,r=e.theme,a=e.disabled,o=e.rounded,i=e.noHoverChange,c="default"!==t?ce["size".concat(this.uppercaseFirstLetter(t))]:"",s="default"!==r?ce["theme".concat(this.uppercaseFirstLetter(r))]:"",l="default"!==n?ce["shape".concat(this.uppercaseFirstLetter(n))]:"",u=o?ce.buttonRounded:"",d=a?ce.disabled:"";return"".concat(i?ce.btn:ce.shopeeBtn," ").concat(c," ").concat(s," ").concat(l," ").concat(u," ").concat(d)}},{key:"render",value:function(){var e=this.props,t=e.onClick,n=e.text,r=e.style,a=(0,M.Z)(e,se),o=this.getRenderClass(a),c=a.disabled;return i.createElement("button",{style:r,disabled:c,className:o,onClick:t},n)}}]),n}(i.PureComponent);ue.propTypes={text:y().string,style:y().object,size:y().string.isRequired,theme:y().string.isRequired,disabled:y().bool.isRequired,rounded:y().bool.isRequired,onClick:y().func.isRequired,shape:y().string.isRequired,noHoverChange:y().bool.isRequired},ue.defaultProps={size:"default",shape:"default",theme:"default",disabled:!1,rounded:!1,noHoverChange:!1,style:{}};const de=ue;function pe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,O.Z)(e);if(t){var a=(0,O.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,R.Z)(this,n)}}var he=function(e){(0,E.Z)(n,e);var t=pe(n);function n(){return(0,S.Z)(this,n),t.apply(this,arguments)}return(0,k.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.size,n=e.cancelOption,r=e.confirmOption,a=e.handleClick,o=e.disabled,c=n.label,s=n.theme,l=void 0===s?"default":s,u=n.shape,d=void 0===u?"frameless":u,p=r.label,h=r.theme,m=void 0===h?"primary":h,f=r.shape,v=void 0===f?"default":f,y=_(c),w=_(p);return i.createElement("div",{className:ie,"data-cy":"minichat-modal-footer-root"},i.createElement(de,{size:t,theme:l,onClick:function(){return a("cancel")},shape:d,text:y}),i.createElement(de,{size:t,theme:m,onClick:function(){return a("confirm")},shape:v,text:w,disabled:o}))}}]),n}(i.PureComponent);he.propTypes={size:y().string,cancelOption:y().object,confirmOption:y().object,handleClick:y().func,disabled:y().bool},he.defaultProps={size:"large"};const me=he;function fe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,O.Z)(e);if(t){var a=(0,O.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,R.Z)(this,n)}}var ve=function(e){(0,E.Z)(n,e);var t=fe(n);function n(e){var r;return(0,S.Z)(this,n),(r=t.call(this,e)).onClick=r.onClick.bind((0,Q.Z)(r)),r.getContentRef=r.getContentRef.bind((0,Q.Z)(r)),r.handleClickNotices=r.handleClickNotices.bind((0,Q.Z)(r)),r}return(0,k.Z)(n,[{key:"onClick",value:function(e){var t=this.props.actions,n=t.cancel,r=t.confirm;if("cancel"===e){var a=n.handler;a&&a()}else{var o=r.handler;o&&o()}}},{key:"getContentRef",value:function(e){e&&(this.contentRef=e)}},{key:"componentDidMount",value:function(){if(this.contentRef){var e=this.contentRef.firstElementChild;e&&(e.className=J,e.addEventListener("click",this.handleClickNotices))}}},{key:"componentWillUnmount",value:function(){if(this.contentRef){var e=this.contentRef.firstElementChild;e&&(e.className=J,e.removeEventListener("click",this.handleClickNotices))}}},{key:"handleClickNotices",value:function(){var e=this.props.additions.region;window.open("".concat(r.cancelOrderPolicy[e]||r.cancelOrderPolicy.sg))}},{key:"render",value:function(){var e=this.props,t=e.title,n=e.additions.content,r=e.closeModal,a=e.actions,o=a.cancel,c=a.confirm,s=_(t),l=_(n);return i.createElement("div",{className:Y},i.createElement(oe,{title:s,closeModal:r,noCancel:!0}),i.createElement("div",{className:K,ref:this.getContentRef,dangerouslySetInnerHTML:{__html:l}}),i.createElement(me,{size:"custome",cancelOption:o,confirmOption:c,handleClick:this.onClick}))}}]),n}(i.PureComponent);ve.propTypes={title:y().oneOfType([y().string,y().object]),additions:y().object,closeModal:y().func,actions:y().object};const ye=ve,we="zqMH_c5wzp",ge="gme_OoPfd8",be="MmweaACkwn",Ce="vEnOd9LPQ_",Se="c_uysWssK_",ke="tZW4PTpTFS";var Ee=n(30323),Re=n.n(Ee),Oe=n(94184),Me=n.n(Oe);const Ne="VQOeCQxlcl",Pe="x6aLt85Vr3",Ie="_AxAf8FhYj",xe="kUJn4hOOII",Ze="D2m782jDdf",De="EUS6uGsTx8",_e="TkNnNCt7Wi",Te="UkoJIi_1Ye VQOeCQxlcl",je="lkAMeknwGD",Ae="Tq_nqabXuE",Fe="EVFYKfoAOw",Le="iHBp3DGOal VQOeCQxlcl",qe="KRNyguK6zS OLDyUlDCiO",Ue="cbAryjjdH3 iHBp3DGOal VQOeCQxlcl",Be="U3P3QqjxnD mYBDZoJn0n VQOeCQxlcl",He="ZW8OHLaTjc mYBDZoJn0n VQOeCQxlcl",Ve="JFvZlPm2wV",We="XTh7aPDc5G",ze="U14SYt1zDI",Ge="tRIDKKtBL2",Xe="gzEbPbtjEv";var Qe,Ye="\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important\n",Ke=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function Je(e){var t=window.getComputedStyle(e),n=t.getPropertyValue("box-sizing"),r=parseFloat(t.getPropertyValue("padding-bottom"))+parseFloat(t.getPropertyValue("padding-top")),a=parseFloat(t.getPropertyValue("border-bottom-width"))+parseFloat(t.getPropertyValue("border-top-width"));return{contextStyle:Ke.map((function(e){return"".concat(e,":").concat(t.getPropertyValue(e))})).join(";"),paddingSize:r,borderSize:a,boxSizing:n}}var $e=new(Re()),et=function(e){var t,n,r=e.maxLength,a=e.placeholder,o=e.disabled,c=e.value,s=e.onPaste,l=e.type,u=e.size,d=e.height,p=e.hasError,h=e.showWorldLimit,v=e.errorContent,y=e.onChange,w=e.onFocus,g=e.onBlur,b=e.top,C=e.bottom,S=e.autoSize,k=e.maxRows,E=e.minRows,R=e.mode,O=(0,i.useState)(!1),M=(0,f.Z)(O,2),N=M[0],P=M[1],I=(0,i.useState)(0),x=(0,f.Z)(I,2),Z=x[0],D=x[1],_=(0,i.useRef)(null),T=(0,i.useState)({}),j=(0,f.Z)(T,2),A=j[0],F=j[1],L="textarea"===l&&S,q="shortcutGroupName"===R,U="shortcutContent"===R,B=function(){if(_.current){var e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Qe||(Qe=document.createElement("textarea"),document.body.appendChild(Qe));var r=Je(e),a=r.paddingSize,o=r.borderSize,i=r.boxSizing,c=r.contextStyle;Qe.setAttribute("style","".concat(c,";").concat(Ye)),Qe.value=e.value||e.placeholder||"";var s=Qe.scrollHeight,l={};"border-box"===i?s+=o:"content-box"===i&&(s-=a),Qe.value="";var u=Qe.scrollHeight-a;if(null!==t){var d=u*t;"border-box"===i&&(d=d+a+o),s=Math.max(d,s),l.minHeight="".concat(d,"px")}if(null!==n){var p=u*n;"border-box"===i&&(p=p+a+o),s=Math.min(p,s)}return l.height="".concat(s,"px"),Qe.parentNode&&Qe.parentNode.removeChild(Qe),Qe=null,l}(_.current,E,k);F(e)}};(0,i.useEffect)((function(){var e=c&&c.length;"autoReply"===R&&(e=c&&$e.countGraphemes(c)),e&&D(e),L&&B()}),[c,L]);var H=function(e){var t=e.target.value,n=t.length;if("autoReply"===R&&(n=$e.countGraphemes(t))>600)return t=$e.splitGraphemes(t).splice(0,r).join(""),void(y&&y(t));D(n),y&&y(t)},V=function(e){w&&w(),P(e),!e&&g&&g()},W=function(){var e,t=Me()(Te,(e={},(0,m.Z)(e,Le,Z>=r),(0,m.Z)(e,je,q||U),e)),n=Me()(Ae,(0,m.Z)({},Fe,"textarea"===l));return h&&r>0&&i.createElement("div",{className:n},i.createElement("div",{className:t},Z,"/",r))},z="text"===l?i.createElement("input",{className:Be,spellCheck:!1,defaultValue:c,placeholder:a,disabled:o,maxLength:r,onChange:H,onFocus:function(){return V(!0)},onBlur:function(){return V(!1)},onPaste:function(e){s&&s(e)}}):i.createElement("textarea",{className:Me()(He,(0,m.Z)({},Ve,U)),spellCheck:!1,value:c,placeholder:a,maxLength:"autoReply"!==R&&r,disabled:o,onChange:H,onFocus:function(){return V(!0)},onBlur:function(){return V(!1)},onPaste:function(e){s&&s(e)},style:A,ref:_}),G=Me()(Ie,(t={},(0,m.Z)(t,xe,N),(0,m.Z)(t,Ze,p),(0,m.Z)(t,Ne,"normal"===u),(0,m.Z)(t,Pe,"large"===u),(0,m.Z)(t,qe,"textarea"===l),(0,m.Z)(t,De,o),(0,m.Z)(t,Xe,L),(0,m.Z)(t,_e,q),t)),X={height:d+"px"};return i.createElement("div",{className:Me()(We,(n={},(0,m.Z)(n,ze,q||U),(0,m.Z)(n,Ge,q),n))},i.createElement("div",{className:G,style:X},b,z,!L&&W(),C),p&&i.createElement("div",{className:Ue},v),L&&W())};et.propTypes={top:y().node,bottom:y().node,value:y().string,size:y().string,type:y().string,height:y().oneOfType([y().number,y().string]),placeholder:y().string,disabled:y().bool,maxLength:y().number,showWorldLimit:y().bool,errorContent:y().node,hasError:y().bool,autoSize:y().bool,minRows:y().number,maxRows:y().number,onChange:y().func,onFocus:y().func,onBlur:y().func,onPaste:y().func,mode:y().string},et.defaultProps={size:"normal",height:32,type:"text",disabled:!1,showWorldLimit:!0,hasError:!1,autoSize:!1};const tt=et;var nt=n(77996),rt=n(98724).t;function at(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?at(Object(n),!0).forEach((function(t){(0,m.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):at(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var it=[{text:"improved",value:r.FeedbackInfo.IMPROVED},{text:"wrong",value:r.FeedbackInfo.WRONG},{text:"offensive",value:r.FeedbackInfo.OFFENSIVE}],ct={improved:!1,wrong:!1,offensive:!1},st=function(e){var t=e.title,n=e.closeModal,a=e.actions,o=a.cancel,c=a.confirm,s=e.additions.trackerData;(0,i.useEffect)((function(){(0,b.$tracker)(ot({operation:r.TrackerOperation.IMPRESSION,trackerName:"impressionFeedbackPopup"},s))}),[]);var l=(0,i.useState)(null),u=(0,f.Z)(l,2),d=u[0],p=u[1],h=(0,i.useState)(0),v=(0,f.Z)(h,2),y=v[0],w=v[1],g=(0,i.useState)(""),C=(0,f.Z)(g,2),S=C[0],k=C[1],E=(0,i.useState)(ct),R=(0,f.Z)(E,2),O=R[0],M=R[1];(0,i.useEffect)((function(){d&&3!==d&&(0,b.$tracker)(ot({operation:r.TrackerOperation.IMPRESSION,trackerName:"impressionFeedbackMore"},s))}),[d]);var N=_(t);return i.createElement("div",{className:we,"data-cy":"minichat-evalute-modal-root"},i.createElement(oe,{title:N,closeModal:n}),i.createElement("div",{className:ge},i.createElement("div",{className:be,"data-cy":"minichat-evalute-modal-subtitle"},i.createElement("span",{className:Ce},"*"),_({key:"modal.translation_feedback.subTitle"})),i.createElement("div",{className:Se},i.createElement(nt.FeedbackEmoji,{handleGradeClick:function(e){var t=r.TranslationFeedbackQuality[e];d!==t&&(w(0),k(""),M(ct)),p(t)}})),d&&3!==d&&i.createElement("div",{className:ke,"data-cy":"minichat-evalute-modal-information"},i.createElement("div",null,rt("modal.translation_feedback.more")),i.createElement(nt.FeedbackReason,{infoMap:it,handleReasonSelect:function(e,t){var n=it.filter((function(e){return e.value===t}))[0].text;w(e?y+t:y-t),M(ot(ot({},O),{},(0,m.Z)({},n,e)))},type:"translation",checked:O}),i.createElement(tt,{type:"textarea",placeholder:rt("modal.translation_feedback.input_placeholder"),autoSize:!0,height:"unset",maxLength:600,showWorldLimit:!1,maxRows:3,minRows:3,value:S,onChange:function(e){k(e)}}))),i.createElement(me,{size:"default",handleClick:function(e){if("cancel"===e){var t=o.handler;t&&t()}else{var n=ot(ot({},s),{},{data:ot(ot({},s.data),{},{evaluation_feedback_value:(0,r.capitalizeFirstLetter)(r.TranslationFeedbackQuality[d])})});(0,b.$tracker)(ot({trackerName:"clickFeedbackSubmit"},n));var a=c.handler;a&&a({quality:d,feedbacks:y,otherSuggestion:S})}},cancelOption:o,confirmOption:c,disabled:!d}))};st.propTypes={title:y().oneOfType([y().string,y().object]),closeModal:y().func,actions:y().object,additions:{track:y().func}};const lt=st,ut="pROOUUYrKq",dt="CZN4piXZ9C",pt="dvjGHyiojI",ht="wVFoWoxkvp";var mt=function(e){var t=e.actions.confirm,n=e.additions,a=n.content,o=n.region,c=e.closeModal,s=e.title,l=(0,i.useRef)(null);(0,i.useEffect)((function(){if(l.current){var e=l.current.firstElementChild;if(e)return e.className=pt,e.addEventListener("click",u),function(){e.removeEventListener("click",u)}}}));var u=function(){window.open((0,r.getSpammerPolicyUrl)(o))},d=_(s),p=_(a),h=_(t.label);return i.createElement("div",{className:ut},i.createElement(oe,{title:d,closeModal:c}),i.createElement("div",{className:dt,ref:l,dangerouslySetInnerHTML:{__html:p}}),i.createElement("div",{className:ht},i.createElement(de,{theme:"primary",onClick:function(){return function(t){var n=e.actions,r=n.cancel,a=n.confirm;if("cancel"===t){var o=r.handler;o&&o()}else{var i=a.handler;i&&i()}}("confirm")},text:h})))};mt.propTypes={title:y().oneOfType([y().string,y().object]),additions:y().object,closeModal:y().func,actions:y().object};const ft=mt;var vt=["type"],yt=["show","closeable"];function wt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,O.Z)(e);if(t){var a=(0,O.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,R.Z)(this,n)}}var gt=function(e){(0,E.Z)(n,e);var t=wt(n);function n(){return(0,S.Z)(this,n),t.apply(this,arguments)}return(0,k.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.type,n=(0,M.Z)(e,vt);switch(t){case"CONFIRM_MODAL":return i.createElement(X,n);case"Cancel_ORDER_WARNING_MODAL":return i.createElement(ye,n);case"EVALUTE_MODAL":return i.createElement(lt,n);case"SPAMMER_MODAL":return i.createElement(ft,n);default:return null}}}]),n}(i.PureComponent);gt.propTypes={type:y().string.isRequired};var bt=function(e){(0,E.Z)(n,e);var t=wt(n);function n(){return(0,S.Z)(this,n),t.apply(this,arguments)}return(0,k.Z)(n,[{key:"componentDidMount",value:function(){var e=window.miniChatContainerId;x().setAppElement("#".concat(e))}},{key:"render",value:function(){var e=this.props,t=e.show,n=e.closeable,r=(0,M.Z)(e,yt),a=window.miniChatContainerId;return i.createElement(x(),{isOpen:t,onRequestClose:n?r.closeModal:void 0,parentSelector:function(){return document.querySelector("#".concat(a))},overlayClassName:N,className:P,shouldReturnFocusAfterClose:!1},i.createElement(gt,r))}}]),n}(i.PureComponent);bt.propTypes={show:y().bool,closeable:y().bool};const Ct=bt;function St(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,O.Z)(e);if(t){var a=(0,O.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,R.Z)(this,n)}}var Et=function(e){(0,E.Z)(n,e);var t=kt(n);function n(){return(0,S.Z)(this,n),t.apply(this,arguments)}return(0,k.Z)(n,[{key:"render",value:function(){return i.createElement(Ct,this.props)}}]),n}(i.PureComponent),Rt={closeModal:b.closeModal};const Ot=(0,s.connect)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?St(Object(n),!0).forEach((function(t){(0,m.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):St(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.modalReducer)}),Rt)(Et),Mt={root:"lmRE8vX68Q",show:"sd52AxPSGC",hide:"PJHbR_Yd2l",icon:"rN6EXEam8W",success:"W7qaOmRY0O",fail:"H8ClYudgH1",error:"eFxCzEILZ1",info:"aZ9QwlAfiP",warn:"U_lOTqvndI",message:"uM6AUh43Zu"};var Nt=n(96630),Pt=n(34652),It=n.n(Pt),xt=n(86134),Zt=n.n(xt),Dt=n(67838),_t=n.n(Dt),Tt=n(89069),jt=n.n(Tt);function At(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ft(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?At(Object(n),!0).forEach((function(t){(0,m.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):At(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Lt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,O.Z)(e);if(t){var a=(0,O.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,R.Z)(this,n)}}var qt={transition:"opacity ".concat(200,"ms ease-in-out"),opacity:0},Ut={success:It(),fail:Zt(),error:Zt(),info:jt(),warn:_t()},Bt={entering:{opacity:0},entered:{opacity:1},exiting:{opacity:1},exited:{opacity:0}},Ht=function(e){(0,E.Z)(n,e);var t=Lt(n);function n(e){var r;return(0,S.Z)(this,n),(r=t.call(this,e)).state={show:!1},r.timer=null,r.eventListenerAdded=!1,r}return(0,k.Z)(n,[{key:"componentWillUnmount",value:function(){this.timer&&clearTimeout(this.timer)}},{key:"render",value:function(){var e=this,t=this.props.toast,n=t.type,r=t.message,a=this.state.show,o="".concat(Mt.root," ").concat(a?Mt.show:Mt.hide),c="".concat(Mt.icon," ").concat(Mt[n]),s=Ut[n];return i.createElement(Nt.ZP,{in:a,timeout:200,addEndListener:function(t){e.eventListenerAdded||(t.addEventListener("transitionend",(function(){e.state.show&&(e.timer&&clearTimeout(e.timer),e.timer=setTimeout((function(){e.setState({show:!1},(function(){e.timer&&clearTimeout(e.timer),e.props.setToastInformation({toast:{type:"",message:"",show:!1}})}))}),1500))}),!1),e.eventListenerAdded=!0)}},(function(e){return i.createElement("div",{className:o,style:Ft(Ft({},qt),Bt[e]),"data-cy":a?"minichat-toast-root-show":"minichat-toast-root-hide"},s&&i.createElement(h(),{svg:s,className:c}),i.createElement("div",{className:Mt.message,"data-cy":"minichat-toast-message"},r))}))}}],[{key:"getDerivedStateFromProps",value:function(e){var t=e.toast,n=t.message,r=t.show;return n?r?{show:r}:null:{show:!1}}}]),n}(i.PureComponent);Ht.propTypes={toast:y().object,setToastInformation:y().func};const Vt=Ht,Wt=n.p+"1d65e1b1865219c9d05f.png",zt="gEBiGsPtJy",Gt="yyHKyYrvkA",Xt="ZAV0ULHaxr",Qt="auAKC8Ldbh";var Yt=n(98724).t;const Kt=function(){return i.createElement("div",{className:zt},i.createElement("div",{className:Gt},i.createElement("img",{className:Xt,src:Wt}),i.createElement("div",{className:Qt},Yt("common.error.hint_text")),i.createElement(de,{onClick:function(){window.location.reload()},text:Yt("common.error.reload"),theme:"primary",style:{borderRadius:"4px",padding:"8px 16px"}})))};var Jt=n(87462);const $t="PHu35ijDVb",en="VUVLX8qOEv",tn="uGD0xoFYQE",nn="DpBnJAn_L8",rn="wjju7AtYL1";var an=n(16599),on=n.n(an),cn=n(11646),sn=n.n(cn),ln=(n(14488),n(29960)),un=(n(80454),n(68469)),dn=n(70121),pn=n.n(dn),hn=n(32897),mn=n.n(hn),fn=n(71417),vn=n.n(fn);const yn="RVRQV2fIDA",wn="sxIHRpEQxY",gn="qH3bHQsd39 PQFG3BVRno",bn="hlu4O5OHu9",Cn="BzgRdKZSn7",Sn="WowWDssHK9",kn="ge3r1qOvgN",En="nih6WLiIAc",Rn="j7vrDUiLk7",On="Q04oG26e34",Mn="czLYplwUv_";var Nn=n(98724).t;function Pn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,O.Z)(e);if(t){var a=(0,O.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,R.Z)(this,n)}}var In=function(e){(0,E.Z)(n,e);var t=Pn(n);function n(e){var a;return(0,S.Z)(this,n),(a=t.call(this,e)).state={focus:!1,filterVisible:!1,showUnrepliedGuide:!1},a.handleFocus=a.handleFocus.bind((0,Q.Z)(a)),a.handleSearch=(0,r.debounce)(a.handleChange.bind((0,Q.Z)(a))),a.handleVisibleChange=a.handleVisibleChange.bind((0,Q.Z)(a)),a.handleClickFilter=a.handleClickFilter.bind((0,Q.Z)(a)),a}return(0,k.Z)(n,[{key:"componentDidMount",value:function(){this.setState({showUnrepliedGuide:(0,r.checkMiniUnrepliedGuide)(this.props.newbie)})}},{key:"componentDidUpdate",value:function(e){var t=this.props.newbie;e.newbie!==t&&this.setState({showUnrepliedGuide:(0,r.checkMiniUnrepliedGuide)(t)})}},{key:"handleFocus",value:function(e){this.setState({focus:e}),e&&(0,b.$tracker)({trackerName:"clickSearchName"})}},{key:"handleChange",value:function(e){this.props.searchConversationsRequested({keyword:e})}},{key:"getFilterOptions",value:function(e){var t=e.isSubAccount,n=e.isScChat,a=e.waitingTimeFilter,o=e.handleFilter,c=e.subaccountHasUnrepliedPermission,s=["All","Unread","Pinned"];(!t&&n||t&&c)&&s.splice(s.length-1,0,"Unreplied");var l=s.map((function(e){return i.createElement(C.default.DropdownItem,{key:e,className:En,onDropdownItemClick:function(){o(e)},"data-cy":"minichat-conversation-list-header-filter-option"},Nn("conversation_list.filter.".concat(e.toLowerCase())),(a||t)&&"Unreplied"===e&&i.createElement(un.default,{zIndex:r.MAX_Z_INDEX,placement:"right",trigger:"hover",content:Nn("unreplied_filter.newbie")},i.createElement("div",{className:Rn,"data-cy":"minichat-conversation-list-question-wrapper"},i.createElement(h(),{svg:vn(),className:On}))))}));return t&&l.push(i.createElement(C.default.DropdownItem,{key:"Closed",className:En,onDropdownItemClick:function(){o("Closed")},"data-cy":"minichat-conversation-list-header-filter-option"},Nn("common.closed"))),i.createElement(C.default.DropdownMenu,{placement:"bottomRight",popperClass:Cn},l)}},{key:"handleVisibleChange",value:function(e){if(e){var t=this.props.updateOpenedMenu;(0,b.$tracker)({trackerName:"clickFilter"}),t("conversions_filter")}this.setState({filterVisible:e})}},{key:"handleClickFilter",value:function(){var e=this.props,t=e.updateGuideRequested,n=e.waitingTimeFilter;this.state.showUnrepliedGuide&&n&&t({newbieId:this.state.showUnrepliedGuide.id})}},{key:"render",value:function(){var e=this,t=this.state,n=t.focus,r=t.filterVisible,a=t.showUnrepliedGuide,o=this.props,c=o.keyword,s=void 0===c?"":c,l=o.filter,u=o.isSubAccount,d=o.isScChat,p=o.waitingTimeFilter,m=o.handleFilter,f=o.subaccountHasUnrepliedPermission,v=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e="Closed"===t?"common.closed":"conversation_list.filter.".concat(t.toLowerCase()),Nn(e)}(l),y=this.getFilterOptions({isSubAccount:u,isScChat:d,waitingTimeFilter:p,handleFilter:m,subaccountHasUnrepliedPermission:f});return i.createElement("div",{className:yn,"data-cy":"minichat-conversation-list-header-bar-root"},i.createElement(ln.Z,{clearable:!0,type:"input",value:s,className:wn,prefixIcon:i.createElement(h(),{svg:mn(),className:gn}),onChange:this.handleSearch,placeholder:Nn("conversation_list.search_bar.placeholder"),ref:function(t){return e.input=t},onBlur:function(){return e.handleFocus(!1)},onFocus:function(){return e.handleFocus(!0)},"data-cy":"minichat-conversation-list-header-search-input"}),!s&&!n&&i.createElement("div",{className:"".concat(bn),"data-cy":"minichat-conversation-list-header-bar-filter"},i.createElement(C.default,{showTimeout:0,hideTimeout:0,visible:r,onVisibleChange:this.handleVisibleChange,overlay:y},i.createElement("div",{className:Sn,onClick:this.handleClickFilter,"data-cy":"minichat-conversation-list-header-bar-filter-selected"},v,i.createElement(h(),{svg:pn(),className:kn}),p&&a&&i.createElement(sn(),{className:Mn})))))}}]),n}(i.PureComponent);In.propTypes={filter:y().string,keyword:y().string,openedMenu:y().string,isSubAccount:y().bool,updateOpenedMenu:y().func,resetConversationRequested:y().func,fetchConversationsRequested:y().func,searchConversationsRequested:y().func,isScChat:y().bool};const xn=In;var Zn=n(82365),Dn=n.n(Zn),_n=n(19556),Tn=n.n(_n),jn=n(89757),An=n.n(jn);const Fn={root:"ZSOu4_Ofaf",empty:"bV0qd64h8p",current:"KScWk0WAt2","no-padding-left":"YzIXv6hH10",noPaddingLeft:"YzIXv6hH10",icon:"n9CQyVMVCS","pin-wrapper":"ZjqtoWt2JC",pinWrapper:"ZjqtoWt2JC",container:"Dcv8CzncwR",top:"wU7cFyNgJE",middle:"CAwrN7ZlTp","name-wrapper":"oMCwya4MZe",nameWrapper:"oMCwya4MZe",name:"HzTC4LV8Q6",feed:"eKn5f93WCF",timestamp:"atSHhfkNYh",message:"PMNySQqlyZ",draft:"zzTEflYCIb",status:"Abg7TXdcBR",sending:"OStK6EoQnp Abg7TXdcBR",rotate:"cvPafeaSsf",failed:"DExtwZ0gx9 Abg7TXdcBR",forward:"uYXodDYfoa",suffix:"zJkRJX4szQ",marginRight:"ZDprudRhBz",gap:"w6n1VWWNog","show-dropdown":"p2MsO0MHFE",showDropdown:"p2MsO0MHFE",wrapper:"vZdXIRY_c9",username:"sWAADuFSbu",keyword:"FK9MfU4Ioq",shop:"qeYzKCaZDH",text:"RQ9YsbobTX",closed:"iDtPo8bxBH",banned:"o0yGFGmU11 iDtPo8bxBH",blocked:"jT9OrCQVID iDtPo8bxBH","option-delete":"en5MHYOT5c",optionDelete:"en5MHYOT5c","operate-option":"aDNfV8ymLa",operateOption:"aDNfV8ymLa","options-icon":"MW82jPe2vQ",optionsIcon:"MW82jPe2vQ",result:"Rvso310uPY",offerHighlight:"yt_2UPcJuc",highlight:"SHLt88EtDi",actions:"haA8XtQq6m",active:"nVTx_bIuh0",dropdown:"A6KZLkq_4A"};var Ln=function(e){var t=e.style,n=e.conversation,r=e.keyword,a=e.isSubAccount,o=e.onClick,c=n.avatar,s=n.avatar_hash,l=n.to_name,u=n.shop_name,d=n.id;return i.createElement("div",{style:t,className:Fn.root,onClick:function(){(0,b.$tracker)({trackerName:"clickSearchNameResult",data:{conversation_id:d}}),o(n)},"data-cy":"minichat-conversation-cell-result"},i.createElement(An(),{avatar:c,avatarHash:s}),i.createElement("div",{className:Fn.wrapper,"data-cy":"minichat-conversation-cell-result-wrapper"},i.createElement("div",{className:Fn.username,"data-cy":"minichat-conversation-cell-result-user-name"},i.createElement(Tn(),{highlightClassName:Fn.keyword,searchWords:r,textToHighlight:l,className:Fn.result,"data-cy":"minichat-conversation-cell-result-highlight"})),a&&i.createElement("div",{className:Fn.shop,title:u,"data-cy":"minichat-conversation-cell-result-shop-name"},u)))};Ln.propTypes={style:y().object,conversation:y().object,keyword:y().string,isSubAccount:y().bool,onClick:y().func.isRequired};const qn=Ln;n(75115),n(6059),n(51876);var Un=n(13283),Bn=n(26814),Hn=n.n(Bn),Vn=n(50647),Wn=n.n(Vn),zn=n(2296),Gn=n.n(zn),Xn=n(65981),Qn=n.n(Xn),Yn=n(28981),Kn=n.n(Yn),Jn=n(98446),$n=n.n(Jn),er=n(25760),tr=n.n(er),nr=n(3468),rr=n.n(nr),ar=n(69301),or=n.n(ar),ir=n(26867),cr=n.n(ir),sr=n(82953),lr=n.n(sr),ur=n(26368),dr=n.n(ur),pr=n(2871),hr=n.n(pr),mr=n(98724).t;function fr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fr(Object(n),!0).forEach((function(t){(0,m.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var yr={pin:"markAsPinned",unpin:"markAsUnpinned",read:"markAsRead",unread:"markAsUnread",delete:"markAsDelete",close:"markAsClose",restart:"markAsRestart",mute:"markAsMute",unmute:"markAsUnmute"},wr={pin:$n(),unpin:$n(),read:tr(),unread:rr(),delete:cr(),close:or(),restart:lr(),mute:dr(),unmute:hr()};const gr=function(e){var t=e.type,n=e.extra,r=e.operationRequest,a=e.showModal,o=e.closeModal,c=e.trackerParams;return(0,i.useEffect)((function(){(0,b.$tracker)({operation:"impression",trackerName:yr[t],data:vr({},c)})}),[]),i.createElement(C.default.DropdownItem,{key:t,className:Fn.operateOption,onDropdownItemClick:function(){"delete"===t?a({type:"CONFIRM_MODAL",title:{key:"conversation_list.conversation_cell.menu.delete_chat_title"},actions:{cancel:{label:{key:"common.cancel"},handler:function(){o()}},confirm:{label:{key:"common.ok"},handler:function(){r({type:t,extra:n}),o()}}},additions:{content:mr("conversation_list.conversation_cell.menu.delete_chat_content")}}):r({type:t,extra:n}),(0,b.$tracker)({trackerName:yr[t],data:vr({},c)})}},i.createElement(h(),{svg:wr[t],className:Fn.optionsIcon}),mr("common.".concat("delete"===t?"delete_chat":t)))};const br=function(e){var t=e.toId,n=e.actionVisible,r=e.actions,a=e.showModal,o=e.statusTag,c=e.unreadCount,s=e.closeModal,l=e.latestMessageId,u=e.conversationId,d=e.operationRequest,p=e.handleActionVisible,m=e.tracker,f=c>0&&!o,v=(0,i.useMemo)((function(){return{convo_userid:t,unread_count:c,conversation_id:u}}),[t,c,u]),y=(0,i.useMemo)((function(){return{isRead:f,conversationId:u,latestMessageId:l}}),[u,f,l]);return i.createElement("div",{className:Fn.dropdown,"data-cy":"minichat-conversation-cell-dropdown"},i.createElement(C.default,{showTimeout:0,hideTimeout:0,visible:n,onVisibleChange:function(e){e&&m("clickChatMore"),p(e)},overlay:i.createElement(C.default.DropdownMenu,{placement:"bottomLeft",popperClass:Fn.showDropdown,getPopupContainer:function(){return document.getElementById("shopee-mini-chat-embedded")}},r.map((function(e){return i.createElement(gr,{key:e,type:e,extra:y,showModal:a,closeModal:s,operationRequest:d,trackerParams:v})})))},i.createElement("div",{id:u,onClick:function(e){return e.stopPropagation()},className:Fn.actions,"data-cy":"minichat-conversation-cell-dropdown-actions"},i.createElement(h(),{svg:Kn(),className:Me()(Fn.icon,n?Fn.active:"")}))))};var Cr=n(98724).t;function Sr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,O.Z)(e);if(t){var a=(0,O.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,R.Z)(this,n)}}var kr=function(e){(0,E.Z)(n,e);var t=Sr(n);function n(e){var a;return(0,S.Z)(this,n),(a=t.call(this,e)).state={hover:!1,actionVisible:!1},a.rootNode=null,a.sendClickTracker=a.sendClickTracker.bind((0,Q.Z)(a)),a.handleSetHover=a.handleSetHover.bind((0,Q.Z)(a)),a.getMenuActions=a.getMenuActions.bind((0,Q.Z)(a)),a.getConversationStatusTag=a.getConversationStatusTag.bind((0,Q.Z)(a)),a.handleClickConversation=a.handleClickConversation.bind((0,Q.Z)(a)),a.needExpose="function"==typeof IntersectionObserver,a.sendTracker=a.sendTracker.bind((0,Q.Z)(a)),a.handleVisibleChange=a.handleVisibleChange.bind((0,Q.Z)(a)),a.needExpose&&(a.observer=new IntersectionObserver((function(e){var t=e[0];t&&t.isIntersecting&&t.intersectionRatio>=1&&a.sendTracker("impressionConversationCell",r.TrackerOperation.IMPRESSION)}),{threshold:1})),a}return(0,k.Z)(n,[{key:"sendTracker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"click",n=this.props.conversation,r=n.id,a=n.unread_count,o=n.to_id;(0,b.$tracker)({operation:t,trackerName:e,data:{conversation_id:r,unread_count:a,convo_userid:o,is_read:!a}})}},{key:"componentDidMount",value:function(){this.needExpose&&this.observer.observe(this.rootNode)}},{key:"componentWillUnmount",value:function(){this.needExpose&&this.observer.unobserve(this.rootNode)}},{key:"sendClickTracker",value:function(e){var t=this.props.conversation;(0,b.$tracker)({trackerName:e,data:{conversation_id:t.id}})}},{key:"getMenuActions",value:function(){var e=this.props,t=e.conversation,n=e.isSubAccount,r=t.status,a=t.pinned,o=t.unread_count,i=[!!(void 0===o?0:o)?"read":"unread",a?"unpin":"pin",t.mute?"unmute":"mute"];return n&&("activated"===r?i.push("close"):i.splice(0,1,"restart")),i.concat(["delete"])}},{key:"getConversationStatusTag",value:function(e,t,n){var a=this.props.isSubAccount;return"closed"===e?"closed":"banned"===t?"banned":!(0,r.isVisitingCNSC)()&&a||!n?"":"blocked"}},{key:"handleSetHover",value:function(e){this.setState({hover:e})}},{key:"handleClickConversation",value:function(e){var t=this.props,n=t.onClick,r=t.conversation,a=t.updateLocationMode;this.rootNode.contains(e.target)&&(n(r),a({inlocation:!1}),this.sendTracker("clickConversationCell"))}},{key:"handleVisibleChange",value:function(e){this.setState({actionVisible:e})}},{key:"render",value:function(){var e=this,t=this.props,n=t.style,a=t.isScChat,o=t.draftHash,c=t.conversation,s=t.currentConversationId,l=t.lastMessage,u=t.inlocation,d=t.shopTranslationSettings,p=t.isSubAccount,f=t.locale,v=t.pendingOffersCount,y=t.showModal,w=t.closeModal,g=t.operationRequest,b=c.status,C=c.pinned,S=c.id,k=c.to_name,E=c.to_avatar,R=c.to_avatar_hash,O=c.unread_count,M=c.flag,N=c.to_status,P=c.is_blocked,I=c.crm_message_preview,x=void 0===I?{}:I,Z=c.entry_point,D=c.to_id,_=c.latest_message_from_id,T=c.shop_id,j=c.auto_translation,A=c.translationAccess,F=c.mute,L=c.latest_message_id,q=D!==_,U=((l||{}).content||{}).translation,B=(U=void 0===U?{}:U).text,H=(d[T]||{}).autoTranslationStatus===r.SwitchStatus.ENABLED,V=p?H||j:(0,r.handleDisplayTranslation)(H,q,B,a,A),W=l.send_status,z=1===W?"sending":2===W?"failed":"",G=this.state,X=G.hover,Q=G.actionVisible,Y=this.getConversationStatusTag(b,N,P),K=S===s,J=this.getMenuActions(),$=o[S],ee=!K&&$,te="failed"===z,ne="sending"===z,re=Object.assign({},l,{crm_message_preview:x}),ae=(0,r.previewMessage)({message:re,enableTranslation:V,locale:f,conversationShopId:T}),oe=ae.text,ie=ae.isPendingReceivedOffer,ce=(0,r.isDeletedMessage)(re),se=(0,r.formatMessageTime)(l),le="closed"!==b&&"feed_story"===Z;return i.createElement("div",{style:n,ref:function(t){return e.rootNode=t},onClick:this.handleClickConversation,className:Me()(Fn.root,K&&!u?Fn.current:"",C?Fn.noPaddingLeft:""),onMouseEnter:function(){return e.handleSetHover(!0)},onMouseLeave:function(){return e.handleSetHover(!1)},"data-cy":K&&!u?"minichat-conversation-cell-root-current":"minichat-conversation-cell-root"},C&&i.createElement("div",{className:Fn.pinWrapper,"data-cy":"minichat-conversation-cell-pin-wrapper"},i.createElement(h(),{svg:Hn(),className:Fn.icon})),i.createElement(An(),{fromConversation:!0,avatar:E,avatarHash:R}),i.createElement("div",{className:Fn.container,"data-cy":"minichat-conversation-cell-container"},i.createElement("div",{className:Fn.top,"data-cy":"minichat-conversation-cell-container-top"},i.createElement("div",{className:Fn.nameWrapper,"data-cy":"minichat-conversation-cell-name-wrapper"},i.createElement("div",{className:Fn.name,title:k,"data-cy":"minichat-conversation-cell-name"},k),le&&i.createElement("div",{className:Fn.feed,"data-cy":"minichat-conversation-cell-name-feed"},Cr("conversation_detail.feed_badge"))),i.createElement("div",{className:Fn.timestamp,"data-cy":"minichat-conversation-cell-time-stamp"},se)),i.createElement("div",{className:Fn.middle,"data-cy":"minichat-conversation-cell-middle"},i.createElement("div",{className:Fn.message,"data-cy":"minichat-conversation-cell-message"},ee?i.createElement(i.Fragment,null,i.createElement("span",{className:Fn.draft,"data-cy":"minichat-conversation-cell-draft-preffix"},"[",Cr("label.draft"),"]"),i.createElement("span",{title:ee,"data-cy":"minichat-conversation-cell-draft-content"},ee)):i.createElement(i.Fragment,null,te?i.createElement(h(),{svg:Wn(),className:Fn[z]}):ne&&!K?i.createElement("span",{className:Fn[z],"data-cy":"minichat-conversation-cell-message-status"}):"move"===M&&i.createElement("span",{className:Fn.forward,"data-cy":"minichat-conversation-cell-message-forward"},"[",Cr("label.forward"),"]"),ce?i.createElement(Un.DeletedMessageText,{isSend:q}):ie?i.createElement(Tn(),{highlightClassName:Fn.offerHighlight,searchWords:oe.split(" ")[0],highlightTag:"span",textToHighlight:oe,needTooltip:!0,className:Fn.highlight,"data-cy":"minichat-conversation-cell-message-highlight"}):i.createElement("span",{title:oe,"data-cy":"minichat-conversation-cell-message-content"},oe))),i.createElement("div",{className:Me()(Fn.suffix,(0,m.Z)({},Fn.marginRight,Q||X)),"data-cy":"minichat-conversation-cell-suffix"},!!v&&i.createElement(h(),{svg:Qn(),className:Fn.icon}),F&&i.createElement(h(),{svg:Gn(),className:Fn.icon}),!Y&&O>0&&i.createElement(sn(),{count:O,className:Fn.gap}),Y&&i.createElement("div",{className:"".concat(Fn[Y]),"data-cy":"minichat-conversation-cell-status-tag"},Cr("common.".concat(Y)))))),(Q||X)&&i.createElement(br,{toId:D,actionVisible:Q,actions:J,showModal:y,statusTag:Y,unreadCount:O,closeModal:w,latestMessageId:L,conversationId:S,operationRequest:g,handleActionVisible:this.handleVisibleChange,tracker:this.sendClickTracker}))}}]),n}(i.Component);kr.propTypes={style:y().object,onClick:y().func,isScChat:y().bool,draftHash:y().object,isSubAccount:y().bool,conversation:y().object,operationRequest:y().func,currentConversationId:y().string,lastMessage:y().object,showModal:y().func,closeModal:y().func,inlocation:y().bool,updateLocationMode:y().func,shopTranslationSettings:y().object,locale:y().string};const Er=kr;var Rr={updateLocationMode:b.updateLocationMode,operationRequest:b.conversationOperateRequested,showModal:b.showModal,closeModal:b.closeModal};const Or=(0,s.connect)((function(e,t){var n=t.conversation.id;return{lastMessage:(0,b.conversationLastMessageSelector)(n)(e),inlocation:(0,b.inlocationSelector)(e),shopTranslationSettings:(0,b.shopTranslationSettingsSelector)(e),locale:(0,b.localeSelector)(e),pendingOffersCount:(0,b.getConversationPendingOffersCountSelector)(n)(e)}}),Rr)((function(e){return i.createElement(Er,e)}));var Mr=n(34012),Nr=n.n(Mr);n(92516),n(11246);const Pr="ZWrg9QvNPg",Ir="FxDBWGjZm0",xr="I8ZpfpiqN1";var Zr,Dr,_r=n(31427),Tr=n(78330),jr=n(54818),Ar=n(36032),Fr=n(74799),Lr=["stopIndex"];function qr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ur(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qr(Object(n),!0).forEach((function(t){(0,m.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Br(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,O.Z)(e);if(t){var a=(0,O.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,R.Z)(this,n)}}var Hr=null===(Zr=navigator)||void 0===Zr||null===(Dr=Zr.userAgent)||void 0===Dr?void 0:Dr.includes("Firefox"),Vr=function(e){(0,E.Z)(n,e);var t=Br(n);function n(e){var r;return(0,S.Z)(this,n),(r=t.call(this,e)).listRef=null,r.cellMeasureRefs={},r.scrollTop=0,r.onRowsRendered=null,r.state={loadedRowsMap:{}},r.cache=new Ar.default({fixedWidth:!0}),r.isRowLoaded=r.isRowLoaded.bind((0,Q.Z)(r)),r.rowRenderer=r.rowRenderer.bind((0,Q.Z)(r)),r.cellRenderer=r.cellRenderer.bind((0,Q.Z)(r)),r.loadMoreRows=r.loadMoreRows.bind((0,Q.Z)(r)),r.handleScroll=r.handleScroll.bind((0,Q.Z)(r)),r.remeasure=D(r.remeasure.bind((0,Q.Z)(r)),500),r.setCellMeasureRef=r.setCellMeasureRef.bind((0,Q.Z)(r)),r.onSectionRendered=r.onSectionRendered.bind((0,Q.Z)(r)),r.handleRowRendered=r.handleRowRendered.bind((0,Q.Z)(r)),r.renderAutoSizerList=r.renderAutoSizerList.bind((0,Q.Z)(r)),r}return(0,k.Z)(n,[{key:"componentDidUpdate",value:function(e){var t=e.extraProps,n=e.listItems,r=this.props,a=r.listItems,o=r.needRemeasure,i=r.extraProps;o&&([a.length+1,a.length-1].includes(n.length)||t.measureFlag!==i.measureFlag)&&this.remeasure()}},{key:"remeasure",value:function(){var e=this;this.cache.clearAll(),this.listRef&&this.listRef.recomputeRowHeights(),this.cellMeasureRefs&&Object.keys(this.cellMeasureRefs).forEach((function(t){e.cellMeasureRefs[t]&&e.cellMeasureRefs[t]._maybeMeasureCell()}))}},{key:"setCellMeasureRef",value:function(e,t){this.cellMeasureRefs[e]=t}},{key:"handleRowRendered",value:function(e){var t=e.stopIndex,n=(0,M.Z)(e,Lr),r=this.props.handleRowRendered;r&&r(t),this.onRowsRendered&&this.onRowsRendered(Ur({stopIndex:t},n))}},{key:"onSectionRendered",value:function(e){var t=e.columnStartIndex,n=e.columnStopIndex,r=e.rowStartIndex,a=e.rowStopIndex,o=this.props.columnCount,i=r*o+t,c=a*o+n;this.onRowsRendered({startIndex:i,stopIndex:c})}},{key:"handleScroll",value:function(e){var t=e.scrollTop,n=this.props,r=n.handleComponentScroll,a=n.handleListScroll;a&&a(t),this.scrollTop>t?r("up"):r("down"),this.scrollTop=t}},{key:"rowRenderer",value:function(e){var t=e.key,n=e.index,r=(e.isScrolling,e.isVisible,e.parent),a=e.style,o=this.props,c=o.listItems,s=o.makeRenderedCell,l=c[n];if(!l)return null;var u="".concat(t,"_").concat(l.id);return i.createElement(jr.default,{key:u,parent:r,columnIndex:0,rowIndex:n,cache:this.cache},(function(e){var t=e.measure;return s(l,a,t)}))}},{key:"cellRenderer",value:function(e){var t=this,n=e.columnIndex,r=(e.isScrolling,e.isVisible,e.key,e.parent),a=e.rowIndex,o=e.style,c=this.props,s=c.listItems,l=c.columnCount,u=c.makeRenderedCell,d=s[a*l+n];if(d){var p="".concat(d.id,"_card");return i.createElement(jr.default,{key:p,parent:r,cache:this.cache,rowIndex:a,columnIndex:n,ref:function(e){return t.setCellMeasureRef(p,e)}},(function(e){var t=e.measure;return u(d,o,t)}))}}},{key:"loadMoreRows",value:function(e){var t=e.startIndex,n=e.failedStatus,r=void 0===n?"":n,a=this.state.loadedRowsMap;if(!a[t]){var o=this.props,i=o.status;(0,o.loadMoreRowsRequested)({needReset:"failedInit"===r}),i.includes("failed")||this.setState({loadedRowsMap:Ur(Ur({},a),{},(0,m.Z)({},t,!0))})}}},{key:"isRowLoaded",value:function(e){var t=e.index;return!!this.props.listItems[t]}},{key:"renderAutoSizerList",value:function(e,t){var n=this,r=this.props,a=r.listItems,o=r.extraProps,c=r.getListRef,s=r.needScrollSpace;this.onRowsRendered=e;var l=a.length||0;return i.createElement(Tr.default,null,(function(e){var r=e.width,a=e.height;return i.createElement(_r.default,(0,Jt.Z)({ref:function(e){n.listRef=e,c&&c(e),t&&t(e)},width:r,height:a,overscanRowCount:20,rowCount:l,onScroll:n.handleScroll,rowRenderer:n.rowRenderer,rowHeight:n.cache.rowHeight,onRowsRendered:n.handleRowRendered,deferredMeasurementCache:n.cache,containerStyle:{},className:"".concat(Ir," ").concat(s?xr:"")},o))}))}},{key:"render",value:function(){var e=this,t="infiniteList - ".concat(Hr?this.props.listItems.length:"");return i.createElement("div",{key:t,className:Pr},this.props.isInfinite?i.createElement(Fr.Z,{rowCount:9999,isRowLoaded:this.isRowLoaded,loadMoreRows:this.loadMoreRows},(function(t){var n=t.onRowsRendered,r=t.registerChild;return e.renderAutoSizerList(n,r)})):this.renderAutoSizerList())}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=t.loadedRowsMap,r=e.status,a=e.resetRowsMap,o=e.onResetCacheMap;if(a)return o&&o(),{loadedRowsMap:{}};if(r.includes("failed")){var i=Object.keys(n).map((function(e){return parseInt(e)})),c=Math.max.apply(null,i);return c=Number.isInteger(c)?c:0,{loadedRowsMap:Ur(Ur({},n),{},(0,m.Z)({},c,!1))}}return null}}]),n}(i.PureComponent);Vr.propTypes={status:y().string,isInfinite:y().bool,listItems:y().array,rowHeight:y().number,getListRef:y().func,resetRowsMap:y().bool,extraProps:y().object,columnCount:y().number,columnWidth:y().number,needRemeasure:y().bool,needScrollSpace:y().bool,makeRenderedCell:y().func,handleListScroll:y().func,handleRowRendered:y().func,loadMoreRowsRequested:y().func,handleComponentScroll:y().func,onResetCacheMap:y().func},Vr.defaultProps={status:"",listItems:[],extraProps:{},isInfinite:!0,resetRowsMap:!1,needRemeasure:!1,needScrollSpace:!1};const Wr=Nr()(Vr,{scrollController:function(e,t,n,a,o,i,c){var s=e!==t;s&&(c&&a!==r.DataFetchStatus.SUCCEED&&c(),n(e));var l=i.current;l&&clearTimeout(l),i.current=setTimeout((function(){s&&!a.toLowerCase().includes("init")&&o(r.DataFetchStatus.SUCCEED)}),10)}}),zr="HFfa2qDMWY",Gr="ObjlMPAFgj",Xr="SwRblF2rig";var Qr=n(98724).t;const Yr=function(){return i.createElement("div",{className:zr,"data-cy":"minichat-conversation-cell-result-empty-root"},i.createElement("div",{className:Gr,"data-cy":"minichat-conversation-cell-result-empty-title"},Qr("common.scroll_list.no_data")),i.createElement("div",{className:Xr,"data-cy":"minichat-conversation-cell-result-empty-tip"},Qr("search.empty.tip")))};var Kr=n(98724).t;function Jr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,O.Z)(e);if(t){var a=(0,O.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,R.Z)(this,n)}}var $r=["Unread","All","Pinned","Unreplied"],ea=["Unread","Unreplied"],ta=function(e){(0,E.Z)(n,e);var t=Jr(n);function n(e){var a;return(0,S.Z)(this,n),(a=t.call(this,e)).state={resetRowsMap:!1},a.listNode=null,a.scrollTop=0,a.needScrollToRow=!1,a.getListRef=a.getListRef.bind((0,Q.Z)(a)),a.onListScroll=a.onListScroll.bind((0,Q.Z)(a)),a.makeRenderedCell=a.makeRenderedCell.bind((0,Q.Z)(a)),a.onRowRendered=a.onRowRendered.bind((0,Q.Z)(a)),a.loadMoreRowsRequested=a.loadMoreRowsRequested.bind((0,Q.Z)(a)),a.handleClickConversation=a.handleClickConversation.bind((0,Q.Z)(a)),a.handleResetCacheMap=a.handleResetCacheMap.bind((0,Q.Z)(a)),a.debounceShowConversationRequest=(0,r.debounce)(a.props.showConversationRequested.bind((0,Q.Z)(a)),500),a.handleClickViewAll=a.handleClickViewAll.bind((0,Q.Z)(a)),a}return(0,k.Z)(n,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.sortedConversations,a=t.filter,o=t.conversationDirection,i=t.conversationHttpStatus,c=t.waitingTimeFilter,s=e.sortedConversations,l=e.conversationHttpStatus,u=e.waitingTimeFilter,d=e.filter,p=s.length,h=n.length;if(p<h&&(this.stopIndex=this.stopIndex+h-p,this.needScrollToRow=!0),this.needScrollToRow&&ea.includes(a)&&"latest"===o){var m=this.stopIndex<0||this.scrollTop<60?0:this.stopIndex;this.listNode&&this.listNode.scrollToRow(m)}this.needScrollToRow=!1;var f=0===h&&"succeed"===i;((0===p&&"succeed"===l)!==f||c!==u||a!==d)&&c&&f&&"All"!==a&&(0,b.$tracker)({trackerName:"impressionSwitchViewAll",operation:r.TrackerOperation.IMPRESSION,data:{tab_name:a.toLocaleLowerCase()}})}},{key:"getListRef",value:function(e){this.listNode=e}},{key:"onListScroll",value:function(e){this.scrollTop=e}},{key:"onRowRendered",value:function(e){this.needScrollToRow||(this.stopIndex=e)}},{key:"loadMoreRowsRequested",value:function(){(0,this.props.fetchConversationsRequested)({direction:"older"})}},{key:"makeRenderedCell",value:function(e,t){var n=this.props,r=n.keyword,a=n.currentUser,o=n.isSubAccount,c=n.currentConversation,s=n.draftHash,l=n.isInSearch,u=n.isScChat;return l?i.createElement(qn,{currentUser:a,style:t,keyword:r,conversation:e,isSubAccount:o,onClick:this.handleClickConversation}):i.createElement(Or,{style:t,isScChat:u,draftHash:s,currentUser:a,conversation:e,isSubAccount:o,onClick:this.handleClickConversation,currentConversationId:c.id})}},{key:"handleClickConversation",value:function(e){var t=this.props,n=t.isInSearch,r=t.currentConversation,a=t.searchConversationsRequested,o=t.updateConversationDetailStatus,i=t.setInScrollToMessage,c=t.setCurrentConversationId,s=e.id,l=e.unread_count;if(n)return a({}),c({conversationId:s}),void this.debounceShowConversationRequest({conversation:e});r?s!==r.id&&((0,b.$tracker)({trackerName:"clickChatUser",data:{rebbot:l,conversation_id:s}}),c({conversationId:s}),this.debounceShowConversationRequest({conversation:e}),i({inScrollToMessage:!1})):((0,b.$tracker)({trackerName:"clickChatUser",data:{rebbot:l,conversation_id:s}}),c({conversationId:s}),this.debounceShowConversationRequest({conversation:e}));o({shouldShowConversationDetail:!0})}},{key:"handleResetCacheMap",value:function(){this.setState({resetRowsMap:!1})}},{key:"handleClickViewAll",value:function(){var e=this.props,t=e.handleFilter,n=e.filter;t("All"),(0,b.$tracker)({trackerName:"clickSwitchViewAll",data:{tab_name:n.toLocaleLowerCase()}})}},{key:"render",value:function(){var e=this.props,t=e.results,n=e.keyword,r=e.listsHash,a=e.isInSearch,o=e.sortedConversations,c=e.currentConversation,s=e.openedMenu,l=e.conversationHttpStatus,u=e.searchConversationHttpStatus,d=e.waitingTimeFilter,p=e.filter,h={serviceDownList:e.serviceDownList};if(a)h={status:u,isInfinite:!1,listItems:t,extraProps:{keyword:n}};else{var m={openedMenu:s,listsHash:r,currentConversation:c};h={status:l,listItems:o,resetRowsMap:this.state.resetRowsMap,loadMoreRowsRequested:this.loadMoreRowsRequested,extraProps:m}}return 0===h.listItems.length&&"succeed"===h.status?i.createElement(Dn(),{newNoImage:!0,classname:Fn.empty,text:a?i.createElement(Yr,null):Kr(d?"conversation_list.no_".concat("All"===p?"search":p.toLowerCase(),"_result"):"conversation_list.no_search_result"),clickableText:d&&"All"!==p?Kr("common.tips.view_all"):"",handleClick:this.handleClickViewAll}):i.createElement(Wr,(0,Jt.Z)({},h,{newNoImage:!0,needPaddingBottom:!0,getListRef:this.getListRef,handleListScroll:this.onListScroll,makeRenderedCell:this.makeRenderedCell,handleRowRendered:this.onRowRendered,onResetCacheMap:this.handleResetCacheMap}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=t.resetRowsMap,r=t.filter,a=e.filter,o=null;if(a!==r){o={filter:a};var i=$r.includes(r)&&$r.includes(a)&&r!==a;n!==i&&(o.resetRowsMap=i)}return o}}]),n}(i.PureComponent);ta.propTypes={filter:y().string,results:y().array,keyword:y().string,isScChat:y().bool,listsHash:y().string,draftHash:y().object,isInSearch:y().bool,openedMenu:y().string,currentUser:y().object,isSubAccount:y().bool,currentUserId:y().number,updateOpenedMenu:y().func,sortedConversations:y().array,currentConversation:y().object,conversationDirection:y().string,conversationHttpStatus:y().string,showConversationRequested:y().func,fetchConversationsRequested:y().func,searchConversationsRequested:y().func,searchConversationHttpStatus:y().string,updateConversationDetailStatus:y().func,setInScrollToMessage:y().func};const na=ta;var ra=n(98724).t;function aa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,O.Z)(e);if(t){var a=(0,O.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,R.Z)(this,n)}}var oa=function(e){(0,E.Z)(n,e);var t=aa(n);function n(e){var r;return(0,S.Z)(this,n),(r=t.call(this,e)).handleCloseStatusTip=r.handleCloseStatusTip.bind((0,Q.Z)(r)),r.handleFilter=r.handleFilter.bind((0,Q.Z)(r)),r.closeServiceDown=r.closeServiceDown.bind((0,Q.Z)(r)),r.state={shouldShowStatusTip:null},r}return(0,k.Z)(n,[{key:"handleCloseStatusTip",value:function(){var e=this.state.shouldShowStatusTip;this.setState({shouldShowStatusTip:!e})}},{key:"mounted",value:function(){this.props.fetchDegradeConversationsDetail({})}},{key:"closeServiceDown",value:function(){var e=this.props.updateServiceDownStatus;r.LS.setItem("minichat-service-down",!0),e&&e({close:!0})}},{key:"handleFilter",value:function(e){var t=this.props,n=t.filter,r=t.updateConversationFilterRequested,a=t.resetConversationRequested,o=t.fetchConversationsRequested;if(e!==n){r({filter:e});var i=[e,n];a(),(0,b.$tracker)({trackerName:"clickFilter".concat(e)});var c=i.includes("Unread"),s=i.includes("Pinned"),l=i.includes("Unreplied");(c||s||l)&&o({direction:"reset"})}}},{key:"render",value:function(){var e=this.state.shouldShowStatusTip,t=this.props,n=t.keyword,a=t.socketFeedback,o=t.networkStatus,c=t.currentUser,s=t.serviceDownAlert,l=t.manualClose,u=c.type,d=c.distribution_status,p="online"===o,h=u===r.AccountType.SUBACCOUNT&&"hang_up"===d&&!0!==e,m=p?a&&a.network?{type:r.SocketToAlertType[a.status],message:a.content,showIcon:"pending"!==a.status}:null:{type:"error",message:ra("common.network_offline"),showIcon:!0};return i.createElement("div",{className:$t,"data-cy":"minichat-conversation-list-root"},i.createElement(xn,(0,Jt.Z)({},this.props,{handleFilter:this.handleFilter})),m&&i.createElement(on(),{isBar:!0,type:m.type,showIcon:m.showIcon,content:m.message}),h&&i.createElement(on(),{isBar:!0,showIcon:!0,closeable:!0,content:ra("common.hangup_tips"),onClose:this.handleCloseStatusTip}),!m&&!h&&s&&!l&&i.createElement(on(),{isBar:!0,showIcon:!0,closeable:!0,onClose:this.closeServiceDown,content:ra("common.service_down_chatlist")}),i.createElement("div",{className:en,"data-cy":"minichat-conversation-list-list"},i.createElement(na,(0,Jt.Z)({isInSearch:!!n,handleFilter:this.handleFilter},this.props))))}}]),n}(i.PureComponent);oa.propTypes={keyword:y().string,feedback:y().object,currentUser:y().object,networkStatus:y().string,socketFeedback:y().object,fetchDegradeConversationsDetail:y().func,subaccountHasUnrepliedPermission:y().bool};const ia=oa;var ca=n(847),sa=n(17311),la=n.n(sa);const ua=n.p+"07761cb28882b6b34e2b.png";var da=n(98724).t;function pa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,O.Z)(e);if(t){var a=(0,O.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,R.Z)(this,n)}}var ha=function(e){return ca.default.put(la().setInScrollToMessage({payload:e}))},ma=function(e){(0,E.Z)(n,e);var t=pa(n);function n(e){var r;return(0,S.Z)(this,n),(r=t.call(this,e)).errorRef=i.createRef(),r.handleRedirection=r.handleRedirection.bind((0,Q.Z)(r)),r}return(0,k.Z)(n,[{key:"handleRedirection",value:function(){window.open((0,r.getWebChatUrl)())}},{key:"componentDidMount",value:function(){if(this.errorRef&&this.errorRef.current){var e=this.errorRef.current.firstElementChild;e&&e.addEventListener("click",this.handleRedirection)}}},{key:"componentWillUnmount",value:function(){if(this.errorRef&&this.errorRef.current){var e=this.errorRef.current.firstElementChild;e&&e.removeEventListener("click",this.handleRedirection)}}},{key:"render",value:function(){return this.props.conversationHttpStatus===r.DataFetchStatus.TEMPORY_ERROR?i.createElement("div",{className:tn},i.createElement("img",{className:nn,src:ua}),i.createElement("div",{className:rn},da("common.tempory_error.tip1")),i.createElement("div",{ref:this.errorRef,className:rn,dangerouslySetInnerHTML:{__html:da("common.tempory_error.tip2")}})):i.createElement(ia,(0,Jt.Z)({},this.props,{setInScrollToMessage:ha}))}}]),n}(i.PureComponent),fa={markMessagesRequested:b.markMessagesRequested,updateConversationFilterRequested:b.updateConversationFilterRequested,showConversationRequested:b.showConversationRequested,resetConversationRequested:b.resetConversationRequested,deleteConversationRequested:b.deleteConversationRequested,fetchConversationsRequested:b.fetchConversationsRequested,searchConversationsRequested:b.searchConversationsRequested,redirectConversationRequested:b.redirectConversationRequested,updateConversationDetailStatus:b.updateConversationDetailStatus,fetchDegradeConversationsDetail:b.fetchDegradeConversationsDetail,setCurrentConversationId:b.setCurrentConversationId,updateServiceDownStatus:b.updateServiceDownStatus};ma.propTypes={conversationHttpStatus:y().string};const va=(0,s.connect)((function(e){return{filter:(0,b.filterSelector)(e),keyword:(0,b.keywordSelector)(e),results:(0,b.resultsSelector)(e),listsHash:(0,b.listsHashSelector)(e),draftHash:(0,b.draftHashSelector)(e),socketFeedback:(0,b.feedbackSelector)(e),networkStatus:(0,b.networkStatusSelector)(e),sortedConversations:(0,b.sortedConversationsSelector)(e),conversationDirection:(0,b.conversationDirectionSelector)(e),conversationHttpStatus:(0,b.conversationHttpStatusSelector)(e),searchConversationHttpStatus:(0,b.searchConversationHttpStatusSelector)(e),subaccountHasUnrepliedPermission:(0,b.subaccountHasUnrepliedPermissionSelector)(e),waitingTimeFilter:(0,b.waitingTimeFilterSelector)(e),serviceDownList:(0,b.serviceDownListSelector)(e),serviceDownAlert:(0,b.serviceDownAlertSelector)(e),manualClose:(0,b.serviceDownManualCloseSelector)(e)}}),fa)(ma),ya="gLbzKNEAYF",wa="Mj9lh6KccD",ga="WHIaShCfot",ba="QDLp_uN4bC";var Ca=n(23018),Sa=n.n(Ca),ka=n(84962),Ea=n.n(ka);const Ra="hczDQaHbc3",Oa="Ht2E1kwC5D",Ma="bAKwNuP3ME";var Na=n(94138),Pa=n.n(Na),Ia=n(98724).t;function xa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,O.Z)(e);if(t){var a=(0,O.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,R.Z)(this,n)}}var Za=function(e){(0,E.Z)(n,e);var t=xa(n);function n(e){var r;return(0,S.Z)(this,n),(r=t.call(this,e)).state={hasError:!1},r.handleReload=r.handleReload.bind((0,Q.Z)(r)),r}return(0,k.Z)(n,[{key:"componentDidCatch",value:function(){this.setState({hasError:!0})}},{key:"handleReload",value:function(){window.location.reload()}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.shouldShowErrorPic,r=i.createElement("div",{className:Ra},n&&i.createElement(h(),{svg:Pa(),className:Oa}),i.createElement("div",null,Ia("common.error.load_failed"),i.createElement("span",{className:Ma,onClick:this.handleReload},Ia("common.error.reload"))));return this.state.hasError?r:t}}]),n}(i.Component);Za.propTypes={children:y().node,shouldShowErrorPic:y().bool};const Da=Za,_a="EGGLy1QwiK",Ta="iTrdMlUViL",ja="JVrP6W1yHV",Aa="lm0LkZVj3H",Fa="tGULtQDa1B",La="cq5bdsI9t0",qa="bUDk9CxOKh",Ua="X6WsSex6SN";var Ba=n(98724).t;const Ha=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=function(){switch(t.name){case"profile":return i.createElement("div",{className:_a},i.createElement(Ea(),{half:!0}));case"input-field":return i.createElement("div",{className:Aa},i.createElement(Ea(),{half:!0,className:Fa}),i.createElement("div",{className:Me()(Ta,qa)},i.createElement("div",{className:ja},i.createElement(Ea(),{type:"square",className:La}),i.createElement(Ea(),{type:"square",className:La}),i.createElement(Ea(),{type:"square",className:La}),i.createElement(Ea(),{type:"square",className:La}),i.createElement(Ea(),{type:"square",className:La})),i.createElement(Ea(),{type:"square",className:La})));default:return i.createElement("div",{className:Ua},i.createElement(Sa(),{isInit:!0,text:Ba(t.loadingKey)||""}))}};return function(r){var a=n();return i.createElement(Da,{shouldShowErrorPic:"message-section"===t.name},i.createElement(i.Suspense,{fallback:a},i.createElement(e,r)))}};var Va=Ha((0,i.lazy)((function(){return Promise.all([n.e(360),n.e(868),n.e(230),n.e(255),n.e(305),n.e(349),n.e(622),n.e(98),n.e(845)]).then(n.t.bind(n,295,23))})),{name:"profile"}),Wa=Ha((0,i.lazy)((function(){return Promise.all([n.e(360),n.e(868),n.e(230),n.e(255),n.e(305),n.e(349),n.e(622),n.e(700),n.e(664)]).then(n.t.bind(n,94043,23))})),{name:"input-field"}),za=Ha((0,i.lazy)((function(){return Promise.all([n.e(348),n.e(962),n.e(728),n.e(846),n.e(308),n.e(139),n.e(360),n.e(868),n.e(230),n.e(255),n.e(305),n.e(349),n.e(622),n.e(167),n.e(374)]).then(n.t.bind(n,67167,23))})),{name:"message-section",loadingKey:"common.loading"}),Ga=function(e){var t=(0,i.useState)(!1),n=(0,f.Z)(t,2),a=n[0],o=n[1],c=e.shop,s=e.isScChat,l=e.currentUser,u=e.currentBuyer,d=e.isSubAccount,p=e.currentConversation,h=e.changeConversationStatusRequested,m=e.showModal,v=e.closeModal,y=e.blockUserRequested,w=e.addMediaFile,g=e.drawerMedias,C=e.clearMediaFile,S=e.deleteMediaFile,k=e.hasVideoPermission,E=e.setToastInformation,R=e.previewMedias,O=e.showMediaPreviewModal,M=e.currentPreviewMediaId,N=e.closeMediaPreviewModalRequested,P=e.muteConversationRequested,I=e.shopStatistics,x=e.reportUserRequested,Z=function(e){e.preventDefault(),a&&o(!1)},D=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"fail";E({toast:{show:!0,type:t,message:e}})};return i.createElement(i.Fragment,null,O&&i.createElement(nt.MediaPreviewModal,{medias:R,modalZIndex:999999,onVisibleChange:function(e){return!e&&N()},currentPreviewMediaId:M}),i.createElement("div",{className:ya,"data-cy":"minichat-conversation-detail-header"},i.createElement(Va,{shop:c,currentUser:l,currentBuyer:u,isSubAccount:d,currentConversation:p,showModal:m,closeModal:v,blockUserRequested:y,isScChat:s,muteConversationRequested:P,shopStatistics:I,reportUserRequested:x})),i.createElement("div",{className:wa,onDragEnter:function(e){e.preventDefault(),!a&&o(!0)},"data-cy":"minichat-conversation-detail-zone"},a&&i.createElement(nt.MediaDropper,{onSuccess:function(e){var t=p.id,n=p.shop_id;w({medias:e,conversationId:t}),(0,b.$tracker)({operation:r.TrackerOperation.ACTION_DRAG_VIDEO,trackerName:"actionDragVideoInMediaPreivew",data:{conversation_id:t},shopId:n})},onDragOver:function(e){return e.preventDefault()},onDragLeave:Z,onDrop:Z,receiverName:p.to_name,hasVideoPermission:k,currentMediaNum:g.length,onError:D}),i.createElement("div",{id:"messagesContainer",className:ga,"data-cy":"minichat-conversation-detail-message-container"},i.createElement(za,{currentUser:l,currentConversation:p})),i.createElement("div",{className:ba,style:{minHeight:"".concat(r.MINI_MIN_TEXT_BOX_HEIGHT,"px")},"data-cy":"minichat-conversation-detail-input"},i.createElement(Wa,{shop:c,isScChat:s,currentUser:l,currentBuyer:u,isSubAccount:d,addMediaFile:w,drawerMedias:g,clearMediaFile:C,deleteMediaFile:S,hasVideoPermission:k,currentConversation:p,handleErrorWithToast:D,changeConversationStatusRequested:h}))))};Ga.propTypes={shop:y().object,isScChat:y().bool,isSubAccount:y().bool,currentUser:y().object,currentBuyer:y().object,currentConversation:y().object,setToastInformation:y().func.isRequired,changeConversationStatusRequested:y().func,showModal:y().func,closeModal:y().func,blockUserRequested:y().func,addMediaFile:y().func.isRequired,deleteMediaFile:y().func.isRequired,clearMediaFile:y().func.isRequired,drawerMedias:y().array,hasVideoPermission:y().bool,previewMedias:y().array,showMediaPreviewModal:y().bool,currentPreviewMediaId:y().string,closeMediaPreviewModalRequested:y().func,muteConversationRequested:y().func,shopStatistics:y().object};const Xa=Ga;var Qa={showModal:b.showModal,closeModal:b.closeModal,addMediaFile:b.addMediaFile,deleteMediaFile:b.deleteMediaFile,clearMediaFile:b.clearMediaFile,blockUserRequested:b.blockUserRequested,closeMediaPreviewModalRequested:b.closeMediaPreviewModalRequested,muteConversationRequested:b.muteConversationRequested,reportUserRequested:b.reportUserRequested};const Ya=(0,s.connect)((function(e,t){var n=t.currentConversation,r=n.to_id,a=n.shop_id;return{drawerMedias:(0,b.mediaListSelector)(e),hasVideoPermission:(0,b.hasVideoPermissionSelector)(e),shop:(0,b.currentConversationShopSelectors)(e),previewMedias:(0,b.previewMediasSelector)(e),showMediaPreviewModal:(0,b.showMediaPreviewModalSelector)(e),currentPreviewMediaId:(0,b.currentPreviewMediaIdSelector)(e),shopStatistics:(0,b.shopStatisticsSelector)(r,a)(e)}}),Qa)(Xa);function Ka(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ja(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ka(Object(n),!0).forEach((function(t){(0,m.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ka(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $a=null,eo=null,to="";function no(e){var t=e.currentConversation,n=void 0===t?{}:t,a=e.webChatUrl;return(0,r.getItem)("mini-sc_redirect").then((function(e){e&&e.conversationId===n.id||(e={shopId:n.shop_id,userId:n.to_id});var t=Ja(Ja({},e),{},{type:"MiniChatRedirect"});$a&&!$a.closed?(to!==a&&($a.location.href=a),$a.focus()):(t.showConvsBeforePreload=!0,$a=window.open("".concat(a),"_blank")),to=a,eo&&window.clearInterval(eo),eo=window.setInterval((function(){try{$a.postMessage(t,a)}catch(e){$a=null,window.clearInterval(eo)}}),1e3)}))}window.addEventListener("message",(function(e){e.data.received&&window.clearInterval(eo)}),!1);const ro=n.p+"8285c51b5e6f737ac92c.png",ao="aEx7J9uyAh",oo="o1oIXA4Nxs",io="dkpIjZMKrh";var co=n(98724).t;const so=function(){return i.createElement("div",{className:ao},i.createElement("img",{className:oo,src:ro}),i.createElement("div",{className:io},co("common.service_down")))};var lo=n(63662),uo=n.n(lo),po=n(78640),ho=n.n(po),mo=n(75929),fo=n.n(mo),vo=n(35519),yo=n.n(vo),wo=n(6646),go=n.n(wo),bo=n(79968),Co=n.n(bo),So=n(43671),ko=n.n(So),Eo=n(97436),Ro=n.n(Eo),Oo=n(6480),Mo=n.n(Oo),No=n(77964),Po=n.n(No),Io=n(1214),xo=n.n(Io);const Zo=n.p+"df95536186a5d658263c.png",Do={container:"UvGSSkd1qQ",header:"PBqe51NF33",windows:"Z8RjJZsXy1","logo-wrapper":"Ffl5D3J1YM",logoWrapper:"Ffl5D3J1YM",logo:"tH3c0fxDcu","operator-wrapper":"zhhA1X0YeX",operatorWrapper:"zhhA1X0YeX","operator-item-wrapper":"b4WLaPHvaN",operatorItemWrapper:"b4WLaPHvaN","operator-item":"X8XVK1EpGd",operatorItem:"X8XVK1EpGd","show-dialog":"cBwU5LVKk8 X8XVK1EpGd",showDialog:"cBwU5LVKk8 X8XVK1EpGd","hide-dialog":"MSU7d8LTb3 X8XVK1EpGd",hideDialog:"MSU7d8LTb3 X8XVK1EpGd",minimize:"uhPpW_bDvZ X8XVK1EpGd","see-all":"dktYUG_IaQ X8XVK1EpGd",seeAll:"dktYUG_IaQ X8XVK1EpGd","custom-menu":"aETEB1RG66",customMenu:"aETEB1RG66","status-option":"QvUJmIqkNF",statusOption:"QvUJmIqkNF",selected:"OUyzXqz1Lv",active:"Smqd2Lpaz4","current-status":"FD9BS5GqbF",currentStatus:"FD9BS5GqbF",status:"fZb5bPFee9","user-status":"yhWCUay9Au",userStatus:"yhWCUay9Au","hover-style":"C_aSicPSx9",hoverStyle:"C_aSicPSx9",working:"lRZuU7kFHO",hangup:"hH9sKDt5tZ",hang_up:"Icz1cUCVbY",hangUp:"Icz1cUCVbY",arrow:"_CSD5V_sgj","guide-content":"MCvq475nD1",guideContent:"MCvq475nD1","guide-item":"E8bHSWFVbZ",guideItem:"E8bHSWFVbZ","guide-icon":"tkdnPtLjKM",guideIcon:"tkdnPtLjKM","guide-tip":"h7_5km8sH0",guideTip:"h7_5km8sH0","guide-btn":"sKMdEvUDET",guideBtn:"sKMdEvUDET",portal:"VGcuJ0is7U",unread:"t0DSoDjLOv","unread-open":"GQqiEMsjau",unreadOpen:"GQqiEMsjau","unread-close":"sCTuxhWsM6",unreadClose:"sCTuxhWsM6",details:"C8Jzw7jkTU","half-container":"eB3tTukA7J UvGSSkd1qQ",halfContainer:"eB3tTukA7J UvGSSkd1qQ",conversations:"guUuzs8ZcR",blank:"lBcVbnezbE",maxBlank:"AJGGbveN2k",plate:"t6aX8KMaL1",image:"zMIcJ6vtsM","error-image":"y1awX1FEiw",errorImage:"y1awX1FEiw",title:"YN8sHjfMB4","blank-title":"D_bmite0fe YN8sHjfMB4",blankTitle:"D_bmite0fe YN8sHjfMB4",subtitle:"m3ghEsXiiM",reload:"nG2T6V5_Ra","error-img":"pRa93I89hk",errorImg:"pRa93I89hk","error-title":"j0EIXydtVc YN8sHjfMB4",errorTitle:"j0EIXydtVc YN8sHjfMB4","show-status-dropdown":"hArAy6EPHA",showStatusDropdown:"hArAy6EPHA"};var _o=n(98724).t,To={seeAll:Po(),minimize:uo(),hideDialog:Mo(),showDialog:Ro()},jo=function(e){var t=e.newbie,n=e.isScChat,a=e.openedMenu,o=e.currentUser,c=e.isSubAccount,s=e.currentBuyer,l=e.loginSuccess,u=e.socketSuccess,p=e.totalUnreadCount,m=e.showConversationDetail,v=e.currentConversation,y=e.updateGuideRequested,w=e.updateUserRequested,g=e.updateOpenedMenu,S=e.setToastInformation,k=e.toast,E=e.updateChatWindowStatus,R=e.changeConversationStatusRequested,O=e.updateConversationDetailStatus,M=e.filter,N=e.conversationBeenDeleted,P=e.serviceDown,I=(0,i.useState)(!1),x=(0,f.Z)(I,2),Z=x[0],D=x[1],_=(0,i.useState)(!1),T=(0,f.Z)(_,2),j=T[0],A=T[1];(0,i.useEffect)((function(){(0,b.$tracker)({operation:r.TrackerOperation.VIEW,trackerName:"viewPage",data:{tab_name:M.toLowerCase()}})}),[M]);var F,L,q={key:"seeAll",tip:"header.tooltip.see_all",customProps:{position:"right",edgeDistance:12},icon:"seeAll",handler:function(e){(0,b.$tracker)({trackerName:"clickToWebchatButton"}),no({currentConversation:v,webChatUrl:(0,r.getWebChatUrl)()})}},U={key:"minimize",tip:"header.tooltip.minimize",icon:"minimize",handler:function(e){E({shouldShowWindow:!1}),(0,b.$tracker)({trackerName:"clickCloseButton"})}},B=o.distribution_status,H=o.locale,V=["tw","cn"].includes((0,r.getServiceLocale)(H)),W="working"===B,z=function(e){var t=i.createElement("div",{className:Do.statusOption,"data-cy":"minichat-header-status-option"},i.createElement("div",{className:Do.selected,"data-cy":"minichat-header-status-selected"},e&&i.createElement(h(),{svg:fo(),className:Do.currentStatus})),i.createElement("div",{className:"".concat(Do.status," ").concat(Do.working),"data-cy":"minichat-header-status-working"}),i.createElement("div",{className:e?Do.active:""},_o("common.online"))),n=i.createElement("div",{className:Do.statusOption,"data-cy":"minichat-header-status-option"},i.createElement("div",{className:Do.selected,"data-cy":"minichat-header-status-selected"},!e&&i.createElement(h(),{svg:fo(),className:Do.currentStatus})),i.createElement("div",{className:"".concat(Do.status," ").concat(Do.hangup),"data-cy":"minichat-header-status-hangup"}),i.createElement("div",{className:e?"":Do.active},_o("common.offline")));return i.createElement(C.default.DropdownMenu,{popperClass:Do.showStatusDropdown},i.createElement(C.default.DropdownItem,{key:"working",onDropdownItemClick:function(){!e&&w({status:"working"}),!e&&(0,b.$tracker)({trackerName:"clickStatusOnlineButton"})}},t),i.createElement(C.default.DropdownItem,{key:"hang_up",onDropdownItemClick:function(){e&&w({status:"hang_up"}),e&&(0,b.$tracker)({trackerName:"clickStatusHangup"})}},n))}(W),G=(0,r.checkHeaderGuide)(t),X="".concat(Do.userStatus," ").concat(Do.hoverStyle," ").concat(W?Do.working:Do.hangup);return i.createElement("div",{style:n?{borderRadius:"4px"}:{},className:m?Do.container:Do.halfContainer,"data-cy":m?"minichat-window-container":"minichat-window-container-half"},i.createElement("div",{className:Do.header,"data-cy":"minichat-window-header"},i.createElement("div",{className:Do.logoWrapper,"data-cy":"minichat-window-header-logo-wrapper"},c&&n&&i.createElement("div",{className:Do.customMenu,"data-cy":"minichat-window-header-custom-menu"},i.createElement(C.default,{showTimeout:0,hideTimeout:0,visible:j,onVisibleChange:function(e){e&&((0,b.$tracker)({trackerName:"clickShopHeadStatus"}),g("user_status")),A(e)},overlay:z},i.createElement(d.default,{content:_o("common.".concat(W?"online":"offline")),zIndex:r.MAX_Z_INDEX},i.createElement("div",{className:X,onMouseEnter:function(){return D(!0)},onMouseLeave:function(){return D(!1)},"data-cy":W?"minichat-window-header-status-working":"minichat-window-header-status-hangup"},(j||Z)&&i.createElement(h(),{svg:yo(),className:Do.arrow}))))),i.createElement(h(),{svg:V?ko():ho(),className:Do.logo}),!!p&&i.createElement("div",{className:Do.unread,"data-cy":"minichat-window-header-unread"},i.createElement(h(),{svg:go(),className:Do.unreadOpen}),p,i.createElement(h(),{svg:Co(),className:Do.unreadClose}))),(L=[],m?L.push({key:"hideDialog",tip:"header.tooltip.close_dialog",icon:"hideDialog",handler:function(e){O({shouldShowConversationDetail:!1}),(0,b.$tracker)({trackerName:"clickFoldButton"})}}):L.push({key:"showDialog",tip:"header.tooltip.open_dialog",icon:"showDialog",handler:function(e){O({shouldShowConversationDetail:!0,needMark:!0}),(0,b.$tracker)({trackerName:"clickUnFoldButton"})}}),L.push(U),n&&L.push(q),i.createElement("div",{className:Do.operatorWrapper,"data-cy":"minichat-header-operator-wrapper"},L.map((function(e){return i.createElement("div",{key:e.key,className:Do.operatorItemWrapper,"data-cy":"minichat-header-operator-item-wrapper"},i.createElement(d.default,{content:_o(e.tip),zIndex:r.MAX_Z_INDEX,placement:"topRight"},i.createElement("div",null,i.createElement(h(),{svg:To[e.icon],className:Do[e.icon],onClick:e.handler}))))}))))),i.createElement("div",{className:Do.windows,"data-cy":"minichat-windows"},(F={isScChat:n,openedMenu:a,currentUser:o,isSubAccount:c,currentBuyer:s,loginSuccess:l,socketSuccess:u,updateOpenedMenu:g,setToastInformation:S,currentConversation:v,showConversationDetail:m,changeConversationStatusRequested:R,currentUserId:(o||{}).id,newbie:t,updateGuideRequested:y},l?u?i.createElement(i.Fragment,null,i.createElement(Vt,{toast:k,isScChat:n,setToastInformation:S}),i.createElement(va,F),i.createElement("div",{className:Do.details,"data-cy":"minichat-window-details"},P?i.createElement(so,null):v.id?i.createElement(Ya,F):i.createElement("div",{className:Do.blank,"data-cy":"minichat-window-blank"},N?i.createElement(i.Fragment,null,i.createElement("div",{className:Do.errorImg,"data-cy":"minichat-window-error-image"},i.createElement("img",{src:Zo,className:Do.image,"data-cy":"minichat-window-image"})),i.createElement("div",{className:Do.errorTitle,"data-cy":"minichat-window-error-title"},_o("conversation.server_error.deleted"))):i.createElement(i.Fragment,null,i.createElement(h(),{svg:xo(),className:Do.plate}),i.createElement("div",{className:Do.blankTitle,"data-cy":"minichat-window-title"},_o("blank_page.".concat(n?"":"pcmall_","title"))),n&&i.createElement("div",{className:Do.subtitle,"data-cy":"minichat-window-subtitle"},_o("blank_page.tip"))))),i.createElement(Ot,null)):i.createElement("div",{className:Do.maxBlank,"data-cy":"minichat-window-max-blank"},i.createElement("img",{src:ua,className:Do.errorImage,"data-cy":"minichat-window-error-image-load"}),i.createElement("div",{className:Do.title,"data-cy":"minichat-window-title"},_o("socket_error.title")),i.createElement("div",{className:Do.reload,onClick:b.socket.reconnect,"data-cy":"minichat-window-reload-button"},_o("common.error.reload"))):i.createElement(Kt,null))),n&&G&&i.createElement("div",{className:Do.portal,"data-cy":"minichat-window-portal"},i.createElement("div",{className:Do.guideContent,"data-cy":"minichat-window-guide-content"},i.createElement("div",{className:Do.guideItem,"data-cy":"minichat-window-guide-item"},i.createElement(h(),{svg:Mo(),className:"".concat(Do.guideIcon," ").concat(Do.hideDialog)}),i.createElement("span",{className:Do.guideTip,"data-cy":"minichat-window-guide-tip"},_o("newbie.tips.hide_conversation")))),i.createElement("div",{className:Do.guideBtn,onClick:function(){var e=(0,r.checkHeaderGuide)(t);y({newbieId:e.id})},"data-cy":"minichat-window-guide-button"},_o("settings.message_shortcuts.import.confirm"))))};jo.propTypes={newbie:y().array,toast:y().object,isScChat:y().bool,openedMenu:y().string,currentUser:y().object,isSubAccount:y().bool,loginSuccess:y().bool,currentBuyer:y().object,socketSuccess:y().bool,updateChatParams:y().func,updateOpenedMenu:y().func,totalUnreadCount:y().number,updateUserRequested:y().func,setToastInformation:y().func,currentConversation:y().object,updateGuideRequested:y().func,updateChatWindowStatus:y().func,showConversationDetail:y().bool,resetConversationRequested:y().func,updateConversationDetailStatus:y().func,changeConversationStatusRequested:y().func,filter:y().string,conversationBeenDeleted:y().bool};const Ao=jo;var Fo={updateOpenedMenu:b.updateOpenedMenu,updateUserRequested:b.updateUserRequested,setToastInformation:b.setToastInformation,updateGuideRequested:b.updateGuideRequested,updateChatWindowStatus:b.updateChatWindowStatus,updateConversationDetailStatus:b.updateConversationDetailStatus,changeConversationStatusRequested:b.changeConversationStatusRequested};const Lo=(0,s.connect)((function(e){return{newbie:(0,b.newbieSelector)(e),toast:(0,b.toastSelector)(e),isScChat:(0,b.isScChatSelector)(e),openedMenu:(0,b.openedMenuSelector)(e),currentUser:(0,b.currentUserSelector)(e)||{},currentBuyer:(0,b.currentBuyerSelector)(e)||{},isSubAccount:(0,b.isSubAccountSelector)(e),loginSuccess:(0,b.loginSuccessSelector)(e),socketSuccess:(0,b.socketSuccessSelector)(e),totalUnreadCount:(0,b.totalUnreadConversationsCountSelector)(e),currentConversation:(0,b.currentConversationSelector)(e),currentConversationId:(0,b.currentConversationIdSelector)(e),showConversationDetail:(0,b.showConversationDetailSelector)(e),filter:(0,b.filterSelector)(e),conversationBeenDeleted:(0,b.conversationBeenDeletedSelector)(e),serviceDown:(0,b.serviceDownFlagSelector)(e)}}),Fo)((function(e){return i.createElement(Ao,e)}));var qo=n(30596),Uo=n.n(qo),Bo=n(3488),Ho=n.n(Bo);const Vo={"logo-wrapper":"r2v9ozyahe",logoWrapper:"r2v9ozyahe",logo:"HiSJ3Vx2WM","status-dot":"WARFTDqzgQ",statusDot:"WARFTDqzgQ",working:"LNHghdBO5c",hangup:"CuXGACHZ85",hang_up:"D2yTozei9X",hangUp:"D2yTozei9X",jumpbar:"lCHLPQcY1b",jump:"P_7D65k6v8",portal:"hQyedwHxsL","guide-content":"MAkP2iFSPs",guideContent:"MAkP2iFSPs","guide-item":"lvdpbMJOTD",guideItem:"lvdpbMJOTD","guide-icon":"MA2ZBJz0LV",guideIcon:"MA2ZBJz0LV","chat-logo":"kX14mOmIP8",chatLogo:"kX14mOmIP8","guide-tip":"HXFmqIBW13",guideTip:"HXFmqIBW13","guide-btn":"XlSsNShp53",guideBtn:"XlSsNShp53",chat:"m3Mb2Tqdlw",counts:"v_6qeRY1jW",root:"bGX0VV9OFp","sc-entry":"WNMV40w0DY",scEntry:"WNMV40w0DY","has-unread":"ud2as5rsQ8",hasUnread:"ud2as5rsQ8","window-enter":"Y1NIOJgjOS",windowEnter:"Y1NIOJgjOS","half-window-enter":"AwU1Vr8Wjv",halfWindowEnter:"AwU1Vr8Wjv","window-enter-active":"YfqnOaPQow",windowEnterActive:"YfqnOaPQow","half-window-enter-active":"rbUYLP8SuB",halfWindowEnterActive:"rbUYLP8SuB","window-exit":"IHYXpW0u3u",windowExit:"IHYXpW0u3u","window-exit-active":"Uoo_1v5BH3",windowExitActive:"Uoo_1v5BH3","half-window-exit-active":"ax7kRuLodg Uoo_1v5BH3",halfWindowExitActive:"ax7kRuLodg Uoo_1v5BH3","mall-window-exit-active":"oOmBoL2EsO Uoo_1v5BH3",mallWindowExitActive:"oOmBoL2EsO Uoo_1v5BH3","half-mall-window-exit-active":"g6klL5Stap Uoo_1v5BH3",halfMallWindowExitActive:"g6klL5Stap Uoo_1v5BH3"};var Wo=n(98724).t;function zo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Go(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zo(Object(n),!0).forEach((function(t){(0,m.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Xo=function(e){var t=e.newbie,a=e.isScChat,o=e.showEntry,c=e.currentUser,s=e.isSubAccount,l=e.loginSuccess,u=e.socketSuccess,p=e.showChatWindow,m=e.totalUnreadCount,v=e.updateGuideRequested,y=e.showConversationDetail,C=e.updateChatWindowStatus,S=e.updateCurTabFocused,k=e.isMainPage,E=e.shouldInitFSSDK,R=e.hasFetchedUnread,O=e.curTabFocused,M=c.id,N=c.distribution_status,P=c.locale,I=(0,i.useState)(!0),x=(0,f.Z)(I,2),Z=x[0],_=x[1],T=(0,i.useRef)(m),j=D((function(e){S({focused:e})}),100);(0,i.useEffect)((function(){var e=T.current;Z&&0===e&&m>0&&R&&O&&(0,b.$tracker)({trackerName:"impressionUnreadChange",operation:r.TrackerOperation.IMPRESSION,data:{ctx_url:window.location.href},page:"seller_center_chat"}),T.current=m}),[m]),(0,g.useEventListener)("focus",(function(){return j(!0)})),(0,g.useEventListener)("blur",(function(){return j(!1)})),(0,g.useEventListener)("beforeunload",(function(){return a&&b.socket.dispatch(r.CustomShareEvent.CLOSE_CONNECTION,{isMainPage:k})})),(0,i.useEffect)((function(){E&&n.e(580).then(n.bind(n,46583)).then((function(e){var t=new(0,e.default)({projectId:b.FullStoryProjectId,env:"live",uid:M});"live"!==(0,r.getRuntimeServer)()&&(window.CreateNewFullStorySdk=function(){return[M,t]},window.GetNecessaryInfo=function(){return{user:c}})}))}),[E]),(0,i.useEffect)((function(){p&&_(!1)}),[p]),(0,i.useEffect)((function(){if(o){var e=Date.now()-window.__START_MINICHAT__;(0,b.collectComponentTask)(b.ReportComponent.APP,{duration:e,id:b.ReportPoint.SHOW_WEBCHAT})}}),[o]);var A=["tw","cn"].includes((0,r.getServiceLocale)(P)),F=(0,r.checkEntryGuide)(t),L=m>0,q=m>99?"99+":m,U="\n    ".concat(Vo.root,"\n    ").concat(a?Vo.scEntry:"","\n    ").concat(L?Vo.hasUnread:"","\n  "),B=(0,i.useMemo)((function(){var e={enter:Vo.windowEnter,enterActive:Vo.windowEnterActive,exit:Vo.windowExit,exitActive:Vo.windowExitActive};return a||(e.exitActive=Vo.mallWindowExitActive),y||(e=Go(Go({},e),{},{enter:Vo.halfWindowEnter,enterActive:Vo.halfWindowEnterActive,exitActive:a?Vo.halfWindowExitActive:Vo.halfMallWindowExitActive})),e}),[a,y]);return o?i.createElement(i.Fragment,null,Z&&i.createElement("div",{className:U,"data-cy":"minichat-entry-container-root"},i.createElement("div",{className:Vo.logoWrapper,onClick:function(){l&&u&&(0,b.$tracker)({trackerName:"clickChatIcon",data:{has_unread_convo:!!m,unread_convo_cnt:m,ctx_url:window.location.href},page:a?"seller_center_chat":"minichat_page"}),C({shouldShowWindow:!0})},"data-cy":"minichat-entry-logo-wrapper"},m>0&&i.createElement("div",{className:Vo.counts,"data-cy":"minichat-entry-counts"},q),s&&N&&a&&i.createElement("div",{className:"".concat(Vo.statusDot," ").concat(Vo[N]),"data-cy":"minichat-entry-status-dot"}),i.createElement(h(),{svg:Ho(),className:Vo.chat}),i.createElement(h(),{svg:A?ko():ho(),className:Vo.logo})),a&&i.createElement("div",{className:Vo.jumpbar,onClick:function(){(0,b.$tracker)({trackerName:"clickToWebchatButton"}),no({currentConversation:{},webChatUrl:(0,r.getWebChatUrl)()})},"data-cy":"minichat-entry-jump-bar"},i.createElement(d.default,{zIndex:r.MAX_Z_INDEX,placement:"topRight",content:Wo("header.tooltip.see_all")},i.createElement("div",null,i.createElement(h(),{svg:Uo(),className:Vo.jump})))),a&&F&&i.createElement("div",{className:Vo.portal,"data-cy":"minichat-entry-portal"},i.createElement("div",{className:Vo.guideContent,"data-cy":"minichat-entry-guide-content"},i.createElement("div",{className:Vo.guideItem,"data-cy":"minichat-entry-guide-item"},i.createElement(h(),{svg:Ho(),className:"".concat(Vo.guideIcon," ").concat(Vo.chatLogo)}),i.createElement("span",{className:Vo.guideTip,"data-cy":"minichat-entry-guide-tip"},Wo("newbie.tips.chat_icon"))),i.createElement("div",{className:Vo.guideItem,"data-cy":"minichat-entry-guide-item"},i.createElement(h(),{svg:Uo(),className:"".concat(Vo.guideIcon," ").concat(Vo.jump)}),i.createElement("span",{className:Vo.guideTip,"data-cy":"minichat-entry-guide-tip"},Wo("newbie.tips.open_webchat_icon")))),i.createElement("div",{className:Vo.guideBtn,onClick:function(){var e=(0,r.checkEntryGuide)(t);v({newbieId:e.id})},"data-cy":"minichat-entry-guide-button"},Wo("settings.message_shortcuts.import.confirm")))),i.createElement(w.Z,{unmountOnExit:!0,in:p,timeout:y?300:225,classNames:B,onEnter:null,onExited:function(){return _(!0)}},i.createElement(Lo,e))):null};Xo.propTypes={newbie:y().array,isScChat:y().bool,showEntry:y().bool,currentUser:y().object,isSubAccount:y().bool,loginSuccess:y().bool,socketSuccess:y().bool,showChatWindow:y().bool,totalUnreadCount:y().number,updateGuideRequested:y().func,showConversationDetail:y().bool,updateChatWindowStatus:y().func,updateCurTabFocused:y().func,isMainPage:y().bool,shouldInitFSSDK:y().bool};const Qo=Xo;var Yo={updateCurTabFocused:b.updateCurTabFocused,updateGuideRequested:b.updateGuideRequested,updateChatWindowStatus:b.updateChatWindowStatus};const Ko=(0,s.connect)((function(e){return{newbie:(0,b.newbieSelector)(e),isScChat:(0,b.isScChatSelector)(e),showEntry:(0,b.showEntrySelector)(e),currentUser:(0,b.currentUserSelector)(e)||{},isSubAccount:(0,b.isSubAccountSelector)(e),loginSuccess:(0,b.loginSuccessSelector)(e),socketSuccess:(0,b.socketSuccessSelector)(e),showChatWindow:(0,b.showChatWindowSelector)(e),totalUnreadCount:(0,b.totalUnreadConversationsCountSelector)(e),showConversationDetail:(0,b.showConversationDetailSelector)(e),isMainPage:(0,b.isMainPageSelector)(e),shouldInitFSSDK:(0,b.shouldInitFSSDKSelector)(e),hasFetchedUnread:(0,b.hasFetchedUnreadSelector)(e),curTabFocused:(0,b.curTabFocusedSelector)(e)}}),Yo)((function(e){return i.createElement(Qo,e)}));(0,b.initMDAPSdk)();var Jo=(0,r.checkIsScChat)(),$o=function(e){return{position:"fixed",right:Jo?"16px":"8px",bottom:Jo?"".concat((e?64:0)+16,"px"):"0",zIndex:"99999"}},ei=function(e){u.store.getState().userReducer.loginSuccess?e():u.store.dispatch((0,b.updateChatWindowStatus)({shouldShowWindow:!0}))},ti={create:function(e){var t,n,r,a,o,d,p,h,m,f=document.getElementById(e);Jo&&(n=(null===(r=window)||void 0===r||null===(a=r.MMFramework)||void 0===a?void 0:a.app)||{},t=(null===(o=window)||void 0===o||null===(d=o.componentData)||void 0===d||null===(p=d.FixBottomCard)||void 0===p?void 0:p.isFixed)||!1,(null===(h=n)||void 0===h||null===(m=h.eventBus)||void 0===m?void 0:m.on)&&n.eventBus.on("FixBottomCardChange",(function(e){var t,n=$o(e);for(t in n)f.style[t]=n[t]})));if(!f){(f=document.createElement("div")).setAttribute("id",e);var v,y=$o(t);for(v in y)f.style[v]=y[v];document.body.appendChild(f)}window.miniChatContainerId=e,function(e,t){c.render(i.createElement(l.zj,null,i.createElement(s.Provider,{store:u.store},i.createElement(e,null))),document.getElementById(t))}(Ko,e)},startOrderChat:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};ei((function(){Jo&&!r.entryPoint&&(r.entryPoint=7),u.store.dispatch((0,b.redirectConversationRequested)({userId:t,shopId:e,orderId:n,entryPointType:r.entryPoint}))}))},startChatWithText:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};ei((function(){u.store.dispatch((0,b.redirectConversationRequested)({userId:e,message:t,entryPointType:n.entryPoint}))}))},startChat:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};ei((function(){u.store.dispatch((0,b.redirectConversationRequested)({userId:t,shopId:e,productId:n,entryPointType:r.entryPoint}))}))},startCommonChat:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};ei((function(){u.store.dispatch((0,b.redirectConversationRequested)({userId:t,shopId:e,entryPointType:{project_detail:3501,kol_marketplace_detail:3502,kol_marketplace:3503,top_five_affiliates:3504,free_sample_detail:3505,affiliate_homepage:3506}[n.entry]}))}))},minimizeChatWindow:function(){u.store.dispatch((0,b.updateChatWindowStatus)({shouldShowWindow:!1}))},inNewBie:function(){var e=(u.store.getState().userReducer||{}).newbie,t=void 0===e?[]:e;return(0,r.checkEntryGuide)(t)},updateLoginStatus:function(){u.store.dispatch((0,b.loginRequested)())},logout:function(){u.store.dispatch((0,b.forceLogoutRequested)())},locateMessage:function(e,t){ei((function(){e&&t&&(u.store.dispatch((0,b.updateChatWindowStatus)({shouldShowWindow:!0})),u.store.dispatch((0,b.updateConversationDetailStatus)({shouldShowConversationDetail:!0})),u.store.dispatch((0,b.locationMessage)({msgId:e,shopId:t})))}))}};window.ChatEasy=ti,"function"==typeof window.chatReady&&window.chatReady(),ti.create("shopee-mini-chat-embedded")},847:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>E,watchModuleCenterChannel:()=>k});var r=n(4942),a=n(15861),o=n(87757),i=n.n(o),c=(n(24336),n(96253),n(40851),n(27476),n(95767),n(98837),n(94882),n(98351),n(37470),n(48388),n(28366)),s=n(28721),l=n(46811),u=n(34857),d=i().mark(S),p=i().mark(k);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f={},v={},y={},w=new MessageChannel;function g(e){var t=v[e];null!=t&&t.length&&t.forEach((function(t,n){var r=(0,s.Z)();y[r]=t,w.port1.postMessage(r),delete v[e][n]}))}function b(e){return new Promise(function(){var t=(0,a.Z)(i().mark((function t(r,a){var o,s,l;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=e.id,s=m(m({},e),{},{resolve:r,reject:a}),v[o]?v[o].push(s):v[o]=[s],!f[o]){t.next=7;break}g(o),t.next=28;break;case 7:if(e.isLazy){t.next=27;break}l=null,t.t0=o,t.next="input-field"===t.t0?12:"message-section"===t.t0?16:"profile"===t.t0?20:24;break;case 12:return t.next=14,Promise.all([n.e(360),n.e(868),n.e(230),n.e(255),n.e(305),n.e(349),n.e(622),n.e(700),n.e(664)]).then(n.t.bind(n,94043,23));case 14:return l=t.sent,t.abrupt("break",24);case 16:return t.next=18,Promise.all([n.e(348),n.e(962),n.e(728),n.e(846),n.e(308),n.e(139),n.e(360),n.e(868),n.e(230),n.e(255),n.e(305),n.e(349),n.e(622),n.e(167),n.e(374)]).then(n.t.bind(n,67167,23));case 18:return l=t.sent,t.abrupt("break",24);case 20:return t.next=22,Promise.all([n.e(360),n.e(868),n.e(230),n.e(255),n.e(305),n.e(349),n.e(622),n.e(98),n.e(845)]).then(n.t.bind(n,295,23));case 22:return l=t.sent,t.abrupt("break",24);case 24:l&&c.store.addModule(l.getModule()),t.next=28;break;case 27:r(null);case 28:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())}function C(){return(0,l.eventChannel)((function(e){return w.port2.onmessage=function(t){e(t.data)},function(){return{}}}))}function S(e){var t,n,r,a,o,c,s,l,p;return i().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:t=y[e],n=t.effect,r=t.action,a=t.id,o=t.payload,c=t.resolve,s=t.reject,l=f[a][r],i.prev=3,i.t0=n,i.next="put"===i.t0?7:"call"===i.t0?11:16;break;case 7:return i.next=9,(0,u.put)(l(o));case 9:return c(),i.abrupt("break",16);case 11:return i.next=13,(0,u.call)(l,o);case 13:return p=i.sent,c(p),i.abrupt("break",16);case 16:i.next=21;break;case 18:i.prev=18,i.t1=i.catch(3),s(i.t1);case 21:case"end":return i.stop()}}),d,null,[[3,18]])}function k(){var e;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,u.call)(C);case 2:return e=t.sent,t.next=5,(0,u.takeEvery)(e,S);case 5:case"end":return t.stop()}}),p)}const E={put:function(e){return e.effect="put",b(e)},call:function(e){return e.effect="call",b(e)},handleModuleLoaded:function(e){var t=e.id;f[t]||(f[t]=e.actionsMap),g(t)}}},33221:(e,t,n)=>{"use strict";n(81822);!function(e){e.requestIdleCallback=e.requestIdleCallback||function(e){return setTimeout((function(){var t=Date.now();e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})}),1)},e.cancelIdleCallback=e.cancelIdleCallback||function(e){clearTimeout(e)}}(self)},44088:()=>{performance&&performance.mark&&performance.mark("STATIC_LOADED")},28366:(e,t,n)=>{"use strict";n.r(t),n.d(t,{store:()=>I});var r=n(85002),a=n(8279),o=n(42982),i=(n(19371),n(87757)),c=n.n(i),s=n(23828),l=n(34857),u=n(37764),d=(n(27476),n(95767),n(98837),n(94882),n(24336),n(98351),n(37470),n(48388),n(4942)),p=n(70885);n(33057),n(83276),n(62850),n(62773);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=(0,n(93243).Z)({REDUX_RESET:function(){return{}}}).reduxReset,v=c().mark(w),y=c().mark(g);function w(e){var t;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=e.payload.resource,n.t0="login"===t,!n.t0){n.next=5;break}return n.next=5,(0,l.put)((0,u.updateChatEntryStatus)({showEntry:!0}));case 5:return n.next=7,(0,l.put)((0,u.updateLoginSuccessStatus)({loginSuccess:!1}));case 7:return n.next=9,(0,l.put)((0,u.forceLogoutRequested)());case 9:case"end":return n.stop()}}),v)}function g(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.takeEvery)(u.handle401ErrorRequested,w);case 2:case"end":return e.stop()}}),y)}var b=n(847),C=c().mark(E),S={blacklist:["modalReducer","userReducer"]},k={modalReducer:u.modalReducer,userReducer:u.userReducer,shopReducer:u.shopReducer,toastReducer:u.toastReducer,draftReducer:u.draftReducer,entityReducer:u.entityReducer,socketReducer:u.socketReducer,settingsReducer:u.settingsReducer,unreadCountReducer:u.unreadCountReducer,conversationReducer:u.conversationReducer,translatePreferenceReducer:u.translatePreferenceReducer,reportReducer:u.reportReducer,mediaPreviewerReducer:u.mediaPreviewerReducer,mediaPreviewModalReducer:u.mediaPreviewModalReducer};function E(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.takeEvery)("@@Internal/ModuleManager/ModuleAdded",c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"root"!==(n=t.payload).id&&b.default.handleModuleLoaded(n);case 2:case"end":return e.stop()}}),e)})));case 2:case"end":return e.stop()}}),C)}var R=c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.all)([E,g].concat((0,o.Z)(u.watchUserSagas),(0,o.Z)(u.watchShopSagas),(0,o.Z)(u.watchToastSagas),(0,o.Z)(u.watchSocketSagas),(0,o.Z)(u.watchUnreadSagas),(0,o.Z)(u.watchTranslationSagas),(0,o.Z)(u.watchConversationSagas),(0,o.Z)(u.watchReportSagas),[b.watchModuleCenterChannel]).map(l.call));case 2:case"end":return e.stop()}}),e)})),O=n(26842),M=c().mark(P),N={id:"uncontrolled",sagas:u.watchUncontrolledSagas,reducerMap:{},retain:!0};function P(){var e,t,n,r;return c().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,(0,l.put)((0,u.setChatSource)({isScChat:(0,O.checkIsScChat)()}));case 3:return a.next=5,(0,l.call)(u.login);case 5:if(e=a.sent,t=e.session,n=e.params,I.addModule(N),!(r=t.user)){a.next=19;break}return a.next=13,(0,u.clearApiCache)();case 13:return a.next=15,(0,l.call)(u.handleLoginSucceededLogic,t,n);case 15:return a.next=17,(0,l.put)((0,u.getGuideRequested)({userId:r.id,version:"7.3.4"}));case 17:return a.next=19,(0,l.put)((0,u.updateUnreadCount)({type:u.unreadCountActions.REFRESH_TOTAL_UNREAD_CONVERSATION_COUNT,source:O.UnreadSource.PRELOAD}));case 19:a.next=26;break;case 21:return a.prev=21,a.t0=a.catch(0),console.error("[Load Chat Failed]\n",a.t0),a.next=26,(0,l.put)((0,u.updateLoginSuccessStatus)({loginSuccess:!1}));case 26:case"end":return a.stop()}}),M,null,[[0,21]])}var I=(0,r.createStore)({advancedCombineReducers:function(e){return(0,s.combineReducers)(function(e,t){return Object.entries(t).reduce((function(t,n){var r=(0,p.Z)(n,2),a=r[0],o=r[1];return m(m({},t),{},(0,d.Z)({},a,(function(t,n){return n.type!=="".concat(f)||e.blacklist.includes(a)||(t=void 0),o(t,n)})))}),{})}(S,e))},enhancers:[],extensions:[(0,a.getSagaExtension)()]},{id:"root",reducerMap:k,sagas:[R,P]})},42480:()=>{}},s={};function l(e){var t=s[e];if(void 0!==t)return t.exports;var n=s[e]={id:e,loaded:!1,exports:{}};return c[e].call(n.exports,n,n.exports,l),n.loaded=!0,n.exports}l.m=c,l.amdO={},e=[],l.O=(t,n,r,a)=>{if(!n){var o=1/0;for(u=0;u<e.length;u++){for(var[n,r,a]=e[u],i=!0,c=0;c<n.length;c++)(!1&a||o>=a)&&Object.keys(l.O).every((e=>l.O[e](n[c])))?n.splice(c--,1):(i=!1,a<o&&(o=a));if(i){e.splice(u--,1);var s=r();void 0!==s&&(t=s)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[n,r,a]},l.F={},l.E=e=>{Object.keys(l.F).map((t=>{l.F[t](e)}))},l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,l.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var a=Object.create(null);l.r(a);var o={};t=t||[null,n({}),n([]),n(n)];for(var i=2&r&&e;"object"==typeof i&&!~t.indexOf(i);i=n(i))Object.getOwnPropertyNames(i).forEach((t=>o[t]=()=>e[t]));return o.default=()=>e,l.d(a,o),a},l.d=(e,t)=>{for(var n in t)l.o(t,n)&&!l.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},l.f={},l.e=e=>Promise.all(Object.keys(l.f).reduce(((t,n)=>(l.f[n](e,t),t)),[])),l.u=e=>(({98:"stars",139:"x2",308:"x1.78947037",374:"message-section",580:"fs",664:"input-field",700:"draggable",728:"x3.07864729",845:"profile",846:"x1.3113a0cb",962:"x3.1ce3a484"}[e]||e)+"."+{98:"31ecc12046651b7b843a",139:"4806474d72ce80974a80",167:"187afb02297502bcc062",308:"a787962727106c64ae1d",374:"4092a71620010dc5ed04",580:"14c0c6d0d51c8a524024",664:"4fda41c689468d21f95d",700:"9c37c5a67056c1d8f644",728:"be80462a09b192fbd4cf",845:"4868735d5df7c86b4b65",846:"a95fd07982cb0f8f74f9",962:"24e1d30158e1e31b0edd"}[e]+".js"),l.miniCssF=e=>"x3.07864729.921aa9dd2878a6f9b9c0.css",l.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),l.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r={},a="chateasy:",l.l=(e,t,n,o)=>{if(r[e])r[e].push(t);else{var i,c;if(void 0!==n)for(var s=document.getElementsByTagName("script"),u=0;u<s.length;u++){var d=s[u];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==a+n){i=d;break}}i||(c=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,l.nc&&i.setAttribute("nonce",l.nc),i.setAttribute("data-webpack",a+n),i.src=e),r[e]=[t];var p=(t,n)=>{i.onerror=i.onload=null,clearTimeout(h);var a=r[e];if(delete r[e],i.parentNode&&i.parentNode.removeChild(i),a&&a.forEach((e=>e(n))),t)return t(n)},h=setTimeout(p.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=p.bind(null,i.onerror),i.onload=p.bind(null,i.onload),c&&document.head.appendChild(i)}},l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.p="https://deo.shopeemobile.com/shopee/shopee-seller-live-vn/chateasy/",o=e=>new Promise(((t,n)=>{var r=l.miniCssF(e),a=l.p+r;if(((e,t)=>{for(var n=document.getElementsByTagName("link"),r=0;r<n.length;r++){var a=(i=n[r]).getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(a===e||a===t))return i}var o=document.getElementsByTagName("style");for(r=0;r<o.length;r++){var i;if((a=(i=o[r]).getAttribute("data-href"))===e||a===t)return i}})(r,a))return t();((e,t,n,r)=>{var a=document.createElement("link");a.rel="stylesheet",a.type="text/css",a.onerror=a.onload=o=>{if(a.onerror=a.onload=null,"load"===o.type)n();else{var i=o&&("load"===o.type?"missing":o.type),c=o&&o.target&&o.target.href||t,s=new Error("Loading CSS chunk "+e+" failed.\n("+c+")");s.code="CSS_CHUNK_LOAD_FAILED",s.type=i,s.request=c,a.parentNode.removeChild(a),r(s)}},a.href=t,document.head.appendChild(a)})(e,a,t,n)})),i={143:0},l.f.miniCss=(e,t)=>{i[e]?t.push(i[e]):0!==i[e]&&{728:1}[e]&&t.push(i[e]=o(e).then((()=>{i[e]=0}),(t=>{throw delete i[e],t})))},(()=>{var e={143:0,873:0};l.f.j=(t,n)=>{var r=l.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else if(873!=t){var a=new Promise(((n,a)=>r=e[t]=[n,a]));n.push(r[2]=a);var o=l.p+l.u(t),i=new Error;l.l(o,(n=>{if(l.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var a=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;i.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",i.name="ChunkLoadError",i.type=a,i.request=o,r[1](i)}}),"chunk-"+t,t)}else e[t]=0},l.F.j=t=>{if((!l.o(e,t)||void 0===e[t])&&873!=t){e[t]=null;var n=document.createElement("link");l.nc&&n.setAttribute("nonce",l.nc),n.rel="prefetch",n.as="script",n.href=l.p+l.u(t),document.head.appendChild(n)}},l.O.j=t=>0===e[t];var t=(t,n)=>{var r,a,[o,i,c]=n,s=0;if(o.some((t=>0!==e[t]))){for(r in i)l.o(i,r)&&(l.m[r]=i[r]);if(c)var u=c(l)}for(t&&t(n);s<o.length;s++)a=o[s],l.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return l.O(u)},n=self.miniJsonp=self.miniJsonp||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),l.O(0,[143],(()=>{[580,360,868,230,255,305,349,622,98,845,700,664,348,962,728,846,308,139,167,374].map(l.E)}),5),l.O(void 0,[348,444,592,360,868,230,255,305,349,622,873,276,520,725,42,467,227,9,982,106,941,58,101,59,425,745,493,160,471,177,14],(()=>l(63658))),l.O(void 0,[348,444,592,360,868,230,255,305,349,622,873,276,520,725,42,467,227,9,982,106,941,58,101,59,425,745,493,160,471,177,14],(()=>l(33221)));var u=l.O(void 0,[348,444,592,360,868,230,255,305,349,622,873,276,520,725,42,467,227,9,982,106,941,58,101,59,425,745,493,160,471,177,14],(()=>l(97238)));u=l.O(u)})();
(self.miniJsonp=self.miniJsonp||[]).push([[167],{67167:(e,t,n)=>{var r;self,r=(e,t,n,r,s,a,o,i,c,u,l,d,p,g,A,f,h,m,E,v,S,b,_,y,C,x,M,I,w,O,T,B,k,R,P,D,N,j,F,q,U,L,G)=>(()=>{var Y,H,W,Z,V={7757:(e,t,n)=>{e.exports=n(5666)},5945:(e,t,n)=>{"use strict";n.d(t,{default:()=>a});var r=n(885),s={};Object.entries({"input-field":["fetchMessageShortcutsGroupRequested","updateFetchMessageShortcutsGroupStatus","fetchMessageShortcutsGroupSucceeded","setCurrentGroupType","setCurrentGroupId","fetchOffersRequested","fetchOffersSucceed","updateFetchOffersRequestedStatus","replyOfferRequested","fetchAllOrdersRequested","fetchOrdersRequested","fetchOrdersSucceed","updateFetchOrdersStatus","fetchAllOrders","fetchOrders","fetchProductsRequested","fetchMyShopProducts","fetchProductsSucceed","updateMyShopProductsRequestedStatus","updateOtherShopProductsRequestedStatus","updateAllShopProductsRequestedStatus","updateMyShopSearchKeyword","updateOtherShopSearchKeyword","updateSelectedProductTab","fetchAllProductsRequested","fetchAllShopProducts","fetchProducts","initPacks","initStickers","selectSticker","updateCurrentSticker","fetchSingleStickerRequested","fetchSingleStickerSucceeded","updateFetchPacksRequestedStatus","updateFetchStickersRequestedStatus","fetchStickersRequested","fetchStickersRequestedSaga","claimVoucherRequested","fetchVouchersRequested","fetchVouchersSucceeded","updateFetchVouchersRequestedStatus"],"message-section":["showChatbotImage","closeChatbotMediaPreview","chatbotIntentsReportRequest","fetchFaqSessionSucceed","updateChatbotFrom","updateHasConflict","deleteConversationMessageHash","deleteMessageRequested","deleteMessagePostRequested","deleteMessageIdInHash","deleteFakingMessages","deleteMessageContentAndId","setEntryPoint","evaluationRequested","showMyRateCard","showRateCard","fetchFaqMessagesRequested","fetchFaqMessagesSucceeded","updateFetchFaqMessagesRequestedStatus","updateCurrentFaqId","showFaqHistoryModal","fetchMessagesRequested","fetchMessagesSucceeded","updateFetchMessagesRequestedStatus","setSecurityTipsMessage","fetchConversationMessagesSaga","fetchMessagesRequestedWithPreloadSaga","fetchMessagesRequestedSaga","updateMessageFillStatusMap","fillMessageRequested","fillMessageContent","handleSensitiveUrl","sendMessagesFailedByOffline","resetMessagesFailedByOffline","resendOfflineMessagesOnce","resendOfflineMessagesOnceSucceed","updateResendConversationMessage","receiveMessageRequested","receiveMessageSucceeded","resetNewConversationQueue","resetOldConversationQueue","resetConversationQueue","handleNewConversationMessageQueue","handleCurrentConversationChange","setReplyToMessage","resetReplyToMessage","scrollToMessage","setScrollToMessageId","resetScrollToMessageId","setInScrollToMessage","setCurrentConversationReplyToMessage","resetCurrentConversationReplyToMessage","resendMessageRequested","sendMessagesRequested","sendMessagesSucceeded","sendingMessages","sendMessagesToPending","sendMessagesFailed","abortAllSendingMessages","cancelSendingMessageRequested","cancelSendingMessageSucceeded","sendVideoMessageRequested","sendProductsMessageRequested","handleSendSucceededMessages","handleFaqExpiredMessage","sendMessages","messageSyncUpdate","translateMessagesRequested","changeTranslateStatus","showTranslateFeedback","sendTranslateFeedback","updateMessagesRelated","updateVideoInfo","deleteVideoInfo","uploadVideoGetToken","uploadVideGetResult","uploadVideo"]}).forEach((function(e){var t=(0,r.Z)(e,2),n=t[0];t[1].forEach((function(e){s[e]=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.payload,s=t.isLazy;return{id:n,action:e,payload:r,isLazy:s}}}))}));const a=s},4323:(e,t,n)=>{"use strict";n.d(t,{t:()=>a});var r=n(8661),s=n.n(r),a=s().t.bind(s())},5668:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".xoYO4owojG {\n  color: #2673dd;\n  cursor: pointer;\n}\n","",{version:3,sources:["webpack://./src/components/Common/CancelOrderHint/index.css"],names:[],mappings:"AAAA;EACE,cAAc;EACd,eAAe;AACjB",sourcesContent:[".policy {\n  color: #2673dd;\n  cursor: pointer;\n}\n"],sourceRoot:""}]),o.locals={policy:"xoYO4owojG"};const i=o},2147:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".ldGwUka16V {\n  height: 100%;\n  width: 100%;\n  overflow-x: hidden;\n  overflow-y: auto;\n  box-sizing: border-box;\n  overscroll-behavior: contain;\n}\n\n.PpPQNYTjzu {\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  margin: auto;\n  box-sizing: border-box;\n}\n","",{version:3,sources:["webpack://./src/components/Common/ScrollList/style.css"],names:[],mappings:"AAAA;EACE,YAAY;EACZ,WAAW;EACX,kBAAkB;EAClB,gBAAgB;EAChB,sBAAsB;EACtB,4BAA4B;AAC9B;;AAEA;EACE,MAAM;EACN,SAAS;EACT,OAAO;EACP,QAAQ;EACR,YAAY;EACZ,sBAAsB;AACxB",sourcesContent:[".root {\n  height: 100%;\n  width: 100%;\n  overflow-x: hidden;\n  overflow-y: auto;\n  box-sizing: border-box;\n  overscroll-behavior: contain;\n}\n\n.empty {\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  margin: auto;\n  box-sizing: border-box;\n}\n"],sourceRoot:""}]),o.locals={root:"ldGwUka16V",empty:"PpPQNYTjzu"};const i=o},1644:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".xvgXvQJfBg {\n  width: 100%;\n  font-size: 20px;\n  height: 1.1em;\n  text-align: left;\n  position: relative;\n}\n\n._louvguDj8 {\n  max-width: 100%;\n  height: 1.2em;\n  line-height: 1.1em;\n  font-weight: 500;\n}\n\n._louvguDj8.pcRh6o4FtL {\n    max-width: 80%;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  }\n\n.Gj6Kb_8akL {\n  height: 0.7em;\n  width: 0.7em;\n  color: #bbb;\n  position: absolute;\n  top: 0;\n  right: -0.2em;\n  cursor: pointer;\n}\n","",{version:3,sources:["webpack://./src/components/UI/Modal/ModalHeader/index.css"],names:[],mappings:"AAAA;EACE,WAAW;EACX,eAAe;EACf,aAAa;EACb,gBAAgB;EAChB,kBAAkB;AACpB;;AAEA;EACE,eAAe;EACf,aAAa;EACb,kBAAkB;EAClB,gBAAgB;AAQlB;;AANE;IACE,cAAc;IACd,gBAAgB;IAChB,uBAAuB;IACvB,mBAAmB;EACrB;;AAGF;EACE,aAAa;EACb,YAAY;EACZ,WAAW;EACX,kBAAkB;EAClB,MAAM;EACN,aAAa;EACb,eAAe;AACjB",sourcesContent:[".root {\n  width: 100%;\n  font-size: 20px;\n  height: 1.1em;\n  text-align: left;\n  position: relative;\n}\n\n.title {\n  max-width: 100%;\n  height: 1.2em;\n  line-height: 1.1em;\n  font-weight: 500;\n\n  &.has-cancel {\n    max-width: 80%;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  }\n}\n\n.cancel {\n  height: 0.7em;\n  width: 0.7em;\n  color: #bbb;\n  position: absolute;\n  top: 0;\n  right: -0.2em;\n  cursor: pointer;\n}\n"],sourceRoot:""}]),o.locals={root:"xvgXvQJfBg",title:"_louvguDj8","has-cancel":"pcRh6o4FtL",hasCancel:"pcRh6o4FtL",cancel:"Gj6Kb_8akL"};const i=o},5792:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".QOPArcVPa0 {\n  position: fixed;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 100;\n}\n\n.e4rHNIVBIc {\n  padding: 1.5em;\n  border-radius: 3px;\n  background: #fff;\n  box-sizing: border-box;\n  box-shadow: 0 0 1em 0 rgba(0, 0, 0, 0.05), 0 1em 1em 0 rgba(0, 0, 0, 0.09);\n}\n\n.e4rHNIVBIc:focus {\n  outline: none;\n}\n","",{version:3,sources:["webpack://./src/components/UI/Modal/index.css"],names:[],mappings:"AAAA;EACE,eAAe;EACf,OAAO;EACP,QAAQ;EACR,MAAM;EACN,SAAS;EACT,8BAA8B;EAC9B,aAAa;EACb,uBAAuB;EACvB,mBAAmB;EACnB,YAAY;AACd;;AAEA;EACE,cAAc;EACd,kBAAkB;EAClB,gBAAgB;EAChB,sBAAsB;EACtB,0EAA0E;AAC5E;;AAEA;EACE,aAAa;AACf",sourcesContent:[".overlay {\n  position: fixed;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 100;\n}\n\n.content {\n  padding: 1.5em;\n  border-radius: 3px;\n  background: #fff;\n  box-sizing: border-box;\n  box-shadow: 0 0 1em 0 rgba(0, 0, 0, 0.05), 0 1em 1em 0 rgba(0, 0, 0, 0.09);\n}\n\n.content:focus {\n  outline: none;\n}\n"],sourceRoot:""}]),o.locals={overlay:"QOPArcVPa0",content:"e4rHNIVBIc"};const i=o},1696:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".ICwdhNZt8D {\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  margin-right: 0.5em;\n  line-height: 0;\n}\n\n.LsH14oWYoo {\n  width: 14px;\n  height: 14px;\n  border: 0 none;\n  line-height: 0;\n  color: #fe4741;\n}\n\n.B_39Xx2sa4 {\n}\n\n.B_39Xx2sa4:hover {\n    cursor: pointer;\n  }\n","",{version:3,sources:["webpack://./src/modules-mini/message-section/components/ConversationMessages/BaseMessage/ErrorContent/index.css"],names:[],mappings:"AAAA;EACE,aAAa;EACb,mBAAmB;EACnB,uBAAuB;EACvB,mBAAmB;EACnB,mBAAmB;EACnB,cAAc;AAChB;;AAEA;EACE,WAAW;EACX,YAAY;EACZ,cAAc;EACd,cAAc;EACd,cAAc;AAChB;;AAEA;AAMA;;AAHE;IACE,eAAe;EACjB",sourcesContent:[".icon-wrap {\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  margin-right: 0.5em;\n  line-height: 0;\n}\n\n.icon-base {\n  width: 14px;\n  height: 14px;\n  border: 0 none;\n  line-height: 0;\n  color: #fe4741;\n}\n\n.icon {\n  composes: icon-base;\n\n  &:hover {\n    cursor: pointer;\n  }\n}\n"],sourceRoot:""}]),o.locals={"icon-wrap":"ICwdhNZt8D",iconWrap:"ICwdhNZt8D","icon-base":"LsH14oWYoo",iconBase:"LsH14oWYoo",icon:"B_39Xx2sa4 LsH14oWYoo"};const i=o},7370:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".C5LmRUf636 {\n  margin-bottom: 4px;\n  color: #333;\n}\n\n.KZ2zq28zXu {\n  margin-bottom: 0;\n  color: #ee4d2d;\n  font-weight: 500;\n}\n\n.zcAmZITQfx {\n  display: flex;\n  align-items: center;\n  margin-bottom: 4px;\n}\n\n.aU3kYE3XXE {\n  color: #333;\n  margin-right: 4px;\n}\n","",{version:3,sources:["webpack://./src/modules-mini/message-section/components/ConversationMessages/BaseMessage/MessageSource/Order/index.css"],names:[],mappings:"AAAA;EACE,kBAAkB;EAClB,WAAW;AACb;;AAEA;EAEE,gBAAgB;EAChB,cAAc;EACd,gBAAgB;AAClB;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,kBAAkB;AACpB;;AAEA;EACE,WAAW;EACX,iBAAiB;AACnB",sourcesContent:[".total {\n  margin-bottom: 4px;\n  color: #333;\n}\n\n.status {\n  composes: total;\n  margin-bottom: 0;\n  color: #ee4d2d;\n  font-weight: 500;\n}\n\n.order-id-group {\n  display: flex;\n  align-items: center;\n  margin-bottom: 4px;\n}\n\n.order-id {\n  color: #333;\n  margin-right: 4px;\n}\n"],sourceRoot:""}]),o.locals={total:"C5LmRUf636",status:"KZ2zq28zXu C5LmRUf636","order-id-group":"zcAmZITQfx",orderIdGroup:"zcAmZITQfx","order-id":"aU3kYE3XXE",orderId:"aU3kYE3XXE"};const i=o},7625:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".MArSWKlROx {\n  color: #bbb;\n  text-decoration: line-through;\n}\n\n.C3cOkBPl3G {\n  color: #ee4d2d;\n  margin-left: 0.5em;\n  font-weight: 500;\n}\n\n.C3cOkBPl3G.YSkZkfABAh {\n    margin-left: 0;\n  }\n\n.mUFon6a153 {\n  display: flex;\n  align-items: center;\n  position: relative;\n  margin-top: 4px;\n}\n","",{version:3,sources:["webpack://./src/modules-mini/message-section/components/ConversationMessages/BaseMessage/MessageSource/Product/index.css"],names:[],mappings:"AAAA;EACE,WAAW;EACX,6BAA6B;AAC/B;;AAEA;EACE,cAAc;EACd,kBAAkB;EAClB,gBAAgB;AAKlB;;AAHE;IACE,cAAc;EAChB;;AAGF;EACE,aAAa;EACb,mBAAmB;EACnB,kBAAkB;EAClB,eAAe;AACjB",sourcesContent:[".original-price {\n  color: #bbb;\n  text-decoration: line-through;\n}\n\n.current-price {\n  color: #ee4d2d;\n  margin-left: 0.5em;\n  font-weight: 500;\n\n  &.no-origin {\n    margin-left: 0;\n  }\n}\n\n.product-detail {\n  display: flex;\n  align-items: center;\n  position: relative;\n  margin-top: 4px;\n}\n"],sourceRoot:""}]),o.locals={"original-price":"MArSWKlROx",originalPrice:"MArSWKlROx","current-price":"C3cOkBPl3G",currentPrice:"C3cOkBPl3G","no-origin":"YSkZkfABAh",noOrigin:"YSkZkfABAh","product-detail":"mUFon6a153",productDetail:"mUFon6a153"};const i=o},1177:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".aPkxwEmpbc {\n  width: 384px;\n  padding: 12px;\n  font-size: 14px;\n  line-height: 16px;\n  box-sizing: border-box;\n  display: flex;\n  border-radius: 8px;\n  flex-direction: column;\n  justify-content: space-between;\n  background-color: #fafafa;\n  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.1);\n}\n\n.Z3EF4a7S93 {\n}\n\n.chEJ5cCbft {\n  color: #666;\n}\n\n.JFRlMYQSZi {\n  height: 1px;\n  width: 100%;\n  margin: 8px 0;\n  transform: scaleY(0.5);\n  background-color: #eee;\n}\n\n.UDiSvl0kP4 {\n  width: 100%;\n  position: relative;\n  height: 64px;\n}\n\n.vXn2gIYM5j {\n  margin-top: 8px;\n  display: flex;\n  justify-content: flex-end;\n}\n\n.hmektzZglE {\n  cursor: pointer;\n}\n\n.HYyNk4qtp7 {\n  width: 3em;\n  height: 3em;\n  border: 1px solid #f5f5f5;\n  background: transparent;\n}\n\n.LVBo2ECzmo {\n  width: calc(3em - 2px);\n  height: calc(3em - 2px);\n}\n\n.QEbVX7exP7,\n.afn7AObQhK {\n  font-size: 12px;\n  line-height: 14px;\n}\n\n.QEbVX7exP7 {\n  color: #555;\n}\n\n.nzIBjG_Juk {\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n}\n\n.afn7AObQhK {\n  color: #888;\n}\n\n.DN8Uh8ITG6 {\n  color: #2673dd;\n  cursor: pointer;\n  margin-left: 16px;\n}\n\n.RtRCeE7Rd7 {\n  color: #ccc;\n  cursor: default;\n}\n\n.IPp1hvocDi {\n  color: #ccc;\n  cursor: default;\n}\n\n.g1RCCZAeWH {\n  height: 100%;\n  margin-left: 64px;\n  padding-left: 0.5em;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n}\n\n.g1RCCZAeWH._G6ZxA1qYO {\n    display: flex;\n    align-items: center;\n  }\n\n.cBomL4XnjJ {\n  font-size: 14px;\n  line-height: 20px;\n  color: #333;\n  display: -webkit-box;\n  text-overflow: ellipsis;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  white-space: normal;\n  word-break: break-all;\n  overflow: hidden;\n}\n\n.RsTExA8pvG {\n  padding-top: 2px;\n}\n\n.pQWcEN6WDr {\n  display: flex;\n  align-items: center;\n  position: relative;\n  height: 100%;\n}\n","",{version:3,sources:["webpack://./src/modules-mini/message-section/components/ConversationMessages/BaseMessage/MessageSource/common.css"],names:[],mappings:"AAAA;EACE,YAAY;EACZ,aAAa;EACb,eAAe;EACf,iBAAiB;EACjB,sBAAsB;EACtB,aAAa;EACb,kBAAkB;EAClB,sBAAsB;EACtB,8BAA8B;EAC9B,yBAAyB;EACzB,wCAAwC;AAC1C;;AAEA;AAEA;;AAEA;EACE,WAAW;AACb;;AAEA;EACE,WAAW;EACX,WAAW;EACX,aAAa;EACb,sBAAsB;EACtB,sBAAsB;AACxB;;AAEA;EACE,WAAW;EACX,kBAAkB;EAClB,YAAY;AACd;;AAEA;EACE,eAAe;EACf,aAAa;EACb,yBAAyB;AAC3B;;AAEA;EACE,eAAe;AACjB;;AAEA;EACE,UAAU;EACV,WAAW;EACX,yBAAyB;EACzB,uBAAuB;AACzB;;AAEA;EACE,sBAAsB;EACtB,uBAAuB;AACzB;;AAEA;;EAEE,eAAe;EACf,iBAAiB;AACnB;;AAEA;EACE,WAAW;AACb;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,yBAAyB;AAC3B;;AAEA;EACE,WAAW;AACb;;AAEA;EACE,cAAc;EACd,eAAe;EACf,iBAAiB;AACnB;;AAEA;EACE,WAAW;EACX,eAAe;AACjB;;AAEA;EACE,WAAW;EACX,eAAe;AACjB;;AAEA;EACE,YAAY;EACZ,iBAAiB;EACjB,mBAAmB;EACnB,aAAa;EACb,sBAAsB;EACtB,uBAAuB;AAMzB;;AAJE;IACE,aAAa;IACb,mBAAmB;EACrB;;AAGF;EACE,eAAe;EACf,iBAAiB;EACjB,WAAW;EACX,oBAAoB;EACpB,uBAAuB;EACvB,qBAAqB;EACrB,4BAA4B;EAC5B,mBAAmB;EACnB,qBAAqB;EACrB,gBAAgB;AAClB;;AAEA;EAEE,gBAAgB;AAClB;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,kBAAkB;EAClB,YAAY;AACd",sourcesContent:[".root {\n  width: 384px;\n  padding: 12px;\n  font-size: 14px;\n  line-height: 16px;\n  box-sizing: border-box;\n  display: flex;\n  border-radius: 8px;\n  flex-direction: column;\n  justify-content: space-between;\n  background-color: #fafafa;\n  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.1);\n}\n\n.short-root {\n  composes: root;\n}\n\n.header {\n  color: #666;\n}\n\n.divider {\n  height: 1px;\n  width: 100%;\n  margin: 8px 0;\n  transform: scaleY(0.5);\n  background-color: #eee;\n}\n\n.body {\n  width: 100%;\n  position: relative;\n  height: 64px;\n}\n\n.footer {\n  margin-top: 8px;\n  display: flex;\n  justify-content: flex-end;\n}\n\n.hover {\n  cursor: pointer;\n}\n\n.img-wrapper {\n  width: 3em;\n  height: 3em;\n  border: 1px solid #f5f5f5;\n  background: transparent;\n}\n\n.img {\n  width: calc(3em - 2px);\n  height: calc(3em - 2px);\n}\n\n.label,\n.status-text {\n  font-size: 12px;\n  line-height: 14px;\n}\n\n.label {\n  color: #555;\n}\n\n.actions {\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n}\n\n.status-text {\n  color: #888;\n}\n\n.link {\n  color: #2673dd;\n  cursor: pointer;\n  margin-left: 16px;\n}\n\n.deleted {\n  color: #ccc;\n  cursor: default;\n}\n\n.no-access {\n  color: #ccc;\n  cursor: default;\n}\n\n.content {\n  height: 100%;\n  margin-left: 64px;\n  padding-left: 0.5em;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n\n  &.no-model {\n    display: flex;\n    align-items: center;\n  }\n}\n\n.name {\n  font-size: 14px;\n  line-height: 20px;\n  color: #333;\n  display: -webkit-box;\n  text-overflow: ellipsis;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  white-space: normal;\n  word-break: break-all;\n  overflow: hidden;\n}\n\n.order-name {\n  composes: name;\n  padding-top: 2px;\n}\n\n.detail {\n  display: flex;\n  align-items: center;\n  position: relative;\n  height: 100%;\n}\n"],sourceRoot:""}]),o.locals={root:"aPkxwEmpbc","short-root":"Z3EF4a7S93 aPkxwEmpbc",shortRoot:"Z3EF4a7S93 aPkxwEmpbc",header:"chEJ5cCbft",divider:"JFRlMYQSZi",body:"UDiSvl0kP4",footer:"vXn2gIYM5j",hover:"hmektzZglE","img-wrapper":"HYyNk4qtp7",imgWrapper:"HYyNk4qtp7",img:"LVBo2ECzmo",label:"QEbVX7exP7","status-text":"afn7AObQhK",statusText:"afn7AObQhK",actions:"nzIBjG_Juk",link:"DN8Uh8ITG6",deleted:"RtRCeE7Rd7","no-access":"IPp1hvocDi",noAccess:"IPp1hvocDi",content:"g1RCCZAeWH","no-model":"_G6ZxA1qYO",noModel:"_G6ZxA1qYO",name:"cBomL4XnjJ","order-name":"RsTExA8pvG cBomL4XnjJ",orderName:"RsTExA8pvG cBomL4XnjJ",detail:"pQWcEN6WDr"};const i=o},5522:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".YgwCAyD4Nu {\n  display: flex;\n  justify-content: center;\n  margin-top: 12px;\n}\n\n.qu7NqjdBtM {\n  width: 16px;\n  height: 16px;\n  margin-right: 6px;\n  vertical-align: middle;\n}\n\n.zjxBy6muI4 {\n  color: #ffbf00;\n}\n\n.r1mvfORZKY {\n  color: #5c7;\n}\n","",{version:3,sources:["webpack://./src/modules-mini/message-section/components/ConversationMessages/BaseMessage/MetaInfo/index.css"],names:[],mappings:"AAAA;EACE,aAAa;EACb,uBAAuB;EACvB,gBAAgB;AAClB;;AAEA;EACE,WAAW;EACX,YAAY;EACZ,iBAAiB;EACjB,sBAAsB;AACxB;;AAEA;EAEE,cAAc;AAChB;;AAEA;EAEE,WAAW;AACb",sourcesContent:[".meta-content {\n  display: flex;\n  justify-content: center;\n  margin-top: 12px;\n}\n\n.icon {\n  width: 16px;\n  height: 16px;\n  margin-right: 6px;\n  vertical-align: middle;\n}\n\n.warn-icon {\n  composes: icon;\n  color: #ffbf00;\n}\n\n.success-icon {\n  composes: icon;\n  color: #5c7;\n}\n"],sourceRoot:""}]),o.locals={"meta-content":"YgwCAyD4Nu",metaContent:"YgwCAyD4Nu",icon:"qu7NqjdBtM","warn-icon":"zjxBy6muI4 qu7NqjdBtM",warnIcon:"zjxBy6muI4 qu7NqjdBtM","success-icon":"r1mvfORZKY qu7NqjdBtM",successIcon:"r1mvfORZKY qu7NqjdBtM"};const i=o},8733:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".giWDyn0pBc {\n  font-size: 14px;\n  line-height: 16px;\n  color: #666;\n  background: #fafafa;\n  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.1);\n  height: 32px;\n  margin-top: 12px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-left: -16px;\n  margin-right: -16px;\n}\n","",{version:3,sources:["webpack://./src/modules-mini/message-section/components/ConversationMessages/BaseMessage/NewMessageTip/index.css"],names:[],mappings:"AAAA;EACE,eAAe;EACf,iBAAiB;EACjB,WAAW;EACX,mBAAmB;EACnB,wCAAwC;EACxC,YAAY;EACZ,gBAAgB;EAChB,aAAa;EACb,mBAAmB;EACnB,uBAAuB;EACvB,kBAAkB;EAClB,mBAAmB;AACrB",sourcesContent:[".new-message-tip {\n  font-size: 14px;\n  line-height: 16px;\n  color: #666;\n  background: #fafafa;\n  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.1);\n  height: 32px;\n  margin-top: 12px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-left: -16px;\n  margin-right: -16px;\n}\n"],sourceRoot:""}]),o.locals={"new-message-tip":"giWDyn0pBc",newMessageTip:"giWDyn0pBc"};const i=o},6322:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".ttPQqPfWBw {\n  margin-right: 0.5em;\n}\n\n.jfwEgZmTS8 {\n  width: 14px;\n  height: 14px;\n  border: 0 none;\n  line-height: 0;\n  color: #fe4741;\n}\n\n.qLygjvHbi_ {\n}\n\n.qLygjvHbi_:hover {\n    cursor: pointer;\n  }\n","",{version:3,sources:["webpack://./src/modules-mini/message-section/components/ConversationMessages/BaseMessage/SendingStatus/index.css"],names:[],mappings:"AAAA;EACE,mBAAmB;AACrB;;AAEA;EACE,WAAW;EACX,YAAY;EACZ,cAAc;EACd,cAAc;EACd,cAAc;AAChB;;AAEA;AAMA;;AAHE;IACE,eAAe;EACjB",sourcesContent:[".sending-wrap {\n  margin-right: 0.5em;\n}\n\n.icon-base {\n  width: 14px;\n  height: 14px;\n  border: 0 none;\n  line-height: 0;\n  color: #fe4741;\n}\n\n.icon {\n  composes: icon-base;\n\n  &:hover {\n    cursor: pointer;\n  }\n}\n"],sourceRoot:""}]),o.locals={"sending-wrap":"ttPQqPfWBw",sendingWrap:"ttPQqPfWBw","icon-base":"jfwEgZmTS8",iconBase:"jfwEgZmTS8",icon:"qLygjvHbi_ jfwEgZmTS8"};const i=o},8304:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".lZX8jHufoA {\n  box-sizing: border-box;\n  padding: 0 16px;\n}\n\n.WTt5Zxu_wD {\n  padding-bottom: 16px;\n}\n\n.uAjc6BXz_7 {\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n}\n\n.n7tPV8kPwM {\n  align-items: center;\n  justify-content: flex-end;\n}\n\n.qAGJYsVJQu {\n  justify-content: flex-start;\n}\n\n.ABKca6B6Ht {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  padding: 0.75em;\n  background-color: #f4f4f4;\n  border-radius: 2px;\n}\n\n.uCUlXlm0QJ {\n  flex-grow: 1;\n  display: flex;\n  flex-direction: row;\n}\n\n.z_Xhr9b5fr {\n  position: relative;\n}\n\n.GdJhfJ3Op6 {\n  width: 2.25em;\n  height: 2.25em;\n  margin-right: 0.75em;\n  flex-shrink: 0;\n}\n\n.sNqF64S6Ls {\n  opacity: 0.6;\n  filter: grayscale(50%);\n}\n\n.bYxtrDTEPp {\n  background-color: rgba(0, 0, 0, 0.6);\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: 1.2em 1.2em;\n}\n\n.DLvnpF6s13 {\n  color: #555;\n  font-size: 14px;\n  flex-shrink: 0;\n  text-decoration: none;\n  transition: color 0.25s ease;\n}\n\n.DLvnpF6s13:hover {\n    color: #ee4d2d;\n    cursor: pointer;\n  }\n\n.DcB5O9mC5j {\n  color: #555;\n  font-size: 14px;\n  flex-shrink: 0;\n  text-decoration: none;\n  transition: color 0.25s ease;\n}\n\n.DcB5O9mC5j:hover {\n    color: #ee4d2d;\n    cursor: pointer;\n  }\n\n.BeN6c_qwKf .DLvnpF6s13:hover {\n    color: #555;\n    cursor: not-allowed;\n  }\n\n.h0x92TVWo6 {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  line-height: 1.24;\n  color: #333;\n  font-size: 14px;\n  font-weight: 500;\n  word-break: break-all;\n}\n\n.Prfii1SpEb {\n  margin-right: 0.25em;\n  position: relative;\n  color: #bbb;\n}\n\n.Prfii1SpEb::after {\n    content: '';\n    width: 100%;\n    height: 1px;\n    position: absolute;\n    left: 0;\n    top: 50%;\n    background-color: #bbb;\n  }\n\n.RjM9TcwKtg {\n  margin-top: 0.5em;\n  line-height: 1.16;\n  color: #555;\n  font-size: 12px;\n}\n\n.nLboISDstO {\n  margin-left: 0.5em;\n  color: #888;\n}\n\n.zIxwRJ1LdF {\n  font-size: 14px;\n  line-height: 1.36em;\n  color: #333;\n  display: flex;\n  align-items: center;\n}\n\n.PMSbyVSfsf {\n  color: #ff4742;\n}\n\n.fSRVoLiSel {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n}\n\n.y0mvzRsyQC {\n  width: 2.25em;\n  height: 2.25em;\n  border-radius: 50%;\n  overflow: hidden;\n}\n\n.bCeP7O7kIU {\n  width: 100%;\n  height: 100%;\n}\n\n.qUVi9b0o_d {\n  width: 2.25em;\n  flex-shrink: 0;\n}\n\n.GmQ6XKEO1A {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  padding: 0.75em;\n  background-color: #f4f4f4;\n  border-radius: 2px;\n}\n\n.WZc6v51Ui3 {\n  flex-grow: 1;\n  overflow: hidden;\n}\n\n.dAcTlOVojQ {\n  display: flex;\n  flex-direction: row;\n}\n\n.V5XYcsiIjs {\n  width: 2.25em;\n  height: 2.25em;\n  margin-right: 1em;\n  flex-shrink: 0;\n}\n\n.W5wfnXLeev {\n  margin-bottom: 0.428em;\n}\n\n.l9LJVab1Cf {\n  font-size: 14px;\n  color: #01bfa5;\n}\n\n.nA662Ba2GJ {\n  margin: 0 0.428em;\n  color: rgba(136, 136, 136, 0.4);\n}\n\n.XPgj2M188U {\n  line-height: 1.142;\n  font-size: 14px;\n  color: #555;\n  font-weight: bold;\n}\n\n.vCA0Qf4XEs {\n  line-height: 1.16em;\n  font-size: 12px;\n  color: #888;\n}\n\n.ZZd9f8t9vy {\n  margin-right: 1.333em;\n}\n\n.EPXlbwcmCC {\n  background-color: #f4f4f4;\n  font-size: 16px;\n  height: 2em;\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  padding-left: 0.75em;\n}\n\n.YcgygeHQkO {\n  height: 1em;\n  width: 1em;\n}\n\n.gOXjE4DJKC {\n  font-size: 12px;\n  color: rgba(0, 0, 0, 0.42);\n  margin-left: 1em;\n}\n\n.aihhYFJGJZ {\n  font-size: 16px;\n  height: 3.75em;\n  background-color: #f4f4f4;\n  border-radius: 2px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n\n.ULipY89W0D {\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n}\n\n.CpuhigVQTg {\n  height: 2.25em;\n  width: 2.25em;\n  margin: 0 0.75em;\n}\n\n.CpuhigVQTg > * {\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n  }\n\n.CpuhigVQTg > div {\n    color: #fff;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-weight: bold;\n  }\n\n.XzkgdAK3Dj {\n  font-size: 14px;\n  color: #555;\n}\n\n.fDWC8RPEk1 {\n  display: flex;\n  flex-shrink: 0;\n  align-items: center;\n  justify-content: center;\n  margin: 0 0.75em;\n}\n\n@keyframes Sy68QEc9eS {\n  from {\n    transform: rotateZ(0);\n  }\n\n  to {\n    transform: rotateZ(360deg);\n  }\n}\n\n.ZbPw85eBry {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  position: relative;\n}\n\n.z_IvwASUPS {\n  padding: 0.667em 0.857em;\n  font-size: 14px;\n  line-height: 1.143em;\n  border-radius: 2px;\n  background-color: #d7e4ff;\n}\n\n.d6OoDRmeTf {\n  display: flex;\n  justify-content: center;\n  margin-top: 12px;\n}\n\n.njERKrdqSf {\n  margin-top: 12px;\n}\n\n.IQkIKZtn7M {\n  margin-top: 4px;\n}\n","",{version:3,sources:["webpack://./src/modules-mini/message-section/components/ConversationMessages/BaseMessage/index.css"],names:[],mappings:"AAAA;EACE,sBAAsB;EACtB,eAAe;AACjB;;AAEA;EACE,oBAAoB;AACtB;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,uBAAuB;AACzB;;AAEA;EAEE,mBAAmB;EACnB,yBAAyB;AAC3B;;AAEA;EAEE,2BAA2B;AAC7B;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,mBAAmB;EACnB,eAAe;EACf,yBAAyB;EACzB,kBAAkB;AACpB;;AAEA;EACE,YAAY;EACZ,aAAa;EACb,mBAAmB;AACrB;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,aAAa;EACb,cAAc;EACd,oBAAoB;EACpB,cAAc;AAChB;;AAEA;EACE,YAAY;EACZ,sBAAsB;AACxB;;AAEA;EACE,oCAAoC;EACpC,4BAA4B;EAC5B,2BAA2B;EAC3B,4BAA4B;AAC9B;;AAEA;EACE,WAAW;EACX,eAAe;EACf,cAAc;EACd,qBAAqB;EACrB,4BAA4B;AAM9B;;AAJE;IACE,cAAc;IACd,eAAe;EACjB;;AAGF;EACE,WAAW;EACX,eAAe;EACf,cAAc;EACd,qBAAqB;EACrB,4BAA4B;AAM9B;;AAJE;IACE,cAAc;IACd,eAAe;EACjB;;AAIA;IACE,WAAW;IACX,mBAAmB;EACrB;;AAGF;EACE,gBAAgB;EAChB,uBAAuB;EACvB,iBAAiB;EACjB,WAAW;EACX,eAAe;EACf,gBAAgB;EAChB,qBAAqB;AACvB;;AAEA;EACE,oBAAoB;EACpB,kBAAkB;EAClB,WAAW;AAWb;;AATE;IACE,WAAW;IACX,WAAW;IACX,WAAW;IACX,kBAAkB;IAClB,OAAO;IACP,QAAQ;IACR,sBAAsB;EACxB;;AAGF;EACE,iBAAiB;EACjB,iBAAiB;EACjB,WAAW;EACX,eAAe;AACjB;;AAEA;EACE,kBAAkB;EAClB,WAAW;AACb;;AAEA;EACE,eAAe;EACf,mBAAmB;EACnB,WAAW;EACX,aAAa;EACb,mBAAmB;AACrB;;AAEA;EAEE,cAAc;AAChB;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,uBAAuB;EACvB,cAAc;AAChB;;AAEA;EACE,aAAa;EACb,cAAc;EACd,kBAAkB;EAClB,gBAAgB;AAClB;;AAEA;EACE,WAAW;EACX,YAAY;AACd;;AAEA;EACE,aAAa;EACb,cAAc;AAChB;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,mBAAmB;EACnB,eAAe;EACf,yBAAyB;EACzB,kBAAkB;AACpB;;AAEA;EACE,YAAY;EACZ,gBAAgB;AAClB;;AAEA;EACE,aAAa;EACb,mBAAmB;AACrB;;AAEA;EACE,aAAa;EACb,cAAc;EACd,iBAAiB;EACjB,cAAc;AAChB;;AAEA;EACE,sBAAsB;AACxB;;AAEA;EACE,eAAe;EACf,cAAc;AAChB;;AAEA;EACE,iBAAiB;EACjB,+BAA+B;AACjC;;AAEA;EACE,kBAAkB;EAClB,eAAe;EACf,WAAW;EACX,iBAAiB;AACnB;;AAEA;EACE,mBAAmB;EACnB,eAAe;EACf,WAAW;AACb;;AAEA;EACE,qBAAqB;AACvB;;AAEA;EACE,yBAAyB;EACzB,eAAe;EACf,WAAW;EACX,aAAa;EACb,mBAAmB;EACnB,2BAA2B;EAC3B,oBAAoB;AACtB;;AAEA;EACE,WAAW;EACX,UAAU;AACZ;;AAEA;EACE,eAAe;EACf,0BAA0B;EAC1B,gBAAgB;AAClB;;AAEA;EACE,eAAe;EACf,cAAc;EACd,yBAAyB;EACzB,kBAAkB;EAClB,aAAa;EACb,mBAAmB;EACnB,8BAA8B;AAChC;;AAEA;EACE,YAAY;EACZ,aAAa;EACb,mBAAmB;EACnB,2BAA2B;AAC7B;;AAEA;EACE,cAAc;EACd,aAAa;EACb,gBAAgB;AAelB;;AAbE;IACE,WAAW;IACX,YAAY;IACZ,kBAAkB;EACpB;;AAEA;IACE,WAAW;IACX,aAAa;IACb,mBAAmB;IACnB,uBAAuB;IACvB,iBAAiB;EACnB;;AAGF;EACE,eAAe;EACf,WAAW;AACb;;AAEA;EACE,aAAa;EACb,cAAc;EACd,mBAAmB;EACnB,uBAAuB;EACvB,gBAAgB;AAClB;;AAEA;EACE;IACE,qBAAqB;EACvB;;EAEA;IACE,0BAA0B;EAC5B;AACF;;AAEA;EACE,aAAa;EACb,sBAAsB;EACtB,mBAAmB;EACnB,kBAAkB;AACpB;;AAEA;EACE,wBAAwB;EACxB,eAAe;EACf,oBAAoB;EACpB,kBAAkB;EAClB,yBAAyB;AAC3B;;AAEA;EACE,aAAa;EACb,uBAAuB;EACvB,gBAAgB;AAClB;;AAEA;EACE,gBAAgB;AAClB;;AAEA;EACE,eAAe;AACjB",sourcesContent:[".root {\n  box-sizing: border-box;\n  padding: 0 16px;\n}\n\n.last-message {\n  padding-bottom: 16px;\n}\n\n.message {\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n}\n\n.message-send {\n  composes: message;\n  align-items: center;\n  justify-content: flex-end;\n}\n\n.message-receive {\n  composes: message;\n  justify-content: flex-start;\n}\n\n.product-origin {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  padding: 0.75em;\n  background-color: #f4f4f4;\n  border-radius: 2px;\n}\n\n.product-origin-info {\n  flex-grow: 1;\n  display: flex;\n  flex-direction: row;\n}\n\n.image-wrapper {\n  position: relative;\n}\n\n.product-image {\n  width: 2.25em;\n  height: 2.25em;\n  margin-right: 0.75em;\n  flex-shrink: 0;\n}\n\n.sold-out {\n  opacity: 0.6;\n  filter: grayscale(50%);\n}\n\n.background-settings {\n  background-color: rgba(0, 0, 0, 0.6);\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: 1.2em 1.2em;\n}\n\n.view-link {\n  color: #555;\n  font-size: 14px;\n  flex-shrink: 0;\n  text-decoration: none;\n  transition: color 0.25s ease;\n\n  &:hover {\n    color: #ee4d2d;\n    cursor: pointer;\n  }\n}\n\n.view-mall-link {\n  color: #555;\n  font-size: 14px;\n  flex-shrink: 0;\n  text-decoration: none;\n  transition: color 0.25s ease;\n\n  &:hover {\n    color: #ee4d2d;\n    cursor: pointer;\n  }\n}\n\n.banned {\n  & .view-link:hover {\n    color: #555;\n    cursor: not-allowed;\n  }\n}\n\n.product-name {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  line-height: 1.24;\n  color: #333;\n  font-size: 14px;\n  font-weight: 500;\n  word-break: break-all;\n}\n\n.origin-price {\n  margin-right: 0.25em;\n  position: relative;\n  color: #bbb;\n\n  &::after {\n    content: '';\n    width: 100%;\n    height: 1px;\n    position: absolute;\n    left: 0;\n    top: 50%;\n    background-color: #bbb;\n  }\n}\n\n.product-price {\n  margin-top: 0.5em;\n  line-height: 1.16;\n  color: #555;\n  font-size: 12px;\n}\n\n.product-stock {\n  margin-left: 0.5em;\n  color: #888;\n}\n\n.deleted-product {\n  font-size: 14px;\n  line-height: 1.36em;\n  color: #333;\n  display: flex;\n  align-items: center;\n}\n\n.banned-product {\n  composes: product-price;\n  color: #ff4742;\n}\n\n.view-product-block {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n}\n\n.avatar-wrap {\n  width: 2.25em;\n  height: 2.25em;\n  border-radius: 50%;\n  overflow: hidden;\n}\n\n.avatar {\n  width: 100%;\n  height: 100%;\n}\n\n.avatar-placeholder {\n  width: 2.25em;\n  flex-shrink: 0;\n}\n\n.order-origin {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  padding: 0.75em;\n  background-color: #f4f4f4;\n  border-radius: 2px;\n}\n\n.order-origin-info {\n  flex-grow: 1;\n  overflow: hidden;\n}\n\n.order-info {\n  display: flex;\n  flex-direction: row;\n}\n\n.order-product-image {\n  width: 2.25em;\n  height: 2.25em;\n  margin-right: 1em;\n  flex-shrink: 0;\n}\n\n.status-wrap {\n  margin-bottom: 0.428em;\n}\n\n.order-status {\n  font-size: 14px;\n  color: #01bfa5;\n}\n\n.pipe {\n  margin: 0 0.428em;\n  color: rgba(136, 136, 136, 0.4);\n}\n\n.order-product-name {\n  line-height: 1.142;\n  font-size: 14px;\n  color: #555;\n  font-weight: bold;\n}\n\n.order-detail {\n  line-height: 1.16em;\n  font-size: 12px;\n  color: #888;\n}\n\n.order-sn {\n  margin-right: 1.333em;\n}\n\n.shop-information {\n  background-color: #f4f4f4;\n  font-size: 16px;\n  height: 2em;\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  padding-left: 0.75em;\n}\n\n.shop-avatar {\n  height: 1em;\n  width: 1em;\n}\n\n.shop-name {\n  font-size: 12px;\n  color: rgba(0, 0, 0, 0.42);\n  margin-left: 1em;\n}\n\n.shop-origin {\n  font-size: 16px;\n  height: 3.75em;\n  background-color: #f4f4f4;\n  border-radius: 2px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n\n.shop-origin-info {\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n}\n\n.shop-origin-avatar {\n  height: 2.25em;\n  width: 2.25em;\n  margin: 0 0.75em;\n\n  & > * {\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n  }\n\n  & > div {\n    color: #fff;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-weight: bold;\n  }\n}\n\n.shop-origin-name {\n  font-size: 14px;\n  color: #555;\n}\n\n.view-shop-block {\n  display: flex;\n  flex-shrink: 0;\n  align-items: center;\n  justify-content: center;\n  margin: 0 0.75em;\n}\n\n@keyframes rotate {\n  from {\n    transform: rotateZ(0);\n  }\n\n  to {\n    transform: rotateZ(360deg);\n  }\n}\n\n.bubble {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  position: relative;\n}\n\n.offer-tips {\n  padding: 0.667em 0.857em;\n  font-size: 14px;\n  line-height: 1.143em;\n  border-radius: 2px;\n  background-color: #d7e4ff;\n}\n\n.center {\n  display: flex;\n  justify-content: center;\n  margin-top: 12px;\n}\n\n.marginTop12 {\n  margin-top: 12px;\n}\n\n.marginTop4 {\n  margin-top: 4px;\n}\n"],sourceRoot:""}]),o.locals={root:"lZX8jHufoA","last-message":"WTt5Zxu_wD",lastMessage:"WTt5Zxu_wD",message:"uAjc6BXz_7","message-send":"n7tPV8kPwM uAjc6BXz_7",messageSend:"n7tPV8kPwM uAjc6BXz_7","message-receive":"qAGJYsVJQu uAjc6BXz_7",messageReceive:"qAGJYsVJQu uAjc6BXz_7","product-origin":"ABKca6B6Ht",productOrigin:"ABKca6B6Ht","product-origin-info":"uCUlXlm0QJ",productOriginInfo:"uCUlXlm0QJ","image-wrapper":"z_Xhr9b5fr",imageWrapper:"z_Xhr9b5fr","product-image":"GdJhfJ3Op6",productImage:"GdJhfJ3Op6","sold-out":"sNqF64S6Ls",soldOut:"sNqF64S6Ls","background-settings":"bYxtrDTEPp",backgroundSettings:"bYxtrDTEPp","view-link":"DLvnpF6s13",viewLink:"DLvnpF6s13","view-mall-link":"DcB5O9mC5j",viewMallLink:"DcB5O9mC5j",banned:"BeN6c_qwKf","product-name":"h0x92TVWo6",productName:"h0x92TVWo6","origin-price":"Prfii1SpEb",originPrice:"Prfii1SpEb","product-price":"RjM9TcwKtg",productPrice:"RjM9TcwKtg","product-stock":"nLboISDstO",productStock:"nLboISDstO","deleted-product":"zIxwRJ1LdF",deletedProduct:"zIxwRJ1LdF","banned-product":"PMSbyVSfsf RjM9TcwKtg",bannedProduct:"PMSbyVSfsf RjM9TcwKtg","view-product-block":"fSRVoLiSel",viewProductBlock:"fSRVoLiSel","avatar-wrap":"y0mvzRsyQC",avatarWrap:"y0mvzRsyQC",avatar:"bCeP7O7kIU","avatar-placeholder":"qUVi9b0o_d",avatarPlaceholder:"qUVi9b0o_d","order-origin":"GmQ6XKEO1A",orderOrigin:"GmQ6XKEO1A","order-origin-info":"WZc6v51Ui3",orderOriginInfo:"WZc6v51Ui3","order-info":"dAcTlOVojQ",orderInfo:"dAcTlOVojQ","order-product-image":"V5XYcsiIjs",orderProductImage:"V5XYcsiIjs","status-wrap":"W5wfnXLeev",statusWrap:"W5wfnXLeev","order-status":"l9LJVab1Cf",orderStatus:"l9LJVab1Cf",pipe:"nA662Ba2GJ","order-product-name":"XPgj2M188U",orderProductName:"XPgj2M188U","order-detail":"vCA0Qf4XEs",orderDetail:"vCA0Qf4XEs","order-sn":"ZZd9f8t9vy",orderSn:"ZZd9f8t9vy","shop-information":"EPXlbwcmCC",shopInformation:"EPXlbwcmCC","shop-avatar":"YcgygeHQkO",shopAvatar:"YcgygeHQkO","shop-name":"gOXjE4DJKC",shopName:"gOXjE4DJKC","shop-origin":"aihhYFJGJZ",shopOrigin:"aihhYFJGJZ","shop-origin-info":"ULipY89W0D",shopOriginInfo:"ULipY89W0D","shop-origin-avatar":"CpuhigVQTg",shopOriginAvatar:"CpuhigVQTg","shop-origin-name":"XzkgdAK3Dj",shopOriginName:"XzkgdAK3Dj","view-shop-block":"fDWC8RPEk1",viewShopBlock:"fDWC8RPEk1",bubble:"ZbPw85eBry","offer-tips":"z_IvwASUPS",offerTips:"z_IvwASUPS",center:"d6OoDRmeTf",marginTop12:"njERKrdqSf",marginTop4:"IQkIKZtn7M",rotate:"Sy68QEc9eS"};const i=o},2431:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".oZpJocS6JM {\n  width: 100%;\n  font-size: 12px;\n  line-height: 16px;\n  color: #666;\n  margin-top: 4px;\n  text-align: right;\n}\n","",{version:3,sources:["webpack://./src/modules-mini/message-section/components/ConversationMessages/BaseMessage/message-card-time/index.css"],names:[],mappings:"AAAA;EACE,WAAW;EACX,eAAe;EACf,iBAAiB;EACjB,WAAW;EACX,eAAe;EACf,iBAAiB;AACnB",sourcesContent:[".root {\n  width: 100%;\n  font-size: 12px;\n  line-height: 16px;\n  color: #666;\n  margin-top: 4px;\n  text-align: right;\n}\n"],sourceRoot:""}]),o.locals={root:"oZpJocS6JM"};const i=o},8674:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".xQ_ZVDDSL5 {\n  margin: 0;\n  box-sizing: border-box;\n  max-width: 304px;\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  border-radius: 8px;\n  color: #212121;\n  font-size: 14px;\n  background-color: #fff;\n  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.1);\n  position: relative;\n}.xQ_ZVDDSL5.sXjBJZAZ93 {\n    background-color: #d7f7ef;\n  }\n\n.YDdA3QTCvb {\n  max-width: 304px;\n  line-height: 21px;\n}\n\n.xQ_ZVDDSL5.iqZfsj9oUb {\n  border-top-left-radius: 0;\n}\n\n.sXjBJZAZ93.iqZfsj9oUb {\n  border-top-right-radius: 0;\n}\n","",{version:3,sources:["webpack://./src/modules-mini/message-section/components/ConversationMessages/CustomMessage/index.css"],names:[],mappings:"AAAA;EACE,SAAS;EACT,sBAAsB;EACtB,gBAAgB;EAChB,qBAAqB;EACrB,qBAAqB;EACrB,kBAAkB;EAClB,cAAc;EACd,eAAe;EACf,sBAAsB;EACtB,wCAAwC;EACxC,kBAAkB;AAKpB,CAHE;IACE,yBAAyB;EAC3B;;AAGF;EACE,gBAAgB;EAChB,iBAAiB;AACnB;;AAEA;EACE,yBAAyB;AAC3B;;AAEA;EACE,0BAA0B;AAC5B",sourcesContent:[".message {\n  margin: 0;\n  box-sizing: border-box;\n  max-width: 304px;\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  border-radius: 8px;\n  color: #212121;\n  font-size: 14px;\n  background-color: #fff;\n  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.1);\n  position: relative;\n\n  &.send {\n    background-color: #d7f7ef;\n  }\n}\n\n.unsupport-faq {\n  max-width: 304px;\n  line-height: 21px;\n}\n\n.message.group-header {\n  border-top-left-radius: 0;\n}\n\n.send.group-header {\n  border-top-right-radius: 0;\n}\n"],sourceRoot:""}]),o.locals={message:"xQ_ZVDDSL5",send:"sXjBJZAZ93","unsupport-faq":"YDdA3QTCvb",unsupportFaq:"YDdA3QTCvb","group-header":"iqZfsj9oUb",groupHeader:"iqZfsj9oUb"};const i=o},5729:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".YcjSQZaiYc {\n  width: 100%;\n}\n\n._Ashy9f0tA {\n  width: 100%;\n  display: flex;\n  justify-content: end;\n}\n\n.fSJZu_YquU {\n  position: relative;\n  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.1);\n  border-radius: 8px;\n\n  .SIP-ChatbotUI-bubble-container {\n    max-width: 100%;\n    min-width: 206px;\n  }\n\n  .SIP-ChatbotUI-bubble-right>.SIP-ChatbotUI-bubble-container {\n    margin-right: 0;\n  }\n\n  .SIP-ChatbotUI-bubble {\n    margin-bottom: 0;\n    margin-top: 0;\n  }\n\n  .SIP-ChatbotUI-bubble-content {\n    border-bottom-left-radius: 0;\n    border-bottom-right-radius: 0;\n    min-width: 100%;\n  }\n}\n\n.Y4cWem7e_5 {\n  .SIP-ChatbotUI-bubble-container {\n    width: 304px;\n  }\n\n  .SIP-ChatbotUI-message {\n    width: 304px;\n  }\n\n  .SIP-ChatbotUI-message-content {\n    white-space: inherit;\n  }\n}\n\n.xEMX_TYVib {\n  box-shadow: none;\n  max-width: 100%;\n}\n\n.B6LeHbZUR9 .wsrNDmIVkJ {\n  background-color: #d7f7ef;\n}\n\n.Zs7DwUNAOo .wsrNDmIVkJ {\n   background-color: #fff;\n}\n\n.B6LeHbZUR9.Kc59Xhk6VY {\n  .SIP-ChatbotUI-bubble-content {\n    border-top-right-radius: 0;\n  }\n}\n\n.Zs7DwUNAOo.Kc59Xhk6VY {\n  .SIP-ChatbotUI-bubble-content {\n    border-top-left-radius: 0;\n  }\n}\n\n.wsrNDmIVkJ {\n  padding: 4px 8px;\n  line-height: 16px;\n  border-bottom-left-radius: 8px;\n  border-bottom-right-radius: 8px;\n}\n\n.sZFW9p2gok {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n\n.CAgprz0JPC {\n  font-size: 12px;\n  transform: scale(0.83); /* 10px */\n  transform-origin: 0 0;\n  color: #b7b7b7;\n}\n\n.bcDZffK0xq {\n  height: 16px;\n  color: #666;\n  font-size: 12px;\n  text-align: right;\n}\n","",{version:3,sources:["webpack://./src/modules-mini/message-section/components/ConversationMessages/FAQBotResponseMessage/index.css"],names:[],mappings:"AAAA;EACE,WAAW;AACb;;AAEA;EACE,WAAW;EACX,aAAa;EACb,oBAAoB;AACtB;;AAEA;EACE,kBAAkB;EAClB,wCAAwC;EACxC,kBAAkB;;EAElB;IACE,eAAe;IACf,gBAAgB;EAClB;;EAEA;IACE,eAAe;EACjB;;EAEA;IACE,gBAAgB;IAChB,aAAa;EACf;;EAEA;IACE,4BAA4B;IAC5B,6BAA6B;IAC7B,eAAe;EACjB;AACF;;AAEA;EACE;IACE,YAAY;EACd;;EAEA;IACE,YAAY;EACd;;EAEA;IACE,oBAAkB;EACpB;AACF;;AAEA;EACE,gBAAgB;EAChB,eAAe;AACjB;;AAEA;EACE,yBAAyB;AAC3B;;AAEA;GACG,sBAAsB;AACzB;;AAEA;EACE;IACE,0BAA0B;EAC5B;AACF;;AAEA;EACE;IACE,yBAAyB;EAC3B;AACF;;AAEA;EACE,gBAAgB;EAChB,iBAAiB;EACjB,8BAA8B;EAC9B,+BAA+B;AACjC;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,8BAA8B;AAChC;;AAEA;EACE,eAAe;EACf,sBAAsB,EAAE,SAAS;EACjC,qBAAqB;EACrB,cAAc;AAChB;;AAEA;EACE,YAAY;EACZ,WAAW;EACX,eAAe;EACf,iBAAiB;AACnB",sourcesContent:[".root {\n  width: 100%;\n}\n\n.sendWrapper {\n  width: 100%;\n  display: flex;\n  justify-content: end;\n}\n\n.webchat-msg {\n  position: relative;\n  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.1);\n  border-radius: 8px;\n\n  :global(.SIP-ChatbotUI-bubble-container) {\n    max-width: 100%;\n    min-width: 206px;\n  }\n\n  :global(.SIP-ChatbotUI-bubble-right>.SIP-ChatbotUI-bubble-container) {\n    margin-right: 0;\n  }\n\n  :global(.SIP-ChatbotUI-bubble) {\n    margin-bottom: 0;\n    margin-top: 0;\n  }\n\n  :global(.SIP-ChatbotUI-bubble-content) {\n    border-bottom-left-radius: 0;\n    border-bottom-right-radius: 0;\n    min-width: 100%;\n  }\n}\n\n.web-faq {\n  :global(.SIP-ChatbotUI-bubble-container) {\n    width: 304px;\n  }\n\n  :global(.SIP-ChatbotUI-message) {\n    width: 304px;\n  }\n\n  :global(.SIP-ChatbotUI-message-content) {\n    white-space: unset;\n  }\n}\n\n.web-selectOrder {\n  box-shadow: none;\n  max-width: 100%;\n}\n\n.send .footer {\n  background-color: #d7f7ef;\n}\n\n.receive .footer {\n   background-color: #fff;\n}\n\n.send.group-header {\n  :global(.SIP-ChatbotUI-bubble-content) {\n    border-top-right-radius: 0;\n  }\n}\n\n.receive.group-header {\n  :global(.SIP-ChatbotUI-bubble-content) {\n    border-top-left-radius: 0;\n  }\n}\n\n.footer {\n  padding: 4px 8px;\n  line-height: 16px;\n  border-bottom-left-radius: 8px;\n  border-bottom-right-radius: 8px;\n}\n\n.label-footer {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n\n.label {\n  font-size: 12px;\n  transform: scale(0.83); /* 10px */\n  transform-origin: 0 0;\n  color: #b7b7b7;\n}\n\n.time {\n  height: 16px;\n  color: #666;\n  font-size: 12px;\n  text-align: right;\n}\n"],sourceRoot:""}]),o.locals={root:"YcjSQZaiYc",sendWrapper:"_Ashy9f0tA","webchat-msg":"fSJZu_YquU",webchatMsg:"fSJZu_YquU","web-faq":"Y4cWem7e_5",webFaq:"Y4cWem7e_5","web-selectOrder":"xEMX_TYVib",webSelectOrder:"xEMX_TYVib",send:"B6LeHbZUR9",footer:"wsrNDmIVkJ",receive:"Zs7DwUNAOo","group-header":"Kc59Xhk6VY",groupHeader:"Kc59Xhk6VY","label-footer":"sZFW9p2gok",labelFooter:"sZFW9p2gok",label:"CAgprz0JPC",time:"bcDZffK0xq"};const i=o},699:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".zMhG2GcJB5 {\n  height: 506px;\n  margin-top: 24px;\n  margin-bottom: -24px;\n  background: #f3f3f3;\n  border-radius: 4px;\n}\n\n.rHWU4R6moI {\n  margin-bottom: 16px;\n  margin-top: -4px;\n}\n\n.UdG8ieRpin {\n  text-align: right;\n}\n","",{version:3,sources:["webpack://./src/modules-mini/message-section/components/ConversationMessages/FAQHistoryMessage/HistoryList/index.css"],names:[],mappings:"AAAA;EACE,aAAa;EACb,gBAAgB;EAChB,oBAAoB;EACpB,mBAAmB;EACnB,kBAAkB;AACpB;;AAEA;EACE,mBAAmB;EACnB,gBAAgB;AAClB;;AAEA;EACE,iBAAiB;AACnB",sourcesContent:[".list {\n  height: 506px;\n  margin-top: 24px;\n  margin-bottom: -24px;\n  background: #f3f3f3;\n  border-radius: 4px;\n}\n\n.message {\n  margin-bottom: 16px;\n  margin-top: -4px;\n}\n\n.right {\n  text-align: right;\n}\n"],sourceRoot:""}]),o.locals={list:"zMhG2GcJB5",message:"rHWU4R6moI",right:"UdG8ieRpin"};const i=o},7539:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".IFFE2hRR3g {\n  width: 304px;\n  padding: 12px;\n  background-color: #fff;\n  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.1);\n  border-radius: 8px;\n  box-sizing: border-box;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.P387dp5Goh {\n  width: 600px;\n  height: 552px;\n}\n\n.eefwgb8vaR {\n  width: 100%;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  font-size: 14px;\n  line-height: 16px;\n  margin-bottom: 8px;\n  color: #333;\n  font-weight: 500;\n}\n\n.XwbtiwDbU3 {\n  background: #f6f6f6;\n  border-radius: 4px;\n  padding: 8px;\n}\n\n.nCqHkv5xsO {\n  font-size: 14px;\n  line-height: 16px;\n  color: #2673dd;\n  margin-top: 8px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.KXHfh5bou2 {\n  font-size: 14px;\n  color: #666;\n  line-height: 20px;\n  width: 264px;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  word-break: break-all;\n  white-space: nowrap;\n}\n\n.VVpk4IRKI4 {\n  font-size: 12px;\n  color: #666;\n}\n","",{version:3,sources:["webpack://./src/modules-mini/message-section/components/ConversationMessages/FAQHistoryMessage/index.css"],names:[],mappings:"AAAA;EACE,YAAY;EACZ,aAAa;EACb,sBAAsB;EACtB,wCAAwC;EACxC,kBAAkB;EAClB,sBAAsB;EACtB,eAAe;EACf,yBAAyB;AAC3B;;AAEA;EACE,YAAY;EACZ,aAAa;AACf;;AAEA;EACE,WAAW;EACX,mBAAmB;EACnB,gBAAgB;EAChB,uBAAuB;EACvB,eAAe;EACf,iBAAiB;EACjB,kBAAkB;EAClB,WAAW;EACX,gBAAgB;AAClB;;AAEA;EACE,mBAAmB;EACnB,kBAAkB;EAClB,YAAY;AACd;;AAEA;EACE,eAAe;EACf,iBAAiB;EACjB,cAAc;EACd,eAAe;EACf,aAAa;EACb,8BAA8B;EAC9B,mBAAmB;AACrB;;AAEA;EACE,eAAe;EACf,WAAW;EACX,iBAAiB;EACjB,YAAY;EACZ,uBAAuB;EACvB,gBAAgB;EAChB,qBAAqB;EACrB,mBAAmB;AACrB;;AAEA;EACE,eAAe;EACf,WAAW;AACb",sourcesContent:[".root {\n  width: 304px;\n  padding: 12px;\n  background-color: #fff;\n  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.1);\n  border-radius: 8px;\n  box-sizing: border-box;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.container {\n  width: 600px;\n  height: 552px;\n}\n\n.header {\n  width: 100%;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  font-size: 14px;\n  line-height: 16px;\n  margin-bottom: 8px;\n  color: #333;\n  font-weight: 500;\n}\n\n.content {\n  background: #f6f6f6;\n  border-radius: 4px;\n  padding: 8px;\n}\n\n.footer {\n  font-size: 14px;\n  line-height: 16px;\n  color: #2673dd;\n  margin-top: 8px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.preview {\n  font-size: 14px;\n  color: #666;\n  line-height: 20px;\n  width: 264px;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  word-break: break-all;\n  white-space: nowrap;\n}\n\n.time {\n  font-size: 12px;\n  color: #666;\n}\n"],sourceRoot:""}]),o.locals={root:"IFFE2hRR3g",container:"P387dp5Goh",header:"eefwgb8vaR",content:"XwbtiwDbU3",footer:"nCqHkv5xsO",preview:"KXHfh5bou2",time:"VVpk4IRKI4"};const i=o},5965:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".sWnNfV3B5s {\n  font-size: 14px;\n  border-radius: 8px;\n  background-color: #fff;\n  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.1);\n  max-width: 304px;\n  padding: 0.667em 0.857em;\n  line-height: 1.143em;\n}.sWnNfV3B5s.zlsgqeBenz {\n    background-color: #d7e4ff;\n  }\n\n.TfXcQ_zrLr {\n  color: #395692;\n  text-decoration: underline;\n  cursor: pointer;\n}\n","",{version:3,sources:["webpack://./src/modules-mini/message-section/components/ConversationMessages/OrderMessage/index.css"],names:[],mappings:"AAAA;EACE,eAAe;EACf,kBAAkB;EAClB,sBAAsB;EACtB,wCAAwC;EACxC,gBAAgB;EAChB,wBAAwB;EACxB,oBAAoB;AAKtB,CAHE;IACE,yBAAyB;EAC3B;;AAGF;EACE,cAAc;EACd,0BAA0B;EAC1B,eAAe;AACjB",sourcesContent:[".order {\n  font-size: 14px;\n  border-radius: 8px;\n  background-color: #fff;\n  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.1);\n  max-width: 304px;\n  padding: 0.667em 0.857em;\n  line-height: 1.143em;\n\n  &.send {\n    background-color: #d7e4ff;\n  }\n}\n\n.link {\n  color: #395692;\n  text-decoration: underline;\n  cursor: pointer;\n}\n"],sourceRoot:""}]),o.locals={order:"sWnNfV3B5s",send:"zlsgqeBenz",link:"TfXcQ_zrLr"};const i=o},1500:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".E_OLrXNoEk {\n  background: #f5f6f8;\n  padding: 8px;\n  width: 224px;\n  word-break: break-all;\n  font-size: 14px;\n  box-sizing: content-box;\n}\n\n.LDttZcGOz6 {\n  box-sizing: content-box;\n  border-top: 1px solid #e8e8e8;\n  height: 36px;\n  line-height: 36px;\n  width: 224px;\n  word-break: break-all;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  color: #888;\n  cursor: pointer;\n  text-align: center;\n  white-space: nowrap;\n}\n\n.wf9mOd836y {\n  padding-bottom: 8px;\n  line-height: 21px;\n}\n\n.fI2ODdwFGy {\n  color: #ee4d2d;\n}\n\n.lPtsH0BIt2 {\n  color: #ccc;\n  cursor: default;\n}\n","",{version:3,sources:["webpack://./src/modules-mini/message-section/components/ConversationMessages/PondMessage/index.css"],names:[],mappings:"AAAA;EACE,mBAAmB;EACnB,YAAY;EACZ,YAAY;EACZ,qBAAqB;EACrB,eAAe;EACf,uBAAuB;AACzB;;AAEA;EACE,uBAAuB;EACvB,6BAA6B;EAC7B,YAAY;EACZ,iBAAiB;EACjB,YAAY;EACZ,qBAAqB;EACrB,gBAAgB;EAChB,uBAAuB;EACvB,WAAW;EACX,eAAe;EACf,kBAAkB;EAClB,mBAAmB;AACrB;;AAEA;EACE,mBAAmB;EACnB,iBAAiB;AACnB;;AAEA;EACE,cAAc;AAChB;;AAEA;EACE,WAAW;EACX,eAAe;AACjB",sourcesContent:[".root {\n  background: #f5f6f8;\n  padding: 8px;\n  width: 224px;\n  word-break: break-all;\n  font-size: 14px;\n  box-sizing: content-box;\n}\n\n.option {\n  box-sizing: content-box;\n  border-top: 1px solid #e8e8e8;\n  height: 36px;\n  line-height: 36px;\n  width: 224px;\n  word-break: break-all;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  color: #888;\n  cursor: pointer;\n  text-align: center;\n  white-space: nowrap;\n}\n\n.title {\n  padding-bottom: 8px;\n  line-height: 21px;\n}\n\n.primary {\n  color: #ee4d2d;\n}\n\n.invalid {\n  color: #ccc;\n  cursor: default;\n}\n"],sourceRoot:""}]),o.locals={root:"E_OLrXNoEk",option:"LDttZcGOz6",title:"wf9mOd836y",primary:"fI2ODdwFGy",invalid:"lPtsH0BIt2"};const i=o},6496:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".EfqwjCbjYK {\n  -webkit-backdrop-filter: blur(5px);\n          backdrop-filter: blur(5px);\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  box-sizing: border-box;\n  width: 100%;\n  padding: 4px 12px;\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  background-color: rgba(0, 0, 0, 0.3);\n  color: #fff;\n  font-size: 14px;\n  cursor: pointer;\n}\n\n.lRBlAKma_w {\n  line-height: 20px;\n  flex-grow: 1;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n\n.MxoUoxkjhX {\n  cursor: pointer;\n  display: inline-block;\n  width: 16px;\n  height: 16px;\n  flex-shrink: 0;\n  flex-grow: 0;\n  color: #fff;\n  margin-right: 4px;\n}\n","",{version:3,sources:["webpack://./src/modules-mini/message-section/components/UnreadBriefMessages/index.css"],names:[],mappings:"AAAA;EACE,kCAA0B;UAA1B,0BAA0B;EAC1B,aAAa;EACb,mBAAmB;EACnB,mBAAmB;EACnB,sBAAsB;EACtB,WAAW;EACX,iBAAiB;EACjB,kBAAkB;EAClB,SAAS;EACT,OAAO;EACP,oCAAoC;EACpC,WAAW;EACX,eAAe;EACf,eAAe;AACjB;;AAEA;EACE,iBAAiB;EACjB,YAAY;EACZ,gBAAgB;EAChB,mBAAmB;EACnB,uBAAuB;AACzB;;AAEA;EACE,eAAe;EACf,qBAAqB;EACrB,WAAW;EACX,YAAY;EACZ,cAAc;EACd,YAAY;EACZ,WAAW;EACX,iBAAiB;AACnB",sourcesContent:[".root {\n  backdrop-filter: blur(5px);\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  box-sizing: border-box;\n  width: 100%;\n  padding: 4px 12px;\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  background-color: rgba(0, 0, 0, 0.3);\n  color: #fff;\n  font-size: 14px;\n  cursor: pointer;\n}\n\n.new-message {\n  line-height: 20px;\n  flex-grow: 1;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n\n.new-message-arrow {\n  cursor: pointer;\n  display: inline-block;\n  width: 16px;\n  height: 16px;\n  flex-shrink: 0;\n  flex-grow: 0;\n  color: #fff;\n  margin-right: 4px;\n}\n"],sourceRoot:""}]),o.locals={root:"EfqwjCbjYK","new-message":"lRBlAKma_w",newMessage:"lRBlAKma_w","new-message-arrow":"MxoUoxkjhX",newMessageArrow:"MxoUoxkjhX"};const i=o},9628:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".aqZovfh_6J {\n  width: 100%;\n  height: 24px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin-top: 12px;\n}\n\n.tUdsf8ugmK {\n  width: calc(100% - 6px);\n  position: absolute;\n  left: 0;\n  top: 12px;\n  z-index: 9999;\n  margin-top: 0;\n}\n\n.tjkyFHjPjJ {\n  box-sizing: border-box;\n  padding: 6px 10px;\n  height: 24px;\n  background: #fafafa;\n  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.1);\n  border-radius: 8px;\n  font-size: 12px;\n  line-height: 14px;\n  color: #666;\n}\n","",{version:3,sources:["webpack://./src/modules-mini/message-section/components/header-date/index.css"],names:[],mappings:"AAAA;EACE,WAAW;EACX,YAAY;EACZ,aAAa;EACb,uBAAuB;EACvB,mBAAmB;EACnB,gBAAgB;AAClB;;AAEA;EACE,uBAAuB;EACvB,kBAAkB;EAClB,OAAO;EACP,SAAS;EACT,aAAa;EACb,aAAa;AACf;;AAEA;EACE,sBAAsB;EACtB,iBAAiB;EACjB,YAAY;EACZ,mBAAmB;EACnB,wCAAwC;EACxC,kBAAkB;EAClB,eAAe;EACf,iBAAiB;EACjB,WAAW;AACb",sourcesContent:[".root {\n  width: 100%;\n  height: 24px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin-top: 12px;\n}\n\n.absolute {\n  width: calc(100% - 6px);\n  position: absolute;\n  left: 0;\n  top: 12px;\n  z-index: 9999;\n  margin-top: 0;\n}\n\n.time {\n  box-sizing: border-box;\n  padding: 6px 10px;\n  height: 24px;\n  background: #fafafa;\n  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.1);\n  border-radius: 8px;\n  font-size: 12px;\n  line-height: 14px;\n  color: #666;\n}\n"],sourceRoot:""}]),o.locals={root:"aqZovfh_6J",absolute:"tUdsf8ugmK",time:"tjkyFHjPjJ"};const i=o},1337:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".N1x9FHSgsu {\n  height: 100%;\n  flex-grow: 1;\n}\n\n.AbLCooIIar {\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 0;\n}\n\n.cmgkmzn7la {\n  outline: 0 none;\n  overscroll-behavior: contain;\n}\n\n.kRvCnxx7Qk {\n  position: absolute;\n  bottom: 16px;\n  right: 8px;\n  cursor: pointer;\n  width: 56px;\n  height: 56px;\n}\n","",{version:3,sources:["webpack://./src/modules-mini/message-section/components/index.css"],names:[],mappings:"AAAA;EACE,YAAY;EACZ,YAAY;AACd;;AAEA;EACE,kBAAkB;EAClB,OAAO;EACP,QAAQ;EACR,SAAS;AACX;;AAEA;EACE,eAAe;EACf,4BAA4B;AAC9B;;AAEA;EACE,kBAAkB;EAClB,YAAY;EACZ,UAAU;EACV,eAAe;EACf,WAAW;EACX,YAAY;AACd",sourcesContent:[".message-section {\n  height: 100%;\n  flex-grow: 1;\n}\n\n.layers {\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 0;\n}\n\n.grid {\n  outline: 0 none;\n  overscroll-behavior: contain;\n}\n\n.iconWrapper {\n  position: absolute;\n  bottom: 16px;\n  right: 8px;\n  cursor: pointer;\n  width: 56px;\n  height: 56px;\n}\n"],sourceRoot:""}]),o.locals={"message-section":"N1x9FHSgsu",messageSection:"N1x9FHSgsu",layers:"AbLCooIIar",grid:"cmgkmzn7la",iconWrapper:"kRvCnxx7Qk"};const i=o},3645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,s,a){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(r)for(var i=0;i<this.length;i++){var c=this[i][0];null!=c&&(o[c]=!0)}for(var u=0;u<e.length;u++){var l=[].concat(e[u]);r&&o[l[0]]||(void 0!==a&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=a),n&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=n):l[2]=n),s&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=s):l[4]="".concat(s)),t.push(l))}},t}},7537:e=>{"use strict";e.exports=function(e){var t=e[1],n=e[3];if(!n)return t;if("function"==typeof btoa){var r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),s="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),a="/*# ".concat(s," */"),o=n.sources.map((function(e){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(e," */")}));return[t].concat(o).concat([a]).join("\n")}return[t].join("\n")}},5666:e=>{var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,s="function"==typeof Symbol?Symbol:{},a=s.iterator||"@@iterator",o=s.asyncIterator||"@@asyncIterator",i=s.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var s=t&&t.prototype instanceof h?t:h,a=Object.create(s.prototype),o=new w(r||[]);return a._invoke=function(e,t,n){var r=d;return function(s,a){if(r===g)throw new Error("Generator is already running");if(r===A){if("throw"===s)throw a;return T()}for(n.method=s,n.arg=a;;){var o=n.delegate;if(o){var i=x(o,n);if(i){if(i===f)continue;return i}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=A,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=g;var c=l(e,t,n);if("normal"===c.type){if(r=n.done?A:p,c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=A,n.method="throw",n.arg=c.arg)}}}(e,n,o),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var d="suspendedStart",p="suspendedYield",g="executing",A="completed",f={};function h(){}function m(){}function E(){}var v={};v[a]=function(){return this};var S=Object.getPrototypeOf,b=S&&S(S(O([])));b&&b!==n&&r.call(b,a)&&(v=b);var _=E.prototype=h.prototype=Object.create(v);function y(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function n(s,a,o,i){var c=l(e[s],e,a);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,o,i)}),(function(e){n("throw",e,o,i)})):t.resolve(d).then((function(e){u.value=e,o(u)}),(function(e){return n("throw",e,o,i)}))}i(c.arg)}var s;this._invoke=function(e,r){function a(){return new t((function(t,s){n(e,r,t,s)}))}return s=s?s.then(a,a):a()}}function x(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,x(e,n),"throw"===n.method))return f;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var s=l(r,e.iterator,n.arg);if("throw"===s.type)return n.method="throw",n.arg=s.arg,n.delegate=null,f;var a=s.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,f):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,f)}function M(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(M,this),this.reset(!0)}function O(e){if(e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var s=-1,o=function n(){for(;++s<e.length;)if(r.call(e,s))return n.value=e[s],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:T}}function T(){return{value:t,done:!0}}return m.prototype=_.constructor=E,E.constructor=m,m.displayName=c(E,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,c(e,i,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},y(C.prototype),C.prototype[o]=function(){return this},e.AsyncIterator=C,e.async=function(t,n,r,s,a){void 0===a&&(a=Promise);var o=new C(u(t,n,r,s),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},y(_),c(_,i,"Generator"),_[a]=function(){return this},_.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=O,w.prototype={constructor:w,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function s(r,s){return i.type="throw",i.arg=e,n.next=r,s&&(n.method="next",n.arg=t),!!s}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return s("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return s(o.catchLoc,!0);if(this.prev<o.finallyLoc)return s(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return s(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return s(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var s=this.tryEntries[n];if(s.tryLoc<=this.prev&&r.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var a=s;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var s=r.arg;I(n)}return s}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:O(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),f}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}},3379:e=>{"use strict";var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var a={},o=[],i=0;i<e.length;i++){var c=e[i],u=r.base?c[0]+r.base:c[0],l=a[u]||0,d="".concat(u," ").concat(l);a[u]=l+1;var p=n(d),g={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==p)t[p].references++,t[p].updater(g);else{var A=s(g,r);r.byIndex=i,t.splice(i,0,{identifier:d,updater:A,references:1})}o.push(d)}return o}function s(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,s){var a=r(e=e||[],s=s||{});return function(e){e=e||[];for(var o=0;o<a.length;o++){var i=n(a[o]);t[i].references--}for(var c=r(e,s),u=0;u<a.length;u++){var l=n(a[u]);0===t[l].references&&(t[l].updater(),t.splice(l,1))}a=c}}},569:e=>{"use strict";var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},9216:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},3565:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},7795:e=>{"use strict";e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var s=void 0!==n.layer;s&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,s&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var a=n.sourceMap;a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},4589:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},1361:e=>{"use strict";e.exports=M},2236:e=>{"use strict";e.exports=j},7004:e=>{"use strict";e.exports=d},2438:e=>{"use strict";e.exports=B},2066:e=>{"use strict";e.exports=P},7367:e=>{"use strict";e.exports=T},5423:e=>{"use strict";e.exports=L},9977:e=>{"use strict";e.exports=E},1506:e=>{"use strict";e.exports=q},5247:e=>{"use strict";e.exports=U},4209:e=>{"use strict";e.exports=S},5401:e=>{"use strict";e.exports=x},411:e=>{"use strict";e.exports=b},3123:e=>{"use strict";e.exports=C},7770:e=>{"use strict";e.exports=y},914:e=>{"use strict";e.exports=_},3195:e=>{"use strict";e.exports=G},8310:e=>{"use strict";e.exports=w},8661:e=>{"use strict";e.exports=m},8550:e=>{"use strict";e.exports=D},8156:t=>{"use strict";t.exports=e},9424:e=>{"use strict";e.exports=N},4756:e=>{"use strict";e.exports=n},4236:e=>{"use strict";e.exports=o},2779:e=>{"use strict";e.exports=i},3202:e=>{"use strict";e.exports=c},2167:e=>{"use strict";e.exports=a},8252:e=>{"use strict";e.exports=g},5447:e=>{"use strict";e.exports=t},1655:e=>{"use strict";e.exports=v},4944:e=>{"use strict";e.exports=A},8509:e=>{"use strict";e.exports=I},5600:e=>{"use strict";e.exports=p},2511:e=>{"use strict";e.exports=l},3682:e=>{"use strict";e.exports=O},1501:e=>{"use strict";e.exports=r},2760:e=>{"use strict";e.exports=F},3162:e=>{"use strict";e.exports=s},1855:e=>{"use strict";e.exports=u},2839:e=>{"use strict";e.exports=R},4148:e=>{"use strict";e.exports=k},4672:e=>{"use strict";e.exports=h},459:e=>{"use strict";e.exports=f},907:(e,t,n)=>{"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:()=>r})},885:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(181);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,s,a=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){i=!0,s=e}finally{try{o||null==n.return||n.return()}finally{if(i)throw s}}return a}}(e,t)||(0,r.Z)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},181:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(907);function s(e,t){if(e){if("string"==typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}}},z={};function Q(e){var t=z[e];if(void 0!==t)return t.exports;var n=z[e]={id:e,exports:{}};return V[e](n,n.exports,Q),n.exports}Q.m=V,Y=[],Q.O=(e,t,n,r)=>{if(!t){var s=1/0;for(c=0;c<Y.length;c++){for(var[t,n,r]=Y[c],a=!0,o=0;o<t.length;o++)(!1&r||s>=r)&&Object.keys(Q.O).every((e=>Q.O[e](t[o])))?t.splice(o--,1):(a=!1,r<s&&(s=r));if(a){Y.splice(c--,1);var i=n();void 0!==i&&(e=i)}}return e}r=r||0;for(var c=Y.length;c>0&&Y[c-1][2]>r;c--)Y[c]=Y[c-1];Y[c]=[t,n,r]},Q.F={},Q.E=e=>{Object.keys(Q.F).map((t=>{Q.F[t](e)}))},Q.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return Q.d(t,{a:t}),t},W=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,Q.t=function(e,t){if(1&t&&(e=this(e)),8&t)return e;if("object"==typeof e&&e){if(4&t&&e.__esModule)return e;if(16&t&&"function"==typeof e.then)return e}var n=Object.create(null);Q.r(n);var r={};H=H||[null,W({}),W([]),W(W)];for(var s=2&t&&e;"object"==typeof s&&!~H.indexOf(s);s=W(s))Object.getOwnPropertyNames(s).forEach((t=>r[t]=()=>e[t]));return r.default=()=>e,Q.d(n,r),n},Q.d=(e,t)=>{for(var n in t)Q.o(t,n)&&!Q.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},Q.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),Q.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},Z={374:0,574:0},Q.F.j=e=>{if(!Q.o(Z,e)||void 0===Z[e]){Z[e]=null;var t=document.createElement("link");Q.nc&&t.setAttribute("nonce",Q.nc),t.rel="prefetch",t.as="script",t.href=Q.p+Q.u(e),document.head.appendChild(t)}},Q.O.j=e=>0===Z[e],Q.nc=void 0,Q.O(0,[374],(()=>{}),5);var X={};return(()=>{"use strict";Q.r(X),Q.d(X,{default:()=>Jp,getModule:()=>Kp});var e={};function t(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}Q.r(e),Q.d(e,{ChatbotProvider:()=>ri,HIGHLIGHT_TIMEOUT:()=>Xt,abortAllSendingMessages:()=>Es,cancelSendingMessageRequested:()=>vs,cancelSendingMessageSucceeded:()=>Ss,changeTranslateStatus:()=>Xs,chatbotIntentsReportRequest:()=>ii,closeChatbotMediaPreview:()=>oi,collectChatbotReportTask:()=>Di,deleteConversationMessageHash:()=>qn,deleteFakingMessages:()=>xo,deleteMessageContentAndId:()=>Mo,deleteMessageIdInHash:()=>Co,deleteMessagePostRequested:()=>yo,deleteMessageRequested:()=>_o,deleteVideoInfo:()=>sr,evaluationRequested:()=>Be,fetchConversationMessagesSaga:()=>Pt,fetchFaqMessagesRequested:()=>ba,fetchFaqMessagesSucceeded:()=>_a,fetchFaqSessionSucceed:()=>ci,fetchMessagesRequested:()=>Ot,fetchMessagesRequestedSaga:()=>qt,fetchMessagesRequestedWithPreloadSaga:()=>Ft,fetchMessagesSucceeded:()=>Tt,fillMessageContent:()=>ot,fillMessageRequested:()=>st,getChatbotSdk:()=>ei,handleCurrentConversationChange:()=>co,handleFaqExpiredMessage:()=>Ts,handleNewConversationMessageQueue:()=>so,handleSendSucceededMessages:()=>Os,handleSensitiveUrl:()=>ga,makeServiceList:()=>gr,messageSyncUpdate:()=>No,receiveMessageRequested:()=>Za,receiveMessageSucceeded:()=>Va,reducerMap:()=>tc,replaceHttpLinkWithHttps:()=>tr,resendMessageRequested:()=>mn,resendOfflineMessagesOnce:()=>Tn,resendOfflineMessagesOnceSucceed:()=>Bn,resetConversationQueue:()=>Xa,resetCurrentConversationReplyToMessage:()=>an,resetMessagesFailedByOffline:()=>On,resetNewConversationQueue:()=>za,resetOldConversationQueue:()=>Qa,resetReplyToMessage:()=>$t,resetScrollToMessageId:()=>nn,sagas:()=>ec,scrollToMessage:()=>en,scrollToMessageSaga:()=>on,sendMessages:()=>Bs,sendMessagesFailed:()=>ms,sendMessagesFailedByOffline:()=>wn,sendMessagesRequested:()=>gs,sendMessagesSucceeded:()=>As,sendMessagesToPending:()=>hs,sendTranslateFeedback:()=>Js,sendVideoMessageRequested:()=>bs,sendingMessages:()=>fs,setCurrentConversationReplyToMessage:()=>sn,setEntryPoint:()=>Wi,setInScrollToMessage:()=>rn,setReplyToMessage:()=>Jt,setScrollToMessageId:()=>tn,setSecurityTipsMessage:()=>kt,showChatbotImage:()=>ai,showFaqHistoryModal:()=>xa,showMyRateCard:()=>we,showRateCard:()=>Oe,showTranslateFeedback:()=>Ks,translateMessagesRequested:()=>Qs,updateChatbotFrom:()=>ti,updateCurrentFaqId:()=>Ca,updateFetchFaqMessagesRequestedStatus:()=>ya,updateFetchMessagesRequestedStatus:()=>Bt,updateHasConflict:()=>Xi,updateMessageFillStatusMap:()=>rt,updateMessagesRelated:()=>At,updateResendConversationMessage:()=>Rn,updateVideoInfo:()=>rr,uploadMonitor:()=>ir,uploadVideGetResult:()=>dr,uploadVideo:()=>Ar,uploadVideoGetToken:()=>cr,watchDeleteMessage:()=>Oo,watchEvaluation:()=>Re,watchFaqHistorySagas:()=>wa,watchFetchMessage:()=>Lt,watchFill:()=>ut,watchNewConversationMessageQueue:()=>ao,watchOffline:()=>Pn,watchOldConversationMessageQueue:()=>oo,watchReceive:()=>uo,watchReplySaga:()=>dn,watchResend:()=>vn,watchSend:()=>js,watchSendWithCancel:()=>Ns,watchTranslate:()=>ia});var n=Q(8156),r=Q.n(n),s=Q(5447);function a(){return a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(this,arguments)}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function A(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var h=Q(4756),m=Q(1501),E=Q.n(m),v=Q(3162),S=Q.n(v),b=Q(2167),_=Q.n(b),y=Q(4236),C=Q.n(y),x=Q(2779),M=Q.n(x),I=Q(3202),w=Q.n(I),O=Q(1855),T=Q(2511),B=Q(7004),k=Q.n(B),R=Q(3379),P=Q.n(R),D=Q(7795),N=Q.n(D),j=Q(569),F=Q.n(j),q=Q(3565),U=Q.n(q),L=Q(9216),G=Q.n(L),Y=Q(4589),H=Q.n(Y),W=Q(1337),Z={};Z.styleTagTransform=H(),Z.setAttributes=U(),Z.insert=F().bind(null,"head"),Z.domAPI=N(),Z.insertStyleElement=G(),P()(W.Z,Z);const V=W.Z&&W.Z.locals?W.Z.locals:void 0;var z=r().createContext({});z.displayName="ImgCacheContext";var K=Q(5600),J=Q(907),$=Q(181);function ee(e){return function(e){if(Array.isArray(e))return(0,J.Z)(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,$.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var te=Q(8252),ne=Q(7757),re=Q.n(ne),se=Q(4944),ae=Q(459);function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}O.MessageTypes.MSG_TYPE_OFFER,O.MessageTypes.MSG_TYPE_ORDER;var ce,ue,le=O.MessageTypes.MSG_TYPE_FAQ_TYPE_BOT_REQUEST_ORDER_MESSAGE,de={1:"product_entry_point",2:"order_entry_point",3:"shop_entry_point",8:"product_inactive_seller",10:"lowest_price_guaranteed",11:"poor_fulfilment",3501:"affiliate_seller_project_detail",3502:"affiliate_seller_kol_detail",3503:"affiliate_seller_kol_card",3504:"affiliate_seller_top_affiliates_card",3505:"affiliate_seller_sample_request_detail",3506:"affiliate_seller_recommended_kol_card"},pe=function(e){var t=e.id,n=e.recipientID,r=e.message,s=e.redirectInfo,a=e.conversationId,o=e.entryPoint,i=e.replyToMessageId,c=e.shopId,u=t||(0,ae.v4)(),l=r.content,d=r.type,p=r.textContent,g=r.isFaking,A=r.country,f={id:u,type:d,content:l,isFaking:g,to_id:n,shop_id:c,request_id:u,created_timestamp:Math.floor(Date.now()/1e3),chat_send_option:{force_send_cancel_order_warning:!1,comply_cancel_order_warning:!1}};if(A&&(f.country=A),i&&(f.content=ie(ie({},f.content),{},{quoted_msg_id:i})),p&&d===le&&(f.textContent=p),o&&o.type&&o.conversationId===a?f.entry_point=de[o.type]:f.entry_point="direct_chat_entry_point",s){var h=s.orderId,m=s.productId,E=s.conversationId,v=s.shopId;if(parseInt(a)===parseInt(E)){if(f.conversation_id=a,h){var S=parseInt(h);f=ie(ie({},f),{},{order_id:S,source_content:{order_id:S,shop_id:v},source_type:"order"})}if(m){var b=parseInt(m);f=ie(ie({},f),{},{product_id:b,source_content:{product_id:b,shop_id:v},source_type:"product"})}}}return f},ge=function(e,t){return e===t?0:(0,O.greaterThan)(e,t)?1:-1},Ae=O.MessageTypes.MSG_TYPE_ITEM_LIST,fe=O.MessageTypes.MSG_TYPE_ADD_ON_DEAL,he=O.MessageTypes.MSG_TYPE_BUNDLE_DEAL,me=O.MessageTypes.MSG_TYPE_FLASH_SALE,Ee=(o(ce={},Ae,{listKey:"chat_product_infos",cleaner:T.itemListDetailCleaner}),o(ce,fe,{listKey:"add_on_deal_item_list",cleaner:T.addOnDealItemDetailCleaner}),o(ce,he,{listKey:"bundle_deal_item_list",cleaner:T.bundleDealItemDetailCleaner}),o(ce,me,{listKey:"flash_sale_item",cleaner:T.flashSaleItemDetailCleaner}),ce),ve=[Ae,fe,he,me],Se=function(e){var t=e.type,n=e.content,r=e.country,s=n.shop_id;if(Ee[t]){var a=Ee[t],o=a.listKey,i=a.cleaner,c=e.content[o];e.content[o]=c.slice(0,O.MAX_SHOWING_ITEM_COUNT).map((function(e){return i(e,r,s)}))}if(t===Ae){var u=n.chat_product_infos;e.content.exceedMaxCount=u.length>O.MAX_SHOWING_ITEM_COUNT}else if(t===fe){var l=n.add_on_deal_rule;e.content.add_on_deal_rule=(0,T.addOnDealRuleCleaner)(l,r)}else if(t===he){var d=n.bundle_rule;e.content.bundle_rule=(0,T.bundleDealRuleCleaner)(d,r)}},be=function(e){Array.isArray(e)?e.forEach((function(e){Se(e),e.quoted_msg&&Se(e.quoted_msg)})):(Se(e),e.quoted_msg&&Se(e.quoted_msg))};!function(e){e.DELETE_CONVERSATION_MESSAGE_HASH="DELETE_CONVERSATION_MESSAGE_HASH",e.SET_ENTRY_POINT="SET_ENTRY_POINT",e.EVALUATION_REQUESTED="EVALUATION_REQUESTED",e.FETCH_FAQ_MESSAGES_REQUESTED="FETCH_FAQ_MESSAGES_REQUESTED",e.FETCH_FAQ_MESSAGES_SUCCEEDED="FETCH_FAQ_MESSAGES_SUCCEEDED",e.UPDATE_FETCH_FAQ_MESSAGES_REQUESTED_STATUS="UPDATE_FETCH_FAQ_MESSAGES_REQUESTED_STATUS",e.UPDATE_CURRENT_FAQ_ID="UPDATE_CURRENT_FAQ_ID",e.SHOW_FAQ_HISTORY_MODAL="SHOW_FAQ_HISTORY_MODAL",e.FETCH_MESSAGES_REQUESTED="FETCH_MESSAGES_REQUESTED",e.FETCH_MESSAGES_SUCCEEDED="FETCH_MESSAGES_SUCCEEDED",e.UPDATE_FETCH_MESSAGES_REQUESTED_STATUS="UPDATE_FETCH_MESSAGES_REQUESTED_STATUS",e.HANDLE_SENSITIVE_URL="HANDLE_SENSITIVE_URL",e.SEND_MESSAGES_FAILED_BY_OFFLINE="SEND_MESSAGES_FAILED_BY_OFFLINE",e.RESET_MESSAGES_FAILED_BY_OFFLINE="RESET_MESSAGES_FAILED_BY_OFFLINE",e.RESEND_OFFLINE_MESSAGES_ONCE="RESEND_OFFLINE_MESSAGES_ONCE",e.RESEND_OFFLINE_MESSAGES_ONCE_SUCCEED="RESEND_OFFLINE_MESSAGES_ONCE_SUCCEED",e.FILL_MESSAGE_REQUESTED="FILL_MESSAGE_REQUESTED",e.RECEIVE_MESSAGE_REQUESTED="RECEIVE_MESSAGE_REQUESTED",e.RECEIVE_MESSAGE_SUCCEEDED="RECEIVE_MESSAGE_SUCCEEDED",e.RESET_NEW_CONVERSATION_QUEUE="RESET_NEW_CONVERSATION_QUEUE",e.RESET_OLD_CONVERSATION_QUEUE="RESET_OLD_CONVERSATION_QUEUE",e.RESET_CONVERSATION_QUEUE="RESET_CONVERSATION_QUEUE",e.RESEND_MESSAGE_REQUESTED="RESEND_MESSAGE_REQUESTED",e.SEND_MESSAGES_REQUESTED="SEND_MESSAGES_REQUESTED",e.SEND_MESSAGES_SUCCEEDED="SEND_MESSAGES_SUCCEEDED",e.SENDING_MESSAGES="SENDING_MESSAGES",e.SEND_MESSAGES_TO_PENDING="SEND_MESSAGES_TO_PENDING",e.SEND_MESSAGES_FAILED="SEND_MESSAGES_FAILED",e.ABORT_ALL_SENDING_MESSAGES="ABORT_ALL_SENDING_MESSAGES",e.CANCEL_SENDING_MESSAGE_REQUESTED="CANCEL_SENDING_MESSAGE_REQUESTED",e.CANCEL_SENDING_MESSAGE_SUCCEEDED="CANCEL_SENDING_MESSAGE_SUCCEEDED",e.SEND_VIDEO_MESSAGE_REQUESTED="SEND_VIDEO_MESSAGE_REQUESTED",e.SEND_PRODUCTS_MESSAGE_REQUESTED="SEND_PRODUCTS_MESSAGE_REQUESTED",e.TRANSLATE_MESSAGES_REQUESTED="TRANSLATE_MESSAGES_REQUESTED",e.CHANGE_TRANSLATE_STATUS="CHANGE_TRANSLATE_STATUS",e.UPDATE_VIDEO_INFO="UPDATE_VIDEO_INFO",e.DELETE_VIDEO_INFO="DELETE_VIDEO_INFO",e.MESSAGE_SYNC_UPDATE="MESSAGE_SYNC_UPDATE",e.SHOW_TRANSLATE_FEEDBACK="SHOW_TRANSLATE_FEEDBACK",e.SEND_TRANSLATE_FEEDBACK="SEND_TRANSLATE_FEEDBACK",e.UPDATE_MESSAGE_FILL_STATUS_MAP="UPDATE_MESSAGE_FILL_STATUS_MAP",e.CHATBOT_INTENTS_REPORT_REQUEST="CHATBOT_INTENTS_REPORT_REQUEST",e.UPDATE_HAS_CONFLICT="UPDATE_HAS_CONFLICT",e.UPDATE_MESSAGES_RELATED="UPDATE_MESSAGES_RELATED"}(ue||(ue={}));var _e=re().mark(we),ye=re().mark(Oe),Ce=re().mark(ke),xe=re().mark(Re);function Me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function we(e,t,n){var r,s;return re().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,se.select)((0,T.rateCardSelector)(e));case 2:if((r=n.sent)&&r.status!==O.EvaluationStatus.UNRATED){n.next=8;break}return s={subServer:"workbenchapi",resource:"rating_card",id:e},n.next=7,(0,se.call)(T.fetch,Ie(Ie({},s),{},{params:t}));case 7:r=n.sent;case 8:return n.abrupt("return",r);case 9:case"end":return n.stop()}}),_e)}function Oe(e){var t,n,r,s,a,o,i,c,u,l,d,p,g,A,f;return re().wrap((function(h){for(;;)switch(h.prev=h.next){case 0:return t=e.ids,n=e.shopId,r=e.type,s=Array.isArray(t)?t:[t],a={},"0"!==n&&(a.shop_id=n),h.next=6,(0,se.select)(T.isSubAccountSelector);case 6:return o=h.sent,h.next=9,(0,se.select)(T.currentUserShopIdSelector);case 9:if(h.sent===parseInt(n)||o){h.next=23;break}return i=[],s.forEach((function(e){return i.push((0,se.call)(we,e,a,r))})),h.next=15,(0,se.all)(i);case 15:if(c=h.sent,"rating_card"!==r){h.next=20;break}return u=(0,T.normalize)("rateCards",c),l=u.entities,h.next=20,(0,se.put)((0,T.updateEntities)({entities:l}));case 20:return h.abrupt("return",c);case 23:return d="rating_cards",a.ids="[".concat(s.join(","),"]"),h.next=27,(0,se.call)(T.fetch,{resource:d,params:a});case 27:if(p=h.sent,g=p[d],"rating_card"!==r){h.next=33;break}return A=(0,T.normalize)("rateCards",p[d]),f=A.entities,h.next=33,(0,se.put)((0,T.updateEntities)({entities:f}));case 33:return h.abrupt("return",g||[]);case 34:case"end":return h.stop()}}),ye)}var Te,Be=(0,te.createActions)(o({},ue.EVALUATION_REQUESTED,(function(e){var t=e.messageId,n=e.grade,r=e.reason;return{messageId:t,grade:n,reason:void 0===r?[]:r,otherReason:e.otherReason}}))).evaluationRequested;function ke(e){var t,n,r,s,a,o,i,c,u,l,d,p,g,A,f;return re().wrap((function(h){for(;;)switch(h.prev=h.next){case 0:return t=e.payload,n=t.messageId,r=t.grade,s=t.reason,a=t.otherReason,h.next=3,(0,se.select)((0,T.getMessageSelector)(n));case 3:return o=h.sent,i=o.from_shop_id,c=o.textContent,u=c.id,h.prev=6,l={grade:r,reason:s,other_reason:a},d={subServer:"workbenchapi",parent:"rating_card"},i&&(l.shop_id=i),h.next=12,(0,se.call)(T.fetch,Ie(Ie({method:"PUT"},d),{},{parentId:u,payload:JSON.stringify(l)}));case 12:return p=h.sent,h.next=15,(0,se.put)((0,T.updateRecord)({name:"rateCards",id:u,record:{grade:r,status:O.EvaluationStatus.RATED,reason_ids:p.reason_ids,other_reason:p.other_reason}}));case 15:h.next=25;break;case 17:return h.prev=17,h.t0=h.catch(6),A=Date.now(),null!==h.t0&&void 0!==h.t0&&null!==(g=h.t0.error)&&void 0!==g&&g.error_code&&((f=h.t0.error.error_code)===O.EvaluationErrorCode.RATED&&(A=O.EvaluationStatus.RATED),f===O.EvaluationErrorCode.EXPIRED&&(A=O.EvaluationStatus.EXPIRED)),h.next=23,(0,se.put)((0,T.updateRecord)({name:"rateCards",id:u,record:{status:A}}));case 23:return h.next=25,(0,se.call)(T.setToastInformationSaga,(0,T.setToastInformation)({error:h.t0}));case 25:case"end":return h.stop()}}),Ce,null,[[6,17]])}function Re(){return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,se.takeLatest)(Be,ke);case 2:case"end":return e.stop()}}),xe)}function Pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function De(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ne=re().mark(ot),je=re().mark(it),Fe=re().mark(ct),qe=re().mark(ut),Ue="source-",Le="source",Ge=O.MessageFillStatus.FILLED,Ye=O.MessageFillStatus.FAILED,He=O.MessageFillStatus.FILLING,We=O.MessageTypes.MSG_TYPE_PRODUCT,Ze=O.MessageTypes.MSG_TYPE_ORDER,Ve=O.MessageTypes.MSG_TYPE_OFFER,ze=O.MessageTypes.MSG_TYPE_VOUCHER,Qe=O.MessageTypes.MSG_TYPE_FEED_STORY,Xe=O.MessageTypes.MSG_TYPE_UNTATED_ORDER_REMINDER,Ke=O.MessageTypes.MSG_TYPE_BUNDLE_MESSAGE,Je=O.MessageTypes.MSG_TYPE_SHOPPING_CART,$e=O.MessageTypes.MSG_TYPE_RATE_CARD,et=O.MessageTypes.MSG_TYPE_FAQ_TYPE_BOT_REQUEST_ORDER_MESSAGE,tt=[We,Ze,Ve,ze,$e,Qe,Xe,Ke,Je,et],nt=(0,te.createActions)((o(Te={},ue.UPDATE_MESSAGE_FILL_STATUS_MAP,(function(e){return{status:e.status,messageIds:e.messageIds}})),o(Te,ue.FILL_MESSAGE_REQUESTED,(function(e){return{message:e.message,isSource:e.isSource}})),Te)),rt=nt.updateMessageFillStatusMap,st=nt.fillMessageRequested,at=function(e,t,n){var r,s=t["".concat(e,"_id")];return e===Xe&&(s=t.order_id),e===$e?t.card_id:e===et?null==t||null===(r=t.bot_order_info)||void 0===r?void 0:r.order_id:s||n};function ot(e){var t,n,r,s,a,o,i,c,u,l,d,p,g,A,f,h,m,E,v,S=arguments;return re().wrap((function(b){for(;;)switch(b.prev=b.next){case 0:return t=S.length>1&&void 0!==S[1]?S[1]:{},n=t.sync,r=void 0!==n&&n,s=t.reFillType,a=e[0].conversation_id,b.next=5,(0,se.select)(T.isSubAccountSelector);case 5:return o=b.sent,b.next=8,(0,se.select)(T.curConvsMessageSelector);case 8:return i=b.sent,b.next=11,(0,se.select)(T.currentUserIdSelector);case 11:return c=b.sent,b.next=14,(0,se.select)((0,T.getConversationShopId)(a));case 14:return u=b.sent,b.next=17,(0,se.select)(T.messageFillStatusMapSelector);case 17:return l=b.sent,d={},p=[],g=[],s?(A=e[0],f="".concat(s===Le?Ue:"").concat(A.id),d={messageId:[f]},p=[f]):e.forEach((function(e){var t=e.type,n=e.content,r=e.id,s=e.source_type,a=e.source_content,A=void 0===a?{}:a,f=i.find((function(e){var t=e.id;return r===t})),h=!1,m=!1;if(null!=f&&f.textContent){h=!0;var E=f.textContent,v=void 0===E?{}:E;switch(t){case $e:m=v.status===O.EvaluationStatus.UNRATED;break;case Ve:m=v.status===O.OfferStatus.PENDING;break;case Ke:m=!1;break;default:tt.includes(t)&&(m=!0)}}else h=l[r]===He;if(null!=f&&f.sourceContent&&(m=!0),!h||m){var S;if(s&&A){var b=A["".concat(s,"_id")];if(b&&![-1,0].includes(b)){var _="".concat(Ue).concat(r);m?g.push(_):p.push(_),S=at(s,A,_),(d[S]||(d[S]=[]))&&d[S].push(_)}}if(tt.includes(t)&&n){var y=!1;switch(t){case Ze:y=o&&u!==n.shop_id;break;case $e:y=c!==e.to_id}y||(m?g.push(r):p.push(r),S=at(t,n,r),(d[S]||(d[S]=[]))&&d[S].push(r))}}})),b.next=24,(0,se.put)(rt({status:He,messageIds:p}));case 24:if(h=Object.keys(d),!r){b.next=32;break}return m=[],h.forEach((function(t){var n=d[t];m.push((0,se.call)(it,e,n,g))})),b.next=30,(0,se.all)(m);case 30:b.next=39;break;case 32:if(!h.length){b.next=39;break}return E=h.shift(),v=d[E],b.next=37,(0,se.spawn)(it,e,v,g);case 37:b.next=32;break;case 39:case"end":return b.stop()}}),Ne)}function it(e,t,n){var r,s,a,o,i,c,u,l,d,p,g,A,f,h,m,E,v,S,b,_,y,C,x,M,I,w,B,k;return re().wrap((function(R){for(;;)switch(R.prev=R.next){case 0:s=t[0],a=s,(o=s.includes(Ue))&&(a=s.split(Ue)[1]),i=e.find((function(e){return e.id===a})),u=(c=i).content,l=c.type,d=c.source_type,p=c.source_content,g=c.conversation_id,h=(f=o?p:u)["".concat(A=o?d:l,"_id")],(m=l===et?null==u||null===(r=u.bot_order_info)||void 0===r?void 0:r.shop_id:f.shop_id)||(m=i.to_shop_id),R.prev=11,R.t0=A,R.next=R.t0===We?15:R.t0===Ze||R.t0===Xe||R.t0===et?19:R.t0===Ve?26:R.t0===ze?30:R.t0===Qe?34:R.t0===Je?38:R.t0===$e?42:R.t0===Ke?47:51;break;case 15:return R.next=17,(0,se.call)(T.showProduct,{payload:{id:h,shopId:m}});case 17:return E=R.sent,R.abrupt("break",51);case 19:return R.next=21,(0,se.select)((0,T.getConversationShopId)(g));case 21:return S=R.sent,R.next=24,(0,se.call)(T.showOrder,{payload:{id:h||u.order_id||(null==u||null===(v=u.bot_order_info)||void 0===v?void 0:v.order_id),shopId:m,isChatbotOrder:A===et,currentUserShopId:S}});case 24:return E=R.sent,R.abrupt("break",51);case 26:return R.next=28,(0,se.call)(T.showOffer,{payload:{id:h,shopId:m}});case 28:return E=R.sent,R.abrupt("break",51);case 30:return R.next=32,(0,se.call)(T.showVoucher,{shopId:m,id:h});case 32:return E=R.sent,R.abrupt("break",51);case 34:return R.next=36,(0,se.call)(T.showFeedStory,{payload:{id:h,creatorId:u.creator_id}});case 36:return E=R.sent,R.abrupt("break",51);case 38:return R.next=40,(0,se.call)(T.showCartReminder,{cartItems:u.cart_items,shopId:m});case 40:return E=R.sent,R.abrupt("break",51);case 42:return R.next=44,(0,se.call)(Oe,{shopId:m,ids:u.card_id,type:l});case 44:return b=R.sent,E=b[0],R.abrupt("break",51);case 47:return R.next=49,(0,se.call)(T.showFaqHistory,{payload:{id:a,ids:u.messages.slice(0,3)}});case 49:return E=R.sent,R.abrupt("break",51);case 51:if(E){R.next=55;break}return R.next=54,(0,se.put)(rt({status:Ye,messageIds:t.filter((function(e){return!n.includes(e)}))}));case 54:return R.abrupt("return");case 55:_={},y=ee(t);case 57:if(!y.length){R.next=67;break}return C=y.shift(),R.next=61,(0,se.select)((0,T.getMessageSelector)(C));case 61:x=R.sent,M={},I={type:A,content:E},C.includes(Ue)&&!(0,O.simpleEqualCheck)(I,null==x?void 0:x.sourceContent)?(M=_[C.split(Ue)[1]]||{},_[C.split(Ue)[1]]=De(De({},M),{},{sourceContent:I})):(0,O.simpleEqualCheck)(E,null==x?void 0:x.textContent)||(M=_[C]||{},_[C]=De(De({},M),{},{textContent:E})),R.next=57;break;case 67:return R.next=69,(0,se.put)((0,T.batchUpdateRecord)({name:"messages",records:_}));case 69:w=e.filter((function(e){var n;return t.includes(null===(n=e.quoted_msg)||void 0===n?void 0:n.id)}));case 70:if(!w.length){R.next=79;break}return B=w.shift(),R.next=74,(0,se.select)((0,T.getMessageSelector)(B.quoted_msg.id));case 74:return k=R.sent,R.next=77,(0,se.put)((0,T.updateRecord)({name:"messages",id:B.id,record:{quoted_msg:De({},k)}}));case 77:R.next=70;break;case 79:return R.next=81,(0,se.put)(rt({status:Ge,messageIds:t}));case 81:R.next=87;break;case 83:return R.prev=83,R.t1=R.catch(11),R.next=87,(0,se.put)(rt({status:Ye,messageIds:t.filter((function(e){return!n.includes(e)}))}));case 87:case"end":return R.stop()}}),je,null,[[11,83]])}function ct(e){var t,n,r;return re().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,n=t.message,r=t.isSource,s.next=3,(0,se.call)(ot,[n],{reFillType:r?Le:"content"});case 3:case"end":return s.stop()}}),Fe)}function ut(){return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,se.takeEvery)(st,ct);case 2:case"end":return e.stop()}}),qe)}const lt=o({},ue.UPDATE_MESSAGE_FILL_STATUS_MAP,(function(e,t){var n=t.payload,r=n.status,s=n.messageIds,a=Object.assign({},e.messageFillStatusMap);return s.forEach((function(e){r===Ge?delete a[e]:a[e]=r})),De(De({},e),{},{messageFillStatusMap:De({},a)})}));function dt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dt(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var gt=(0,te.createActions)(o({},ue.UPDATE_MESSAGES_RELATED,(function(e){return{conversationId:e.conversationId,updateKey:e.updateKey,updateValue:e.updateValue}}))),At=gt.updateMessagesRelated;const ft=o({},ue.UPDATE_MESSAGES_RELATED,(function(e,t){var n=t.payload,r=n.conversationId,s=n.updateKey,a=n.updateValue,i=e.messagesRelatedMap,c=i[r]||{},u=c[s];return pt(pt({},e),{},{messagesRelatedMap:pt(pt({},i),{},o({},r,pt(pt({},c),{},o({},s,"object"===g(u)&&a&&"object"===g(a)?pt(pt({},u),a):a))))})}));var ht,mt=["offset"];function Et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Et(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Et(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var St=re().mark(Pt),bt=re().mark(Dt),_t=re().mark(Nt),yt=re().mark(jt),Ct=re().mark(Ft),xt=re().mark(qt),Mt=re().mark(Ut),It=re().mark(Lt),wt=(0,te.createActions)({FETCH_MESSAGES_REQUESTED:function(e){return{conversationId:e.conversationId,reset:e.reset,direction:e.direction,messageId:e.messageId,cachedLatestId:e.cachedLatestId,cachedOldestId:e.cachedOldestId,source:e.source,isPreload:e.isPreload,messageList:e.messageList,needNaviateToUnRead:e.needNaviateToUnRead}},FETCH_MESSAGES_SUCCEEDED:function(e){return{conversationId:e.conversationId,messageIds:e.messageIds,limit:e.limit,persist:e.persist,status:e.status,messageRequestIds:e.messageRequestIds,direction:e.direction,reset:e.reset,cachedOldestId:e.cachedOldestId,shouldAutoFetch:e.shouldAutoFetch}},UPDATE_FETCH_MESSAGES_REQUESTED_STATUS:function(e){return{status:e.status}},SET_SECURITY_TIPS_MESSAGE:function(e){return{messageId:e.messageId,conversationId:e.conversationId}}}),Ot=wt.fetchMessagesRequested,Tt=wt.fetchMessagesSucceeded,Bt=wt.updateFetchMessagesRequestedStatus,kt=wt.setSecurityTipsMessage,Rt=function(e){var t=e.conversationId,n=e.shopId,r=e.offset,s=e.limit,a=void 0===s?20:s,o=e.direction,i=void 0===o?"older":o,c=(e.source,{shop_id:n,offset:r,limit:"around"===i?Math.ceil(a/2):a,direction:i});return new Promise((function(e,n){(0,T.fetch)({parent:"conversations",parentId:t,resource:"messages",params:c}).then((function(t){var n=t.messages,r=void 0===n?[]:n;be(r),e({messages:r,limit:a})})).catch((function(e){n(e)}))}))};function Pt(e){var t,n,r;return re().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.msgId,n=e.shopId,s.next=3,(0,se.call)(T.fetch,{parent:"conversation",resource:"get_messages",params:{message_id:t,shop_id:n,limit:10,direction:"around"}});case 3:return r=s.sent,be((null==r?void 0:r.get_messages)||[]),s.abrupt("return",r);case 6:case"end":return s.stop()}}),St)}function Dt(e,t){var n,r;return re().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,se.select)((0,T.getConvsMessagesRelatedSelector)(e));case 2:return r=s.sent,s.abrupt("return",null===(n=r.preloaded)||void 0===n?void 0:n[t]);case 4:case"end":return s.stop()}}),bt)}function Nt(e){var n,r,s,a,i;return re().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return n=e.payload,c.next=3,(0,se.call)(qt,{payload:vt(vt({},n),{},{isPreload:!0,reset:!1,direction:"older"})});case 3:if(!(r=c.sent)){c.next=21;break}return s=r.offset,a=t(r,mt),i=n.conversationId,c.next=9,(0,se.call)(Dt,i,s);case 9:if(c.sent!==O.FetchMessageStatus.FETCHING){c.next=19;break}return c.next=13,(0,se.put)(Tt(vt({},a)));case 13:return c.next=15,(0,se.put)(At({conversationId:i,updateKey:O.MessagesRelatedKey.PRELOADED,updateValue:o({},s,null)}));case 15:return c.next=17,(0,se.fork)(Nt,{payload:n});case 17:c.next=21;break;case 19:return c.next=21,(0,se.put)(At({conversationId:i,updateKey:O.MessagesRelatedKey.PRELOADED,updateValue:o({},s,a)}));case 21:case"end":return c.stop()}}),_t)}function jt(e){var t,n,r,s;return re().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!e.reset||"around"===e.direction){a.next=8;break}return a.next=3,(0,se.select)((function(e){return e.messageReducer}));case 3:return t=a.sent,n=t.messagesRelatedMap,r=e.conversationId,s=n[r]||{},a.abrupt("return",0===(s.all||[]).length);case 8:return a.abrupt("return","older"===e.direction);case 9:case"end":return a.stop()}}),yt)}function Ft(e){var t;return re().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,n.next=3,jt(t);case 3:if(!n.sent){n.next=13;break}return n.next=7,(0,se.call)(qt,{payload:t});case 7:if(!n.sent){n.next=11;break}return n.next=11,(0,se.fork)(Nt,{payload:t});case 11:n.next=15;break;case 13:return n.next=15,(0,se.call)(qt,{payload:t});case 15:case"end":return n.stop()}}),Ct)}function qt(e){var t,n,r,s,a,i,c,u,l,d,p,g,A,f,h,m,E,v,S,b,_,y,C,x,M,I,w,B,k,R,P,D,N,j;return re().wrap((function(F){for(;;)switch(F.prev=F.next){case 0:return t=e.payload,n=t.conversationId,r=t.reset,s=t.direction,a=t.messageId,i=t.source,c=t.isPreload,u=t.shouldFillSync,l=t.messageList,d=t.needNaviateToUnRead,F.prev=1,F.next=4,(0,se.select)((function(e){return e.conversationReducer}));case 4:return p=F.sent,g=p.persist,F.next=8,(0,se.select)((0,T.getConversationShopId)(n));case 8:return A=F.sent,F.next=11,(0,se.select)((function(e){return e.messageReducer}));case 11:if(f=F.sent,h=f.messagesRelatedMap,m=h[n]||{},!r||"around"===s){F.next=20;break}E=0,s="older",v=!0,F.next=33;break;case 20:F.t0=s,F.next="older"===F.t0?23:"latest"===F.t0?26:"around"===F.t0?29:32;break;case 23:return E=m.oldestMessageId,v=m.hasMoreOlderMessage,F.abrupt("break",33);case 26:return E=m.latestMessageId,v=m.hasMoreLatestMessage,F.abrupt("break",33);case 29:return E=a,v=!0,F.abrupt("break",33);case 32:return F.abrupt("break",33);case 33:if(void 0!==v){F.next=40;break}return F.next=36,(0,se.select)(T.messageHttpStatusSelector);case 36:F.sent.includes("failed")&&(s="older"),F.next=42;break;case 40:if(v){F.next=42;break}return F.abrupt("return");case 42:if(c){F.next=45;break}return F.next=45,(0,se.put)(Bt({status:r||"around"===s?O.DataFetchStatus.INIT_PENDING:O.DataFetchStatus.PENDING}));case 45:if(!c){F.next=50;break}return F.next=48,(0,se.put)(At({conversationId:n,updateKey:O.MessagesRelatedKey.PRELOADED,updateValue:o({},E,O.FetchMessageStatus.PRELOADING)}));case 48:F.next=66;break;case 50:return F.next=52,(0,se.call)(Dt,n,E);case 52:if(!(_=F.sent)){F.next=66;break}if(_!==O.FetchMessageStatus.PRELOADING){F.next=60;break}return F.next=57,(0,se.put)(At({conversationId:n,updateKey:O.MessagesRelatedKey.PRELOADED,updateValue:o({},E,O.FetchMessageStatus.FETCHING)}));case 57:return F.abrupt("return",!1);case 60:if(_===O.FetchMessageStatus.FETCHING){F.next=66;break}return F.next=63,(0,se.put)(Tt(vt({},_)));case 63:return F.next=65,(0,se.put)(At({conversationId:n,updateKey:O.MessagesRelatedKey.PRELOADED,updateValue:o({},E,null)}));case 65:return F.abrupt("return",!0);case 66:if(!l||!l.length){F.next=71;break}S=l,b=20,F.next=76;break;case 71:return F.next=73,(0,se.call)(Rt,{conversationId:n,shopId:A,offset:E,direction:s,source:i});case 73:y=F.sent,S=y.messages,b=y.limit;case 76:if(S.sort((function(e,t){return t.id-e.id})),!d||!S.length){F.next=85;break}return C=S[0].id,F.next=81,(0,se.call)(Rt,{conversationId:n,shopId:A,offset:C,direction:"latest",source:i});case 81:x=F.sent,(M=x.messages).sort((function(e,t){return t.id-e.id})),S=M.concat(S);case 85:if(I=S.map((function(e){return e.id})),!S.length){F.next=96;break}return w=ee(S),S.forEach((function(e){var t=e.quoted_msg;if(t){if(w.some((function(e){return e.id===t.id}))||(0,O.isDeletedMessage)(t))return;w=[].concat(ee(w),[t])}})),F.next=91,(0,se.select)(T.messageEntitiesSelector);case 91:return B=F.sent,F.next=94,(0,se.call)(T.updateOrReplaceAction,B,w,"messages",["content"]);case 94:return F.next=96,(0,se.call)(ot,w,{isSync:u});case 96:if(k=new Map,R=S.reduce((function(e,t){var n=t.request_id,r=t.id;return e.has(n)||e.set(n,r),e}),k),P={reset:r,limit:b,offset:E,direction:s,messageIds:I,conversationId:n,persist:g,status:O.DataFetchStatus.SUCCEED,messageRequestIds:R},!c){F.next=101;break}return F.abrupt("return",P);case 101:return D=!1,(N=m.cachedLatestId)||(N=(m.all||[])[0],P.cachedLatestId=N),N&&r&&(j=I[I.length-1]||E,(0,O.greaterThan)(j,N)?D=!0:P.cachedLatestId=null),P.shouldAutoFetch=D,F.next=108,(0,se.put)(Tt(P));case 108:if(!D){F.next=111;break}return F.next=111,(0,se.fork)(qt,{payload:{direction:"older",conversationId:n}});case 111:if(!("around"===s||l&&l.length)||!a){F.next=119;break}return T.EventBus.emit("scrollToMessage",a),F.next=115,(0,se.select)(T.isNavigateToUnreadMessageSelector);case 115:if(!F.sent){F.next=119;break}return F.next=119,(0,se.put)((0,T.setNavigateToUnreadMessageId)({navigateToUnreadMessageId:a}));case 119:return F.abrupt("return",P);case 122:if(F.prev=122,F.t1=F.catch(1),c){F.next=127;break}return F.next=127,(0,se.put)(Bt({status:r?O.DataFetchStatus.INIT_FAILED:O.DataFetchStatus.FAILED}));case 127:case"end":return F.stop()}}),xt,null,[[1,122]])}function Ut(e){var t,n,r,s,a,o,i,c,u,l;return re().wrap((function(d){for(;;)switch(d.prev=d.next){case 0:if(t=e.payload,n=t.conversationId,"older"===t.direction){d.next=4;break}return d.abrupt("return");case 4:return d.next=6,(0,se.select)((0,T.getConversationShopId)(n));case 6:return r=d.sent,d.next=9,(0,se.select)((0,T.shopSelector)(r));case 9:if(s=d.sent,a=s?s.country:(0,O.getRuntimeRegion)(),!["br","tw","my"].includes(a.toLowerCase())){d.next=33;break}return d.next=14,(0,se.select)(T.messagesRelatedMapSelector);case 14:if(o=d.sent,!(i=o[n])){d.next=33;break}if(!i.securityTipsMessageId){d.next=19;break}return d.abrupt("return");case 19:if(i.hasMoreOlderMessage){d.next=33;break}return d.next=22,(0,se.select)(T.messageEntitiesSelector);case 22:if(c=d.sent,u=(0,O.makeSecurityTipsMessage)((0,ae.v4)(),n),!i.oldestMessageId){d.next=29;break}return d.next=27,(0,se.select)((0,T.getMessageSelector)(i.oldestMessageId));case 27:(l=d.sent)&&(u.created_timestamp=l.created_timestamp);case 29:return d.next=31,(0,se.call)(T.updateOrReplaceAction,c,[u],"messages");case 31:return d.next=33,(0,se.put)(kt({messageId:u.id,conversationId:n}));case 33:case"end":return d.stop()}}),Mt)}function Lt(){return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,se.takeEvery)(Ot,Ft);case 2:return e.next=4,(0,se.takeEvery)(Tt,Ut);case 4:case"end":return e.stop()}}),It)}const Gt=(o(ht={},Tt,(function(e,t){var n=t.payload,r=n.limit,s=n.status,a=n.conversationId,i=n.messageIds,c=n.persist,u=n.messageRequestIds,l=n.direction,d=n.reset,p=n.cachedLatestId,g=n.shouldAutoFetch,A=e.messagesRelatedMap,f=A[a]||{},h={};switch(l){case"older":h.hasMoreOlderMessage=i.length>=r;break;case"latest":h.latestMessageId=i[0],h.hasMoreLatestMessage=i.length>=r;break;case"around":h.latestMessageId=i[0],h.hasMoreOlderMessage=!0,h.hasMoreLatestMessage=!0,f={}}d&&"around"!==l&&(h.hasMoreLatestMessage=!1);var m=(f.all||[]).map((function(e){return u.has(e)?u.get(e):e})),E=f.failed||[],v=function(e,t){for(var n,r=e.length,s=t.length,a=0,o=0,i=new Array(r+s).fill(0);a<r||o<s;)n=a===r?t[o++]:o===s?e[a++]:/^\d+$/.test(e[a])?(0,O.greaterThan)(e[a],t[o])?e[a++]:t[o++]:e[a++],i[a+o-1]=n;return ee(new Set(i))}(m,i);return h.oldestMessageId=g?i[i.length-1]:v[v.length-1],p&&(h.cachedLatestId=p),vt(vt({},e),{},{status:s,messagesRelatedMap:vt(vt({},A),{},o({},a,vt(vt({},f),{},{all:v,failed:E.filter((function(e){return!u.has(e)}))},h))),persist:c})})),o(ht,Bt,(function(e,t){var n=t.payload.status;return vt(vt({},e),{},{status:n})})),o(ht,kt,(function(e,t){var n=t.payload,r=n.conversationId,s=n.messageId,a="messagesRelatedMap",i=e[a],c=i[r]||{};return vt(vt({},e),{},o({},a,vt(vt({},i),{},o({},r,vt(vt({},c),{},{securityTipsMessageId:s})))))})),ht);var Yt,Ht=Q(885),Wt=Q(4672),Zt=Q(4323).t,Vt=re().mark(dn);function zt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zt(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Xt=1500,Kt=(0,te.createActions)({SET_REPLY_TO_MESSAGE:function(e){return{messageId:e.messageId}},RESET_REPLY_TO_MESSAGE:function(){return{}},SCROLL_TO_MESSAGE:function(e){return{messageId:e.messageId}},SET_SCROLL_TO_MESSAGE_ID:function(e){return{messageId:e.messageId}},RESET_SCROLL_TO_MESSAGE_ID:function(){},SET_IN_SCROLL_TO_MESSAGE:function(e){return{inScrollToMessage:e.inScrollToMessage}},SET_CURRENT_CONVERSATION_REPLY_TO_MESSAGE:function(e){return{messageId:e.messageId,currentConversationId:e.currentConversationId}},RESET_CURRENT_CONVERSATION_REPLY_TO_MESSAGE:function(e){return{currentConversationId:e.currentConversationId}}}),Jt=Kt.setReplyToMessage,$t=Kt.resetReplyToMessage,en=Kt.scrollToMessage,tn=Kt.setScrollToMessageId,nn=Kt.resetScrollToMessageId,rn=Kt.setInScrollToMessage,sn=Kt.setCurrentConversationReplyToMessage,an=Kt.resetCurrentConversationReplyToMessage,on=re().mark((function e(t){var n,r,s;return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload.messageId,e.next=3,(0,se.select)(T.curMessagesRelatedSelector);case 3:if(e.sent.all.includes(n)){e.next=14;break}return e.next=7,(0,se.select)(T.currentConversationSelector);case 7:return r=e.sent,e.next=10,(0,se.call)(qt,{payload:{conversationId:r.id,direction:"around",reset:!0,messageId:n,shouldFillSync:!0}});case 10:return e.next=12,(0,se.put)(rn({inScrollToMessage:!0}));case 12:e.next=22;break;case 14:return e.next=16,(0,se.select)((0,T.getMessageSelector)(n));case 16:if(s=e.sent,!(0,O.isDeletedMessage)(s)){e.next=21;break}return e.next=20,(0,se.call)(T.setToastInformationSaga,(0,T.setToastInformation)({toast:{show:!0,type:"fail",message:Zt("message.notfound")}}));case 20:return e.abrupt("return");case 21:T.EventBus.emit("scrollToMessage",n);case 22:return e.next=24,(0,se.put)(tn({messageId:n}));case 24:return e.next=26,(0,se.delay)(Xt);case 26:return e.next=28,(0,se.select)(T.scrollToMessageIdSelector);case 28:if(e.sent!==n){e.next=32;break}return e.next=32,(0,se.put)(nn());case 32:case"end":return e.stop()}}),e)})),cn=re().mark((function e(t){var n,r;return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload.messageId,e.next=3,(0,se.select)(T.currentConversationIdSelector);case 3:return r=e.sent,e.next=6,(0,se.put)(sn({currentConversationId:r,messageId:n}));case 6:case"end":return e.stop()}}),e)})),un=re().mark((function e(){var t;return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,se.select)(T.currentConversationIdSelector);case 2:return t=e.sent,e.next=5,(0,se.put)(an({currentConversationId:t}));case 5:case"end":return e.stop()}}),e)}));const ln=(o(Yt={},sn,(function(e,t){var n=t.payload,r=n.currentConversationId,s=void 0===r?"":r,a=n.messageId,i=void 0===a?"":a;return s&&i?Qt(Qt({},e),{},{reply:Qt(Qt({},e.reply),{},{toMessageId:Qt(Qt({},e.reply.toMessageId),{},o({},s,i))})}):e})),o(Yt,an,(function(e,t){var n=t.payload.currentConversationId,r=void 0===n?"":n;return r?Qt(Qt({},e),{},{reply:Qt(Qt({},e.reply),{},{toMessageId:Qt(Qt({},e.reply.toMessageId),{},o({},r,""))})}):e})),o(Yt,tn,(function(e,t){return Qt(Qt({},e),{},{reply:Qt(Qt({},e.reply),{},{scrollToMessageId:t.payload.messageId})})})),o(Yt,nn,(function(e){return Qt(Qt({},e),{},{reply:Qt(Qt({},e.reply),{},{scrollToMessageId:""})})})),o(Yt,rn,(function(e,t){return Qt(Qt({},e),{},{reply:Qt(Qt({},e.reply),{},{inScrollToMessage:t.payload.inScrollToMessage})})})),Yt);function dn(){return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,se.takeEvery)(en,on);case 2:return e.next=4,(0,se.takeEvery)($t,un);case 4:return e.next=6,(0,se.takeEvery)(Jt,cn);case 6:case"end":return e.stop()}}),Vt)}var pn,gn,An=re().mark(En),fn=re().mark(vn),hn=(0,te.createActions)(o({},ue.RESEND_MESSAGE_REQUESTED,(function(e){return{conversationId:e.conversationId,message:e.message}}))),mn=hn.resendMessageRequested;function En(e){var t,n,r,s,a;return re().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,n=t.conversationId,r=t.message,o.next=3,(0,se.select)((0,T.getConversation)(n));case 3:if("closed"!==o.sent.status){o.next=9;break}return o.next=8,(0,se.call)(T.setToastInformationSaga,(0,T.setToastInformation)({type:"conversation-closed-tip"}));case 8:case 13:return o.abrupt("return");case 9:if(s=r.type,a=r.content,s!==O.MessageTypes.MSG_TYPE_VIDEO||a.video_url){o.next=14;break}return o.next=13,(0,se.put)(bs({conversationId:n,message:r,isResend:!0}));case 14:return o.next=16,(0,se.put)(gs({conversationId:n,messages:[r],more:{isResend:!0}}));case 16:case"end":return o.stop()}}),An)}function vn(){return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,se.takeEvery)(mn,En);case 2:case"end":return e.stop()}}),fn)}function Sn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sn(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _n=re().mark(kn),yn=re().mark(Rn),Cn=re().mark(Pn);function xn(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Mn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Mn(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,s=function(){};return{s,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){i=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(i)throw a}}}}function Mn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var In=(0,te.createActions)((o(pn={},ue.SEND_MESSAGES_FAILED_BY_OFFLINE,(function(e){return{conversationId:e.conversationId,requestIds:e.requestIds}})),o(pn,ue.RESET_MESSAGES_FAILED_BY_OFFLINE,(function(){return{}})),o(pn,ue.RESEND_OFFLINE_MESSAGES_ONCE,(function(){return{}})),o(pn,ue.RESEND_OFFLINE_MESSAGES_ONCE_SUCCEED,(function(e){return{conversationId:e.conversationId,messageIds:e.messageIds}})),pn)),wn=In.sendMessagesFailedByOffline,On=In.resetMessagesFailedByOffline,Tn=In.resendOfflineMessagesOnce,Bn=In.resendOfflineMessagesOnceSucceed;function kn(){var e,t,n,r,s,a,o,i,c;return re().wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,se.select)(T.offlineMessagesSelector);case 2:e=u.sent,t=Object.entries(e),n=[],r=re().mark((function e(){var t,r,o,i,c,u;return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a[s],r=(0,Ht.Z)(t,2),o=r[0],i=r[1],e.next=4,(0,se.select)((0,T.getMessagesSelector)(i));case 4:c=e.sent,u=i.map((function(e,t){return{conversationId:o,requestIds:[e],messages:[c[t]]}})).filter((function(e){return e.messages[0]})),n=n.concat(u);case 7:case"end":return e.stop()}}),e)})),s=0,a=t;case 7:if(!(s<a.length)){u.next=12;break}return u.delegateYield(r(),"t0",9);case 9:s++,u.next=7;break;case 12:o=xn(n),u.prev=13,o.s();case 15:if((i=o.n()).done){u.next=23;break}return c=i.value,u.next=19,Bs(c);case 19:return u.next=21,(0,se.delay)(400);case 21:u.next=15;break;case 23:u.next=28;break;case 25:u.prev=25,u.t1=u.catch(13),o.e(u.t1);case 28:return u.prev=28,o.f(),u.finish(28);case 31:return u.next=33,(0,se.put)(On());case 33:case"end":return u.stop()}}),_n,null,[[13,25,28,31]])}function Rn(e){var t,n;return re().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.conversationId,n=e.messageIds,r.next=3,(0,se.put)(Bn({conversationId:t,messageIds:n}));case 3:case"end":return r.stop()}}),yn)}function Pn(){return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,se.takeEvery)(Tn,kn);case 2:case"end":return e.stop()}}),Cn)}window.addEventListener("judge-online",(function(){Wt.store.dispatch(Tn())}));const Dn=(o(gn={},ue.SEND_MESSAGES_FAILED_BY_OFFLINE,(function(e,t){var n=t.payload,r=n.conversationId,s=n.requestIds,a=e.offlineMessages,i=(a[r]||[]).concat(s);return bn(bn({},e),{},{offlineMessages:bn(bn({},a),{},o({},r,ee(new Set(i))))})})),o(gn,ue.RESET_MESSAGES_FAILED_BY_OFFLINE,(function(e){return bn(bn({},e),{},{offlineMessages:{}})})),o(gn,ue.RESEND_OFFLINE_MESSAGES_ONCE_SUCCEED,(function(e,t){var n=t.payload,r=n.conversationId,s=n.messageIds,a=e.messagesRelatedMap,i=a[r]||{},c=(i.all||[]).filter((function(e){return!s.includes(e)})),u=(i.failed||[]).filter((function(e){return!s.includes(e)})),l=(i.sending||[]).filter((function(e){return!s.includes(e)}));return bn(bn({},e),{},{messagesRelatedMap:bn(bn({},a),{},o({},r,bn(bn({},i),{},{all:c,failed:u,sending:l})))})})),gn);function Nn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nn(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Fn=(0,te.createActions)(o({},ue.DELETE_CONVERSATION_MESSAGE_HASH,(function(e){return{conversationId:e.conversationId}}))),qn=Fn.deleteConversationMessageHash;const Un=o({},ue.DELETE_CONVERSATION_MESSAGE_HASH,(function(e,t){var n=t.payload.conversationId,r=e.messagesRelatedMap;return delete r[n],jn(jn({},e),{},{messagesRelatedMap:jn({},r)})}));var Ln,Gn,Yn=Q(9977),Hn=Q.n(Yn),Wn=re().mark(Zn);function Zn(e){var t,n,r,s;return re().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.file,n=e.onProgress,r=e.serviceList,s=new(Hn())(r),a.next=4,s.upload({mediaFile:t,mediaType:Yn.MediaType.video});case 4:return s.on(Yn.UploaderEvents.mediaProgress,(function(e){return n(.95*e.percent*100)})),a.abrupt("return",s);case 6:case"end":return a.stop()}}),Wn)}function Vn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vn(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Qn=re().mark(cr),Xn=re().mark(ur),Kn=re().mark(lr),Jn=re().mark(dr),$n=re().mark(Ar),er=function(e){return e?e/3*1e3:8e3},tr=function(e){var t="http:";return e.startsWith(t)?e.replace(t,"https:"):e},nr=(0,te.createActions)((o(Ln={},ue.UPDATE_VIDEO_INFO,(function(e){var t=e.id,n=e.info;return{id:t,info:void 0===n?{}:n}})),o(Ln,ue.DELETE_VIDEO_INFO,(function(e){return{id:e.id}})),Ln)),rr=nr.updateVideoInfo,sr=nr.deleteVideoInfo,ar="get_config_error",or="query_result_error";function ir(e,t){(0,T.fetch)({method:"POST",subServer:"coreapi",parent:"video",resource:"monitor",payload:JSON.stringify({step:e,reason:t})}).catch((function(){return{}}))}function cr(e){var t,n,r,s,a;return re().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,(0,se.select)((0,T.getConversationShopId)(e));case 3:return t=o.sent,o.next=6,(0,se.call)(T.fetch,{method:"POST",subServer:"coreapi",parent:"video",resource:"preupload",payload:JSON.stringify({conversation_id:e,shop_id:t})});case 6:if(n=o.sent,r=n.is_allowed,s=n.data,a=void 0===s?{}:s,r){o.next=14;break}return o.next=13,(0,se.call)(ir,ar,"Not Allowed");case 13:return o.abrupt("return",null);case 14:return o.abrupt("return",a);case 17:return o.prev=17,o.t0=o.catch(0),o.next=21,(0,se.call)(ir,ar);case 21:return o.abrupt("return",!1);case 22:case"end":return o.stop()}}),Qn,null,[[0,17]])}function ur(e){var t,n;return re().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=performance.now(),r.next=3,Zn(e);case 3:return n=r.sent,r.next=6,n.done().then((function(e){var n=performance.now();return(0,T.collectAsyncTask)(T.ReportPoint.VIDEO_UPLOAD,n-t),{error:!1,data:e}})).catch((function(){return ir("upload_error"),!1}));case 6:return r.abrupt("return",r.sent);case 7:case"end":return r.stop()}}),Xn)}function lr(e){return re().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,se.call)(T.fetch,{method:"POST",subServer:"coreapi",parent:"video",resource:"report_upload",payload:JSON.stringify(e)});case 3:return t.abrupt("return",!0);case 6:return t.prev=6,t.t0=t.catch(0),t.next=10,(0,se.call)(ir,"report_upload_error");case 10:return t.abrupt("return",!1);case 11:case"end":return t.stop()}}),Kn,null,[[0,6]])}function dr(e){var t;return re().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,se.call)(T.fetch,{subServer:"coreapi",parent:"video",resource:"upload_status",params:{vid:e}});case 3:return t=n.sent,n.abrupt("return",t);case 7:return n.prev=7,n.t0=n.catch(0),n.next=11,(0,se.call)(ir,or);case 11:return n.abrupt("return",{});case 12:case"end":return n.stop()}}),Jn,null,[[0,7]])}var pr=function(e){var t=e.video,n=e.thumbnail,r=e.duration;return{video_url:t,thumb_url:n,thumb_width:e.width,thumb_height:e.height,duration_seconds:Math.ceil(r/1e3)}};function gr(e,t){var n=[];return e.forEach((function(e,r){var s=e.service_id,a=e.token,o=e.upload_domain,i=e.domain,c=e.bucket,u=e.slice_size;n.push({vid:t,bucket:c,sliceSize:u,biz:120,env:"live",country:"VN",serviceID:s,serviceIndex:r,authorization:a,domain:tr(i),uploadDomain:tr(o)})})),n}function Ar(e){var t,n,r,s,a,o,i,c,u,l,d,p,g,A,f,h,m,E,v,S,b,_,y,C;return re().wrap((function(x){for(;;)switch(x.prev=x.next){case 0:return t=new Error("upload fail"),n=e.id,r=e.file,s=e.duration,a=e.onProgress,o=void 0===a?function(){return{}}:a,x.next=4,(0,se.select)((0,T.selectVideoInfoByKey)(n));case 4:return i=x.sent,u=(c=i||{}).vid,(l=c.services).forEach((function(e,t){"txcloud"===e.service_id&&l.unshift(l.splice(t,1)[0])})),x.next=9,(0,se.call)(ur,{file:r,serviceList:gr(l,u),onProgress:o});case 9:if(d=x.sent){x.next=12;break}throw t;case 12:if(p=l[0],g=p.service_id,A=p.domain,f="txcloud"===g,h=d.data.video,m=h.md5,E=h.extendId,v=h.url,!f||v){x.next=17;break}throw t;case 17:return x.next=19,(0,se.call)(lr,{vid:u,md5:m,service_id:g,extend_id:E,file_size:r.size,video_url:v||"".concat(A,"/").concat(u,".ori.mp4")});case 19:if(x.sent){x.next=22;break}throw t;case 22:return x.next=24,(0,se.delay)(er(s));case 24:S=180;case 25:if(!(S>0)){x.next=58;break}return x.next=28,(0,se.select)((0,T.selectVideoInfoByKey)(n));case 28:if("successful"!==(i=x.sent).status){x.next=31;break}return x.abrupt("return",pr(i.uploadResult));case 31:if("failed"!==i.status){x.next=35;break}return x.next=34,(0,se.call)(ir,or,"failed");case 34:throw t;case 35:return x.next=37,(0,se.call)(dr,u);case 37:if(b=x.sent,(_=b.status)&&"reported"!==_){x.next=45;break}return x.next=42,(0,se.delay)(3e3);case 42:S-=3,x.next=56;break;case 45:return x.next=47,(0,se.put)(rr({id:n,info:{status:_}}));case 47:if("successful"!==_){x.next=53;break}return(y=performance.getEntriesByName("REPORT_UPLOAD_".concat(u),"mark")[0])&&(performance.mark("SERVICE_DONE_".concat(u)),C=performance.getEntriesByName("SERVICE_DONE_".concat(u))[0].startTime-y.startTime,performance.clearMarks("REPORT_UPLOAD_".concat(u)),performance.clearMarks("SERVICE_DONE_".concat(u)),(0,T.collectAsyncTask)(T.ReportPoint.SERVICE_DONE,C)),x.abrupt("return",pr(b));case 53:return x.next=55,(0,se.call)(ir,or,_);case 55:throw t;case 56:x.next=25;break;case 58:return x.next=60,(0,se.call)(ir,"push_timeout",status);case 60:throw t;case 61:case"end":return x.stop()}}),$n)}const fr=(o(Gn={},ue.UPDATE_VIDEO_INFO,(function(e,t){var n=t.payload,r=n.id,s=n.info,a=e.videoMap[r]||{};return zn(zn({},e),{},{videoMap:zn(zn({},e.videoMap),{},o({},r,zn(zn({},a),s)))})})),o(Gn,ue.DELETE_VIDEO_INFO,(function(e,t){var n=t.payload.id,r=e.videoMap;return delete r[n],zn(zn({},e),{},{videoMap:zn({},r)})})),Gn);var hr=function(e,t,n){return e===t&&(new Date).getTime()<=n/1e6};function mr(e,t,n,r,s,a,o){try{var i=e[a](o),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,s)}function Er(e){return function(){var t=this,n=arguments;return new Promise((function(r,s){var a=e.apply(t,n);function o(e){mr(a,r,s,o,i,"next",e)}function i(e){mr(a,r,s,o,i,"throw",e)}o(void 0)}))}}var vr=!1,Sr=null,br=((0,O.getRuntimeRegion)()||"").toUpperCase(),_r="live"===(0,O.getRuntimeServer)();function yr(e,t){return Cr.apply(this,arguments)}function Cr(){return Cr=Er(re().mark((function e(t,n){var r,s,a,o,i,c,u,l;return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(vr){e.next=9;break}return vr=!0,e.next=4,Promise.resolve().then(Q.t.bind(Q,5423,23));case 4:r=e.sent,s=r.createFetchUtils,a=s({locale:br,isLiveEnv:_r,onSecuritySdkError:function(e){return console.log("[onSecuritySdkError]",e)}}),o=a.initSecuritySdk,i=a.post,Sr=i,o({});case 9:return c=n.headers,u=n.body,e.next=12,Sr(t,JSON.parse(u),{headers:c,antiFraudConfig:{deviceFingerPrint:{dataFormatter:function(e){return{re_policy:{dfp_access_f:e}}}},apiProtection:{signatureLevel:1}}});case 12:return l=e.sent,e.abrupt("return",l.__raw);case 14:case"end":return e.stop()}}),e)}))),Cr.apply(this,arguments)}var xr,Mr=Q(4323).t,Ir=re().mark(ys),wr=re().mark(Cs),Or=re().mark(xs),Tr=re().mark(Is),Br=re().mark(Os),kr=re().mark(Ts),Rr=re().mark(Bs),Pr=re().mark(Rs),Dr=re().mark(Ps),Nr=re().mark(Ds),jr=re().mark(Ns),Fr=re().mark(js);function qr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ur(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qr(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Lr,Gr=O.MessageTypes.MSG_TYPE_IMAGE,Yr=O.MessageTypes.MSG_TYPE_TEXT,Hr=O.MessageTypes.MSG_TYPE_VIDEO,Wr=(O.MessageTypes.MSG_TYPE_ITEM_LIST,O.MessageTypes.MSG_TYPE_RATE_CARD),Zr=O.MessageTypes.MSG_TYPE_FAQ_QUESTION,Vr=O.MessageTypes.MSG_TYPE_FAQ_FEEDBACK,zr=O.MessageTypes.MSG_TYPE_FAQ_CATEGORY_CHOICE,Qr=O.MessageTypes.MSG_TYPE_FAQ_TYPE_CHOICE,Xr=O.MessageTypes.MSG_TYPE_FAQ_TYPE_BOT_REQUEST_TEXT_MESSAGE,Kr=O.MessageTypes.MSG_TYPE_FAQ_TYPE_BOT_REQUEST_ORDER_MESSAGE,Jr=O.MessageErrorCode.DEFAULT,$r=O.MessageErrorCode.FORBIDDEN,es=O.MessageErrorCode.LIMITING,ts=O.MessageErrorCode.CUSTOM_ERROR,ns=O.MessageErrorCode.BLACKLIST,rs=O.MessageErrorCode.CANCEL_ORDER,ss=O.MessageErrorCode.UNVERIFIED_PHONE_NUMBER,as=O.MessageErrorCode.EXCEED_DAILY_LIMIT,os=O.MessageErrorCode.UNTRUSTED_NETWORK,is=O.MessageErrorCode.NEED_CAPTCHA,cs=O.MessageErrorCode.DFP_ERROR,us=O.MessageErrorCode.SPAMMER,ls=O.MessageErrorCode.FAQ_EXPIRED,ds=O.MessageErrorCode.FAQ_SESSION_OLD;Lr="mini-sc_redirect";var ps=(0,te.createActions)({SEND_MESSAGES_REQUESTED:function(e){var t=e.id,n=e.conversationId,r=e.messages,s=e.more;return{id:t,conversationId:n,messages:r,more:void 0===s?{}:s}},SEND_MESSAGES_SUCCEEDED:function(e){return{conversationId:e.conversationId,requestIdToMessageId:e.requestIdToMessageId}},SENDING_MESSAGES:function(e){var t=e.conversationId,n=e.requestIds,r=e.isCancelable;return{conversationId:t,requestIds:n,isCancelable:void 0!==r&&r}},SEND_MESSAGES_TO_PENDING:function(e){return{conversationId:e.conversationId,requestIds:e.requestIds}},SEND_MESSAGES_FAILED:function(e){return{conversationId:e.conversationId,requestIds:e.requestIds}},ABORT_ALL_SENDING_MESSAGES:function(){return{}},CANCEL_SENDING_MESSAGE_REQUESTED:function(e){return{id:e.id,conversationId:e.conversationId}},CANCEL_SENDING_MESSAGE_SUCCEEDED:function(e){return{id:e.id,conversationId:e.conversationId}},SEND_VIDEO_MESSAGE_REQUESTED:function(e){var t=e.conversationId,n=e.message,r=e.isResend;return{conversationId:t,message:n,isResend:void 0!==r&&r}}}),gs=ps.sendMessagesRequested,As=ps.sendMessagesSucceeded,fs=ps.sendingMessages,hs=ps.sendMessagesToPending,ms=ps.sendMessagesFailed,Es=ps.abortAllSendingMessages,vs=ps.cancelSendingMessageRequested,Ss=ps.cancelSendingMessageSucceeded,bs=ps.sendVideoMessageRequested;function _s(e,t){return delete e.errorCode,delete e.error,Ur(Ur({},e),{},{chat_send_option:{force_send_cancel_order_warning:t,comply_cancel_order_warning:!t}})}function ys(e){var t,n,r,s,a,o,i;return re().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,n=t.conversationId,r=t.message,s=t.isResend,c.next=3,(0,se.call)(cr,n);case 3:if(null!==(a=c.sent)){c.next=8;break}return c.next=7,(0,se.call)(T.setToastInformationSaga,(0,T.setToastInformation)({toast:{show:!0,type:"fail",message:Mr("toast.chat_bot_limit")}}));case 7:case 11:return c.abrupt("return");case 8:if(!1!==a){c.next=12;break}return c.next=11,(0,se.call)(T.setToastInformationSaga,(0,T.setToastInformation)({error:null}));case 12:return o=s?r.id:(0,ae.v4)(),i=Ur({},a),s&&(i.precent=0),c.next=17,(0,se.put)(rr({id:o,info:i}));case 17:return c.next=19,(0,se.put)(gs({id:o,conversationId:n,messages:[Ur(Ur({},r),{},{type:Hr})],more:{isResend:s}}));case 19:case"end":return c.stop()}}),Ir)}function Cs(e,t){return re().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,se.delay)(1e3);case 2:return n.next=4,(0,se.put)(hs({conversationId:e,requestIds:t}));case 4:case"end":return n.stop()}}),wr)}function xs(e,t){var n,r,s,a,o,i,c,u,l,d,p,g,A,f,h,m;return re().wrap((function(E){for(;;)switch(E.prev=E.next){case 0:if(n=e.type,r=e.request_id,s=e.content,a=s.url,o=s.file,i=s.duration_seconds,c=s.video_url,u=n===Hr,E.prev=2,n!==Gr||a){E.next=24;break}return(l=new window.FormData).append("file",o),l.append("conversation_id",t),E.next=9,(0,se.call)(T.fetch,{method:"POST",subServer:"coreapi",resource:"images",payload:l});case 9:d=E.sent,p=d.url,g=d.thumbnail,A=d.thumb_width,f=d.thumb_height,h=d.file_server_id,e.content.url_hash=p.split("/").pop(),e.content.url=p,e.content.thumb_url=g,e.content.thumb_width=A,e.content.thumb_height=f,e.content.file_server_id=h,delete e.content.file,E.next=30;break;case 24:if(!u||c){E.next=30;break}return E.next=27,(0,se.call)(Ar,{id:r,file:o,duration:i,onProgress:function(e){Wt.store.dispatch(rr({id:r,info:{percent:e}}))}});case 27:m=E.sent,e.content=Ur(Ur({},e.content),m),delete e.content.file;case 30:return E.abrupt("return",!0);case 33:if(E.prev=33,E.t0=E.catch(2),E.t1=u,!E.t1){E.next=39;break}return E.next=39,(0,se.put)(rr({id:r,info:{percent:void 0}}));case 39:return E.abrupt("return",!1);case 40:case"end":return E.stop()}}),Or,null,[[2,33]])}var Ms=["request_id","to_id","type","content","shop_id","order_id","source","chat_send_option","source_content","source_type","entry_point"];function Is(e,t,n){var r,s,a,o,i,c,u,l;return re().wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return r="",s={},Ms.forEach((function(t){e[t]&&(s[t]=e[t]),s[t]&&s[t].localUrl&&(r=s[t].localUrl,delete s[t].localUrl)})),e.retryRequestId&&(s.request_id=e.retryRequestId),a=JSON.stringify(Ur(Ur({},s),{},{device_id:n,source:(0,O.checkIsScChat)()?"minichat":"pc_mall"})),o=Math.floor(Date.now()/1e3),d.prev=6,i={},d.next=10,(0,se.select)(T.captchaSignatureSelector);case 10:if(!(c=d.sent)){d.next=15;break}return i["X-Dfp-Access-S"]=c,d.next=15,(0,se.call)(T.updateCaptchaSignatureSaga,(0,T.updateCaptchaSignature)({signature:""}));case 15:return d.next=17,(0,se.call)(T.fetch,{method:"POST",resource:"messages",payload:a,headers:i,fetcher:yr});case 17:return u=d.sent,r&&(u.content.localUrl=r),t&&(0,O.removeItem)(Lr),d.abrupt("return",Ur(Ur({},u),{},{created_at:new Date,created_timestamp:o}));case 23:d.prev=23,d.t0=d.catch(6),d.t1=!0,d.next=d.t1===d.t0 instanceof T.Forbidden?28:d.t1===d.t0 instanceof T.Limiting?30:d.t1===d.t0 instanceof T.CustomError?32:d.t1===d.t0 instanceof T.Blacklist?34:d.t1===d.t0 instanceof T.CancelOrderWarning?37:d.t1===d.t0 instanceof T.UnverifiedPhoneNumber?39:d.t1===("message_exceed_daily_limit"===d.t0.message)?41:d.t1===("request_block_errorrequest block error."===d.t0.message)?43:d.t1===("need_captcha"===d.t0.message)?45:d.t1===("dfp_block_error"===d.t0.message)||d.t1===("captcha_error"===d.t0.message)?47:d.t1===("soft_spammer_error"===d.t0.message)?49:d.t1===("faq_session_expire"===d.t0.message)?51:d.t1===ds?53:56;break;case 28:return l=$r,d.abrupt("break",57);case 30:return l=es,d.abrupt("break",57);case 32:return l=ts,d.abrupt("break",57);case 34:return l=ns,e.message_option=O.MessageOption.MSG_OPT_CENSORED_BLACKLIST,d.abrupt("break",57);case 37:return l=rs,d.abrupt("break",57);case 39:return l=ss,d.abrupt("break",57);case 41:return l=as,d.abrupt("break",57);case 43:return l=os,d.abrupt("break",57);case 45:return l=is,d.abrupt("break",57);case 47:return l=cs,d.abrupt("break",57);case 49:return l=us,d.abrupt("break",57);case 51:return l=ls,d.abrupt("break",57);case 53:return d.next=55,(0,se.spawn)(Ts,!1);case 55:return d.abrupt("break",57);case 56:l=Jr;case 57:return r&&(e.content.localUrl=r),d.abrupt("return",Ur(Ur({},e),{},{requestId:e.request_id,created_timestamp:o,errorCode:l,error:d.t0}));case 59:case"end":return d.stop()}}),Tr,null,[[6,23]])}var ws=function(e){return e.content&&e.content.translation&&e.content.translation.text};function Os(e,t){var n,r,s,a,i,c,u,l,d,p,g,A,f,h,m,E;return re().wrap((function(v){for(;;)switch(v.prev=v.next){case 0:return n=[],r=[],v.next=4,(0,se.select)(T.currentConversationIdSelector);case 4:if((s=v.sent)===t){v.next=12;break}return v.next=8,(0,se.select)((0,T.getConvsMessagesRelatedSelector)(t));case 8:return n=v.sent,v.next=11,(0,se.select)((0,T.getMessagesSelector)(n.all));case 11:r=v.sent;case 12:return v.next=14,(0,se.put)(rt({conversationId:t,status:O.MessageFillStatus.FILLED,messageIds:e.map((function(e){return e.id}))}));case 14:return v.next=16,(0,se.select)(T.curConvsMessageSelector);case 16:if(a=v.sent,i=(0,T.normalize)("messages",a).entities.messages||{},c=[],u=e.map((function(e){var n,o=e.request_id,u=e.id,l=(e.content,e.type);if(i[o]){l===Hr&&c.push((0,se.put)(sr({id:o}))),c.push((0,se.put)((0,T.deleteRecord)({name:"messages",id:o})));var d=Ur(Ur({},i[o]),{},{translateStatus:ws(e)?O.TranslationStatus.SHOW:O.TranslationStatus.FAILED});return i[u]?null:(0,O.deepMerge)(d,e)}if((n=s!==t?r.filter((function(e){return e&&e.retryRequestId===o})):a.filter((function(e){return e.retryRequestId===o}))).length){var p=n[0].request_id;c.push((0,se.put)((0,T.deleteRecord)({name:"messages",id:p})));var g=Ur(Ur({},i[p]),{},{translateStatus:ws(e)?O.TranslationStatus.SHOW:O.TranslationStatus.FAILED}),A=i[u]?null:(0,O.deepMerge)(g,e);return A&&A.retryRequestId&&(A.original_request_id=p),A}return null})).filter(Boolean),u.length){v.next=22;break}return v.abrupt("return");case 22:return v.next=24,(0,se.call)(T.updateOrReplaceAction,i,u,"messages");case 24:return v.next=26,(0,se.put)(As({conversationId:t,requestIdToMessageId:u.reduce((function(e,t){return t.original_request_id?Ur(Ur({},e),{},o({},t.original_request_id,t.id)):Ur(Ur({},e),{},o({},t.request_id,t.id))}),{})}));case 26:return u.sort((function(e,t){return t.id-e.id})),v.next=29,(0,se.all)(c);case 29:return l=u[0],d=l.id,p=l.created_at,g=l.created_timestamp,A=l.type,f=l.message_option,h=l.to_shop_id,m=(0,O.fillMessagePreview)(u[0]),E=m.content,v.next=33,(0,se.put)((0,T.updateRecord)({name:"conversations",id:t,record:{latest_message_id:d,latest_message_type:A,latest_message_content:E,latest_message_to_shop_id:h,last_message_time:p,last_message_option:f,last_message_time_nano:(0,O.getTimestampNano)(g),max_general_option_hide_time:g,crm_message_preview:{},unread_count:0,flag:"normal"}}));case 33:case"end":return v.stop()}}),Br)}function Ts(e){return re().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,se.put)((0,T.showModal)({type:"CONFIRM_MODAL",actions:{confirm:{label:{key:"common.ok"},handler:function(){Wt.store.dispatch((0,T.closeModal)())}}},additions:{content:{key:"faq.expired".concat(e?".chat_with_seller":"")},modalStyle:{width:"348px",minWidth:"348px"},contentStyle:{paddingBottom:0,lineHeight:"20px"},confirmStyle:{width:"auto",padding:"0 16px",height:"32px",lineHeight:"32px"}}}));case 2:case"end":return t.stop()}}),kr)}function Bs(e){var t,n,r,s,a,o,i,c,u,l,d,p,g,A,f,h,m,E,v,S,b,_,y,C,x,M,I,w,B,k,R,P,D;return re().wrap((function(N){for(;;)switch(N.prev=N.next){case 0:if(t=e.conversationId,n=e.requestIds,r=e.messages,s=e.more,o=(a=void 0===s?{}:s).isRedirect,i=a.isCancelable,c=a.isFakingSource,r[0].type===Wr){N.next=5;break}return N.next=5,(0,se.put)(fs({conversationId:t,requestIds:n,isCancelable:i}));case 5:if(!c){N.next=7;break}return N.abrupt("return");case 7:if(u=r.length,N.t0=!i,!N.t0){N.next=12;break}return N.next=12,(0,se.spawn)(Cs,t,n);case 12:return l=0,d=[],p=[],g=[],N.next=18,(0,se.select)(T.networkStatusSelector);case 18:return A=N.sent,N.next=21,(0,se.call)(O.getItem,"device_id");case 21:if(f=N.sent,"offline"!==A){N.next=28;break}h=r.map((function(e){return Ur(Ur({},e),{},{requestId:e.request_id})})),g.push.apply(g,ee(h)),p.push.apply(p,ee(h)),N.next=57;break;case 28:if(!(l<u)){N.next=57;break}return m=r[l],N.next=32,(0,se.call)(xs,m,t);case 32:if(E=N.sent,v=void 0,E){N.next=39;break}v=Ur(Ur({},m),{},{requestId:m.request_id}),p.push(v),N.next=54;break;case 39:return N.next=41,(0,se.call)(Is,m,o,f);case 41:if(!(v=N.sent).errorCode){N.next=52;break}if(m.type!==Wr){N.next=49;break}return N.next=47,(0,se.call)(T.setToastInformationSaga,(0,T.setToastInformation)({error:v.error}));case 47:N.next=50;break;case 49:p.push(v);case 50:N.next=53;break;case 52:d.push(v);case 53:v.error&&v.error.offlineError&&g.push(v);case 54:l++,N.next=28;break;case 57:if(!d.length){N.next=61;break}return d.forEach((function(e){e.send_status=O.MessageSendStatus.SUCCEED})),N.next=61,(0,se.call)(Os,d,t);case 61:if(!p.length){N.next=118;break}return N.next=64,(0,se.select)(T.currentConversationIdSelector);case 64:if(N.sent!==t){N.next=78;break}if(S=p.find((function(e){return e.errorCode===is})),!S){N.next=72;break}return N.next=70,(0,se.put)((0,T.updateCaptchaVisible)({visible:!0,resendMessagePayload:{conversationId:t,messageId:S.id}}));case 70:N.next=78;break;case 72:if(b=[Jr,ts],_=p.find((function(e){return b.includes(e.errorCode)})),N.t1=null==_?void 0:_.code,!N.t1){N.next=78;break}return N.next=78,(0,se.call)(T.setToastInformationSaga,(0,T.setToastInformation)({error:_.error}));case 78:return y=[],p.forEach((function(e){var t=e.errorCode,n=e.error,r=e.request_id,s=e.type,a=e.content,o=e.to_id,i=e.from_id,c=e.shop_id,u=e.conversation_id,l=e.message_option;t===es&&y.push((0,se.call)(T.setToastInformationSaga,(0,T.setToastInformation)({error:n})));var d={errorCode:t,translateStatus:O.TranslationStatus.FAILED,retryRequestId:(0,ae.v4)()};s===Hr&&(0,T.$tracker)({operation:O.TrackerOperation.IMPRESSION,trackerName:"impressionResendVideo",data:{message_id:0,conversation_id:u,is_sender:!0,from_user_id:i,to_user_id:o,video_original_duration:a.duration_seconds},shopId:c}),(s===Yr&&t===ns||[Hr,Gr].includes(s))&&(d.content=a),(0,O.hasTargetMessageOption)(l,O.MessageOption.MSG_OPT_CENSORED_BLACKLIST)&&(d.message_option=l),y.push((0,se.put)((0,T.updateRecord)({name:"messages",id:r,record:d})))})),N.next=82,(0,se.all)(y);case 82:return C=p.map((function(e){return e.requestId})),N.next=85,(0,se.put)(ms({conversationId:t,requestIds:C}));case 85:if(x=[rs,os,cs,as,us,ls,ds],M=p.find((function(e){return x.includes(e.errorCode)})),!M){N.next=118;break}return N.next=90,(0,se.select)(T.currentConversationShopSelectors);case 90:I=N.sent,w=(I||{}).country,B=w&&w.toLowerCase(),N.t2=M.errorCode,N.next=N.t2===rs?96:N.t2===as?102:N.t2===us?105:N.t2===ls?108:N.t2===ds?111:114;break;case 96:return N.next=98,(0,se.select)((0,T.getMessageSelector)(M.request_id));case 98:return k=N.sent,N.next=101,(0,se.put)((0,T.showModal)({type:"Cancel_ORDER_WARNING_MODAL",title:{key:"cancel_order.modal.title"},additions:{content:{key:"cancel_order.modal.content"},region:B||"sg"},actions:{cancel:{label:{key:"cancel_order.modal.send_it"},handler:function(){Wt.store.dispatch((0,T.closeModal)());var e=_s(k,!0);Wt.store.dispatch(mn({conversationId:t,message:e}))}},confirm:{label:{key:"cancel_order.modal.not_send"},handler:function(){Wt.store.dispatch((0,T.closeModal)());var e=_s(k,!1);Wt.store.dispatch(mn({conversationId:t,message:e}))}}}}));case 101:return N.abrupt("break",118);case 102:return N.next=104,(0,se.put)((0,T.showModal)({type:"CONFIRM_MODAL",additions:{content:{key:"label.exceed.daily.limit.warning"}},actions:{confirm:{label:{key:"label.modal.confirm"},handler:function(){return Wt.store.dispatch((0,T.closeModal)())}}}}));case 104:return N.abrupt("break",118);case 105:return N.next=107,(0,se.put)((0,T.showModal)({type:"SPAMMER_MODAL",title:{key:"modal.translation_spammer.title"},additions:{content:{key:"modal.translation_spammer.content"},region:B||"sg"},actions:{confirm:{label:{key:"common.ok"},handler:function(){return Wt.store.dispatch((0,T.closeModal)())}}}}));case 107:return N.abrupt("break",118);case 108:return N.next=110,(0,se.spawn)(Ts,!0);case 110:return N.abrupt("break",118);case 111:return N.next=113,(0,se.spawn)(Ts,!1);case 113:return N.abrupt("break",118);case 114:return R=M.errorCode===cs,P='<a style="color: #395692" target="blank" href="'.concat((0,O.getShopeeCustomerService)(B),'">').concat(Mr("text.shopee_cs"),"</a>"),N.next=118,(0,se.put)((0,T.showModal)({type:"CONFIRM_MODAL",title:{key:"modal.title.".concat(R?"common_error":"untrusted_network")},additions:{withCloseIcon:!0,renderContentAsHtml:!0,content:Mr("modal.content.".concat(R?"common_error_hint":"untrusted_network"),{someone:P})},actions:{confirm:{label:{key:"common.ok"}}}}));case 118:if(!g.length){N.next=123;break}return D=g.map((function(e){return e.requestId})),N.next=122,(0,se.put)(wn({conversationId:t,requestIds:D}));case 122:(0,T.networkJudge)();case 123:case"end":return N.stop()}}),Rr)}var ks=[Zr,Vr,zr,Qr,Xr,Kr];function Rs(e){var t,n,r,s,a,o,i,c,u,l,d,p,g,A,f,h,m,E,v,S,b,_,y,C,x,M,I,w,B,k,R,P,D,N,j,F,q,U,L,G,Y,H,W;return re().wrap((function(Z){for(;;)switch(Z.prev=Z.next){case 0:if(n=e.payload,r=n.id,s=n.conversationId,a=n.messages,o=n.more,i=null===(t=a[0])||void 0===t?void 0:t.type,!ks.includes(i)){Z.next=18;break}return Z.next=5,(0,se.select)(T.currentFaqSessionInfoSelector);case 5:if(u=Z.sent,l=u.faqSessionId,d=u.sessionExpiryTime,void 0!==l){Z.next=12;break}return Z.next=11,(0,se.call)(T.setToastInformationSaga,(0,T.setToastInformation)({error:null}));case 11:case 17:case 29:return Z.abrupt("return");case 12:if(p=(null===(c=a[0])||void 0===c?void 0:c.content)||{},g=p.faq_session_id,hr(l,g,d)){Z.next=18;break}return A="0"===d||l===g&&(new Date).getTime()>d/1e6,Z.next=17,(0,se.spawn)(Ts,A);case 18:if(!(0,O.checkIsScChat)()){Z.next=21;break}return Z.next=21,(0,se.put)((0,T.reportRequested)({event_time:(Date.parse(new Date)/1e3).toString(),url:window.location.href}));case 21:return Z.next=23,(0,se.select)((0,T.getConversation)(s));case 23:if(f=Z.sent,h=f.to_id,m=o.isResend,E=o.isFakingSource,!m){Z.next=30;break}return Z.next=29,Bs({conversationId:s,messages:a,requestIds:[a[0].request_id],more:{isCancelable:!!r}});case 30:return Z.next=32,(0,se.select)(T.inlocationSelector);case 32:return v=Z.sent,Z.next=35,(0,se.select)(T.inScrollToMessageSelector);case 35:return S=Z.sent,Z.next=38,(0,se.select)(T.isNavigateToUnreadMessageSelector);case 38:if(b=Z.sent,!(v||S||b)){Z.next=57;break}if(Z.t0=b,!Z.t0){Z.next=45;break}return Z.next=45,(0,se.put)((0,T.setNavigateToUnreadMessage)({isNavigateToUnreadMessage:!1}));case 45:if(Z.t1=S,!Z.t1){Z.next=49;break}return Z.next=49,(0,se.put)(rn({inScrollToMessage:!1}));case 49:if(Z.t2=v,!Z.t2){Z.next=53;break}return Z.next=53,(0,se.put)((0,T.updateLocationMode)({inlocation:!1}));case 53:return Z.next=55,(0,se.put)(qn({conversationId:s}));case 55:return Z.next=57,(0,se.call)(qt,{payload:{conversationId:s,reset:!0,source:O.MessageSource.SEND}});case 57:return Z.next=59,(0,se.select)(T.entryPointSelector);case 59:return _=Z.sent,Z.next=62,(0,se.call)(O.getItem,Lr);case 62:return y=Z.sent,C=f.shop_id,x=a.map((function(e){var t;return pe({id:r,recipientID:h,message:e,redirectInfo:y,conversationId:s,replyToMessageId:null==e||null===(t=e.replyToMessage)||void 0===t?void 0:t.id,shopId:C,entryPoint:_})})),Z.next=67,(0,se.select)(T.currentUserIdSelector);case 67:return M=Z.sent,Z.next=70,(0,se.select)(T.currentUserSelector);case 70:return I=Z.sent,w=x.map((function(e,t){var n,r=Ur({},e);r.from_id=M;var s,o=r.type,i=r.content;if(["product","order","voucher"].includes(o)){var c="".concat(o,"_id"),u=i[c],l=a.find((function(e){return e.content[c]===u}));l&&(r.textContent=l.textContent)}else o===Yr&&(r.translateStatus=O.TranslationStatus.PENDING);return null!==(n=a[t])&&void 0!==n&&n.replyToMessage&&(r.quoted_msg=null===(s=a[t])||void 0===s?void 0:s.replyToMessage),r.from_user_name=I.username||I.name,r})),Z.next=74,(0,se.select)(T.curConvsMessageSelector);case 74:if(B=Z.sent,k=B.filter((function(e){return e.hasMessageSource&&!e.isFaking})),R=B.filter((function(e){return e.hasMessageSource&&e.isFaking})),P=k.length,!(D=R.length)){Z.next=86;break}return N=[],j=R[D-1],E||(w[0].sourceContent=j.sourceContent),R.forEach((function(e){N.push((0,se.put)((0,T.deleteRecord)({name:"messages",id:e.id})))})),Z.next=86,(0,se.all)(N);case 86:return F=(0,T.normalize)("messages",w),Z.next=89,(0,se.put)((0,T.updateEntities)({entities:F.entities}));case 89:if(!E){Z.next=98;break}if(q=w[0]||{},U=q.source_content||{},L=k[P-1],G=(null==L?void 0:L.source_content)||{},Y=G.shop_id,H=G.product_id,W=G.order_id,U.shop_id!==Y||U.product_id!==H||U.order_id!==W){Z.next=96;break}return Z.abrupt("return");case 96:return Z.next=98,(0,se.call)(ot,w);case 98:return Z.next=100,Bs({conversationId:s,messages:x,requestIds:F.result,more:{isRedirect:!!y,isCancelable:!!r,isFakingSource:E}});case 100:case"end":return Z.stop()}}),Pr)}function Ps(){var e,t;return re().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,se.select)(T.messagesRelatedMapSelector);case 2:return e=n.sent,t=[],Object.entries(e).forEach((function(e){var n=(0,Ht.Z)(e,2),r=n[0],s=n[1].sending||[];s.length&&t.push((0,se.put)(ms({conversationId:r,requestIds:s})))})),n.next=7,(0,se.all)(t);case 7:case"end":return n.stop()}}),Dr)}function Ds(e){var t,n,r;return re().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,n=t.id,r=t.conversationId,s.next=3,(0,se.put)(Ss({id:n,conversationId:r}));case 3:return s.next=5,(0,se.put)((0,T.deleteRecord)({name:"messages",id:n}));case 5:case"end":return s.stop()}}),Nr)}function Ns(){return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,T.takeEveryWithCancel)(gs,Rs,Ss);case 2:case"end":return e.stop()}}),jr)}function js(){return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,se.takeEvery)(vs,Ds);case 2:return e.next=4,(0,se.takeEvery)(bs,ys);case 4:return e.next=6,(0,se.takeLatest)(Es,Ps);case 6:case"end":return e.stop()}}),Fr)}const Fs=(o(xr={},fs,(function(e,t){var n=t.payload,r=n.conversationId,s=n.requestIds,a=n.isCancelable,i=e.messagesRelatedMap,c=i[r]||{},u=c.sending||[];u=a?u.concat(s):u;var l=c.all||[],d=c.failed||[];return Ur(Ur({},e),{},{messagesRelatedMap:Ur(Ur({},i),{},o({},r,Ur(Ur({},c),{},{all:s.reverse().filter((function(e){return!l.includes(e)})).concat(l),failed:d.filter((function(e){return!s.includes(e)})),sending:u})))})})),o(xr,hs,(function(e,t){var n=t.payload,r=n.conversationId,s=n.requestIds,a=e.messagesRelatedMap,i=a[r]||{},c=i.sending||[],u=i.all||[],l=i.failed||[],d=s.filter((function(e){return u.includes(e)&&!l.includes(e)}));return Ur(Ur({},e),{},{messagesRelatedMap:Ur(Ur({},a),{},o({},r,Ur(Ur({},i),{},{sending:c.concat(d)})))})})),o(xr,As,(function(e,t){var n=t.payload,r=n.conversationId,s=n.requestIdToMessageId,a=e.messagesRelatedMap,i=a[r]||{},c=(i.all||[]).map((function(e){return s[e]?s[e]:e})),u=i.sending||[];return Ur(Ur({},e),{},{messagesRelatedMap:Ur(Ur({},a),{},o({},r,Ur(Ur({},i),{},{all:c,offset:c[c.length-1],sending:u.filter((function(e){return!s.hasOwnProperty(e)}))})))})})),o(xr,ms,(function(e,t){var n=t.payload,r=n.conversationId,s=n.requestIds,a=e.messagesRelatedMap,i=a[r]||{},c=i.failed||[],u=i.sending||[];return Ur(Ur({},e),{},{messagesRelatedMap:Ur(Ur({},a),{},o({},r,Ur(Ur({},i),{},{sending:u.filter((function(e){return!s.includes(e)})),failed:c.concat(s)})))})})),o(xr,Ss,(function(e,t){var n=t.payload,r=n.id,s=n.conversationId,a=e.messagesRelatedMap,i=a[s]||{},c=i.all||[],u=i.sending||[];return Ur(Ur({},e),{},{messagesRelatedMap:Ur(Ur({},a),{},o({},s,Ur(Ur({},i),{},{all:c.filter((function(e){return e!==r})),sending:u.filter((function(e){return e!==r}))})))})})),xr);var qs,Us=Q(4323).t,Ls=re().mark(na),Gs=re().mark(ra),Ys=re().mark(aa),Hs=re().mark(oa),Ws=re().mark(ia);function Zs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zs(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var zs=(0,te.createActions)((o(qs={},ue.TRANSLATE_MESSAGES_REQUESTED,(function(e){return{messageId:e.messageId,toggle:e.toggle,isIDAndPcmall:e.isIDAndPcmall}})),o(qs,ue.CHANGE_TRANSLATE_STATUS,(function(e){return{messageId:e.messageId,status:e.status,changeMidStatus:e.changeMidStatus}})),o(qs,ue.SHOW_TRANSLATE_FEEDBACK,(function(e){return{messageId:e.messageId,translationSource:e.translationSource}})),o(qs,ue.SEND_TRANSLATE_FEEDBACK,(function(e){return{quality:e.quality,messageId:e.messageId,translationModel:e.translationModel,feedbacks:e.feedbacks,otherSuggestion:e.otherSuggestion}})),qs)),Qs=zs.translateMessagesRequested,Xs=zs.changeTranslateStatus,Ks=zs.showTranslateFeedback,Js=zs.sendTranslateFeedback,$s=function(e,t){return(0,se.put)((0,T.updateRecord)({name:"messages",id:e,record:t}))};function ea(e,t,n,r,s,a,o,i,c,u){var l={step2_target_language:i,step2_translation_status:!!c},d=e||!s?Vs(Vs({},{step1_target_language:a,step1_translation_status:!!o}),l):l;(0,T.$tracker)({trackerName:"translationTryAgain",data:Vs({message_id:t,conversation_id:n,message_type:0,is_sender:r,original_language:u},d)})}function ta(e,t,n,r,s){var a=e||!s?{step1_translation_status:!1,step2_translation_status:!1}:{step2_translation_status:!1};(0,T.$tracker)({trackerName:"translationTryAgain",data:Vs({message_id:t,conversation_id:n,message_type:0,is_sender:r},a)})}function na(e){var t,n,r,s,a,o,i,c,u,l,d,p,g,A,f,h,m,E,v,S,b,_,y,C,x,M,I,w,B,k,R,P,D;return re().wrap((function(N){for(;;)switch(N.prev=N.next){case 0:return t=e.payload,n=t.messageId,r=t.toggle,s=t.isIDAndPcmall,N.next=3,(0,se.select)((0,T.getMessageSelector)(n));case 3:if(N.t0=N.sent,N.t0){N.next=6;break}N.t0={};case 6:return a=N.t0,o=a.conversation_id,N.next=10,(0,se.select)((0,T.getConversation)(o));case 10:return i=N.sent,c=i.shop_id,u=(0,O.getMessageIsSend)(a,i),l=a.content||{},d=l.text,p=l.translation,g=l.mid,A=(g||{}).text,N.prev=15,f={},r?f.toggleTranslateStatus=O.TranslationStatus.PENDING:f.translateStatus=O.TranslationStatus.PENDING,N.next=20,$s(n,f);case 20:return N.next=22,(0,se.call)(T.fetch,{method:"POST",resource:"messages",suffix:"retry_translate",payload:JSON.stringify({shop_id:c,message_id:n,conversation_id:o})});case 22:if(h=N.sent,E=(m=h||{}).translated,v=m.middle_translated,b=(S=E||{}).translated_text,_=S.target_language,y=S.source_language,x=(C=v||{}).translated_text,M=C.target_language,I=C.source_language,B=(w=r?!!x:!!b)?O.TranslationStatus.SUCCEED:O.TranslationStatus.FAILED,k=r?{toggleTranslateStatus:B}:{translateStatus:B},R=r?Vs(Vs({},v),{},{text:x}):Vs(Vs({},E),{},{text:b}),P=w?R:Vs(Vs({},R),{},{text:""}),ea(r,n,o,u,A,M,x,_,b,I||y),s){N.next=37;break}return N.next=36,$s(n,Vs(Vs({},k),{},{content:{text:d,translation:P,mid:Vs(Vs({},v),{},{text:x})}}));case 36:return N.abrupt("return");case 37:return N.next=39,$s(n,Vs(Vs({},k),{},{content:{text:d,translation:r?p:P,mid:r?P:g}}));case 39:N.next=47;break;case 41:return N.prev=41,N.t1=N.catch(15),ta(r,n,o,u,A),D=r?{toggleTranslateStatus:O.TranslationStatus.FAILED}:{translateStatus:O.TranslationStatus.FAILED},N.next=47,$s(n,Vs(Vs({},D),{},{content:{text:d,translation:r?p:Vs(Vs({},p),{},{text:""}),mid:r?Vs(Vs({},g),{},{text:""}):g}}));case 47:case"end":return N.stop()}}),Ls,null,[[15,41]])}function ra(e){var t,n,r,s,a;return re().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,n=t.messageId,r=t.status,s=t.changeMidStatus,a=s?{toggleTranslateStatus:r}:{translateStatus:r},o.next=4,$s(n,a);case 4:case"end":return o.stop()}}),Gs)}var sa={shopee_en:"local_en",shopee_cn:"cn_en",shopee_kr:"kr_en"};function aa(e){var t,n,r,s,a,o,i,c;return re().wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.payload,n=t.messageId,r=t.translationSource,u.next=3,(0,se.select)((0,T.getMessageSelector)(n));case 3:if(u.t0=u.sent,u.t0){u.next=6;break}u.t0={};case 6:return s=u.t0,a=s.conversation_id,u.next=10,(0,se.select)((0,T.getConversation)(a));case 10:return o=u.sent,i=o.shop_id,c=(0,O.getMessageIsSend)(s,o),u.next=15,(0,se.put)((0,T.showModal)({type:"EVALUTE_MODAL",title:{key:"modal.translation_feedback.title"},actions:{cancel:{label:{key:"common.cancel"},shape:"default",handler:function(){Wt.store.dispatch((0,T.closeModal)())}},confirm:{label:{key:"common.submit"},handler:function(e){Wt.store.dispatch((0,T.closeModal)()),Wt.store.dispatch(Js(Vs({messageId:n,translationModel:sa[r]},e)))}}},additions:{trackerData:{data:{message_id:n,conversation_id:a,message_type:O.ApiMessageTypes[O.MessageTypes.MSG_TYPE_TEXT],is_sender:c},shopId:Number(i)}}}));case 15:case"end":return u.stop()}}),Ys)}function oa(e){var t,n,r,s,a,o,i,c,u,l,d,p;return re().wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return t=e.payload,n=t.quality,r=t.messageId,s=t.translationModel,a=t.feedbacks,o=t.otherSuggestion,g.prev=1,g.next=4,(0,se.select)((0,T.getMessageSelector)(r));case 4:if(g.t0=g.sent,g.t0){g.next=7;break}g.t0={};case 7:return i=g.t0,g.next=10,(0,se.select)(T.isSubAccountSelector);case 10:return c=g.sent,u=i.conversation_id,g.next=14,(0,se.select)((0,T.getConversation)(u));case 14:return l=g.sent,d=l.shop_id,p={quality:n,message_id:r,conversation_id:u,translation_model:s,feedbacks:a,other_suggestion:o,to_shop_id:String(i.from_shop_id)},c&&(p.shop_id=d.toString()),g.next=20,(0,se.call)(T.fetch,{method:"POST",resource:"translation",suffix:"feedback",payload:JSON.stringify(p)});case 20:return g.next=22,(0,se.call)(T.setToastInformationSaga,(0,T.setToastInformation)({toast:{show:!0,type:"success",message:Us("common.toast.translation_feedback")}}));case 22:g.next=26;break;case 24:g.prev=24,g.t1=g.catch(1);case 26:case"end":return g.stop()}}),Hs,null,[[1,24]])}function ia(){return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,se.takeEvery)(Qs,na);case 2:return e.next=4,(0,se.takeEvery)(Xs,ra);case 4:return e.next=6,(0,se.takeEvery)(Ks,aa);case 6:return e.next=8,(0,se.takeEvery)(Js,oa);case 8:case"end":return e.stop()}}),Ws)}var ca,ua,la=re().mark(Aa),da=re().mark(fa),pa=(0,te.createActions)(o({},ue.HANDLE_SENSITIVE_URL,(function(e){return{href:e.href}}))),ga=pa.handleSensitiveUrl;function Aa(e){var t;return re().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload.href,n.next=3,(0,se.put)((0,T.showModal)({type:"CONFIRM_MODAL",title:{key:"common.navigation.cofirm_titile"},actions:{cancel:{label:{key:"common.cancel"},handler:function(){Wt.store.dispatch((0,T.closeModal)())}},confirm:{label:{key:"common.navigation.confirm"},handler:function(){Wt.store.dispatch((0,T.closeModal)());var e=window.open();e.opener=null,e.location=t}}},additions:{content:{key:"common.navigation.cofirm_content"},modalStyle:{width:"352px"},contentStyle:{paddingTop:"8px",paddingBottom:"13px"}}}));case 3:case"end":return n.stop()}}),la)}function fa(){return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,se.takeEvery)(ga,Aa);case 2:case"end":return e.stop()}}),da)}function ha(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ma(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ha(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ha(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ea=re().mark(Ia),va=re().mark(wa),Sa=(0,te.createActions)((o(ca={},ue.FETCH_FAQ_MESSAGES_REQUESTED,(function(e){var t=e.sourceId,n=e.shopId,r=e.reset;return{sourceId:t,shopId:n,reset:void 0!==r&&r}})),o(ca,ue.FETCH_FAQ_MESSAGES_SUCCEEDED,(function(e){var t=e.messageIds,n=e.sourceId,r=e.faqHistoryStatus,s=e.offset,a=e.hasMore;return{messageIds:t,sourceId:n,faqHistoryStatus:r,offset:s,hasMore:void 0===a||a}})),o(ca,ue.UPDATE_FETCH_FAQ_MESSAGES_REQUESTED_STATUS,(function(e){return{status:e.status}})),o(ca,ue.UPDATE_CURRENT_FAQ_ID,(function(e){return{id:e.id}})),o(ca,ue.SHOW_FAQ_HISTORY_MODAL,(function(e){return{sourceId:e.sourceId,shopId:e.shopId}})),ca)),ba=Sa.fetchFaqMessagesRequested,_a=Sa.fetchFaqMessagesSucceeded,ya=Sa.updateFetchFaqMessagesRequestedStatus,Ca=Sa.updateCurrentFaqId,xa=Sa.showFaqHistoryModal,Ma=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:20;return new Promise((function(s,a){(0,T.fetch)({parent:"conversation",resource:"bundle_message",params:{shop_id:t,offset:n,limit:r,source_id:e}}).then((function(e){var t=e.bundle_message,n=e.total;be(t),s({messages:t,total:n})})).catch((function(e){a(e)}))}))};function Ia(e){var t,n,r,s,a,o,i,c,u,l,d,p,g,A,f;return re().wrap((function(h){for(;;)switch(h.prev=h.next){case 0:return t=e.payload,n=t.sourceId,r=t.shopId,s=t.reset,h.prev=1,h.next=4,(0,se.put)(Ca({id:n}));case 4:return h.next=6,(0,se.select)(T.currentFaqHistorySeletor);case 6:if(a=h.sent,o=a.offset,i=void 0===o?0:o,!(void 0!==(c=a.hasMore)&&!c||s&&i)){h.next=13;break}return h.abrupt("return",null);case 13:return h.next=15,(0,se.put)(ya({status:s?O.DataFetchStatus.INIT_PENDING:O.DataFetchStatus.PENDING}));case 15:return h.next=17,Ma(n,r,i);case 17:return u=h.sent,l=u.messages,d=u.total,p=i+l.length,l.sort((function(e,t){return ge(e.id,t.id)})),g=(0,T.normalize)("messages",l),A=g.result,f=g.entities,h.next=25,(0,se.put)((0,T.updateEntities)({entities:f}));case 25:return h.next=27,(0,se.call)(ot,l);case 27:return h.next=29,(0,se.put)(_a({sourceId:n,offset:p,hasMore:p<d,faqHistoryStatus:O.DataFetchStatus.SUCCEED,messageIds:A}));case 29:h.next=35;break;case 31:return h.prev=31,h.t0=h.catch(1),h.next=35,(0,se.put)(ya({status:s?O.DataFetchStatus.INIT_FAILED:O.DataFetchStatus.FAILED}));case 35:case"end":return h.stop()}}),Ea,null,[[1,31]])}function wa(){return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,se.takeEvery)(ba,Ia);case 2:case"end":return e.stop()}}),va)}const Oa=(o(ua={},ue.FETCH_FAQ_MESSAGES_SUCCEEDED,(function(e,t){var n=t.payload,r=n.messageIds,s=n.sourceId,a=n.faqHistoryStatus,i=n.offset,c=n.hasMore,u=e.faqHistoryHash,l=(u[s]||{all:[]}).all,d=Array.from(new Set(l.concat(r)));return ma(ma({},e),{},{faqHistoryHash:ma(ma({},u),{},o({},s,{all:d,offset:i,hasMore:c})),faqHistoryStatus:a})})),o(ua,ue.UPDATE_FETCH_FAQ_MESSAGES_REQUESTED_STATUS,(function(e,t){var n=t.payload.status;return ma(ma({},e),{},{faqHistoryStatus:n})})),o(ua,ue.UPDATE_CURRENT_FAQ_ID,(function(e,t){var n=t.payload.id;return ma(ma({},e),{},{faqId:n})})),ua);function Ta(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Ba(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ba(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,s=function(){};return{s,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){i=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(i)throw a}}}}function Ba(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ka=re().mark(no),Ra=re().mark(ro),Pa=re().mark(so),Da=re().mark(ao),Na=re().mark(oo),ja=re().mark(co),Fa=re().mark(uo);function qa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ua(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qa(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var La,Ga=O.MessageTypes.MSG_TYPE_OFFER,Ya=O.MessageTypes.MSG_TYPE_VIDEO,Ha=O.MessageTypes.MSG_TYPE_NOTIFICATION,Wa=(0,te.createActions)({RECEIVE_MESSAGE_REQUESTED:function(e){return{message:e.message}},RECEIVE_MESSAGE_SUCCEEDED:function(e){return{conversationId:e.conversationId,message:e.message}},RESET_NEW_CONVERSATION_QUEUE:function(){return{}},RESET_OLD_CONVERSATION_QUEUE:function(){return{}},RESET_CONVERSATION_QUEUE:function(){return{}}}),Za=Wa.receiveMessageRequested,Va=Wa.receiveMessageSucceeded,za=Wa.resetNewConversationQueue,Qa=Wa.resetOldConversationQueue,Xa=Wa.resetConversationQueue,Ka=2e3,Ja=Ka,$a=Ka,eo=[],to=[];function no(e){var t,n,r,s,a,o,i,c,u,l,d;return re().wrap((function(p){for(;;)switch(p.prev=p.next){case 0:if(t=e.content,n=e.from_id,r=e.send_by_yourself,s=e.conversation_id,o=(a=t||{}).offer_id,i=a.model_id,c=a.shop_id,u=a.product_id,r){p.next=5;break}return p.next=5,(0,se.put)((0,T.getPendingOffersCountRequested)({buyerId:n,shopId:c,productId:u}));case 5:return l=[],d={},p.next=9,(0,se.select)((0,T.relatedOfferIdsSelector)(s,i,o,u));case 9:return p.sent.forEach((function(e){var t=e.id;d[t]=Ua(Ua({},e),{},{status:O.OfferStatus.CANCELLED})})),l.push((0,se.put)((0,T.batchUpdateRecord)({name:"offers",records:d}))),p.next=14,(0,se.all)(l);case 14:case"end":return p.stop()}}),ka)}function ro(e){var t,n,r,s,a,o,i,c,u,l,d,p,g,A,f,h,m,E,v,S,b,_,y,C,x,M,I,w,B,k,R,P,D,N,j;return re().wrap((function(F){for(;;)switch(F.prev=F.next){case 0:return t=e.payload.message,n=t.id,r=t.type,s=t.request_id,a=t.conversation_id,o=t.send_by_yourself,t.content,i=t.created_timestamp,c=t.to_shop_id,ve.includes(r)&&be(t),F.next=5,(0,se.select)((function(e){return e.conversationReducer}));case 5:return u=F.sent,l=u.conversationIdsMap,d=u.currentConversationId,p=u.currentConversationCanRead,F.next=11,(0,se.select)((0,T.getConversation)(a));case 11:if(g=F.sent,A=g.id&&void 0!==g.faking,l&&l[a.toString()]||A){F.next=18;break}eo.push(t),F.next=106;break;case 18:if(r!==Ga){F.next=22;break}return F.next=22,(0,se.call)(no,t);case 22:if(f=d===a,h=(0,O.getChatBotParams)(t,{updateMaxGeneralOptionHideTime:o}),m=(0,O.getCrmPreviewParams)(t),!f){F.next=105;break}return F.next=28,(0,se.select)(T.curConvsMessageSelector);case 28:if(E=F.sent,!o){F.next=74;break}v=!1,S=!1,b=!1,_=Ta(E),F.prev=34,_.s();case 36:if((y=_.n()).done){F.next=46;break}if(C=y.value,x=C.id,M=C.retryRequestId,S=x===s,b=M===s,!((v=x===n)||S||b)){F.next=44;break}return F.abrupt("break",46);case 44:F.next=36;break;case 46:F.next=51;break;case 48:F.prev=48,F.t0=F.catch(34),_.e(F.t0);case 51:return F.prev=51,_.f(),F.finish(51);case 54:if(v){F.next=72;break}if(!S&&!b){F.next=60;break}return F.next=58,(0,se.call)(Os,[t],a);case 58:F.next=72;break;case 60:return F.next=62,(0,se.call)(T.updateOrReplaceAction,E,[t],"messages",["content"]);case 62:return F.next=64,(0,se.call)(ot,[t],{sync:!0});case 64:return F.next=66,(0,se.select)((0,T.getMessageSelector)(t.id));case 66:return I=F.sent,w=(0,O.fillMessagePreview)(I),B=w.content,F.next=70,(0,se.put)((0,T.updateRecord)({name:"conversations",id:a,record:Ua(Ua({latest_message_id:n,latest_message_type:r,latest_message_content:B,latest_message_to_shop_id:c,last_message_time_nano:(0,O.getTimestampNano)(i)},h),m)}));case 70:return F.next=72,(0,se.put)(Va({conversationId:a,message:t}));case 72:F.next=97;break;case 74:if(r!==Ya){F.next=77;break}return F.next=77,(0,se.put)(rr({id:s,info:{shouldPreload:!0}}));case 77:return F.next=79,(0,se.call)(T.updateOrReplaceAction,E,[t],"messages",["content"]);case 79:return F.next=81,(0,se.call)(ot,[t],{sync:!0});case 81:return F.next=83,(0,se.select)((0,T.getMessageSelector)(t.id));case 83:return k=F.sent,R=(0,O.fillMessagePreview)(k),P=R.content,F.next=87,(0,se.select)(T.currentConversationSelector);case 87:if(D=F.sent,N=D.unread_count,j=p?N:N+1,0!==N||p||r===Ha){F.next=93;break}return F.next=93,(0,se.spawn)(T.handleUnreadCountChangeAction,(0,T.updateUnreadCount)({type:T.unreadCountActions.RECEIVE_UNREADABLE_MESSAGE,conversation:D}));case 93:return F.next=95,(0,se.put)((0,T.updateRecord)({name:"conversations",id:a,record:Ua(Ua({unread_count:j,latest_message_id:n,latest_message_type:r,latest_message_content:P,latest_message_to_shop_id:c,last_message_time_nano:(0,O.getTimestampNano)(i)},h),m)}));case 95:return F.next=97,(0,se.put)(Va({conversationId:a,message:t}));case 97:if(!A){F.next=100;break}return F.next=100,(0,se.call)(T.fetchConversationsRequestedSaga,(0,T.fetchConversationsRequested)({direction:"latest"}));case 100:if(o||!p){F.next=103;break}return F.next=103,(0,se.call)(T.markMessagesRequestedSaga,(0,T.markMessagesRequested)({conversationId:a,isRead:!0,latestMessageId:n}));case 103:F.next=106;break;case 105:to.push(t);case 106:case"end":return F.stop()}}),Ra,null,[[34,48,51,54]])}function so(){var e,t,n,r,s,a,o,i=arguments;return re().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(e=i.length>0&&void 0!==i[0]&&i[0],!(t=eo.length)){c.next=19;break}return c.next=5,(0,se.select)(T.isSubAccountSelector);case 5:return n=c.sent,r=eo.splice(0,t).sort((function(e,t){return e.created_timestamp-t.created_timestamp})),c.next=9,(0,se.select)((function(e){return e.conversationReducer}));case 9:if(s=c.sent,a=s.maxLatestTimestampNano,o=s.maxLatestReceivedMessageId,!(n?(0,O.greaterThan)(r[0].id,o):a<=r[0].created_timestamp*Math.pow(10,9))){c.next=19;break}return c.next=16,(0,se.call)(T.fetchConversationsRequestedSaga,(0,T.fetchConversationsRequested)({direction:"latest"}));case 16:if(!e){c.next=19;break}return c.next=19,(0,se.spawn)(T.handleUnreadCountChangeAction,(0,T.updateUnreadCount)({type:T.unreadCountActions.REFRESH_TOTAL_UNREAD_CONVERSATION_COUNT}));case 19:case"end":return c.stop()}}),Pa)}function ao(){var e,t;return re().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=3,(0,se.delay)(Ja);case 3:if(e=eo.length){n.next=8;break}Ja=8e3===Ja?Ja:2*Ja,n.next=20;break;case 8:if(Ja=Ka,t=eo[e-1].id,La===t){n.next=14;break}return La=t,n.next=14,(0,se.spawn)(T.handleUnreadCountChangeAction,(0,T.updateUnreadCount)({type:T.unreadCountActions.REFRESH_TOTAL_UNREAD_CONVERSATION_COUNT}));case 14:return n.next=16,(0,se.select)(T.showChatWindowSelector);case 16:if(!n.sent){n.next=20;break}return n.next=20,(0,se.call)(so,!0);case 20:n.next=0;break;case 22:case"end":return n.stop()}}),Da)}function oo(){var e;return re().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,(0,se.delay)($a);case 3:if(e=to.length){t.next=8;break}$a=8e3===$a?$a:2*$a,t.next=9;break;case 8:return t.delegateYield(re().mark((function t(){var n,r,s,a,o,i;return re().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,se.put)((0,T.updateFetchConversationsDirection)({direction:"latest"}));case 2:return n=to.splice(0,e),$a=Ka,r=Array.from(new Set(n.map((function(e){return e.conversation_id})))),t.next=7,(0,se.select)((0,T.getConversations)(r));case 7:return s=t.sent,a={},o=0,n.forEach((function(e){var t=e.id,n=e.type,r=e.content,i=e.created_timestamp,c=e.conversation_id,u=e.send_by_yourself,l=e.to_shop_id,d=(0,O.getChatBotParams)(e,{updateMaxGeneralOptionHideTime:u}),p=(0,O.getCrmPreviewParams)(e),g=Ua(Ua({latest_message_id:t,latest_message_type:n,latest_message_content:r,latest_message_to_shop_id:l,last_message_time_nano:(0,O.getTimestampNano)(i)},d),p),A=a[c],f=!u&&n!==Ha;if(A)t>A.latest_message_id?a[c]=Ua(Ua(Ua({},A),g),{},{unread_count:f?A.unread_count+1:A.unread_count}):a[c]=Ua(Ua({},A),{},{unread_count:f?A.unread_count+1:A.unread_count});else{var h=s.find((function(e){return e.id===c}))||{},m=h.unread_count,E=void 0===m?0:m;h.shop_id,a[c]=Ua(Ua({},g),{},{unread_count:f?E+1:E}),f&&0===E&&(o+=1)}})),i=Object.keys(a).map((function(e){return Ua(Ua({},a[e]),{},{id:e})})),t.next=14,(0,se.call)(T.fetchMessagePreview,{list:i,conversationId:1===i.length&&i[0].id,handleSave:function(e){var t=e.records;Object.keys(t).forEach((function(e){var n=a[e];n&&(a[e]=Ua(Ua({},n),{},{latest_message_content:t[e]}))}))}});case 14:return t.next=16,(0,se.put)((0,T.batchUpdateRecord)({name:"conversations",records:a,checkProp:"latest_message_id"}));case 16:return t.next=18,(0,se.spawn)(T.handleUnreadCountChangeAction,(0,T.updateUnreadCount)({type:T.unreadCountActions.MESSAGE_QUEUE_UPDATE,messageQueueUpdate:{totalIncrease:o}}));case 18:case"end":return t.stop()}}),t)}))(),"t0",9);case 9:t.next=0;break;case 11:case"end":return t.stop()}}),Na)}function io(){var e=eo.length,t=to.length;e&&eo.splice(0,e),t&&to.splice(0,t)}function co(e){var t,n,r,s,a,o,i,c,u,l,d,p;return re().wrap((function(g){for(;;)switch(g.prev=g.next){case 0:if(!(t=to.filter((function(t){return t.conversation_id===e}))).length){g.next=15;break}return t.forEach((function(e){var t=to.findIndex((function(t){return t.id===e.id}));to.splice(t,1)})),n=t.sort((function(e,t){return t.latest_message_id-e.latest_message_id})),r=n[0],s=r.id,a=r.type,o=r.content,i=r.created_timestamp,c=r.send_by_yourself,u=(0,O.getChatBotParams)(r,{updateMaxGeneralOptionHideTime:c}),l=(0,O.getCrmPreviewParams)(r),d=o,g.next=11,(0,se.call)(T.fetchMessagePreview,{list:[r],conversationId:e,handleSave:function(e){var t=e.records,n=Object.keys(t)[0];n===s&&(d=Ua(Ua({},o),t[n]))}});case 11:return p=Ua(Ua({latest_message_id:s,latest_message_type:a,latest_message_content:d,last_message_time_nano:(0,O.getTimestampNano)(i)},u),l),g.next=14,(0,se.put)((0,T.updateRecord)({name:"conversations",id:e,record:p}));case 14:return g.abrupt("return",s);case 15:return g.abrupt("return",null);case 16:case"end":return g.stop()}}),ja)}function uo(){return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,se.takeEvery)(Za,ro);case 2:return e.next=4,(0,se.takeEvery)(Xa,io);case 4:case"end":return e.stop()}}),Fa)}const lo=o({},Va,(function(e,t){var n,r=t.payload,s=r.conversationId,a=r.message,i=a.id,c=a.request_id,u=e.messagesRelatedMap,l=u[s]||{},d=l.all,p=void 0===d?[]:d,g=l.sending,A=void 0===g?[]:g;return n=p.includes(i)?p:[i].concat(p).filter((function(e){return e!==c})),Ua(Ua({},e),{},{messagesRelatedMap:Ua(Ua({},u),{},o({},s,Ua(Ua({},l),{},{all:n,sending:A.filter((function(e){return!A.includes(c)}))})))})}));var po=Q(4323).t;function go(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ao(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?go(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):go(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var fo,ho=re().mark(xo),mo=re().mark(Mo),Eo=re().mark(Io),vo=re().mark(wo),So=re().mark(Oo);fo="mini-sc_redirect";var bo=(0,te.createActions)({DELETE_MESSAGE_REQUESTED:function(e){return{messageId:e.messageId}},DELETE_MESSAGE_POST_REQUESTED:function(e){return{messageId:e.messageId}},DELETE_MESSAGE_ID_IN_HASH:function(e){return{id:e.id,conversationId:e.conversationId}}}),_o=bo.deleteMessageRequested,yo=bo.deleteMessagePostRequested,Co=bo.deleteMessageIdInHash;function xo(e){var t,n,r,s;return re().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.conversationId,a.next=3,(0,se.select)((0,T.getConversationFakingMessages)(t));case 3:if(!(n=a.sent).length){a.next=13;break}return r=[],n.forEach((function(e){r.push((0,se.call)(Mo,{id:e.id,conversationId:t}))})),a.next=9,(0,se.all)(r);case 9:return a.next=11,(0,se.call)(O.getItem,fo);case 11:(null==(s=a.sent)?void 0:s.conversationId)===t&&(0,O.removeItem)(fo);case 13:case"end":return a.stop()}}),ho)}function Mo(e){var t,n;return re().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.id,n=e.conversationId,r.next=3,(0,se.put)(Co({id:t,conversationId:n}));case 3:return r.next=5,(0,se.put)((0,T.deleteRecord)({name:"messages",id:t}));case 5:case"end":return r.stop()}}),mo)}function Io(e){var t,n,r,s;return re().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload.messageId,a.next=3,(0,se.select)((0,T.getMessageSelector)(t));case 3:return n=a.sent,r=n.type,s=n.conversation_id,a.next=7,(0,se.put)((0,T.showModal)({type:"CONFIRM_MODAL",title:{key:"message.delete.title"},actions:{cancel:{label:po("common.cancel"),handler:function(){Wt.store.dispatch((0,T.closeModal)()),(0,T.$tracker)({trackerName:"cancelConfirm",data:{message_id:t,message_type:(0,O.getReplyTrackerMessageType)(r),conversation_id:s}})}},confirm:{label:po("common.confirm"),handler:function(){Wt.store.dispatch((0,T.closeModal)()),Wt.store.dispatch(yo({messageId:t})),(0,T.$tracker)({trackerName:"deleteConfirm",data:{message_id:t,message_type:(0,O.getReplyTrackerMessageType)(r),conversation_id:s}})}}}}));case 7:case"end":return a.stop()}}),Eo)}function wo(e){var t,n,r,s,a,o,i,c,u,l,d,p,g,A,f,h,m,E;return re().wrap((function(v){for(;;)switch(v.prev=v.next){case 0:return t=e.payload.messageId,v.prev=1,v.next=4,(0,se.select)(T.deleteConfigSelector);case 4:return n=v.sent,v.next=7,(0,se.select)((0,T.getMessageSelector)(t));case 7:return r=v.sent,v.next=10,(0,se.call)(T.fetch,{method:"POST",parent:"messages",resource:"delete",payload:JSON.stringify({msg_id:t,type:r.type,delete_config_version:n.deleteConfigVersion})});case 10:return s=v.sent,a=r.message_option|O.MessageOption.MSG_OPT_DELETE,o=(0,T.normalize)("messages",Ao(Ao({},r),{},{message_option:a})),i=o.entities,v.next=15,(0,se.put)((0,T.updateEntities)({entities:i}));case 15:return v.next=17,(0,se.select)((0,T.getConversation)(r.conversation_id));case 17:if((c=v.sent).latest_message_id!==r.id){v.next=22;break}return u=(0,T.normalize)("conversations",Ao(Ao({},c),{},{last_message_option:a,latest_message_content:{text:""},latest_message_from_id:r.from_id})),l=u.entities,v.next=22,(0,se.put)((0,T.updateEntities)({entities:l}));case 22:if(d=s.config_version,n.deleteConfigVersion!==d){v.next=25;break}return v.abrupt("return");case 25:return v.next=27,(0,se.select)(T.currentUserSelector);case 27:return p=v.sent,g=(s.region_config||[]).find((function(e){return e.region===p.country})),A=!1,f=0,g&&g.duration&&(A=!0,f=g.duration),v.next=34,(0,se.put)((0,T.updateDelPermission)({hasDeletePermission:A,deleteConfigVersion:d,deleteConfigDuration:f}));case 34:v.next=45;break;case 36:return v.prev=36,v.t0=v.catch(1),v.next=40,(0,se.select)((0,T.getMessageSelector)(t));case 40:return h=v.sent,m=h.type,E=h.conversation_id,v.next=44,(0,se.call)(T.setToastInformationSaga,(0,T.setToastInformation)({error:v.t0}));case 44:(0,T.$tracker)({operation:O.TrackerOperation.IMPRESSION,trackerName:"error",data:{message_id:t,message_type:(0,O.getReplyTrackerMessageType)(m),conversation_id:E,error_reason:v.t0.message}});case 45:case"end":return v.stop()}}),vo,null,[[1,36]])}function Oo(){return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,se.takeEvery)(_o,Io);case 2:return e.next=4,(0,se.takeEvery)(yo,wo);case 4:case"end":return e.stop()}}),So)}const To=o({},Co,(function(e,t){var n=t.payload,r=n.id,s=n.conversationId,a=e.messagesRelatedMap,i=a[s]||{},c=i.all||[],u=i.sending||[],l=i.failed||[];return Ao(Ao({},e),{},{messagesRelatedMap:Ao(Ao({},a),{},o({},s,Ao(Ao({},i),{},{all:c.filter((function(e){return e!==r})),sending:u.filter((function(e){return e!==r})),failed:l.filter((function(e){return e!==r}))})))})}));var Bo,ko,Ro=re().mark(jo),Po=re().mark(Fo),Do=(0,te.createActions)(o({},ue.MESSAGE_SYNC_UPDATE,(function(e){return{conversation:e.conversation}}))),No=Do.messageSyncUpdate;function jo(e){var t,n,r,s,a,o,i,c,u,l,d,p,g,A,f,h,m,E,v;return re().wrap((function(S){for(;;)switch(S.prev=S.next){case 0:return t=e.payload.conversation,n=t.id,r=t.shop_id,S.prev=2,S.next=5,(0,se.select)((0,T.getConvsMessagesRelatedSelector)(n));case 5:if(a=S.sent,o=a.all,i=void 0===o?[]:o,c=a.timeNow,u=a.oldestMessageId,0!==i.length){S.next=9;break}return S.abrupt("return");case 9:return S.next=11,(0,se.call)(T.fetch,{subServer:"coreapi",parent:"conversation",resource:"updated_message_list",params:{shop_id:r,conversation_id:n,last_update_time:c||"0"}});case 11:if(l=S.sent,d=l.messages,p=void 0===d?[]:d,g=l.page_result,p.sort((function(e,t){return t.id-e.id})),!(p.length>0)){S.next=18;break}return A=(0,T.normalize)("messages",p),f=A.entities,S.next=18,(0,se.put)((0,T.updateEntities)({entities:f}));case 18:if(h=null===(s=p[0])||void 0===s?void 0:s.id,E=(m=g||{}).has_more,!(v=m.next_last_update_time)){S.next=23;break}return S.next=23,(0,se.put)(At({conversationId:n,updateKey:O.MessagesRelatedKey.TIME_NOW,updateValue:v}));case 23:if(!(E&&u<h&&p.length>0)){S.next=26;break}return S.next=26,(0,se.call)(jo,{payload:{conversation:t}});case 26:S.next=35;break;case 28:if(S.prev=28,S.t0=S.catch(2),!(S.t0 instanceof T.CustomError)){S.next=35;break}return S.next=33,(0,se.put)(At({conversationId:n,updateKey:O.MessagesRelatedKey.TIME_NOW,updateValue:"0"}));case 33:return S.next=35,(0,se.put)(Ot({conversationId:n,reset:!0}));case 35:case"end":return S.stop()}}),Ro,null,[[2,28]])}function Fo(){return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,se.takeEvery)(No,jo);case 2:case"end":return e.stop()}}),Po)}function qo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Uo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qo(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e){e.SHOW_CHATBOT_IMAGE="SHOW_CHATBOT_IMAGE",e.CLOSE_CHATBOT_MEDIA_PREVIEW="CLOSE_CHATBOT_MEDIA_PREVIEW",e.CHATBOT_INTENTS_REPORT_REQUEST="CHATBOT_INTENTS_REPORT_REQUEST",e.FETCH_FAQ_SESSION_SUCCEED="FETCH_FAQ_SESSION_SUCCEED"}(Bo||(Bo={}));const Lo=(o(ko={},Bo.SHOW_CHATBOT_IMAGE,(function(e,t){var n=t.payload;return Uo(Uo({},e),{},{imageUrl:n.url})})),o(ko,Bo.CLOSE_CHATBOT_MEDIA_PREVIEW,(function(e){return Uo(Uo({},e),{},{imageUrl:""})})),ko);var Go=Q(1655),Yo=Q(4209),Ho=Q.n(Yo),Wo=Q(411),Zo=Q(914),Vo=Q(7770),zo=Q(3123),Qo=re().mark(ti),Xo=Ho()(),Ko=null,Jo=function(){var e=Er(re().mark((function e(t,n){var r,s,a;return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.shopId,s=n.conversationId,e.next=3,(0,T.fetch)({parent:"faqs",subServer:"workbenchapi",resource:"bot/orders",method:"POST",payload:JSON.stringify({data:JSON.stringify(t),shop_id:r,conversation_id:s})});case 3:return(a=e.sent).data=JSON.parse(a.data),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),$o={cid:(0,O.getRuntimeRegion)(),env:(0,O.getRuntimeServer)(),from:O.ChatbotFromType.LandingPage,initialization:1,auth:{accountType:1},getOrderList:Jo},ei=function(){return Ko||((Ko=new Xo.ChatbotSDK({root:"messageSection",config:$o})).use(Wo.Message),Ko.use(Zo.RelatedIntent),Ko.use(Vo.OrderList),Ko.use(zo.OptionSelector)),Ko};function ti(e){return re().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("updateChatbotFrom",e),ei().updateConfig({from:e});case 3:case"end":return t.stop()}}),Qo)}var ni,ri=Xo.Provider,si=(0,te.createActions)((o(ni={},Bo.SHOW_CHATBOT_IMAGE,(function(e){return{url:e.url}})),o(ni,Bo.CLOSE_CHATBOT_MEDIA_PREVIEW,(function(){return{}})),o(ni,Bo.CHATBOT_INTENTS_REPORT_REQUEST,(function(e){return{reportTask:e.reportTask}})),o(ni,Bo.FETCH_FAQ_SESSION_SUCCEED,(function(e){return{conversationId:e.conversationId,faqSessionId:e.faqSessionId,sessionExpiryTime:e.sessionExpiryTime}})),ni)),ai=si.showChatbotImage,oi=si.closeChatbotMediaPreview,ii=si.chatbotIntentsReportRequest,ci=si.fetchFaqSessionSucceed,ui=function(e){return e.startsWith("https://")||e.startsWith("http://")?e:"https://".concat(e)},li=function(e){return"https://".concat((0,O.getMallUrl)((0,O.getRuntimeRegion)())).concat(e)},di=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.order_id,r=t.return_id;switch(e){case"order_detail_page":case"shipping_info_page":case"spl_landing_page":return li("/user/purchase/order/".concat(n));case"my_voucher_page":return li("/user/voucher-wallet");case"topay_order_detail_page":return li("/user/purchase?type=9");case"drc_discuss_page":return"https://".concat((0,O.getSellerCenterUrl)((0,O.getRuntimeRegion)()),"/portal/sale/return/").concat(r);case"change_mobile_number_page":return li("/user/account/profile");case"request_order_return_page":case"buyer_order_return_page":case"upload_evidence_page":return li("/user/purchase?type=8");case"return_refund_detail_page":return li("/return/detail/orderid/".concat(n,"?__mobile__=1"))}},pi=function(e,t,n){return(0,T.chatbotOrderCleaner)(e,t,n,!0)},gi=re().mark(Ci),Ai=re().mark(xi),fi=re().mark(Mi),hi=re().mark(Ii),mi=re().mark(wi);function Ei(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ei(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ei(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Si,bi=function(){return(0,Go.eventChannel)((function(e){var t=ei();return t.init().then((function(){t.on("userAction",(function(t){e(t)}))})),function(){}}))};!function(e){e[e.MESSAGE=1001]="MESSAGE",e[e.SOLUTION=1002]="SOLUTION",e[e.NOT_CHATBOT=0]="NOT_CHATBOT"}(Si||(Si={}));var _i={message:Si.MESSAGE,solution:Si.SOLUTION},yi=function(e){if(!e)return Si.NOT_CHATBOT;var t=e.type;return _i[t]};function Ci(e){var t,n,r,s,a,o,i,c,u,l,d;return re().wrap((function(p){for(;;)switch(p.prev=p.next){case 0:if(t=e.api,n=e.chatbotUserMessage,r=e.passThroughData.faqSessionId,s=yi(t),!n){p.next=18;break}return p.next=5,(0,se.select)(T.currentConversationSelector);case 5:return a=p.sent,o=n.type,i={interaction_type:s,bot_data:JSON.stringify(t?t.params:""),faq_session_id:r},"text"===o&&(u=n.text,i=vi(vi({},i),{},{text:u}),c=O.MessageTypes.MSG_TYPE_FAQ_TYPE_BOT_REQUEST_TEXT_MESSAGE),"order"===o&&(i=vi(vi({},i),{},{bot_order_info:(g=n,A=void 0,{checkout_id:g.checkout_id,order_sn:g.order_sn,total_price:g.default_price,currency:g.currency,order_status:String(g.order_status),item_image:(null===(A=g.items)||void 0===A?void 0:A.map((function(e){return null==e?void 0:e.image[0]})))||[g.image],list_type:g.list_type,has_request_refund:g.has_request_refund,buyer_pay_amount:g.buyer_pay_amount,seller_estimated_escrow:g.seller_estimated_escrow,shop_id:g.shop_id,order_id:g.order_id})}),c=O.MessageTypes.MSG_TYPE_FAQ_TYPE_BOT_REQUEST_ORDER_MESSAGE),p.next=12,(0,se.select)(T.currentConversationShopIdSelectors);case 12:return l=p.sent,p.next=15,(0,se.select)(T.currentConversationShopRegionSelectors);case 15:return d=p.sent,p.next=18,(0,se.put)(gs({conversationId:a.id,conversationUserId:a.to_id,messages:[{type:c,content:i,textContent:pi(n,l,d)}]}));case 18:case"end":return p.stop()}var g,A}),gi)}function xi(e){var t,n,r,s;return re().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return(t=e.urlInfo)&&(n=t.url,r=t.uri_key,s=t.uri_extra,r?window.open(di(r,s)):n&&window.open(ui(n))),a.next=4,(0,se.call)(Ci,e);case 4:case"end":return a.stop()}}),Ai)}function Mi(e){var t;return re().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(t=e.image)){n.next=4;break}return n.next=4,(0,se.put)(ai({url:t.url}));case 4:case"end":return n.stop()}}),fi)}function Ii(e){var t;return re().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t=e.actionType,n.t0=t,n.next="sendChatbotUserMessage"===n.t0?4:"redirect"===n.t0?7:"showImage"===n.t0?10:13;break;case 4:return n.next=6,(0,se.call)(Ci,e.data);case 6:case 9:case 12:return n.abrupt("break",13);case 7:return n.next=9,(0,se.call)(xi,e.data);case 10:return n.next=12,(0,se.call)(Mi,e.data);case 13:case"end":return n.stop()}}),hi)}function wi(){var e;return re().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,se.call)(bi);case 2:return e=t.sent,t.next=5,(0,se.takeEvery)(e,Ii);case 5:case"end":return t.stop()}}),mi)}var Oi=re().mark(Bi),Ti=re().mark(ki);function Bi(e){var t,n,r;return re().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload.reportTask,s.next=3,(0,se.select)(T.currentConversationIdSelector);case 3:return n=s.sent,s.next=6,(0,se.select)(T.currentBuyerShopIdSelector);case 6:return r=s.sent,s.prev=7,s.next=10,(0,se.call)(T.fetch,{method:"POST",subServer:"workbenchapi",parent:"faqs",resource:"bot/report",payload:JSON.stringify({messages:t,conversation_id:n,shop_id:r})});case 10:s.next=14;break;case 12:s.prev=12,s.t0=s.catch(7);case 14:case"end":return s.stop()}}),Oi,null,[[7,12]])}function ki(){return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,se.takeEvery)(ii,Bi);case 2:case"end":return e.stop()}}),Ti)}var Ri=[];function Pi(e){if((e.timeRemaining()>5||e.didTimeout)&&Ri.length){var t=ee(Ri);Ri=[],Wt.store.dispatch(ii({reportTask:t}))}Ri.length&&(0,T.requestIdleCallback)(Pi,{timeout:200})}var Di=function(e){var t;(t=Ri).push.apply(t,ee(e)),(0,T.requestIdleCallback)(Pi,{timeout:200})};function Ni(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ji(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ni(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ni(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Fi=o({},Bo.FETCH_FAQ_SESSION_SUCCEED,(function(e,t){var n=t.payload,r=n.conversationId,s=n.faqSessionId,a=n.sessionExpiryTime,i=e.faqSessions;return ji(ji({},e),{},{faqSessions:ji(ji({},i),{},o({},r,{faqSessionId:s,sessionExpiryTime:a}))})}));function qi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ui(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qi(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Li={actions:Ui(Ui({},Lo),Fi),watcher:[wi,ki]};function Gi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gi(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Hi=(0,te.createActions)(o({},ue.SET_ENTRY_POINT,(function(e){return{type:e.type,conversationId:e.conversationId}}))),Wi=Hi.setEntryPoint;const Zi=o({},ue.SET_ENTRY_POINT,(function(e,t){var n=t.payload;return Yi(Yi({},e),{},{entryPoint:n})}));function Vi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vi(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Qi=(0,te.createActions)(o({},ue.UPDATE_HAS_CONFLICT,(function(e){return{hasConflict:e.hasConflict}}))),Xi=Qi.updateHasConflict;const Ki=o({},ue.UPDATE_HAS_CONFLICT,(function(e,t){var n=t.payload.hasConflict;return zi(zi({},e),{},{toBottomHasConflict:n})}));function Ji(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ji(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ji(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ec=[Lt,js,vn,uo,fa,ia,ut,Pn,Re,Ns,wa,oo,ao,dn,Oo,Fo].concat(ee(Li.watcher)),tc={messageReducer:(0,te.handleActions)($i($i($i($i($i($i($i($i($i($i($i($i($i($i({},Zi),Ki),Gt),Fs),lo),Un),Dn),fr),Oa),lt),ln),ft),To),Li.actions),{entryPoint:{},toBottomHasConflict:!1,status:"pendingInit",messagesRelatedMap:{},messageFillStatusMap:{},videoMap:{1234:{percentage:"10",size:"1300"}},offlineMessages:{},faqHistoryHash:{},faqId:null,faqHistoryStatus:"",reply:{toMessageId:{},inScrollToMessage:!1,scrollToMessageId:""},imageUrl:"",faqSessions:{}})},nc=(Q(5401),function(){}),rc={closeMediaPreview:oi};const sc=(0,h.connect)((function(e){return{imageUrl:(0,T.chatbotImageSelector)(e)}}),rc)((function(e){var t=e.children,n=e.imageUrl,s=e.closeMediaPreview,a={id:"0",type:"image",url:n};return r().createElement(r().Fragment,null,!!n&&r().createElement(K.MediaPreviewModal,{clickTracker:nc,impressionTracker:nc,actionFinishVideoTracker:nc,medias:[a],onVisibleChange:s,currentPreviewMediaId:a.id,modalZIndex:999999}),r().createElement(ri,null,t))}));var ac=Q(1361),oc=Q.n(ac),ic=Q(6496),cc={};cc.styleTagTransform=H(),cc.setAttributes=U(),cc.insert=F().bind(null,"head"),cc.domAPI=N(),cc.insertStyleElement=G(),P()(ic.Z,cc);const uc=ic.Z&&ic.Z.locals?ic.Z.locals:void 0;var lc=function(e){p(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var s=f(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return A(this,n)}}(n);function n(){return i(this,n),t.apply(this,arguments)}return u(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.message,n=e.shopId,r=t.id,s=t.conversation_id;(0,T.$tracker)({operation:O.TrackerOperation.IMPRESSION,trackerName:"impressionOrClickUnreadBriefMessage",data:{message_id:r,conversation_id:s},shopId:n})}},{key:"render",value:function(){var e=this.props,t=e.username,n=e.message,s=e.onClick,a=e.shopId,o=e.enableTranslation,i=e.locale,c=n.id,u=n.conversation_id,l=(0,O.previewMessage)({message:(0,O.fillMessagePreview)(n),enableTranslation:o,locale:i,conversationShopId:a}).text;return r().createElement("div",{className:uc.root,onClick:function(){(0,T.$tracker)({trackerName:"impressionOrClickUnreadBriefMessage",data:{message_id:c,conversation_id:u},shopId:a}),s&&s()},"data-cy":"minichat-message-unread-brief-root"},r().createElement(S(),{svg:oc(),className:uc.newMessageArrow}),r().createElement("div",{className:uc.newMessage,"data-cy":"minichat-message-unread-brief-new"},t,": ",l))}}]),n}(r().PureComponent);const dc=lc;var pc,gc,Ac=Q(8509);function fc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fc(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var mc=O.MessageTypes.MSG_TYPE_ORDER,Ec=O.MessageTypes.MSG_TYPE_PRODUCT,vc=O.MessageTypes.MSG_TYPE_OFFER,Sc=O.MessageTypes.MSG_TYPE_VOUCHER,bc=O.MessageTypes.MSG_TYPE_VIDEO,_c=O.MessageTypes.MSG_TYPE_TEXT,yc=O.MessageTypes.MSG_TYPE_BUNDLE_DEAL,Cc=O.MessageTypes.MSG_TYPE_FLASH_SALE,xc=O.MessageTypes.MSG_TYPE_UNTATED_ORDER_REMINDER,Mc=O.MessageTypes.MSG_TYPE_ITEM_LIST,Ic=O.MessageTypes.MSG_TYPE_SHOPPING_CART,wc=O.MessageTypes.MSG_TYPE_RATE_CARD,Oc=(o(pc={},vc,"impressionOfferMessage"),o(pc,mc,"impressionOrderMessage"),o(pc,Ec,"impressionProductMessage"),o(pc,Sc,"impressionVoucherMessage"),o(pc,bc,"impressionVideoMessage"),o(gc={},yc,"impressionBundleDealCard"),o(gc,Cc,"impressionFlashSaleCard"),o(gc,Sc,"impressionVoucherCard"),o(gc,Mc,"impressionProductListCard"),o(gc,Ec,"impressionProductMessage"),o(gc,xc,"impressionRateCard"),o(gc,Ic,"impressionCartCard"),o(gc,bc,"impressionVideoMessage"),o(gc,mc,"impressionOrderMessage"),gc),Tc=function(e){var t=e.message,n=e.conversationShopId,r=e.isSend,s=e.extraParams,a=void 0===s?{}:s,o=t.id,i=t.type,c=t.content,u=t.source,l=t.to_id,d=t.from_id,p=t.request_id,g=t.crm_activity_id,A=t.textContent,f=void 0===A?{}:A,h=t.conversation_id,m={crm_activity_id:g||"",from_source:g?"CRM":""},E=c["".concat(i,"_id")];switch(i){case _c:m={message_type:O.ApiMessageTypes[_c],is_sender:r};break;case yc:m.bundle_deal_id=c.bundle_deal_id;break;case Cc:m.flash_sale_id=c.flash_sale_id;break;case xc:m.order_id=c.order_id;break;case Ec:m={product_id:E,product_shopid:n};break;case mc:m={order_id:E,order_shopid:n};break;case vc:m={offer_id:E,product_id:c.product_id,offer_shopid:n};break;case Sc:var v=f,S=v.status,b=void 0===S?"":S,_=v.claimed;m.voucher_id=c.voucher_id,r||(m=hc(hc({},m),{},{source:u,voucher_status:b===O.VoucherStatus.FINISHED?"expired":_?"claimed":"unclaimed",is_sender:r,promotion_id:c.voucher_id,promotion_shopid:n}));break;case bc:m={message_id:o===p?0:o,is_sender:r,to_user_id:l,from_user_id:d,video_original_duration:c.duration_seconds};break;case wc:m={is_sender:r}}return{data:hc(hc({conversation_id:h,message_id:o},a),m),shopId:n}},Bc=Q(8310),kc=Q.n(Bc),Rc=Q(9628),Pc={};Pc.styleTagTransform=H(),Pc.setAttributes=U(),Pc.insert=F().bind(null,"head"),Pc.domAPI=N(),Pc.insertStyleElement=G(),P()(Rc.Z,Pc);const Dc=Rc.Z&&Rc.Z.locals?Rc.Z.locals:void 0,Nc=function(e){var t=e.absolute,n=void 0===t||t,s=e.timestamp,a=(0,O.newFormatMessageTime)(s,"date");return r().createElement("div",{className:kc()(Dc.root,o({},Dc.absolute,n))},r().createElement("div",{className:Dc.time},a))};var jc={setReplyToMessage:Jt,deleteMessageRequested:_o,updateHasConflict:Xi};const Fc=(0,h.connect)((function(e){return{scrollToMessageId:(0,T.scrollToMessageIdSelector)(e),hasReplyPermission:(0,T.hasReplyPermissionSelector)(e),hasDeletePermission:(0,T.hasDeletePermissionSelector)(e),currentConversationId:(0,T.currentConversationIdSelector)(e),deleteConfigDuration:(0,T.deleteConfigDurationSelector)(e)}}),jc)((function(e){return r().createElement(Ac.MessageToolbar,e)}));var qc=Q(3682),Uc=Q.n(qc),Lc=Q(5668),Gc={};Gc.styleTagTransform=H(),Gc.setAttributes=U(),Gc.insert=F().bind(null,"head"),Gc.domAPI=N(),Gc.insertStyleElement=G(),P()(Lc.Z,Gc);const Yc=Lc.Z&&Lc.Z.locals?Lc.Z.locals:void 0;var Hc=Q(4323).t;const Wc=function(e){var t=e.code,s=(0,n.useRef)(null),a=function(){var t=e.region;window.open("".concat(O.cancelOrderPolicy[t]||O.cancelOrderPolicy.sg))};(0,n.useEffect)((function(){if(s&&s.current){var e=s.current.firstElementChild;if(e)return e.className=Yc.policy,e.addEventListener("click",a),function(){e.removeEventListener("click",a)}}}),[s]);var o=(0,O.hasTargetMessageOption)(t,O.MessageOption.MSG_OPT_CANCELORDER_WARNING_NOT_SEND),i=(0,O.hasTargetMessageOption)(t,O.MessageOption.MSG_OPT_CANCELORDER_WARNING_SENT);if(!o&&!i)return null;var c=o?Hc("cancel_order.meta.not_send"):i?Hc("cancel_order.meta.send_it"):"";return r().createElement("span",{ref:s,className:Yc.root,dangerouslySetInnerHTML:{__html:c}})};var Zc=Q(7367),Vc=Q.n(Zc),zc=Q(2438),Qc=Q.n(zc),Xc=Q(5522),Kc={};Kc.styleTagTransform=H(),Kc.setAttributes=U(),Kc.insert=F().bind(null,"head"),Kc.domAPI=N(),Kc.insertStyleElement=G(),P()(Xc.Z,Kc);const Jc=Xc.Z&&Xc.Z.locals?Xc.Z.locals:void 0;var $c=Q(4323).t,eu=O.MessageTypes.MSG_TYPE_OFFER;const tu=(0,h.connect)((function(e){return{currentConversationToName:(0,T.currentConversationToNameSelector)(e)}}),{})((function(e){var t=e.message;if(!t)return r().createElement(r().Fragment,null);var n,s=e.currentConversationToName,o=e.buyerId,i=e.shop,c=t.type,u=t.textContent,l=t.to_id,d=t.errorCode,p=t.message_option,g=l===o;if(c===eu&&u){var A=u.buyer_id===o,f=u.status,h=(0,O.getOfferText)(f,A,g,s);switch(f){case O.OfferStatus.ACCEPTED:h&&(n=r().createElement(Uc(),{content:h,type:O.AlertType.normal,showIcon:!0,icon:r().createElement(S(),{className:Jc.successIcon,svg:Qc()})}));break;case O.OfferStatus.REJECTED:case O.OfferStatus.CANCELLED:h&&(n=r().createElement(Uc(),{content:h,type:O.AlertType.normal}))}}var m={showIcon:!0,icon:r().createElement(S(),{className:Jc.warnIcon,svg:Vc()}),type:O.AlertType.normal};if(d===O.MessageErrorCode.FORBIDDEN)n=r().createElement(Uc(),a({content:$c("conversation_detail.message_list.error_message_blocked",{username:s})},m));else if(d===O.MessageErrorCode.BLACKLIST)n=r().createElement(Uc(),a({content:r().createElement(Ac.BlacklistHint,null)},m));else if(d===O.MessageErrorCode.UNVERIFIED_PHONE_NUMBER)n=r().createElement(Uc(),a({content:$c("conversation_detail.message_list.unverified_phone_number")},m));else if((0,O.hasCancelOrderMetaMessage)(p,g)){var E=i&&i.country?i.country.toLowerCase():"sg";n=r().createElement(Uc(),a({content:r().createElement(Wc,{code:p,region:E})},m))}return n?r().createElement("span",{className:Jc.metaContent,"data-cy":"minichat-message-meta-info-content"},n):r().createElement(r().Fragment,null)}));var nu=Q(8733),ru={};ru.styleTagTransform=H(),ru.setAttributes=U(),ru.insert=F().bind(null,"head"),ru.domAPI=N(),ru.insertStyleElement=G(),P()(nu.Z,ru);const su=nu.Z&&nu.Z.locals?nu.Z.locals:void 0;var au=Q(4323).t;const ou=r().memo((function(){return r().createElement("div",{className:su.newMessageTip,"data-cy":"minichat-message-new-message-tip"},au("conversation_detail.message_list.unread_messages"))}));Q(4148);var iu=Q(2839),cu=Q.n(iu),uu=Q(1696),lu={};lu.styleTagTransform=H(),lu.setAttributes=U(),lu.insert=F().bind(null,"head"),lu.domAPI=N(),lu.insertStyleElement=G(),P()(uu.Z,lu);const du=uu.Z&&uu.Z.locals?uu.Z.locals:void 0;var pu=Q(2066),gu=Q.n(pu),Au=Q(4323).t,fu=r().memo((function(e){var t=e.message,n=e.resendMessage,s=t.send_status,a=t.errorCode,o=t.message_option,i=s===O.MessageSendStatus.FAILED,c=a===O.MessageErrorCode.BLACKLIST,u=(0,O.hasTargetMessageOption)(o,O.MessageOption.MSG_OPT_CANCELORDER_WARNING_NOT_SEND),l=r().createElement("div",{className:du.iconWrap,"data-cy":"minichat-message-icon-error"},r().createElement(S(),{svg:gu(),className:du.iconBase}));return i?c?l:r().createElement("div",{className:du.iconWrap,"data-cy":"minichat-message-icon-failed"},r().createElement(cu(),{content:Au("conversation_detail.message_list.resend"),zIndex:O.MAX_Z_INDEX},r().createElement("div",{"data-cy":"minichat-message-icon-resend"},r().createElement(S(),{svg:gu(),className:du.icon,onClick:n})))):u?l:r().createElement(r().Fragment,null)}));fu.displayName="ErrorContent";const hu=fu;var mu=Q(6322),Eu={};Eu.styleTagTransform=H(),Eu.setAttributes=U(),Eu.insert=F().bind(null,"head"),Eu.domAPI=N(),Eu.insertStyleElement=G(),P()(mu.Z,Eu);const vu=mu.Z&&mu.Z.locals?mu.Z.locals:void 0;var Su=O.MessageTypes.MSG_TYPE_VIDEO;const bu=r().memo((function(e){var t=e.type;return e.status===O.MessageSendStatus.SENDING?r().createElement("div",{className:vu.sendingWrap,"data-cy":"minichat-message-sending-wrap"},t!==Su?r().createElement(Ac.LoadingSpin,{theme:"dark"}):null):null}));var _u=Q(1177),yu={};yu.styleTagTransform=H(),yu.setAttributes=U(),yu.insert=F().bind(null,"head"),yu.domAPI=N(),yu.insertStyleElement=G(),P()(_u.Z,yu);const Cu=_u.Z&&_u.Z.locals?_u.Z.locals:void 0;var xu=Q(7370),Mu={};Mu.styleTagTransform=H(),Mu.setAttributes=U(),Mu.insert=F().bind(null,"head"),Mu.domAPI=N(),Mu.insertStyleElement=G(),P()(xu.Z,Mu);const Iu=xu.Z&&xu.Z.locals?xu.Z.locals:void 0;var wu=Q(4323).t,Ou=r().memo((function(e){var t=e.isSend,n=e.isScChat,s=e.content,a=e.sourceDesc,o=e.isSubAccount,i=e.shopId,c=e.hasAccess,u=e.messageId,l=e.buyerShopId,d=e.conversationId,p=e.visitShopSellerCenterRequested,g=e.copySucceedFeedback,A="";o||(A="https://".concat((0,O.getSellerCenterUrl)(),"/portal/sale/").concat(s.id));var f=(0,O.getMallOrderUrl)(s,t?l:i),h=s.id,m=s.image,E=s.status,v=s.image_hash,S=s.refund_serial_number,b=s.serial_number,_=s.receivables,y="refund"===E?S:b,C="".concat(wu("common.order.order_id"),": ").concat(y),x="".concat(wu("conversation_detail.message_list.order_total"),": ").concat(_);return r().createElement("div",{className:Cu.root,"data-cy":"minichat-message-source-order-root"},r().createElement("div",{className:Cu.header,"data-cy":"minichat-message-source-order-header"},a),r().createElement("div",{className:Cu.divider,"data-cy":"minichat-message-source-order-divider"}),r().createElement("div",{className:Cu.body,"data-cy":"minichat-message-source-order-body"},r().createElement("div",{className:Cu.detail,"data-cy":"minichat-message-source-order-detail"},r().createElement(Ac.ProductImage,{src:m,hash:v,size:"large"}),r().createElement("div",{className:Cu.content,"data-cy":"minichat-message-source-order-content"},r().createElement("div",{className:Iu.orderIdGroup},r().createElement("div",{className:Iu.orderId,"data-cy":"minichat-message-source-order-id"},C),r().createElement(Ac.Copy,{content:y,callback:g,size:"large"})),r().createElement("div",{className:Iu.total,"data-cy":"minichat-message-source-order-total"},x),r().createElement("div",{className:Iu.status,"data-cy":"minichat-message-source-order-status"},wu((0,O.getOrderStatusTransifyKey)(E)))))),c&&r().createElement("div",{className:Cu.footer},r().createElement("div",{className:Cu.link,onClick:function(){(0,T.$tracker)({shopId:i,trackerName:"clickVisitOrderInSellerCenter",data:{order_id:h,conversation_id:d,message_id:u}}),n?(0,O.redirectionWithAccess)({access:c,isSubAccount:o,action:function(){return p({shopId:i,orderId:h})},url:A}):window.open(f)}},wu("conversation_detail.message_list.view_in_seller_center"))))}));Ou.displayName="OrderMessageSource";const Tu=Ou;var Bu=Q(7625),ku={};ku.styleTagTransform=H(),ku.setAttributes=U(),ku.insert=F().bind(null,"head"),ku.domAPI=N(),ku.insertStyleElement=G(),P()(Bu.Z,ku);const Ru=Bu.Z&&Bu.Z.locals?Bu.Z.locals:void 0;var Pu=Q(4323).t,Du=O.ProductStatusUsingNumber.DELETED,Nu=O.ProductStatusUsingNumber.BANNED,ju=O.ProductStatusUsingNumber.SOLD_OUT,Fu=[Du,Nu,ju],qu=r().memo((function(e){var t=e.isScChat,n=e.content,s=e.sourceDesc,a=e.isSubAccount,i=void 0!==a&&a,c=e.hasAccess,u=void 0!==c&&c,l=e.messageId,d=e.conversationId,p=e.visitShopSellerCenterRequested,g=n.id,A=n.status,f=n.shop_id,h=n.region,m=n.name,E=n.image,v=n.image_hash,S=n.original_price,b=n.actual_price,_=A===Du,y=i?"":"https://".concat((0,O.getSellerCenterUrl)(),"/portal/product/").concat(g),C="https://".concat((0,O.getMallUrl)(h),"/product/").concat(f,"/").concat(g),x=function(e){(0,T.$tracker)({shopId:f,trackerName:e,data:{itemid:g,message_id:l,conversation_id:d}})},M=function(){_||(x("clickViewProductInMall"),window.open(C))},I=kc()(Cu.link,o({},Cu.deleted,_)),w=r().createElement(r().Fragment,null,r().createElement("div",{className:Cu.header,"data-cy":"minichat-message-source-product-header"},s),r().createElement("div",{className:Cu.divider,"data-cy":"minichat-message-source-product-divider"}),_?r().createElement(Ac.UnavailableProduct,{size:"large"}):r().createElement("div",{className:Cu.body,"data-cy":"minichat-message-source-product-body"},r().createElement(Ac.ProductImage,{src:E,hash:v,isProductInvalid:Fu.includes(A),size:"large"}),r().createElement("div",{className:Cu.content,"data-cy":"minichat-message-source-product-content"},r().createElement("div",{className:Cu.name,title:m,"data-cy":"minichat-message-source-product-name"},m),r().createElement("div",{className:Ru.productDetail,"data-cy":"minichat-message-source-product-detail"},S&&r().createElement("div",{className:Ru.originalPrice,"data-cy":"minichat-message-source-product-price"},S),r().createElement("div",{className:kc()(Ru.currentPrice,o({},Ru.noOrigin,!S)),"data-cy":"minichat-message-source-product-price"},b)))));return t?r().createElement("div",{className:Cu.root,"data-cy":"minichat-message-source-product-root"},w,r().createElement("div",{className:Cu.footer,"data-cy":"minichat-message-source-product-footer"},r().createElement("div",{className:I,onClick:M,"data-cy":"minichat-message-source-product-action"},Pu("conversation_detail.workstation.conversation_origin.view_in_mall")),u&&r().createElement("div",{className:I,onClick:function(){_||(x("clickViewProductInSellerCenter"),(0,O.redirectionWithAccess)({access:u,isSubAccount:i,action:function(){return p({shopId:f,itemId:g})},url:y}))},"data-cy":"minichat-message-source-product-action"},Pu("conversation_detail.workstation.conversation_origin.view_in_seller_center")))):r().createElement("div",{className:kc()(Cu.shortRoot,Cu.hover),onClick:M,"data-cy":"minichat-message-source-product-short-root"},w)}));qu.displayName="ProductMessageSource";const Uu=qu;var Lu=Q(4323).t,Gu=r().memo((function(e){var t=e.isSend,s=e.message,a=e.shopId,i=e.isScChat,c=e.isSubAccount,u=void 0!==c&&c,l=e.shopAccess,d=(l=void 0===l?{}:l).hasViewOrderAccess,p=void 0!==d&&d,g=l.hasViewProductAccess,A=void 0!==g&&g,f=e.visitShopSellerCenterRequested,h=e.copySucceedFeedback,m=s.sourceContent,E=s.id,v=s.source_type,S=s.conversation_id,b="order"===v,_="product"===v;if((0,n.useEffect)((function(){var e,t=o({message_id:E,conversation_id:S},"".concat(v,"_id"),null==m||null===(e=m.content)||void 0===e?void 0:e.id);b&&(0,T.$tracker)({operation:O.TrackerOperation.IMPRESSION,shopId:a,trackerName:"impressionOrderFromSourceInSpecialMessage",data:t}),_&&(0,T.$tracker)({operation:O.TrackerOperation.IMPRESSION,shopId:a,trackerName:"impressionProductFromSourceInSpecialMessage",data:t})}),[]),!m)return null;var y=m.content.shop_id===a,C=Lu("source.".concat(t?"buyer_view_enquiring":"seller_view_enquiring"),{object:Lu("object.product")}),x=Lu("source.".concat(t?y?"seller_view_chatting":"buyer_view_enquiring":y?"seller_view_enquiring":"buyer_view_chatting"),{object:Lu("object.order")});return"product"===v?r().createElement(Uu,{isScChat:i,messageId:E,conversationId:S,content:m.content,isSubAccount:u,sourceDesc:C,hasAccess:!!A,visitShopSellerCenterRequested:f}):"order"===v?r().createElement(Tu,{shopId:a,isSend:t,isScChat:i,messageId:E,sourceDesc:x,isSubAccount:u,buyerShopId:t?s.to_shop_id:s.from_shop_id,conversationId:S,content:m.content,hasAccess:!!p,visitShopSellerCenterRequested:f,copySucceedFeedback:h}):null}));Gu.displayName="MessageSource";var Yu={visitShopSellerCenterRequested:T.visitShopSellerCenterRequested,copySucceedFeedback:T.copySucceedFeedback};const Hu=(0,h.connect)((function(e){return{shopAccess:(0,T.shopAccessSelector)(e)}}),Yu)(Gu);var Wu=Q(2431),Zu={};Zu.styleTagTransform=H(),Zu.setAttributes=U(),Zu.insert=F().bind(null,"head"),Zu.domAPI=N(),Zu.insertStyleElement=G(),P()(Wu.Z,Zu);const Vu=Wu.Z&&Wu.Z.locals?Wu.Z.locals:void 0,zu=function(e){var t=e.timestamp,n=(0,O.newFormatMessageTime)(t,"time");return r().createElement("div",{className:Vu.root},n)};var Qu=Q(8304),Xu={};Xu.styleTagTransform=H(),Xu.setAttributes=U(),Xu.insert=F().bind(null,"head"),Xu.domAPI=N(),Xu.insertStyleElement=G(),P()(Qu.Z,Xu);const Ku=Qu.Z&&Qu.Z.locals?Qu.Z.locals:void 0;function Ju(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var $u=O.MessageTypes.MSG_TYPE_NOTIFICATION,el=O.MessageTypes.MSG_TYPE_OFFER,tl=O.MessageTypes.MSG_TYPE_VIDEO,nl=O.MessageTypes.MSG_TYPE_TEXT,rl=O.MessageTypes.MSG_TYPE_NEW_FAQ,sl=O.MessageTypes.MSG_TYPE_FAQ_QUESTION_LIST,al=O.MessageTypes.MSG_TYPE_FAQ_CATEGORY_LIST,ol=(O.MessageTypes.FAQ_TYPE_BOT_RESPONSE_MESSAGE,["index","lastMessageFlag","messageFillStatus","messageSourceFillStatus","newMessageFlag"]),il=[rl,sl,al];const cl=function(e){var t=function(t){p(s,t);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var s=f(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return A(this,n)}}(s);function s(e,t){var r;i(this,s),r=n.call(this,e,t);var a=e.index,c=e.message,u=e.newMessageFlag,d=e.exposedMessageIds,p=void 0===d?[]:d,g=e.addExposedMessageId,A=e.locale,f=e.currentFaqSessionInfo,h=f.faqSessionId,m=f.sessionExpiryTime,E=e.conversationShopId,v=e.handleMessageIsSend,S=c.id,b=c.type,_=c.content,y=c.faq_session_id;(0===a||b===el||u)&&(r.needRemeasure=!0),r.handleReload=r.handleReload.bind(l(r)),r.handleResendMessage=r.handleResendMessage.bind(l(r)),r.handleCancelMessage=r.handleCancelMessage.bind(l(r)),r.timer=null,r.messageNode=null,r.shouldExpose=!0,r.clearTimer=r.clearTimer.bind(l(r)),r.handleMouseEnter=r.handleMouseEnter.bind(l(r)),r.handleMouseLeave=r.handleMouseLeave.bind(l(r)),r.state={isHover:!1};var C=il.includes(b);if(r.needExpose="function"==typeof IntersectionObserver&&(Oc[b]&&!p.includes(S)||C),r.needExpose){var x={root:document.querySelector("#messagesContainer"),threshold:.5};r.observer=new IntersectionObserver((function(e){var t=e[0];if(t&&t.isIntersecting&&t.intersectionRatio>=.5){if(r.timer||!r.shouldExpose||C||(r.shouldExpose=!1,r.timer=setTimeout((function(){(0,T.$tracker)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ju(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ju(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({operation:O.TrackerOperation.IMPRESSION,trackerName:Oc[b]},Tc({message:c,conversationShopId:E,isSend:v(c)}))),r.clearTimer(),g&&g(S)}),1e3)),C&&r.shouldExpose){r.shouldExpose=!1;var n=_.intents,s=void 0===n?[]:n,a=_.categories,i=void 0===a?[]:a,u=_.other_faq_types,l=void 0===u?[]:u,d=_.questions,p=void 0===d?[]:d;(s.length||i.length||l.length||p.length)&&hr(h,y,m)&&Di((0,O.handleReportItems)(_,b===rl,A))}}else t&&t.intersectionRatio<=0&&(r.shouldExpose=!0)}),x)}return r}return u(s,[{key:"componentDidMount",value:function(){var e=this.props,t=e.message,n=e.hasSourceMessageMap;void 0===n[t.id]&&(n[t.id]=t.hasMessageSource),this.needExpose&&this.observer.observe(this.messageNode),this.measureMessage()}},{key:"componentWillUnmount",value:function(){this.clearTimer(),this.needExpose&&this.observer.unobserve(this.messageNode)}},{key:"componentDidUpdate",value:function(e){var t=this,n=e.hasSourceMessageMap,r=e.message,s=e.showWarningMessageIds,a=this.props,o=a.message,i=a.showWarningMessageIds,c=!1;r.type===el?c=(r.textContent&&r.textContent.status)!==(o.textContent&&o.textContent.status):(c=["hasMessageSource","newMessageFlag","errorCode","status","send_status","content"].some((function(e){return r[e]!==o[e]})))||(c=ol.some((function(n){return t.props[n]!==e[n]}))),n[o.id]!==o.hasMessageSource&&(c=!0,n[o.id]=o.hasMessageSource),r.type===nl&&s.indexOf(r.id)!==i.indexOf(o.id)&&(c=!0),!(0,O.isDeletedMessage)(r)&&(0,O.isDeletedMessage)(o)&&(c=!0),c&&(this.needRemeasure=c),this.measureMessage()}},{key:"clearTimer",value:function(){this.timer&&(clearTimeout(this.timer),this.timer=null)}},{key:"handleReload",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.props,n=t.message,r=t.fillMessageRequested;r({message:n,isSource:e})}},{key:"measureMessage",value:function(){this.needRemeasure&&(this.props.measure(),this.needRemeasure=!1)}},{key:"handleResendMessage",value:function(){var e=this.props,t=e.message,n=e.resendMessageRequested,r=e.conversationId,s=e.conversationShopId,a=t.id;t.type===tl&&(0,T.$tracker)({shopId:s,trackerName:"clickResendVideo",data:{message_id:a,conversation_id:r}}),n({conversationId:r,message:t})}},{key:"handleCancelMessage",value:function(){var e=this.props,t=e.message,n=e.cancelSendingMessageRequested,r=e.conversationId,s=e.conversationShopId,a=t.id;(0,T.$tracker)({shopId:s,trackerName:"clickCancelVideo",data:{message_id:a,conversation_id:r}}),n({id:a,conversationId:r})}},{key:"getMessageClass",value:function(e){var t=e.isSend,n=e.isSystem,r=e.isChatbot,s=e.isSecurityTips;return n?Ku.message:r||s?"":t?Ku.messageSend:Ku.messageReceive}},{key:"renderMessage",value:function(t){var n=this,s=this.props,a=s.distance,o=s.message,i=s.measure,c=s.isScChat,u=s.isSubAccount,l=s.newMessageFlag,d=s.showWarningMessageIds,p=s.shop,g=s.conversationId,A=s.conversationShopId,f=s.conversationBuyerId,h=s.conversationStatus,m=s.isInFaqHistoryModal,E=void 0!==m&&m,v=s.messageFillStatus,S=s.messageSourceFillStatus,b=s.currentUserId,_=s.handleMessageIsSend,y=o.isFaking,C=o.type,x=o.hasMessageSource,M=o.send_status,I=o.content,w=void 0===I?{}:I,T=o.from_shop_id,B=o.request_id,k=o.sourceContent,R=o.dayHeader,P=o.created_timestamp,D=o.quoted_msg,N=o.to_id,j=C===O.MessageTypes.MSG_TYPE_TEXT&&!t&&-1!==d.indexOf(o.id),F=C===O.MessageTypes.FAQ_TYPE_BOT_RESPONSE_MESSAGE,q=C===$u||(0,O.getMessageIsRatecard)(C,w)&&(t||u),U=C===O.MessageTypes.MSG_TYPE_SECURITY_TIPS,L=this.getMessageClass({isSend:t,isSystem:q,isChatbot:F,isSecurityTips:U}),G=F?"":Ku.bubble,Y=(p&&p.country?p.country:"SG").toLowerCase(),H="closed"===h,W=(0,O.isDeletedMessage)(o),Z=!y&&!(0,O.isMessageTypeWithNoTime)(C,N,b)&&!(0,O.isMessageTypeWithInlineTime)(C)&&!(0,O.replyMessageWithInlineTime)(C,D)&&(0,O.isMessageTypeSupported)(C);return r().createElement(r().Fragment,null,l&&r().createElement(ou,null),R&&r().createElement(Nc,{timestamp:P,absolute:!1}),x&&r().createElement("div",{className:Ku.center,"data-cy":"minichat-message-center"},S?r().createElement(Ac.Processor,{isSend:t,status:S,messageType:"source",content:k,reloadRequest:function(){return n.handleReload(!0)},isScChat:c}):r().createElement(Hu,{message:o,isSubAccount:u,isScChat:c,shopId:A,isSend:t,region:Y})),!y&&r().createElement("div",{className:"".concat(L," data-cy={isSecurityTips||isChatbot ? 'minichat-message' : isSystem ? 'minichat-message-system' : isSend ? 'minichat-message-send' : 'minichat-message-receive'} ").concat(12===a?Ku.marginTop12:Ku.marginTop4)},t&&r().createElement(hu,{message:o,resendMessage:this.handleResendMessage}),t&&!q&&r().createElement(bu,{type:C,status:M,requestId:B,handleCancelMessage:this.handleCancelMessage}),W?r().createElement(Ac.DeletedMessage,{isSend:t,timestamp:P,messageMaxWidth:O.MessageMaxWidthMini}):r().createElement("div",{className:G,"data-cy":"minichat-message-bubble"},r().createElement(Fc,{isSend:t,message:o,isInFaqHistoryModal:E,isClosed:H,isHoverBaseMsg:this.state.isHover},v?r().createElement(Ac.Processor,{isSend:t,status:v,messageType:C,content:w,reloadRequest:function(){return n.handleReload()},isScChat:c}):r().createElement(e,{message:o,isScChat:c,isSend:t,measure:i,isSubAccount:u,shop:p,region:Y,conversationId:g,conversationShopId:A,conversationBuyerId:f,conversationStatus:h,isInFaqHistoryModal:E,handleMessageIsSend:_,messageMaxWidth:O.MessageMaxWidthMini})),Z&&r().createElement(zu,{timestamp:P}))),r().createElement(tu,{message:o,buyerId:f,shop:p}),j&&r().createElement(Ac.TextWarning,{shopId:T,region:Y}))}},{key:"handleMouseEnter",value:function(){this.setState({isHover:!0})}},{key:"handleMouseLeave",value:function(){this.setState({isHover:!1})}},{key:"render",value:function(){var e=this,t=this.props,n=t.style,s=t.message,a=t.isLastMessage,o=t.className,i=t.handleMessageIsSend,c=this.renderMessage(i(s)),u="".concat(Ku.root," ").concat(a?Ku.lastMessage:""," ").concat(o);return r().createElement("div",{style:n,className:u,ref:function(t){return e.messageNode=t},onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,"data-cy":a?"minichat-message-root-last":"minichat-message-root"},c)}}]),s}(r().PureComponent);return t.defaultProps={showWarningMessageIds:[]},t};var ul={handleSensitiveUrl:ga,changeTranslateStatus:Xs,translateMessagesRequested:Qs,scrollToMessage:en,showTranslateFeedback:Ks};const ll=cl((0,h.connect)((function(e){return{shopTranslationSettings:(0,T.shopTranslationSettingsSelector)(e),currentConversationTranslationAccess:(0,T.currentConversationTranslationAccessSelector)(e),locale:(0,T.localeSelector)(e)}}),ul)((function(e){var t=e.isScChat,n=e.isSend,s=e.shopTranslationSettings,a=e.measure,o=e.handleSensitiveUrl,i=e.changeTranslateStatus,c=e.translateMessagesRequested,u=e.message,l=e.conversationShopId,d=e.currentConversationTranslationAccess,p=e.scrollToMessage,g=e.conversationId,A=e.conversationBuyerId,f=e.showTranslateFeedback,h=e.handleMessageIsSend,m=e.locale,E=e.isSubAccount,v=e.messageMaxWidth,S=u.send_status,b=u.message_option,_=u.content,y=u.id,C=u.country,x=u.translateStatus,M=u.toggleTranslateStatus,I=u.type,w=u.quoted_msg,T=u.source,B=u.created_timestamp,k=u.groupHeader,R=u.label_info,P=(R=void 0===R?{}:R).label_type,D=(_||{}).translation,N=(D=void 0===D?{}:D).text,j=s[l]||{},F=j.translationPreference,q=j.autoTranslationStatus,U=j.source,L=j.inTranslationFeedbackWhitelist,G=q===O.SwitchStatus.ENABLED,Y=(0,O.handleDisplayTranslation)(G,n,N,t,d);return r().createElement(Ac.TextMessage,{buyerId:A,shopId:l,sendStatus:S,messageOption:b,enableTranslation:Y,translationPreference:F,translationSource:U,id:y,measure:a,translateStatus:x,toggleTranslateStatus:M,handleSensitiveUrl:o,changeTranslateStatus:i,translateMessagesRequested:c,content:_,isScChat:t,enableAutoTranslation:G,isSend:n,country:C,type:I,replyToMessage:w,scrollToMessage:p,conversationId:g,messageSource:T,showTranslateFeedback:f,inTranslationFeedbackWhitelist:L,handleMessageIsSend:h,locale:m,isSubAccount:E,messageMaxWidth:v,createdTimestamp:B,groupHeader:k,labelType:P})})));function dl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dl(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var gl={showMediaPreviewModalRequested:T.showMediaPreviewModalRequested,scrollToMessage:en};const Al=cl((0,h.connect)((function(){return{}}),gl)((function(e){var t=e.isSend,s=e.measure,a=e.showMediaPreviewModalRequested,o=e.message,i=e.scrollToMessage,c=e.handleMessageIsSend,u=e.conversationShopId,l=o.id,d=o.request_id,p=o.content,g=o.quoted_msg,A=o.conversation_id,f=o.created_timestamp,h=o.groupHeader,m=(0,n.useContext)(z),E={data:{conversation_id:A,message_id:l===d?0:l},shopId:u};(0,n.useEffect)((function(){p.unknown_qr_code&&!t&&(0,T.$tracker)(pl({operation:O.TrackerOperation.IMPRESSION,trackerName:"impressionImageMessage"},E))}),[]);var v=function(){return a({messageId:l})};return r().createElement(Ac.ImageMessage,{isSend:t,imgCache:m,id:l,request_id:d,content:p,measure:s,replyToMessage:g,scrollToMessage:i,handleMessageIsSend:c,openPreviewModal:v,handleOpenQrCode:function(){v(),(0,T.$tracker)(pl({trackerName:"clickPreviewQrcode"},E))},groupHeader:h,createdTimestamp:f})})));var fl=Q(8550),hl=Q.n(fl),ml=Q(5945),El=function(e,t){var n=e.id,r=e.status,s=e.shop_id,a=e.region;(0,O.checkProductDeleted)(n,r)||(window.open("https://".concat((0,O.getMallUrl)(a),"/product/").concat(s,"/").concat(n,"/")),t&&t(e))};const vl=cl((function(e){var t=e.isSend,n=e.message,s=e.measure,a=e.conversationShopId,o=e.conversationStatus,i=n.id,c=n.textContent,u=void 0===c?{}:c,l=n.conversation_id;return r().createElement(Ac.OfferMessage,{id:i,isSend:t,measure:s,onReply:function(e){(0,T.$tracker)({trackerName:e.isAccept?"clickAcceptOffer":"clickRejectOffer",data:{itemid:u.id,conversation_id:l,message_id:i},shopId:a}),function(e){hl().put(ml.default.replyOfferRequested({payload:e}))}(e)},textContent:u,handleClickItem:El,conversationClosed:"closed"===o})}));function Sl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var bl={visitShopSellerCenterRequested:T.visitShopSellerCenterRequested};const _l=cl((0,h.connect)((function(e){return{shopAccess:(0,T.shopAccessSelector)(e)}}),bl)((function(e){var t=e.isScChat,n=e.isSubAccount,s=e.visitShopSellerCenterRequested,a=e.isSend,i=e.message,c=e.shopAccess,u=void 0===c?{}:c,l=e.conversationShopId,d=u.hasViewProductAccess,p=i.textContent,g=p||{},A=g.id,f=g.status,h=g.shop_id,m=g.region,E=(0,O.checkProductDeleted)(A,f),v=h===l,S=t||!v||!n||d;return r().createElement(Ac.ProductMessage,{item:p,isSend:a,deleted:E,hasAccess:S,handleClickMessage:function(){S&&!E&&((0,T.$tracker)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sl(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({trackerName:"impressionProductMessage"},Tc({message:i,isSend:a,conversationShopId:l,extraParams:{itemid:A}}))),v?n?(0,O.redirectionWithAccess)({access:!0,isSubAccount:!0,action:function(){return s({shopId:h,itemId:A})}}):t?window.open("https://".concat((0,O.getSellerCenterUrl)((0,O.isVisitingCNSC)()?"cn":m),"/portal/product/").concat(A)):window.open("https://".concat((0,O.getMallUrl)(m),"/product/").concat(h,"/").concat(A,"/")):window.open("https://".concat((0,O.getMallUrl)(m),"/product/").concat(h,"/").concat(A,"/")))}})})));var yl=Q(5965),Cl={};Cl.styleTagTransform=H(),Cl.setAttributes=U(),Cl.insert=F().bind(null,"head"),Cl.domAPI=N(),Cl.insertStyleElement=G(),P()(yl.Z,Cl);const xl=yl.Z&&yl.Z.locals?yl.Z.locals:void 0;var Ml=Q(4323).t;function Il(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Il(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Il(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ol={visitShopSellerCenterRequested:T.visitShopSellerCenterRequested,copySucceedFeedback:T.copySucceedFeedback};const Tl=cl((0,h.connect)((function(e){return{shopAccess:(0,T.shopAccessSelector)(e)}}),Ol)((function(e){var t=e.isSubAccount,n=e.isSend,s=e.visitShopSellerCenterRequested,a=e.message,i=e.shopAccess,c=void 0===i?{}:i,u=e.conversationShopId,l=e.region,d=e.copySucceedFeedback,p=e.isScChat,g=a.content,A=a.textContent,f=(a.type,g||{}),h=f.shop_id,m=f.order_id,E=f.bot_order_info,v=(E=void 0===E?{}:E).shop_id,S=E.order_id,b=c.hasViewOrderAccess,_=void 0!==b&&b,y=h||v,C=m||S,x=y===u;return!x&&t?r().createElement("div",{className:kc()(xl.order,o({},xl.send,n)),"data-cy":n?"minichat-message-order-send":"minichat-message-order"},r().createElement("span",{className:xl.link,onClick:function(){window.open((0,O.getMallOrderUrl)({id:m},y,l))},"data-cy":"minichat-message-order-link"},Ml("conversation_detail.message_list.order_not_in_your_shop"))):r().createElement(Ac.OrderMessage,{region:l,hasViewOrderAccess:_,isSend:n,isScChat:p,textContent:A,handleClickMessage:function(){if(!x)return window.open((0,O.getMallOrderUrl)(A,y,l)),null;(0,T.$tracker)(wl({trackerName:"clickOrderMessage"},Tc({message:a,isSend:n,conversationShopId:u}))),(0,O.redirectionWithAccess)({access:_,isSubAccount:t,action:function(){return s({shopId:y,orderId:C})},url:"https://".concat((0,O.getSellerCenterUrl)(l),"/portal/sale/").concat(C)})},copySucceedFeedback:function(){d(),(0,T.$tracker)(wl({trackerName:"clickCopyOrderSN"},Tc({message:a,isSend:n,conversationShopId:u})))}})})));var Bl={scrollToMessage:en};const kl=cl((0,h.connect)((function(){return{}}),Bl)((function(e){var t=e.region,s=e.message,a=e.isSend,o=e.scrollToMessage,i=e.conversationBuyerId,c=e.handleMessageIsSend,u=s.send_status,l=s.request_id,d=s.id,p=s.content,g=s.quoted_msg,A=s.created_timestamp,f=a&&u===O.MessageSendStatus.SENDING,h=(0,n.useContext)(z);return r().createElement(Ac.StickerMessage,{imgCache:h,isSending:f,id:d,content:p,country:t,request_id:l,isSend:a,replyToMessage:g,scrollToMessage:o,conversationBuyerId:i,handleMessageIsSend:c,createdTimestamp:A})}))),Rl=cl((0,h.connect)((function(e){return{locale:(0,T.localeSelector)(e)}}),null)((function(e){var t=e.isSend,s=e.message,a=e.locale,o=e.conversationId,i=e.conversationBuyerId,c=s.type,u=s.content,l=s.textContent,d=s.id;return(0,n.useEffect)((function(){O.needWarnNotificationType.includes(u.notification_type)&&(0,T.$tracker)({operation:O.TrackerOperation.IMPRESSION,trackerName:"game_quota_reach"===u.notification_type?"impressionMsgGamesFailQuota":"impressionMsgGamesFailBlock",data:{conversation_id:o,convo_userid:i,message_id:d,is_sender:t}})}),[]),r().createElement(Ac.SystemMessage,{type:c,locale:a,isSend:t,content:u,textContent:l||{}})})));function Pl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pl(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Nl={visitShopSellerCenterRequested:T.visitShopSellerCenterRequested};const jl=cl((0,h.connect)((function(e){return{isSubAccount:(0,T.isSubAccountSelector)(e),shopAccess:(0,T.shopAccessSelector)(e),shop:(0,T.currentConversationShopSelectors)(e)}}),Nl)((function(e){var t=e.isSend,s=e.visitShopSellerCenterRequested,a=e.isSubAccount,o=e.message,i=e.shopAccess,c=e.shop.country,u=void 0===c?"":c,l=e.conversationShopId,d=Tc({message:o,isSend:t,conversationShopId:l});(0,n.useEffect)((function(){!t&&(0,T.$tracker)(Dl({operation:O.TrackerOperation.IMPRESSION,trackerName:"impressionVoucherForReceiverInMinichat"},d))}),[]);var p=i.hasViewVoucherAccess,g=o.content,A=o.textContent,f=void 0===A?{}:A,h=o.id,m=f.country,E=f.id,v=f.url,S=g.shop_id,b=(g.source,function(){var e;v&&(S=(0,O.getUrlParam)("shop_id",v),(0,O.getUrlParam)("source",v)),e={messageId:h},hl().put(ml.default.claimVoucherRequested({payload:e})),(0,T.$tracker)(Dl({trackerName:"clickClaimVoucher"},d))});return r().createElement(Ac.VoucherMessage,{voucher:f,isSend:t,shopRegion:u,isSubAccount:a,hasViewVoucherAccess:p,onOperatorClick:function(e){switch(e){case O.VoucherOperateType.DETAILS:!function(){v&&(S=(0,O.getUrlParam)("shop_id",v));var e="https://".concat((0,O.getSellerCenterUrl)(m),"/portal/marketing/vouchers/").concat(E);a?s({url:e,shopId:S}):window.open(e)}();break;case O.VoucherOperateType.CLAIM:b();break;case O.VoucherOperateType.USE:v&&(S=(0,O.getUrlParam)("shop_id",v)),window.open("https://".concat((0,O.getMallUrl)(m),"/shop/").concat(S))}}})})));function Fl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const ql=cl((function(e){var t=e.isSend,n=e.message,s=e.region,a=e.conversationShopId,i=n.type,c=n.content,u=function(e){var r=e.id;(0,T.$tracker)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fl(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({trackerName:"clickProductListMessage"},Tc({message:n,isSend:t,conversationShopId:a,extraParams:{itemid:r}})))};return r().createElement(Ac.ProductsMessage,{region:s,type:i,isSend:t,content:c,handleClickItem:function(e){El(e,u)}})})),Ul=cl((0,h.connect)((function(e){return{currentUser:(0,T.currentUserSelector)(e)}}),{})((function(e){var t=e.measure,s=e.isSend,a=e.conversation,o=e.message,i=o.id,c=o.conversation_id,u=o.request_id,l=o.textContent,d=(0,n.useContext)(z);return r().createElement(Ac.FeedStoryMessage,{imgCache:d,id:i,requestId:u,measure:t,isSend:s,textContent:l,handleTrackStory:function(){(0,T.$tracker)({shopId:a.shop_id,trackerName:"clickHandleStoryMessage",data:{story_id:l.id,message_id:i,conversation_id:c}})}})})));function Ll(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ll(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ll(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Yl=cl((function(e){var t=e.measure,n=e.isSend,s=e.message,a=e.region,o=e.conversationShopId,i=s.content,c=i.cart_items,u=void 0===c?[]:c,l=i.shop_id,d=s.textContent,p=void 0===d?[]:d,g=function(e){var t=e.id;(0,T.$tracker)(Gl({trackerName:"clickCartProduct"},Tc({message:s,isSend:n,conversationShopId:o,extraParams:{itemid:t}})))};return r().createElement(Ac.CartReminderMessage,{isSend:n,measure:t,products:p,cartItemsCount:u.length,handleClickItem:function(e){El(e,g)},handleClickMessage:function(){var e=function(e,t){var n=e.map((function(e){var n=e.model_id,r=e.item_id,s=e.group_id,a={shopId:t,itemId:r};return n&&(a.modelId=n),s&&"0"!==s&&(a.itemGroupId=s),a}));return(0,O.encode)(JSON.stringify(n))}(u,l);window.open("https://".concat((0,O.getMallUrl)(a),"/cart?referrerItems=").concat(e,"&source=seller_chat")),(0,T.$tracker)(Gl({trackerName:"clickCartButton"},Tc({message:s,isSend:n,conversationShopId:o})))}})}));Q(4323).t;var Hl=function(e,t){return e>t},Wl=function(e){return e[e.length-1]},Zl=function(e,t){return e?function(){}:t},Vl=function(e,t){return e.length===t.length&&e.every((function(e,n){var r=t[n];return JSON.stringify(e)===JSON.stringify(r)}))},zl={sendMessagesRequested:gs};const Ql=cl((0,h.connect)((function(){return{}}),zl)((function(e){var t=e.isSend,n=e.measure,s=e.sendMessagesRequested,a=e.message,o=e.conversationShopId,i=e.conversationBuyerId,c=e.conversationId,u=e.isInFaqHistoryModal,l=a.content,d=a.faq_session_id,p=Zl(u,s);return r().createElement(Ac.FaqMessage,{isSend:t,measure:n,sendMessagesRequested:p,content:l,conversationId:c,shopId:o,conversationUserId:i,faqSessionId:d})})));var Xl=Q(8674),Kl={};Kl.styleTagTransform=H(),Kl.setAttributes=U(),Kl.insert=F().bind(null,"head"),Kl.domAPI=N(),Kl.insertStyleElement=G(),P()(Xl.Z,Kl);const Jl=Xl.Z&&Xl.Z.locals?Xl.Z.locals:void 0;var $l=function(e){p(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var s=f(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return A(this,n)}}(n);function n(){return i(this,n),t.apply(this,arguments)}return u(n,[{key:"render",value:function(){var e=this.props,t=e.conversationId,n=e.conversationShopId,s=e.conversationBuyerId,a=e.sendMessagesRequested,o=e.isSend,i=e.isInFaqHistoryModal,c=e.message,u=void 0===c?{}:c,l=u.type,d=u.created_timestamp,p=u.groupHeader,g=u.label_info,A=(g=void 0===g?{}:g).label_type,f=Zl(i,a),h=l===O.MessageTypes.MSG_TYPE_FAQ_UNSUPPORTED,m=h&&A===O.MessageLabelType.CHAT_ASSISTANT;return r().createElement("div",null,r().createElement("div",{className:kc()(Jl.message,o?Jl.send:"",h?Jl.unsupportFaq:"",p&&Jl.groupHeader),"data-cy":h?"minichat-message-unsupport-faq":"minichat-message",style:{maxWidth:"".concat(O.MessageMaxWidthMini,"px")}},p&&r().createElement(Ac.MessageTriangle,{isSend:o}),r().createElement(Ac.Text,{text:(0,O.getCustomMessageText)(u.type),createdTimestamp:d,messageMaxWidth:O.MessageMaxWidthMini,showMessageTime:!m,labelType:A})),h&&!i&&r().createElement(Ac.FaqButton,{isSend:o,conversationId:t,shopId:n,conversationUserId:s,sendMessagesRequested:f}))}}]),n}(r().PureComponent),ed={sendMessagesRequested:gs};const td=cl((0,h.connect)(null,ed)($l));var nd={sendMessagesRequested:gs};const rd=cl((0,h.connect)((function(){return{}}),nd)((function(e){var t=e.sendMessagesRequested,n=e.isSend,s=e.message,a=e.conversationShopId,o=e.conversationBuyerId,i=e.conversationId,c=e.isInFaqHistoryModal,u=s.id,l=s.content,d=s.faq_session_id,p=s.created_timestamp,g=s.label_info,A=(g=void 0===g?{}:g).label_type,f=Zl(c,t);return r().createElement(Ac.FaqFeedbackPromptMessage,{id:u,content:l,sendMessagesRequested:f,conversationId:i,conversationUserId:o,isSend:n,shopId:a,faqSessionId:d,createdTimestamp:p,labelType:A})})));var sd={sendMessagesRequested:gs};const ad=cl((0,h.connect)((function(e){return{locale:(0,T.localeSelector)(e)}}),sd)((function(e){var t=e.sendMessagesRequested,n=e.isSend,s=e.conversationShopId,a=e.conversationBuyerId,o=e.conversationId,i=e.isInFaqHistoryModal,c=e.message,u=e.locale,l=e.messageMaxWidth,d=c.content,p=c.faq_session_id,g=c.created_timestamp,A=c.groupHeader,f=c.label_info,h=(f=void 0===f?{}:f).label_type,m=Zl(i,t);return r().createElement(Ac.FaqLiveAgentPromptMessage,{sendMessagesRequested:m,isSend:n,conversationId:o,shopId:s,conversationUserId:a,content:d,locale:u,faqSessionId:p,createdTimestamp:g,groupHeader:A,messageMaxWidth:l,labelType:h})})));function od(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const id=cl((function(e){var t=e.region,n=e.measure,s=e.isSend,a=void 0!==s&&s,i=e.message,c=e.conversationShopId,u=i.content,l=function(e){var t=e.id;(0,T.$tracker)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?od(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):od(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({trackerName:"clickBundleDealDetail"},Tc({message:i,isSend:a,conversationShopId:c,extraParams:{itemid:t}})))};return r().createElement(Ac.BundleDealMessage,{region:t,measure:n,isSend:a,content:u,handleClickItem:function(e){El(e,l)}})})),cd=cl((function(e){var t=e.measure,n=e.isSend,s=void 0!==n&&n,a=e.message.content;return r().createElement(Ac.FlashSaleMessage,{measure:t,isSend:s,content:a,handleClickItem:El})}));function ud(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ld(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ud(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ud(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var dd={visitShopSellerCenterRequested:T.visitShopSellerCenterRequested,copySucceedFeedback:T.copySucceedFeedback};const pd=cl((0,h.connect)((function(e){return{shopAccess:(0,T.shopAccessSelector)(e)}}),dd)((function(e){var t=e.isSend,n=e.isSubAccount,s=e.visitShopSellerCenterRequested,a=e.message,o=e.shopAccess,i=void 0===o?{}:o,c=e.region,u=e.conversationShopId,l=e.copySucceedFeedback,d=i.hasViewOrderAccess,p=a.content,g=p.order_id,A=p.shop_id,f=a.textContent,h=Tc({message:a,isSend:t,conversationShopId:u});return r().createElement(Ac.RateReminderMessage,{isSend:t,textContent:f,hasViewOrderAccess:d,handleClickMessage:function(){t?(0,O.redirectionWithAccess)({access:d,isSubAccount:n,action:function(){return s({shopId:A,orderId:g})},url:"https://".concat((0,O.getSellerCenterUrl)((0,O.isVisitingCNSC)()?"cn":c),"/portal/sale/").concat(g)}):window.open("https://".concat((0,O.getMallUrl)(c),"/user/purchase/order/").concat(g,"/?shopid=").concat(A))},trackRateButton:function(){(0,T.$tracker)(ld({trackerName:"clickRateButton"},h))},trackRateProduct:function(){(0,T.$tracker)(ld({trackerName:"clickRateProduct"},h))},copyCallback:l})})));var gd=Q(9424),Ad=Q.n(gd),fd=Q(2236),hd=Q.n(fd),md=Q(1644),Ed={};Ed.styleTagTransform=H(),Ed.setAttributes=U(),Ed.insert=F().bind(null,"head"),Ed.domAPI=N(),Ed.insertStyleElement=G(),P()(md.Z,Ed);const vd=md.Z&&md.Z.locals?md.Z.locals:void 0,Sd=function(e){var t=e.title,n=e.closeModal,s=e.noCancel,a="".concat(vd.root," ").concat(s?"":vd.hasCancel);return r().createElement("div",{className:a},r().createElement("div",{className:vd.title},t),!s&&r().createElement(S(),{svg:hd(),className:vd.cancel,onClick:n}))};var bd=Q(5792),_d={};_d.styleTagTransform=H(),_d.setAttributes=U(),_d.insert=F().bind(null,"head"),_d.domAPI=N(),_d.insertStyleElement=G(),P()(bd.Z,_d);const yd=bd.Z&&bd.Z.locals?bd.Z.locals:void 0;var Cd=function(e){var t,s=e.label,a=e.title,o=e.children,i=e.closeable,c=e.onClick,u=e.className,l=e.getModalVisible,d=e.onClose,p=(0,n.useState)(!1),g=(0,Ht.Z)(p,2),A=g[0],f=g[1],h=function(){var e=A;f(!e),"function"==typeof l&&l(!e),"function"==typeof d&&e&&d()};return t="#".concat(window.miniChatContainerId),r().createElement("div",{className:yd.root},r().createElement("div",{onClick:function(e){return function(e){var t=function(){e.stopPropagation(),h()};"function"==typeof c?c(t):t()}(e)}},s),r().createElement(Ad(),{isOpen:A,className:yd.content,overlayClassName:yd.overlay,shouldReturnFocusAfterClose:!1,onRequestClose:i?h:null,parentSelector:function(){return document.querySelector(t)}},r().createElement("div",{className:u},r().createElement(Sd,{title:a,closeModal:h}),o)))};Cd.defaultProps={closeable:!1};const xd=Cd;var Md=Q(2760),Id=Q.n(Md),wd=Q(2147),Od={};Od.styleTagTransform=H(),Od.setAttributes=U(),Od.insert=F().bind(null,"head"),Od.domAPI=N(),Od.insertStyleElement=G(),P()(wd.Z,Od);const Td=wd.Z&&wd.Z.locals?wd.Z.locals:void 0,Bd="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPAAAADwCAMAAAAJixmgAAABIFBMVEUAAADr7vnt8Prt8Pnt8fvt8fvt8PvEpaPs8Prt8fvt8Pvo7Pbo7fjr7/nn7Pfs7/rv8f3h5fDg5PDi5/Hn6/To6/Te4+7s7/np7fni5vHo7Pjm6vfk6fbf4/De4/Dc4O3d4u3i5/TZ3uvP1OHZ3ura3urvWz7y9f7/gmrW2ufvWz7Y3enxXUDW2uj4bVLyYET/g2vvWz7xXkL+eF70ZUn2Zkr+d13w8/zj5/Dm6vTj5vH3a0//gGf5blP4bVHN09/L0N3y9f7S1+Po7PbX2+fl6fPw8vvP1OHr7vfd4eza3+rs7/ng5e/u8Pre4u3U2eXv8/zj5/Hi5vH////Y3enl5/LwWz7yYUX09fn2Z0z/f2f5bVL8c1n4+fv/eV/u8Pak0IEiAAAAP3RSTlMABwwZEhYkBSAQHAQzLzcrJ0JKPi4pRx86Oj5CRlRQWE1PXe3Lp+rn6djDsJNrD6aLg/PHWSXwh4Ht37uejXhSf/O8AAAHjUlEQVR42uzWS2oDMRBF0TfTMkImctMI9z8T24FsokXbJvtfRqwWxJ+JZzao7tnBpSiqBAAAAAAAAAAAAAAAAABPuLaqWic72uNFKzuqFFzJjOk3+ZIZ4zkZZMbhlBxkxm5JRpnRx7jEOMmKKSa9zBjnpNat7b7gVySswd1d73C82KtM9Ro83vUWfZn7NXjSPzecV6UG+9Trb3p3p+xbZQoPK9wsWVChXOd95669MWtkQ5gzK73dnNWlHuFH3liv+ty7lRXhfb0fm58X2nxq5YL3zXvm+8eeHewmCwQBHB9YNEqXGq1iuPkqXwhkjUiKpIkX0vd/i8+NG6sG1llbBlb9zUUOHv4ZwmXIelUxdO0fMaCgD/6knD4Ea702/Nrwa8P933BKONTB7ohPw1U45SP3GV7pQbT6ETGQPokBHTeaXYrkllNiQIaFs2she+BgP6yzfNhgFtZjqZ6twe60SZpu6YYumGuCtSzd8OCj0ZYYtMzxGBu4/FmCWRDdstWzKtgN3m/b6tkUPOAYG2LQmnGAstGzJ9iZzFE2evYE+xOcjZ41wc4CSRCDlnhDJCHEhm7aC2YjJKFnzYb9JZLQsycYS+hZE8ywhJ41wd4AKSYGLXE9pFjPmmBnjBTrWRMMLlKsZ0+w82zB4ODECenE0B5ksJ5FGwZ4cxASYtCqt9uSJCYd6FqiZ9mGexwsL9Wz1Uxdqps9SPD1pbrZQwTXXarJJElxx5wY/7HxUk3l6y5pVUqp+DLVfKkmUtzhuzyp4sJM46Xah1p9CE7Lc9+FEXfaxAUSO2Oy96J4VyO7tlN4YzCHOt0HJ+W1RBd7Hf3RjEGN7oP3p70m6meKqVV0wWrFLpMnbWhLZqg4RsaZVJVSlRmINMYAbz4//uZq350Hi1LaHx/U59o0+L3BCDz+8xSM4aDz4H0pCVV/HpyjcI25zy8MAKAnwcn5hiuVmyEmDwJ+GCQPoPPgC9Xp/Za5KHMpOAyKA38u/wX1lRa5gcn8MGjLNoKze0f1VrmJhRmnPxsuqvKoWJsYDhenQfD6E6x6q93ayOjM8Paw3gSr93mfr+8KVpa3+PDX/nNXvz9pA3Ecx48KgkxnFIZTBB1gFkP2eG5Prr1eKXeUNjCW7Nn+//9idz1+iPZKvx3Iyes0NkJi3n5aZflMVe+QQVVXrqqbGROs/gP/FVccdNgRkCnB6o6OeyHAwSWjgv9wuBKMtYNgnuPkDy7CFMxYmM+/5HACYqGt42/MAimYEuz+inE4aK9ZwTO4AoDsfT/BfOqOBo4wcqcsXzASzAqmWsHQeW404VQpxz5kgHZjlsuG4GDgvPJ7HqwBrM2P5pIazEdOkjGjAgIyJDhN6OhMqQgua46G+cFTZ27ghVzuHXpjZ847wIUDRxkyusLdZTEqwzY2PTicr8uidYvneoKADAmONIeqLJdGr3hOrAmc2JBgHbWjFyVRD/fXEwRiRHCkE6p9SbLfjvR9zxNTGsGPztgRxhEhUeIZxi8fIRiDF1YDc5GWjA4MmDjKgWi46obWm8RPMajLhGDdHUsH0ozoRQMJ9IfaiGDNxEzWDEkabyB8R/tEtmciawKShg2E3l4XJiQCHw1vLHBCfP2hY+ErAjF34eFIoCTVSLIAExsfTFIXVu+pouxMCNbGSMRP5Q6FyoEs7GYNPpSFvQzBQ8lCe5yYEB96dKauQP00xBV+IBADFtZgrsD8NDNX6KHyYSxMPWGC0wSe8IRAzF2YeFKE9dQ7rtE+J/a3B4eeEGI95gk/EYTRwZGaeMPAT6j8zhbGWuFECPzUl38UEYTZwdFUYjgZn0pP6N0tnFLMAonjJDSQflpov/AW2RiHgcTk9frBsyDWL8MWNjpYIGGMkZffZ+HcAyzJ8GBbFCuc4PnMMpeGwqr4YBa2BcIWKJFPu08oZ2tAG5sRbCcfVexzlozPlsXZJzYjWMeOYSriXh+KMTVgY6wF33iZ7FP+EiXxr4IrD4eysPhQ/Gg917elVXE/a5cpwfZmmBAqEaJqlR5V+vtb2M5zcvv2uCiulCz05gpFnJOdU2dZ3PvW6bQbtbNP1WIBIejC8NKr8+tGq9PJuXD+4GfFnaVW4/r8SnTvQqF0fHrRvlvAbzyx+JGdx0jpde7WtS9Oj0tbzC5W6rX71rrcC0OLu3asJayK71oJ7mv1ShH9J6tar7W/JLB3qbv8XGpLd49E6bcTfJHatXrVyjvs8cfbSx0bAFqb5DLW7pFY9zLV7cdj6NQnldPmbRr7jTWU+54KFpe36ZqnlROUTeGoftPcxN6Jru7mti/mLuPiB3HV3OymflTYWFs9u8mia++UCl3pXiw0+t2u7L3J6Kya0vyhdP45o3/t3U0OgkAMhuFSRkUGhUQN7llzB+9/KoOTKCFE4/9k+j5dddl8m26a9t3ph7p+N3F8Qr3w8+G21TZRVZvNPc1KWqGTdDfJG6fs6mjsH6tf5STwZROTw33NG0of5l2acZk4LwzJRbSMUzvUyNB/gIrLTXGyMEacMaJrU1RETRERr4aEzSMzw0uQGSFX3gRBJFa3+vtlOL6MbAEAAAAAAAAAAAAAAID0nAFUiEuaAG9VMQAAAABJRU5ErkJggg==";var kd=Q(4323).t,Rd=function(e){var t=(0,n.useRef)(null),s=(0,n.useRef)(0),a=(0,O.throttle)((function(n){var r=e.loadMoreOffset,a=e.onLoadMore,o=e.onScroll,i=e.status,c=t.current,u=c.scrollHeight,l=c.scrollTop,d=c.clientHeight;if(i===O.DataFetchStatus.PENDING)return!1;u-l-d<=r&&s.current<l&&a&&a(),s.current=l,o&&o()}),200),o=e.listData,i=e.customRootClass,c=e.makeItem,u=e.status,l=e.emptyImage,d=e.emptyText,p=e.emptyClassName;return r().createElement("div",{className:kc()(Td.root,i),onScroll:a,ref:t},u===O.DataFetchStatus.SUCCEED||u===O.DataFetchStatus.PENDING||u===O.DataFetchStatus.FAILED?o.length>0?o.map((function(e,t){return c(e,t)})):r().createElement(Id(),{classname:p||Td.empty,image:l||Bd,text:d||kd("common.scroll_list.no_data")}):"")};Rd.defaultProps={loadMoreOffset:10,emptyImage:Bd};const Pd=E()(Rd);var Dd=Q(699),Nd={};Nd.styleTagTransform=H(),Nd.setAttributes=U(),Nd.insert=F().bind(null,"head"),Nd.domAPI=N(),Nd.insertStyleElement=G(),P()(Dd.Z,Nd);const jd=Dd.Z&&Dd.Z.locals?Dd.Z.locals:void 0;var Fd={},qd=r().createContext({});const Ud=function(e){var t=e.isScChat,s=e.currentUser,a=e.isSubAccount,o=e.messageList,i=e.fillMessageRequested,c=e.messageHttpStatus,u=e.fetchFaqMessagesRequested,l=e.sourceId,d=e.shop,p=e.conversationId,g=e.conversationShopId,A=e.conversationBuyerId,f=e.conversationStatus,h=e.handleMessageIsSend,m=e.messagesFillStatusMap,E=e.currentFaqSessionInfo,v=function(){},S=(0,n.useRef)({});return r().createElement("div",{className:jd.list,"data-cy":"minichat-message-faq-history-list"},r().createElement(qd.Provider,{value:S.current},r().createElement(Pd,{makeItem:function(e,n){if(e&&e.content){var o=e.id,c=e.type,l=(e.to_id,Bp(c));return r().createElement("div",{key:o,className:jd.baseMessage,"data-cy":"minichat-message-faq-history-message"},r().createElement(l,{className:jd.message,index:n,shop:d,message:e,isScChat:t,newMessageFlag:!1,currentUser:s,isSubAccount:a,hasSourceMessageMap:Fd,fillMessageRequested:i,fetchFaqMessagesRequested:u,conversationId:p,conversationShopId:g,conversationBuyerId:A,conversationStatus:f,measure:v,replyOfferRequested:v,evaluationRequested:v,claimVoucherRequested:v,sendMessagesRequested:v,resendMessageRequested:v,translateMessagesRequested:v,messageFillStatus:m[o],handleMessageIsSend:h,isInFaqHistoryModal:!0,currentFaqSessionInfo:E}))}},listData:o,status:c,onLoadMore:function(){return u({sourceId:l,shopId:g})},onRefresh:function(){return u({sourceId:l,shopId:g,reset:!o.length})}})))};var Ld={changeTranslateStatus:Xs,fillMessageRequested:st};const Gd=(0,h.connect)((function(e){return{sourceId:(0,T.faqIdSelector)(e),isScChat:(0,T.isScChatSelector)(e),isSubAccount:(0,T.isSubAccountSelector)(e),messageList:(0,T.faqHistoryMessagesWithHeaderSelector)(e),currentUser:(0,T.currentUserSelector)(e),messageHttpStatus:(0,T.faqHistoryhttpStatusSelector)(e),currentConversation:(0,T.currentConversationSelector)(e),conversationId:(0,T.currentConversationIdSelector)(e),conversationShopId:(0,T.currentConversationShopIdSelectors)(e),conversationBuyerId:(0,T.currentConversationBuyerIdSelectors)(e),conversationStatus:(0,T.currentConversationStatusSelectors)(e),shop:(0,T.currentConversationShopSelectors)(e),messagesFillStatusMap:(0,T.messageFillStatusMapSelector)(e),currentFaqSessionInfo:(0,T.currentFaqSessionInfoSelector)(e)}}),Ld)((function(e){return r().createElement(Ud,e)}));var Yd=Q(7539),Hd={};Hd.styleTagTransform=H(),Hd.setAttributes=U(),Hd.insert=F().bind(null,"head"),Hd.domAPI=N(),Hd.insertStyleElement=G(),P()(Yd.Z,Hd);const Wd=Yd.Z&&Yd.Z.locals?Yd.Z.locals:void 0;var Zd=Q(4323).t;const Vd=function(e){var t=e.message,n=e.updateCurrentFaqId,s=e.conversationShopId,a=e.fetchFaqMessagesRequested,o=e.handleMessageIsSend,i=e.locale,c=e.isSend,u=t.id,l=t.textContent,d=void 0===l?{messages:[]}:l,p=t.created_timestamp,g=d.messages,A=(void 0===g?[]:g).map((function(e){var t=function(e){var t=(0,O.previewMessage)({message:e,enableTranslation:!1,locale:i,conversationShopId:s}).text;return{username:e.from_user_name,content:t}}(e),n=t.username,a=t.content;return r().createElement("div",{key:"faq-".concat(e.id),className:Wd.preview,"data-cy":"minichat-message-faq-history-preview"},"".concat(n,": ").concat(a))}));return r().createElement(xd,{onClose:function(){return n({id:null})},title:Zd("conversation_list.conversation_cell.new_bundle_message_message"),className:Wd.container,label:r().createElement("div",{onClick:function(){return a({sourceId:u,shopId:s,reset:!0})},className:Wd.root,"data-cy":c?"minichat-message-faq-history-root-send":"minichat-message-faq-history-root-receive"},r().createElement("div",{className:Wd.header,"data-cy":"minichat-message-faq-history-header"},Zd("conversation_list.conversation_cell.new_bundle_message_message")),r().createElement("div",{className:Wd.content},A),r().createElement("div",{className:Wd.footer,"data-cy":"minichat-message-faq-history-footer"},Zd("faq_history.see_all"),r().createElement("div",{className:Wd.time},(0,O.newFormatMessageTime)(p,"time"))))},r().createElement(Gd,{fetchFaqMessagesRequested:a,handleMessageIsSend:o}))};var zd={fetchFaqMessagesRequested:ba,updateCurrentFaqId:Ca};const Qd=cl((0,h.connect)((function(e){return{locale:(0,T.localeSelector)(e)}}),zd)((function(e){return r().createElement(Vd,e)})));var Xd=Q(1500),Kd={};Kd.styleTagTransform=H(),Kd.setAttributes=U(),Kd.insert=F().bind(null,"head"),Kd.domAPI=N(),Kd.insertStyleElement=G(),P()(Xd.Z,Kd);const Jd=Xd.Z&&Xd.Z.locals?Xd.Z.locals:void 0;var $d=O.MessageTypes.MSG_TYPE_SELECTED_OPTION,ep=function(e){p(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var s=f(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return A(this,n)}}(n);function n(e){var r;return i(this,n),(r=t.call(this,e)).renderOption=r.renderOption.bind(l(r)),r.sendMessage=r.sendMessage.bind(l(r)),r}return u(n,[{key:"sendMessage",value:function(e){var t=e.request_live_agent,n=e.payload,r=e.text,s=this.props;(0,s.sendMessagesRequested)({conversationId:s.conversationId,messages:[{type:$d,content:{text:r,payload:n,request_live_agent:t}}]})}},{key:"renderOption",value:function(e,t){var n,s=this,a=e.text,i=e.variant,c=this.props,u=c.message,l=c.currentConversationMaxOptionHideTime,d=u.created_timestamp<l,p=kc()(Jd.option,(o(n={},Jd.primary,1===i),o(n,Jd.invalid,d),n));return r().createElement("div",{key:t,className:p,title:a,onClick:function(){if(d)return null;s.sendMessage(e)},"data-cy":"minichat-message-pond-option"},a)}},{key:"render",value:function(){var e=this,t=this.props,n=t.handleSensitiveUrl,s=t.message,a=s.content,o=a.title,i=a.options,c=void 0===i?[]:i,u=s.message_option;return r().createElement("div",{className:Jd.root,"data-cy":"minichat-message-pond-root"},r().createElement("div",{className:Jd.title,"data-cy":"minichat-message-pond-root"},r().createElement(Ac.Text,{text:o,messageOption:u,handleSensitiveUrl:n})),c.map((function(t,n){return e.renderOption(t,n)})))}}]),n}(n.PureComponent),tp={handleSensitiveUrl:ga,sendMessagesRequested:gs};const np=cl((0,h.connect)((function(e){return{conversation:(0,T.currentConversationSelector)(e),currentConversationMaxOptionHideTime:(0,T.currentConversationMaxOptionHideTimeSelectors)(e)}}),tp)(ep)),rp=cl((function(e){var t=e.isSend,n=e.message.content;return r().createElement(Ac.AddOnDealMessage,{content:n,isSend:t,handleClickItem:El})}));var sp={showMediaPreviewModalRequested:T.showMediaPreviewModalRequested,scrollToMessage:en,cancelSendingMessageRequested:vs};const ap=(0,h.connect)((function(e,t){return{videoInfo:(0,T.selectVideoInfoByKey)(t.message.request_id)(e)}}),sp)((function(e){var t=e.isSend,n=e.videoInfo,s=e.showMediaPreviewModalRequested,a=e.message,o=e.conversationShopId,i=e.scrollToMessage,c=e.conversationBuyerId,u=e.handleMessageIsSend,l=e.cancelSendingMessageRequested,d=e.conversationId,p=a.id,g=a.conversation_id,A=a.to_id,f=a.from_id,h=a.request_id,m=a.content,E=a.send_status,v=a.quoted_msg,S=a.created_timestamp,b=a.groupHeader,_=t&&E===O.MessageSendStatus.SENDING;return r().createElement(Ac.VideoMessage,{id:p,isSend:t,content:m,isSending:_,videoInfo:n,onPlayVideo:function(e){(0,T.$tracker)({trackerName:"clickPlayInVideoMessage",data:{message_id:p===h?0:p,conversation_id:g,is_sender:t,to_user_id:A,from_user_id:f,video_original_duration:m.duration_seconds},conversationShopId:o}),s({messageId:e})},replyToMessage:v,scrollToMessage:i,conversationBuyerId:c,handleMessageIsSend:u,createdTimestamp:S,groupHeader:b,handleCancelMessage:function(){(0,T.$tracker)({trackerName:"clickCancelVideo",data:{conversation_id:g,message_id:p},shopId:o}),l({id:p,conversationId:d})}})})),op=cl((function(e){return r().createElement(ap,e)}));var ip={handleSensitiveUrl:ga,showMediaPreviewModalRequested:T.showMediaPreviewModalRequested};const cp=cl((0,h.connect)((function(){return{}}),ip)((function(e){var t=e.isSend,s=e.measure,a=e.showMediaPreviewModalRequested,o=e.message,i=e.handleSensitiveUrl,c=e.conversationShopId,u=o.content,l=o.id,d=o.request_id,p=o.message_option,g=o.business_tag,A=o.crm_activity_id,f=o.created_timestamp,h=o.groupHeader,m=(0,n.useContext)(z),E={shopId:c,data:{message_id:l,business_tag:g,crm_activity_id:A}};return r().createElement(Ac.ImageWithTextMessage,{content:u,measure:s,messageId:l,requestId:d,isSend:t,imgCache:m,messageOption:p,handleSensitiveUrl:i,showMediaPreviewModalRequested:a,trackerData:E,groupHeader:h,createdTimestamp:f})})));var up={evaluationRequested:Be};const lp=cl((0,h.connect)((function(e){return{locale:(0,T.localeSelector)(e),currentUser:(0,T.currentUserSelector)(e)}}),up)((function(e){var t=e.measure,n=e.evaluationRequested,s=e.message,a=e.conversationId,o=e.isSend,i=e.locale,c=e.isInFaqHistoryModal,u=e.currentUser,l=e.conversationShopId,d=s.id,p=s.from_shop_id,g=s.textContent,A=s.to_id;return r().createElement(Ac.RateCardMessage,{measure:t,rateShopId:p,onSubmit:n,conversationId:a,isSend:o,textContent:g,locale:i,isInFaqHistoryModal:c,isSelfReceived:A===u.id,conversationShopId:l,messageId:d})})));function dp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dp(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var gp={sendMessagesRequested:gs};const Ap=cl((0,h.connect)((function(e){return{locale:(0,T.localeSelector)(e)}}),gp)((function(e){var t=e.isSend,n=void 0!==t&&t,s=e.conversationId,a=e.conversationShopId,o=e.conversationBuyerId,i=e.sendMessagesRequested,c=e.message,u=e.isInFaqHistoryModal,l=e.locale,d=c.content,p=c.faq_session_id,g=c.created_timestamp,A=c.groupHeader,f=c.label_info,h=(f=void 0===f?{}:f).label_type,m=Zl(u,i);return r().createElement(Ac.NewFaqMessage,{isSend:n,sendMessagesRequested:m,content:d,conversationId:s,shopId:a,conversationUserId:o,locale:l,handleSendMessage:function(e){var t=e.type,n=e.content;m({conversationId:s,conversationUserId:o,messages:[{shopId:a,type:t,content:pp(pp({},n),{},{faq_session_id:p})}]})},faqSessionId:p,createdTimestamp:g,groupHeader:A,labelType:h})})));function fp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fp(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var mp=O.MessageTypes.MSG_TYPE_FAQ_QUESTION_LIST,Ep=O.MessageTypes.MSG_TYPE_FAQ_QUESTION,vp=O.MessageTypes.MSG_TYPE_FAQ_CATEGORY_CHOICE,Sp={sendMessagesRequested:gs};const bp=cl((0,h.connect)((function(e){return{locale:(0,T.localeSelector)(e)}}),Sp)((function(e){var t=e.isSend,n=void 0!==t&&t,s=e.conversationId,a=e.conversationShopId,o=e.conversationBuyerId,i=e.sendMessagesRequested,c=e.message,u=e.isInFaqHistoryModal,l=e.locale,d=c.content,p=c.type,g=c.faq_session_id,A=c.created_timestamp,f=c.groupHeader,h=c.label_info,m=(h=void 0===h?{}:h).label_type,E=Zl(u,i);return r().createElement(Ac.FaqListMessage,{isSend:n,content:d,type:p,locale:l,handleSendMessage:function(e){E({conversationId:s,conversationUserId:o,messages:[{shopId:a,type:p===mp?Ep:vp,content:hp(hp({},e),{},{faq_session_id:g})}]})},createdTimestamp:A,groupHeader:f,labelType:m})})));var _p=Q(5729),yp={};yp.styleTagTransform=H(),yp.setAttributes=U(),yp.insert=F().bind(null,"head"),yp.domAPI=N(),yp.insertStyleElement=G(),P()(_p.Z,yp);const Cp=_p.Z&&_p.Z.locals?_p.Z.locals:void 0;var xp=Q(4323).t;const Mp=function(e){var t=e.isSend,s=e.message,a=e.shopId,o=e.conversationId,i=e.measure,c=e.faqSessionId,u=e.createdTimestamp,l=e.groupHeader,d=e.messageMaxWidth,p=e.labelType,g=ei(),A=(0,n.useRef)(null),f=(0,O.getChatbotType)(s),h="faq"===f?{width:"304px"}:"image"===f?{"max-width":"304px"}:"selectOrder"===f?{}:{"max-width":"".concat(d,"px")};return(0,n.useEffect)((function(){var e,t=null===(e=A.current)||void 0===e?void 0:e.querySelectorAll("img");return null==t||t.forEach((function(e){e.src.startsWith("http")&&e.addEventListener("load",i)})),function(){null==t||t.forEach((function(e){e.src.startsWith("http")&&e.removeEventListener("load",i)}))}}),[i]),r().createElement("div",{className:"".concat(t&&Cp.sendWrapper," ").concat("selectOrder"===f?Cp.root:"")},r().createElement("div",{ref:A,style:h,className:"".concat(Cp.webchatMsg," ").concat(l?Cp.groupHeader:""," ").concat(t?Cp.send:Cp.receive," ").concat(Cp["web-".concat(f)])},g.render({from:t?"right":"left",disabled:t,message:s,passThroughData:{shopId:a,conversationId:o,faqSessionId:c}}),"selectOrder"!==f&&r().createElement("div",{className:"".concat(Cp.footer," ").concat(p===O.MessageLabelType.CHAT_ASSISTANT?Cp.labelFooter:"")},p===O.MessageLabelType.CHAT_ASSISTANT&&r().createElement("div",{className:Cp.label},xp("message.label_type.chat_assistant")),r().createElement("div",{className:Cp.time},(0,O.newFormatMessageTime)(u,"time"))),l&&r().createElement(Ac.MessageTriangle,{isSend:t})))},Ip=cl((0,h.connect)((function(e){return{currentBuyerShopId:(0,T.currentBuyerShopIdSelector)(e)}}),null)((function(e){var t=e.isSend,n=e.message,s=e.currentBuyerShopId,a=e.conversationId,o=e.measure,i=e.messageMaxWidth,c=n.content.bot_data,u=n.faq_session_id,l=n.created_timestamp,d=n.groupHeader,p=n.label_info,g=(p=void 0===p?{}:p).label_type;return r().createElement(Mp,{isSend:t,message:c,shopId:s,conversationId:a,measure:o,faqSessionId:u,createdTimestamp:l,groupHeader:d,messageMaxWidth:i,labelType:g})}))),wp=cl((0,h.connect)((function(e){return{isSeller:(0,T.currentUserIsSellerSelector)(e)}}),null)(Ac.SecurityTipsMessage));var Op,Tp=(o(Op={},O.MessageTypes.MSG_TYPE_TEXT,ll),o(Op,O.MessageTypes.MSG_TYPE_IMAGE,Al),o(Op,O.MessageTypes.MSG_TYPE_OFFER,vl),o(Op,O.MessageTypes.MSG_TYPE_ORDER,Tl),o(Op,O.MessageTypes.MSG_TYPE_STICKER,kl),o(Op,O.MessageTypes.MSG_TYPE_PRODUCT,_l),o(Op,O.MessageTypes.MSG_TYPE_NOTIFICATION,Rl),o(Op,O.MessageTypes.MSG_TYPE_VOUCHER,jl),o(Op,O.MessageTypes.MSG_TYPE_ITEM_LIST,ql),o(Op,O.MessageTypes.MSG_TYPE_FEED_STORY,Ul),o(Op,O.MessageTypes.MSG_TYPE_SHOPPING_CART,Yl),o(Op,O.MessageTypes.MSG_TYPE_FAQ,Ql),o(Op,O.MessageTypes.MSG_TYPE_FAQ_LIVEAGENT,ll),o(Op,O.MessageTypes.MSG_TYPE_FAQ_QUESTION,ll),o(Op,O.MessageTypes.MSG_TYPE_FAQ_FEEDBACK,ll),o(Op,O.MessageTypes.MSG_TYPE_FAQ_FEEDBACK_PROMPT,rd),o(Op,O.MessageTypes.MSG_TYPE_FAQ_LIVEAGENT_PROMPT,ad),o(Op,O.MessageTypes.MSG_TYPE_UNTATED_ORDER_REMINDER,pd),o(Op,O.MessageTypes.MSG_TYPE_BUNDLE_MESSAGE,Qd),o(Op,O.MessageTypes.MSG_TYPE_BUNDLE_DEAL,id),o(Op,O.MessageTypes.MSG_TYPE_FLASH_SALE,cd),o(Op,O.MessageTypes.MSG_TYPE_OPTION_PACK,np),o(Op,O.MessageTypes.MSG_TYPE_SELECTED_OPTION,ll),o(Op,O.MessageTypes.MSG_TYPE_ADD_ON_DEAL,rp),o(Op,O.MessageTypes.MSG_TYPE_VIDEO,op),o(Op,O.MessageTypes.MSG_TYPE_IMAGE_WITH_TEXT,cp),o(Op,O.MessageTypes.MSG_TYPE_RATE_CARD,lp),o(Op,O.MessageTypes.MSG_TYPE_NEW_FAQ,Ap),o(Op,O.MessageTypes.MSG_TYPE_FAQ_CATEGORY_CHOICE,ll),o(Op,O.MessageTypes.MSG_TYPE_FAQ_TYPE_CHOICE,ll),o(Op,O.MessageTypes.MSG_TYPE_FAQ_QUESTION_LIST,bp),o(Op,O.MessageTypes.MSG_TYPE_FAQ_CATEGORY_LIST,bp),o(Op,O.MessageTypes.MSG_TYPE_FAQ_TYPE_BOT_REQUEST_TEXT_MESSAGE,ll),o(Op,O.MessageTypes.MSG_TYPE_FAQ_TYPE_BOT_REQUEST_ORDER_MESSAGE,(function(e){return r().createElement(Tl,e)})),o(Op,O.MessageTypes.FAQ_TYPE_BOT_RESPONSE_MESSAGE,Ip),o(Op,O.MessageTypes.MSG_TYPE_SECURITY_TIPS,wp),Op);const Bp=function(e){return Tp[e]||td};var kp=Q(1506),Rp=(Q(5247),Q(4323).t);const Pp=function(e){var t=e.shouldShow,n=e.onDismiss,s=e.onVerifySuccess,a=e.isLiveEnv;return r().createElement(kp.CaptchaPopupDesktop,{scene:"chat_user_send_message",appKey:"Chat.PC",loadCaptchaSdkAsync:function(){return Promise.resolve().then(Q.t.bind(Q,3195,23))},shouldShow:t,onDismiss:n,onVerifySuccess:s,text:{title:Rp("captcha.title"),errorScreen:{title:Rp("captcha.error.title"),description:Rp("captcha.error.desc"),retry:Rp("captcha.retry")},sliderCaptcha:{sliderDescription:Rp("captcha.slider.desc"),loading:Rp("captcha.slider.loading"),retry:Rp("captcha.retry"),refresh:Rp("captcha.slider.refresh")}},isLiveEnv:a})};var Dp=function(e,t){var n=(0,Ht.Z)(e,2),r=n[0],s=n[1];return r<=t&&s>=t},Np=function(e,t){return e&&e.length&&t?e.findIndex((function(e){return e.id===t})):null},jp=O.MessageTypes.MSG_TYPE_TEXT,Fp=(O.MessageTypes.MSG_TYPE_NOTIFICATION,O.MessageTypes.MSG_TYPE_SHOPPING_CART),qp=(O.MessageTypes.MSG_TYPE_SECURITY_TIPS,"#message-virtualized-list"),Up=function(e){p(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var s=f(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return A(this,n)}}(n);function n(e){var r;return i(this,n),(r=t.call(this,e)).keyMapper=r.keyMapper.bind(l(r)),r.getListRef=r.getListRef.bind(l(r)),r.scrollUpHandler=(0,O.memFn)(Hl,10),r.handleWheel=r.handleWheel.bind(l(r)),r.rowRenderer=r.rowRenderer.bind(l(r)),r.handleScroll=r.handleScroll.bind(l(r)),r.handleGoToBottom=r.handleGoToBottom.bind(l(r)),r.handleRowsRender=r.handleRowsRender.bind(l(r)),r.handleScrollToMessage=r.handleScrollToMessage.bind(l(r)),r.addExposedMessageId=r.addExposedMessageId.bind(l(r)),r.handleAutoSizerResized=r.handleAutoSizerResized.bind(l(r)),r.handleConversationChanged=r.handleConversationChanged.bind(l(r)),r.handleMsgListChanged=r.handleMsgListChanged.bind(l(r)),r.handleMsgListLengthUnchange=r.handleMsgListLengthUnchange.bind(l(r)),r.debounceMarkMessage=(0,O.debounce)(r.handleMarkMessage.bind(l(r)),300),r.debounceFetchMoreMessage=(0,O.debounce)(r.fetchMoreMessage.bind(l(r)),300),r.dobouceUpdateCurrentConversationCanRead=(0,O.debounce)(r.updateCurrentConversationCanRead.bind(l(r)),100),r.getDistanceBetweenMessages=r.getDistanceBetweenMessages.bind(l(r)),r.showHeaderDate=r.showHeaderDate.bind(l(r)),r.throttleShowHeaderDate=(0,O.throttle)(r.showHeaderDate.bind(l(r)),100),r.debounceScrollingEnd=(0,O.debounce)(r.scrollingEnd.bind(l(r)),2e3,99999),r.handleMessageIsSend=r.handleMessageIsSend.bind(l(r)),r.handleDismissCaptcha=r.handleDismissCaptcha.bind(l(r)),r.handleVerifySuccess=r.handleVerifySuccess.bind(l(r)),r.containerProps={onWheel:r.handleWheel},r._cache=new(w())({fixedWidth:!0,keyMapper:r.keyMapper}),r.imgCache={},r.listNode=null,r.startIndex=0,r.stopIndex=0,r.scrollTop=0,r.containerHeight=0,r.targetMsgRow=0,r.targetRowInfo=null,r.exposedMessageIds=[],r.hasSourceMessageMap={},r.stickyScrollPosition=null,r.messageScrollDirection=null,r.unreadMsgIdChanged=!1,r.state={firstUnreadMsgId:null,shouldRenderNewMessageTip:!1,shouldShowHeaderDate:!1,headerTimestamp:-1,isScrolling:!1},r}return u(n,[{key:"addExposedMessageId",value:function(e){this.exposedMessageIds.push(e)}},{key:"getListRef",value:function(e){this.listNode=e}},{key:"keyMapper",value:function(e){var t=this.props.messageList[e];return t&&t.id}},{key:"onMeasure",value:function(e,t){var n,r;t(),this.targetRowInfo&&Dp(this.targetRowInfo.range,e)&&(null===(n=this.listNode)||void 0===n||null===(r=n.scrollToRow)||void 0===r||r.call(n,this.targetRowInfo.index))}},{key:"cleanTargetRowInfo",value:function(){this.targetRowInfo=null}},{key:"componentDidMount",value:function(){this.onAppendMessage(),this.shouldScrollToBottom=!0,T.EventBus.on("scrollToMessage",this.handleScrollToMessage)}},{key:"shouldComponentUpdate",value:function(e,t){var n=this,r=Object.keys(e),s=Object.keys(this.props);return r.length!==s.length||t.headerTimestamp!==this.state.headerTimestamp||t.shouldShowHeaderDate!==this.state.shouldShowHeaderDate||t.shouldRenderNewMessageTip!==this.state.shouldRenderNewMessageTip||t.firstUnreadMsgId!==this.state.firstUnreadMsgId||r.some((function(t){var r,s,a=e[t],o=n.props[t],i=!1;switch(t){case"currentConversation":i=a.id!==o.id;break;case"unreadMessageIds":s=o,i=!((r=a).length===s.length&&r.every((function(e,t){return e===s[t]})));break;case"messageList":i=!Vl(a,o);break;default:i=a!==o}return i}))}},{key:"componentWillReceiveProps",value:function(e){var t=e.conversationId,n=e.messageList,r=e.unreadMessageIds,s=e.navigateToUnreadMessageId,a=e.currentConversation,o=this.props,i=o.conversationId,c=o.messageList,u=o.unreadMessageIds,l=o.navigateToUnreadMessageId,d={};if(this.conversationChanged=t!==i,(this.conversationChanged||u.length&&!r.length)&&(d.shouldRenderNewMessageTip=!1),this.unreadMsgIdChanged=l!==s,this.unreadMsgIdChanged){var p=function(e,t,n){var r=null,s=[];return e&&n&&(s=t.filter((function(t){var r=(0,O.getMessageIsSend)(t,e);return t&&!r&&(0,O.greaterThan)(t.id,n)})).map((function(e){return e.id}))),s.length&&(r=s[0]),r}(a,n,s);d.firstUnreadMsgId=p}this.conversationChanged?this.handleConversationChanged():c.length!==n.length?this.handleMsgListChanged(e):this.handleMsgListLengthUnchange(e),(0,O.checkEmptyObject)(d)||this.setState(d)}},{key:"componentDidUpdate",value:function(){var e=this;if(this.conversationChanged)this.conversationChanged=!1,this.onAppendMessage();else if(this.messageScrollDirection)1===this.messageScrollDirection?this.onAppendMessage():-1===this.messageScrollDirection&&this.onPrependMessage(),this.messageScrollDirection=null;else if(this.unreadMsgIdChanged){var t=this.props.messageList,n=this._cache._cellHeightCache,r=t.findIndex((function(t){return t.id===e.state.firstUnreadMsgId}));if(r>=0){var s=t.slice(r,t.length);if(s.length){var a=0;if(s.forEach((function(e){a+=n[e.id]})),a<this.containerHeight){var o,i,c=t.length-1;this.targetRowInfo={index:c,range:[this.startIndex,c]},null===(o=this.listNode)||void 0===o||null===(i=o.scrollToRow)||void 0===i||i.call(o,c)}}}}}},{key:"componentWillUnmount",value:function(){T.EventBus.removeListener("scrollToMessage",this.handleScrollToMessage)}},{key:"handleAutoSizerResized",value:function(e){var t=e.height;if(this.containerHeight){var n=t-this.containerHeight;if(n<0){var r=document.getElementById(qp);r&&(r.scrollTop=r.scrollTop-n)}}this.containerHeight=t,this.shouldScrollToBottom&&t&&(this.shouldScrollToBottom=!1,this.onAppendMessage())}},{key:"handleScrollToMessage",value:function(e){var t=this.props.isNavigateToUnreadMessage,n=Np(this.props.messageList,e);if(n>=0){var r,s,a=t?n+1:n;this.targetMsgRow=a,null===(r=this.listNode)||void 0===r||null===(s=r.scrollToRow)||void 0===s||s.call(r,a)}}},{key:"handleConversationChanged",value:function(){var e,t,n=this.props,r=n.messageList;(0,n.setCurrentConversationCanRead)({canRead:!0}),this.scrollTop=0,this.startIndex=0,this.stopIndex=0,this.cleanTargetRowInfo(),this.scrollUpHandler.reset(),this.hasSourceMessageMap={},this.shouldScrollToBottom=!0,null===(e=this.listNode)||void 0===e||null===(t=e.forceUpdateGrid)||void 0===t||t.call(e);var s=Np(r,this.state.firstUnreadMsgId);s>-1&&this._cache.clear(s)}},{key:"handleMsgListLengthUnchange",value:function(e){var t,n,r=e.messageList,s=e.hasMoreOlderMessage,a=this.props,o=a.messageList,i=a.hasMoreOlderMessage,c=function(e,t,n,r){var s=e.slice(n,r+1),a=t.slice(n,r+1);return!Vl(s,a)}(o,r,this.startIndex,this.stopIndex);(c||i&&!s)&&(null===(t=this.listNode)||void 0===t||null===(n=t.forceUpdateGrid)||void 0===n||n.call(t));var u=Wl(r),l=Wl(o);if(u&&l){var d=u.type,p=u.request_id,g=u.errorCode,A=u.message_option,f=u.textContent,h=u.send_status,m=l.request_id,E=l.retryRequestId,v=l.errorCode,S=l.message_option,b=l.send_status,_=l.textContent;switch(d){case jp:p!==m&&p!==E||!(h!==b||g!==v&&g===O.MessageErrorCode.BLACKLIST||A!==S&&0!==A)||(this.messageScrollDirection=1);break;case Fp:!_&&f&&(this.messageScrollDirection=1)}}}},{key:"handleMsgListChanged",value:function(e){var t,n,r,s,a,o=this.props.messageList,i=e.currentConversation,c=e.messageList,u=e.unreadMessageIds,l=e.currentConversationCanRead,d=o.length,p=c.length,g=Wl(c),A=g&&(0,O.getMessageIsSend)(g,i),f=!0,h=function(e,t){for(var n=e.length-1;n>=0;){var r=e[n];if(!t.includes(r.id))return n;n--}}(c,u);(l||!u.length||A||this.stopIndex>=h)&&(f=!1),this.setState({shouldRenderNewMessageTip:f}),t=c,s=(n=o).length,a=t.length,!s&&a||null!==(r=n[0])&&void 0!==r&&r.isFaking||(s?n[0].id:null)===(a?t[0].id:null)?!A&&d&&d-1!==this.stopIndex||(this.cleanTargetRowInfo(),this.messageScrollDirection=1,this.onAppendMessage()):(this.cleanTargetRowInfo(),this.stickyScrollPosition={index:this.startIndex+p-d,stickyScrollTop:this.scrollTop},this.messageScrollDirection=-1)}},{key:"handleWheel",value:function(e){this.targetRowInfo&&e.deltaY<0&&this.cleanTargetRowInfo()}},{key:"handleMarkMessage",value:function(){var e=this.props.unreadMessageIds.length;if(e){var t=this.props,n=t.showChatWindow,r=t.showConversationDetail,s=t.messageList,a=t.unreadMessageIds,o=t.markMessagesRequested,i=t.currentConversation,c=i.status,u=i.id,l=a[e-1],d=Np(s,l);n&&r&&"closed"!==c&&this.stopIndex>=d&&o({isRead:!0,conversationId:u,latestMessageId:l})}}},{key:"onAppendMessage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.alignment,n=void 0===t?"end":t,r=e.index,s=void 0===r?null:r,a=this.props,o=a.inScrollToMessage,i=a.messageList,c=a.isNavigateToUnreadMessage;if(!o&&i.length&&!c){var u,l,d,p,g,A,f=null,h=s||i.length-1,m="end"===n;m?this.targetRowInfo={index:h,range:[this.startIndex,h]}:f=null===(u=this.listNode)||void 0===u||null===(l=u.getOffsetForRow)||void 0===l?void 0:l.call(u,{index:h,alignment:n}),m?null===(d=this.listNode)||void 0===d||null===(p=d.scrollToRow)||void 0===p||p.call(d,h<0?0:h):null===(g=this.listNode)||void 0===g||null===(A=g.scrollToPosition)||void 0===A||A.call(g,f)}}},{key:"onPrependMessage",value:function(){var e,t,n,r,s=this.stickyScrollPosition||{},a=s.index,o=s.stickyScrollTop,i=(null===(e=this.listNode)||void 0===e||null===(t=e.getOffsetForRow)||void 0===t?void 0:t.call(e,{index:a,alignment:"start"}))||0;null===(n=this.listNode)||void 0===n||null===(r=n.scrollToPosition)||void 0===r||r.call(n,i+o)}},{key:"handleGoToBottom",value:function(){var e=this.props,t=e.conversationId,n=e.inScrollToMessage,r=e.fetchRequested,s=e.deleteConversationMessageHash,a=e.setInScrollToMessage,o=e.currentConversation,i=e.isNavigateToUnreadMessage,c=e.setNavigateToUnreadMessage;n||i?(n&&a({inScrollToMessage:!1}),i&&c({isNavigateToUnreadMessage:!1}),t&&s({conversationId:t}),r({conversation:o,needReset:!0}),this.shouldScrollToBottom=!0):this.onAppendMessage()}},{key:"fetchMoreMessage",value:function(e){var t=this.props,n=t.messageList,r=t.fetchRequested,s=t.conversationId;n.length&&r({direction:e,conversationId:s})}},{key:"updateCurrentConversationCanRead",value:function(e){var t=this.props,n=t.currentConversationCanRead,r=t.setCurrentConversationCanRead;e!==n&&r({canRead:e})}},{key:"showHeaderDate",value:function(){var e=this.props.messageList;if(null!=e&&e.length){var t=e[this.startIndex||0].created_timestamp;this.setState({shouldShowHeaderDate:!0,headerTimestamp:t})}}},{key:"scrollingEnd",value:function(){this.setState({shouldShowHeaderDate:!1,headerTimestamp:-1})}},{key:"handleScroll",value:function(e){var t=e.clientHeight,n=e.scrollHeight,r=e.scrollTop;t&&t+r<n&&(this.throttleShowHeaderDate(),this.debounceScrollingEnd());var s=this.props,a=s.messageList,o=s.inScrollToMessage,i=s.hasMoreOlderMessage,c=s.hasMoreLatestMessage,u=s.handleComponentScroll,l=s.isNavigateToUnreadMessage;if(s.setNavigateToUnreadMessage,n>0&&(this.targetRowInfo&&this.scrollUpHandler.check(this.scrollTop,r)&&this.cleanTargetRowInfo(),this.scrollTop>r?(u("up"),!1!==i&&r<200&&0!==t&&this.debounceFetchMoreMessage("older")):(u("down"),(o||l)&&c&&r>n-t-30&&this.debounceFetchMoreMessage("latest"))),this.stopIndex>0){var d,p=a.length,g=r>0?n-r-t<=60||(null===(d=this.targetRowInfo)||void 0===d?void 0:d.index)===p-1:!(p>0)||this.stopIndex>=p-1;this.dobouceUpdateCurrentConversationCanRead(g)}this.scrollTop=r}},{key:"handleRowsRender",value:function(e){var t,n,r=e.startIndex,s=e.stopIndex;this.startIndex=r,this.stopIndex=s,this.debounceMarkMessage(),this.targetRowInfo&&Dp(this.targetRowInfo.range,r)?this.targetRowInfo.range=[r,this.targetRowInfo.range[1]]:this.cleanTargetRowInfo(),this.targetMsgRow>0&&(null===(t=this.listNode)||void 0===t||null===(n=t.scrollToRow)||void 0===n||n.call(t,this.targetMsgRow),this.targetMsgRow=null)}},{key:"handleMessageIsSend",value:function(e){var t=this.props.currentConversation;return(0,O.getMessageIsSend)(e,{isAgent:!1,shop_id:t.shop_id})}},{key:"getDistanceBetweenMessages",value:function(e,t){if(!t)return 12;var n=e.id,r=e.type,s=e.dayHeader,a=e.to_id,o=t.type,i=t.to_id,c=(t.errorCode,this.props),u=c.currentUser,l=c.showWarningMessageIds,d=c.currentConversation,p=c.conversationBuyerId,g=this.handleMessageIsSend(t),A=d.to_name;return(0,O.isMessageTypeWithNoTime)(r,a,u.id)||(0,O.isMessageTypeWithNoTime)(o,i,u.id)||a!==i||s||n===this.state.firstUnreadMsgId||(0,O.isShowWarningMessage)(t,g,l)||(0,O.showMetaInfoMessage)(t,g,p,A)?12:4}},{key:"rowRenderer",value:function(e){var t=this,n=e.index,s=(e.key,e.parent),a=e.style,o=this.props.messageList[n];if(!o)return null;var i=this.props,c=i.shop,u=i.isScChat,l=i.currentUser,d=i.isSubAccount,p=i.messageList,g=(i.hasMoreOlderMessage,i.resendMessageRequested),A=i.fillMessageRequested,f=i.cancelSendingMessageRequested,h=i.showWarningMessageIds,m=i.conversationId,E=i.conversationShopId,v=i.conversationBuyerId,S=i.conversationStatus,b=i.messagesFillStatusMap,_=i.currentFaqSessionInfo,y=p[n-1]||{},C=(y.type,y.to_id,y.content,o.type),x=o.id,I=Bp(C),w=b[x],O=b["source-".concat(x)],T=0===n,B=this.getDistanceBetweenMessages(o,y);return r().createElement(M(),{key:x,parent:s,rowIndex:n,columnIndex:0,cache:this._cache},(function(e){var s=e.measure;return r().createElement(I,{index:n,style:a,shop:c,distance:B,message:o,measure:function(){return t.onMeasure(n,s)},isScChat:u,isSubAccount:d,isLastMessage:n===p.length-1,newMessageFlag:x===t.state.firstUnreadMsgId&&!T,hasSourceMessageMap:t.hasSourceMessageMap,resendMessageRequested:g,fillMessageRequested:A,addExposedMessageId:t.addExposedMessageId,exposedMessageIds:t.exposedMessageIds,cancelSendingMessageRequested:f,showWarningMessageIds:h,conversationId:m,conversationShopId:E,conversationBuyerId:v,conversationStatus:S,messageFillStatus:w,messageSourceFillStatus:O,currentFaqSessionInfo:_,currentUserId:l.id,handleMessageIsSend:t.handleMessageIsSend})}))}},{key:"handleDismissCaptcha",value:function(){(0,this.props.updateCaptchaVisible)({visible:!1})}},{key:"handleVerifySuccess",value:function(e){(0,this.props.updateCaptchaSignature)({signature:e}),this.handleDismissCaptcha()}},{key:"render",value:function(){var e=this,t=this.props,n=t.locale,s=t.isScChat,a=t.messageList,o=void 0===a?[]:a,i=t.unreadMessageIds,c=void 0===i?[]:i,u=t.currentConversation,l=t.shopTranslationSettings,d=t.messagesFillStatusMap,p=t.currentConversationTranslationAccess,g=t.currentConversationCanRead,A=t.toBottomHasConflict,f=t.captchaVisible,h=(t.shop,u.status),m=u.shop_id,E=u.to_name,v=u.to_id,b=u.latest_message_from_id,y=o.filter((function(e){return c.includes(e.id)})),x=y.length?y[y.length-1]:null,M=o.length||1,I=v!==b,w=(x||{}).content,T=(void 0===w?{}:w).translation,B=(T=void 0===T?{}:T).text,R=(l[m]||{}).autoTranslationStatus===O.SwitchStatus.ENABLED,P=(0,O.handleDisplayTranslation)(R,I,B,s,p),D="closed"===h;return r().createElement("div",{className:V.messageSection,id:"messageSection","data-cy":"minichat-message-section"},this.state.shouldShowHeaderDate&&r().createElement(Nc,{timestamp:this.state.headerTimestamp}),r().createElement(C(),{onResize:this.handleAutoSizerResized},(function(t){var n=t.width,s=t.height;return r().createElement(sc,null,r().createElement(z.Provider,{value:e.imgCache},r().createElement(_(),{width:n,height:s,ref:e.getListRef,rowCount:M,rowHeight:e._cache.rowHeight,className:V.grid,containerProps:e.containerProps,containerStyle:{},estimatedRowSize:37,overscanRowCount:10,deferredMeasurementCache:e._cache,onScroll:e.handleScroll,rowRenderer:e.rowRenderer,onRowsRendered:e.handleRowsRender,differProp:d,id:qp})))})),r().createElement("div",{className:V.layers,"data-cy":"minichat-message-section-layer"},!A&&!g&&r().createElement("div",{id:"toBottomButton",className:V.iconWrapper,onClick:this.handleGoToBottom,"data-cy":"minichat-message-section-to-bottom-button"},r().createElement(S(),{svg:k()})),this.state.shouldRenderNewMessageTip&&!D&&r().createElement(dc,{locale:n,shopId:m,username:E,message:x||{},onClick:this.handleGoToBottom,enableTranslation:P})),r().createElement(Pp,{isLiveEnv:!0,shouldShow:f,onDismiss:this.handleDismissCaptcha,onVerifySuccess:this.handleVerifySuccess}))}}]),n}(r().Component);const Lp=E()(Up,{dataKey:"messageList",penddingController:function(e,t,n){return!t||n!==O.DataFetchStatus.INIT_PENDING},scrollController:function(e,t,n,r,s,a,o){var i=e!==t;i&&(o&&r===O.DataFetchStatus.FAILED&&o(),n(e));var c=a.current;c&&clearTimeout(c),a.current=setTimeout((function(){i&&!r.toLowerCase().includes("init")&&s(O.DataFetchStatus.SUCCEED)}),10)}});var Gp=["fetchMessagesRequested","messageHttpStatus"];function Yp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yp(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Wp=function(e){p(s,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var s=f(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return A(this,n)}}(s);function s(e){var t;return i(this,s),(t=n.call(this,e)).fetchRequested=t.fetchRequested.bind(l(t)),t}return u(s,[{key:"fetchRequested",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.needReset,n=void 0!==t&&t,r=e.direction,s=this.props,a=s.messageList,o=s.currentConversation,i=s.fetchMessagesRequested,c={conversationId:o.id,direction:"up"===r||"older"===r?"older":"latest"};if(n)c.read=!0,c.reset=!0;else if(!a.length)return;i(Hp({},c))}},{key:"render",value:function(){var e=this.props,n=(e.fetchMessagesRequested,e.messageHttpStatus),s=t(e,Gp);return r().createElement(Lp,a({},s,{status:n,fetchRequested:this.fetchRequested}))}}]),s}(r().PureComponent),Zp={markMessagesRequested:T.markMessagesRequested,fetchMessagesRequested:Ot,resendMessageRequested:mn,fillMessageRequested:st,setCurrentConversationCanRead:T.setCurrentConversationCanRead,cancelSendingMessageRequested:vs,deleteConversationMessageHash:qn,setInScrollToMessage:rn,setNavigateToUnreadMessage:T.setNavigateToUnreadMessage,updateCaptchaVisible:T.updateCaptchaVisible,updateCaptchaSignature:T.updateCaptchaSignature};const Vp=(0,h.connect)((function(e){return{isScChat:(0,T.isScChatSelector)(e),hasMoreOlderMessage:(0,T.hasMoreOlderMessageSelector)(e),hasMoreLatestMessage:(0,T.hasMoreLatestMessageSelector)(e),isSubAccount:(0,T.isSubAccountSelector)(e),messageList:(0,T.currentConversationMessagesWithHeaderSelector)(e),showChatWindow:(0,T.showChatWindowSelector)(e),unreadMessageIds:(0,T.unreadMessageIdsSelector)(e),messageHttpStatus:(0,T.messageHttpStatusSelector)(e),showConversationDetail:(0,T.showConversationDetailSelector)(e),currentConversationCanRead:(0,T.currentConversationCanReadSelector)(e),showWarningMessageIds:(0,T.showWarningMessageIdsSelector)(e),conversationId:(0,T.currentConversationIdSelector)(e),conversationShopId:(0,T.currentConversationShopIdSelectors)(e),conversationBuyerId:(0,T.currentConversationBuyerIdSelectors)(e),conversationStatus:(0,T.currentConversationStatusSelectors)(e),shop:(0,T.currentConversationShopSelectors)(e),inScrollToMessage:(0,T.inScrollToMessageSelector)(e)||(0,T.inlocationSelector)(e),shopTranslationSettings:(0,T.shopTranslationSettingsSelector)(e),currentConversationTranslationAccess:(0,T.currentConversationTranslationAccessSelector)(e),messagesFillStatusMap:(0,T.messageFillStatusMapSelector)(e),locale:(0,T.localeSelector)(e),currentFaqSessionInfo:(0,T.currentFaqSessionInfoSelector)(e),toBottomHasConflict:(0,T.toBottomHasConflictSelector)(e),isNavigateToUnreadMessage:(0,T.isNavigateToUnreadMessageSelector)(e),navigateToUnreadMessageId:(0,T.navigateToUnreadMessageIdSelector)(e),captchaVisible:(0,T.captchaVisibleSelector)(e)}}),Zp)(Wp);var zp=tc,Qp=ec,Xp=t(e,["reducerMap","sagas"]),Kp=function(){return{id:"message-section",reducerMap:zp,sagas:Qp,actionsMap:Xp,retained:!0}};function Jp(e){return r().createElement(s.DynamicModuleLoader,{modules:[Kp()]},r().createElement(Vp,e))}})(),Q.O(X)})(),e.exports=r(n(67294),n(99591),n(50558),n(34012),n(20590),n(31427),n(78330),n(54818),n(36032),n(26842),n(37764),n(74981),n(77996),n(53053),n(34857),n(67429),n(28366),n(58518),n(70249),n(46811),n(31479),n(23163),n(94633),n(79940),n(87766),n(3093),n(47865),n(13283),n(94184),n(16599),n(70984),n(43331),n(90785),n(2091),n(33640),n(847),n(83253),n(80862),n(82365),n(19920),n(92625),n(99995),n(80671))},47865:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="chat-icon"><path d="M13.105 7.46a.76.76 0 00-1.08 0l-3.267 3.275V2.43a.762.762 0 10-1.523 0v8.306L3.97 7.46a.764.764 0 10-1.081 1.082l4.568 4.572a.76.76 0 00.251.16.715.715 0 00.579 0 .76.76 0 00.251-.16l4.568-4.572a.762.762 0 000-1.082z"></path></svg>'},74981:e=>{e.exports='<svg width="56" height="56" viewBox="0 0 56 56" fill="none" xmlns="http://www.w3.org/2000/svg"><g filter="url(#filter0_d_1323_38456)"><circle cx="28" cy="26" r="20" fill="white"></circle></g><path d="M35.658 25.1885C35.5518 25.0813 35.4255 24.9963 35.2864 24.9383C35.1472 24.8803 34.9979 24.8504 34.8472 24.8504C34.6964 24.8504 34.5471 24.8803 34.408 24.9383C34.2688 24.9963 34.1425 25.0813 34.0363 25.1885L29.137 30.1027V17.6428C29.137 17.3397 29.0167 17.0491 28.8025 16.8347C28.5884 16.6204 28.2979 16.5 27.995 16.5C27.6921 16.5 27.4016 16.6204 27.1874 16.8347C26.9733 17.0491 26.853 17.3397 26.853 17.6428V30.1027L21.9536 25.1885C21.7386 24.9733 21.4469 24.8524 21.1428 24.8524C20.8387 24.8524 20.547 24.9733 20.332 25.1885C20.1169 25.4037 19.9961 25.6955 19.9961 25.9999C19.9961 26.3042 20.1169 26.5961 20.332 26.8113L27.1841 33.6683C27.2928 33.7724 27.4208 33.8539 27.561 33.9083C27.6977 33.9688 27.8455 34 27.995 34C28.1444 34 28.2923 33.9688 28.429 33.9083C28.5691 33.8539 28.6972 33.7724 28.8058 33.6683L35.658 26.8113C35.7651 26.705 35.85 26.5786 35.908 26.4394C35.966 26.3001 35.9958 26.1507 35.9958 25.9999C35.9958 25.849 35.966 25.6996 35.908 25.5604C35.85 25.4211 35.7651 25.2947 35.658 25.1885Z" fill="#EE4D2D"></path><defs><filter id="filter0_d_1323_38456" x="0" y="0" width="56" height="56" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset dy="2"></feOffset><feGaussianBlur stdDeviation="4"></feGaussianBlur><feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.05 0"></feColorMatrix><feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_1323_38456"></feBlend><feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_1323_38456" result="shape"></feBlend></filter></defs></svg>'},43331:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="chat-icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M8 15A7 7 0 108 1a7 7 0 000 14zm3.787-8.284l-3.983 3.907a.724.724 0 01-.513.21.736.736 0 01-.514-.21l-2.29-2.407a.706.706 0 010-1.007.733.733 0 011.027 0L7.29 9.098l3.47-3.39a.733.733 0 011.184.232.7.7 0 01-.158.776z"></path></svg>'},33640:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="chat-icon"><path d="M8 16A8 8 0 118 0a8 8 0 010 16zm.8-7V4H7.3v5h1.5zm0 3v-1.5H7.3V12h1.5z"></path></svg>'}}]);
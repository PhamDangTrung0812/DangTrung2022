(self.miniJsonp=self.miniJsonp||[]).push([[592],{37764:function(e,t,r){var n;n=(e,t,r,n,o,a,c,s,i,u,l,d,p,_,f,E,S,O,h,v,T,m)=>(()=>{var g={757:(e,t,r)=>{e.exports=r(666)},439:(e,t,r)=>{"use strict";r.d(t,{t:()=>a});var n=r(661),o=r.n(n),a=o().t.bind(o())},187:e=>{"use strict";var t,r="object"==typeof Reflect?Reflect:null,n=r&&"function"==typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,e.exports.once=function(e,t){return new Promise((function(r,n){function o(r){e.removeListener(t,a),n(r)}function a(){"function"==typeof e.removeListener&&e.removeListener("error",o),r([].slice.call(arguments))}E(e,t,a,{once:!0}),"error"!==t&&function(e,t,r){"function"==typeof e.on&&E(e,"error",t,{once:!0})}(e,o)}))},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var c=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function i(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function u(e,t,r,n){var o,a,c,u;if(s(r),void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),a=e._events),c=a[t]),void 0===c)c=a[t]=r,++e._eventsCount;else if("function"==typeof c?c=a[t]=n?[r,c]:[c,r]:n?c.unshift(r):c.push(r),(o=i(e))>0&&c.length>o&&!c.warned){c.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+c.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=c.length,u=l,console&&console.warn&&console.warn(u)}return e}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},o=l.bind(n);return o.listener=r,n.wrapFn=o,o}function p(e,t,r){var n=e._events;if(void 0===n)return[];var o=n[t];return void 0===o?[]:"function"==typeof o?r?[o.listener||o]:[o]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(o):f(o,o.length)}function _(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function f(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function E(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function o(a){n.once&&e.removeEventListener(t,o),r(a)}))}}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");c=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return i(this)},a.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var o="error"===e,a=this._events;if(void 0!==a)o=o&&void 0===a.error;else if(!o)return!1;if(o){var c;if(t.length>0&&(c=t[0]),c instanceof Error)throw c;var s=new Error("Unhandled error."+(c?" ("+c.message+")":""));throw s.context=c,s}var i=a[e];if(void 0===i)return!1;if("function"==typeof i)n(i,this,t);else{var u=i.length,l=f(i,u);for(r=0;r<u;++r)n(l[r],this,t)}return!0},a.prototype.addListener=function(e,t){return u(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return u(this,e,t,!0)},a.prototype.once=function(e,t){return s(t),this.on(e,d(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,d(this,e,t)),this},a.prototype.removeListener=function(e,t){var r,n,o,a,c;if(s(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(o=-1,a=r.length-1;a>=0;a--)if(r[a]===t||r[a].listener===t){c=r[a].listener,o=a;break}if(o<0)return this;0===o?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,o),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,c||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var o,a=Object.keys(r);for(n=0;n<a.length;++n)"removeListener"!==(o=a[n])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},a.prototype.listeners=function(e){return p(this,e,!0)},a.prototype.rawListeners=function(e){return p(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):_.call(e,t)},a.prototype.listenerCount=_,a.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},666:e=>{var t=function(e){"use strict";var t,r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function i(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(e){i=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof S?t:S,a=Object.create(o.prototype),c=new C(n||[]);return a._invoke=function(e,t,r){var n=d;return function(o,a){if(n===_)throw new Error("Generator is already running");if(n===f){if("throw"===o)throw a;return P()}for(r.method=o,r.arg=a;;){var c=r.delegate;if(c){var s=R(c,r);if(s){if(s===E)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===d)throw n=f,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=_;var i=l(e,t,r);if("normal"===i.type){if(n=r.done?f:p,i.arg===E)continue;return{value:i.arg,done:r.done}}"throw"===i.type&&(n=f,r.method="throw",r.arg=i.arg)}}}(e,r,c),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var d="suspendedStart",p="suspendedYield",_="executing",f="completed",E={};function S(){}function O(){}function h(){}var v={};v[a]=function(){return this};var T=Object.getPrototypeOf,m=T&&T(T(I([])));m&&m!==r&&n.call(m,a)&&(v=m);var g=h.prototype=S.prototype=Object.create(v);function b(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){function r(o,a,c,s){var i=l(e[o],e,a);if("throw"!==i.type){var u=i.arg,d=u.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(d).then((function(e){u.value=e,c(u)}),(function(e){return r("throw",e,c,s)}))}s(i.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function R(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,R(e,r),"throw"===r.method))return E;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return E}var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,E;var a=o.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,E):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,E)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function D(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function I(e){if(e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,c=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return c.next=c}}return{next:P}}function P(){return{value:t,done:!0}}return O.prototype=g.constructor=h,h.constructor=O,O.displayName=i(h,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===O||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,i(e,s,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(y.prototype),y.prototype[c]=function(){return this},e.AsyncIterator=y,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var c=new y(u(t,r,n,o),a);return e.isGeneratorFunction(r)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},b(g),i(g,s,"Generator"),g[a]=function(){return this},g.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=I,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(D),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var c=this.tryEntries[a],s=c.completion;if("root"===c.tryLoc)return o("end");if(c.tryLoc<=this.prev){var i=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(i&&u){if(this.prev<c.catchLoc)return o(c.catchLoc,!0);if(this.prev<c.finallyLoc)return o(c.finallyLoc)}else if(i){if(this.prev<c.catchLoc)return o(c.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return o(c.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var c=a?a.completion:{};return c.type=e,c.arg=t,a?(this.method="next",this.next=a.finallyLoc,E):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),E},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),D(r),E}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;D(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),E}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}},782:e=>{"use strict";e.exports=S},830:e=>{"use strict";e.exports=O},292:e=>{"use strict";e.exports=h},846:e=>{"use strict";e.exports=m},674:e=>{"use strict";e.exports=a},378:e=>{"use strict";e.exports=s},464:e=>{"use strict";e.exports=i},428:e=>{"use strict";e.exports=T},661:e=>{"use strict";e.exports=r},444:e=>{"use strict";e.exports=c},598:e=>{"use strict";e.exports=o},550:e=>{"use strict";e.exports=p},383:t=>{"use strict";t.exports=e},252:e=>{"use strict";e.exports=u},655:e=>{"use strict";e.exports=E},944:e=>{"use strict";e.exports=l},975:e=>{"use strict";e.exports=d},947:e=>{"use strict";e.exports=_},855:e=>{"use strict";e.exports=t},672:e=>{"use strict";e.exports=n},455:e=>{"use strict";e.exports=v},459:e=>{"use strict";e.exports=f}},b={};function y(e){var t=b[e];if(void 0!==t)return t.exports;var r=b[e]={exports:{}};return g[e](r,r.exports,y),r.exports}y.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return y.d(t,{a:t}),t},y.d=(e,t)=>{for(var r in t)y.o(t,r)&&!y.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},y.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),y.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var R={};return(()=>{"use strict";function e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}y.r(R),y.d(R,{$tracker:()=>UT,BadRequest:()=>ot,Blacklist:()=>pt,CancelOrderWarning:()=>Ot,CustomError:()=>dt,EventBus:()=>lT,ExceptionName:()=>Nv,FileReaderError:()=>vt,Forbidden:()=>ut,FullStoryProjectId:()=>vs,HTTPError:()=>mt,InternalServerError:()=>it,Limiting:()=>Et,LiveReportPoint:()=>Ov,LiveSecretKey:()=>vv,MarkName:()=>Iv,NoLiveKeyMap:()=>Dv,NoLiveReportPoint:()=>hv,NoLiveSecretKey:()=>Tv,NotFound:()=>ct,ReportComponent:()=>Pv,ReportPoint:()=>Yv,TemporyError:()=>Tt,Unauthoried:()=>at,UnprocessableEntity:()=>st,UntrustedNetwork:()=>St,UnverifiedPhoneNumber:()=>ht,Webview:()=>ft,addMediaFile:()=>XS,addMediaFileHandler:()=>Nu,addOnDealItemDetailCleaner:()=>ie,addOnDealRuleCleaner:()=>le,agentConversationEntitiesSelector:()=>vr,agentConversationSchema:()=>S,allMessageIdsSelector:()=>Z_,allProductsSearchStatusSelector:()=>Oh,allProductsSelector:()=>Rh,authorizedShopsCountSelector:()=>fo,autoTranslation:()=>qf,batchRemoveDraft:()=>PE,batchRemoveDraftHandler:()=>yu,batchUpdateRecord:()=>Hr,blockUserRequested:()=>bo,bundleDealItemDetailCleaner:()=>de,bundleDealRuleCleaner:()=>pe,cancelReasonsSelector:()=>sh,captchaSignatureSelector:()=>Vn,captchaVisibleSelector:()=>Hn,changeConversationStatusRequested:()=>Hi,changeConversationStatusRequestedSaga:()=>nd,chatbotImageSelector:()=>Pf,chatbotOrderCleaner:()=>We,checkUserPermissionRequested:()=>Sc,checkUserPermissionSaga:()=>Tc,checkUserPermissionSucceeded:()=>Oc,clearApiCache:()=>Kt,clearMediaFile:()=>$S,clearMediaFileHandler:()=>xu,clearReportRequested:()=>Ph,closeMediaPreviewModalRequested:()=>sO,closeModal:()=>an,collectAsyncTask:()=>qv,collectComponentTask:()=>Qv,collectLoadTask:()=>Wv,configTrackerUser:()=>CT,contactsEntitiesSelector:()=>Ir,contactsSchema:()=>O,conversationBeenDeletedSelector:()=>ii,conversationDirectionSelector:()=>ws,conversationEntitiesSelector:()=>hr,conversationHttpStatusSelector:()=>Ns,conversationIdsSelector:()=>ys,conversationLastMessageSelector:()=>$_,conversationOperateRequested:()=>Bi,conversationReducer:()=>dp,conversationSchema:()=>s,conversationsLengthLevelSelector:()=>Pr,conversationsSelector:()=>xs,converstionSyncUpdatesSaga:()=>Cd,copySucceedFeedback:()=>n_,curConvsMessageSelector:()=>mf,curMessagesRelatedSelector:()=>z_,curTabFocusedSelector:()=>no,currentAllMessageShortcutsSelector:()=>Vf,currentBuyerIdSelector:()=>Ys,currentBuyerOffersSelector:()=>gE,currentBuyerOrdersSelector:()=>ph,currentBuyerSelector:()=>ri,currentBuyerShopIdSelector:()=>ni,currentBuyerShopSelector:()=>Ep,currentConversationAutoTranslationSelectors:()=>Xs,currentConversationBuyerIdSelectors:()=>Ks,currentConversationCanReadSelector:()=>Ps,currentConversationIdSelector:()=>Is,currentConversationMaxOptionHideTimeSelectors:()=>Js,currentConversationMessagesWithHeaderSelector:()=>bf,currentConversationSelector:()=>Bs,currentConversationShopIdSelectors:()=>qs,currentConversationShopRegionSelectors:()=>Qs,currentConversationShopSelectors:()=>Ws,currentConversationStatusSelectors:()=>zs,currentConversationToNameSelector:()=>ui,currentConversationTranslationAccessSelector:()=>ci,currentDraftSelector:()=>LE,currentFaqHistorySeletor:()=>F_,currentFaqSessionInfoSelector:()=>wf,currentFetchResultSelector:()=>yh,currentGroupIdSelector:()=>jf,currentGroupTypeSelector:()=>Mf,currentOfferPaginationSelector:()=>mE,currentOffersFetchResultSelector:()=>TE,currentOrderFetchResultSelector:()=>lh,currentPendingOffersCountSelector:()=>fi,currentPreviewMediaIdSelector:()=>oO,currentShopIdSelector:()=>ti,currentUserDistributionStatusSelector:()=>to,currentUserIdSelector:()=>Pn,currentUserIsSellerSelector:()=>So,currentUserRoleSelector:()=>eo,currentUserSelector:()=>Qn,currentUserShopIdSelector:()=>$n,currentUserShopSelector:()=>Zn,defaultPagination:()=>zp,degradeConversationIdsSelector:()=>js,deleteConfigDurationSelector:()=>Ln,deleteConfigSelector:()=>Gn,deleteConversationRequested:()=>gi,deleteConversationSucceedHandler:()=>fu,deleteConversationSucceeded:()=>bi,deleteMediaFile:()=>JS,deleteMediaFileHandler:()=>wu,deleteRecord:()=>Fr,distributionAccountStatusSelector:()=>Xf,draftHashSelector:()=>ME,draftReducer:()=>UE,entitiesSelector:()=>Sr,entityReducer:()=>Kr,entryPointSelector:()=>af,exceptionTag:()=>wv,failedMessageIdsSelector:()=>tf,fakeConversationSucceeded:()=>Ri,faqHistoryHashSelector:()=>j_,faqHistoryMessagesSelector:()=>_f,faqHistoryMessagesWithHeaderSelector:()=>ff,faqHistoryhttpStatusSelector:()=>L_,faqIdSelector:()=>G_,faqSessionInfoSelector:()=>Nf,feedStoryEntitiesSelector:()=>Ar,feedStorySchema:()=>_,feedbackRequested:()=>iS,feedbackSelector:()=>VS,feedbackSucceeded:()=>uS,fetch:()=>Ev,fetchConversationsRequested:()=>Ai,fetchConversationsRequestedSaga:()=>jl,fetchConversationsSucceeded:()=>Di,fetchDegradeConversationsDetail:()=>Vi,fetchDegradeConversationsDetailSaga:()=>Gl,fetchMessagePreview:()=>kl,fetchSettings:()=>cE,fetchSettingsRequested:()=>Zf,fetchSettingsStatusSelector:()=>dO,fetchShopAuth:()=>Vp,fetchShopAuthRequested:()=>hp,fetchShopDetailInfo:()=>bp,fetchShopSettings:()=>DO,fetchShopTranslationSettings:()=>gO,fetchShopsByIds:()=>Hp,fetchShopsRequested:()=>Op,fetchUserOrderDetail:()=>Pa,fetchUserOrderDetailRequested:()=>Sa,fetchUserOrderDetailSucceeded:()=>Oa,fetchedShopIdsSelector:()=>_p,filterSelector:()=>Fs,filteredConversationsSelector:()=>Hs,flashSaleItemDetailCleaner:()=>_e,forceLogoutRequested:()=>Za,formatOffer:()=>YO,formatSinglePrice:()=>oe,generatePersist:()=>iT,getConversation:()=>$s,getConversationDetailRequested:()=>yi,getConversationFakingMessages:()=>uf,getConversationIds:()=>aT,getConversationLastMessage:()=>Fu,getConversationPendingOffersCountSelector:()=>Ei,getConversationShopId:()=>Zs,getConversationShopRegion:()=>Si,getConversations:()=>ei,getConvsMessagesRelatedSelector:()=>X_,getDraft:()=>kE,getGuide:()=>Lo,getGuideFailed:()=>Mo,getGuideRequested:()=>xo,getGuideSucceeded:()=>Uo,getMessageSelector:()=>q_,getMessagesSelector:()=>K_,getPendingOffersCountRequested:()=>ru,getRouterPath:()=>vT,getShopUnreadCountByIds:()=>Fp,getTimestamp:()=>Mu,getToastInformation:()=>t_,getTranslation:()=>oT,handle401ErrorRequested:()=>dr,handleConnect:()=>KE,handleLoginSucceededLogic:()=>oc,handleMessageSubscribe:()=>Cu,handleUnreadCountChangeAction:()=>gn,hasDeletePermissionSelector:()=>kn,hasFetchedUnreadSelector:()=>_o,hasMoreLatestMessageSelector:()=>nf,hasMoreOlderMessageSelector:()=>rf,hasReplyPermissionSelector:()=>Mn,hasVideoPermissionSelector:()=>Un,heartbeat:()=>Bt,history:()=>hT,inScrollToMessageSelector:()=>If,initMDAPSdk:()=>Xv,inlocationSelector:()=>Ds,isCBSellerSelector:()=>zn,isError:()=>gt,isMainPageSelector:()=>ro,isNavigateToUnreadMessageSelector:()=>di,isScChatSelector:()=>io,isShared:()=>Ft,isSubAccountSelector:()=>Kn,itemDetailCleaner:()=>ce,itemListDetailCleaner:()=>se,keywordSelector:()=>Gs,legacyMessageShortcutsCountSelector:()=>zf,listsHashSelector:()=>si,loadingSelector:()=>In,localeSelector:()=>qn,locationMessage:()=>qi,login:()=>ac,loginRequested:()=>za,loginSocket:()=>Vt,loginSucceeded:()=>Xa,loginSuccessSelector:()=>uo,logout:()=>fs,logoutHandler:()=>_s,logoutRequested:()=>Ja,logoutSucceeded:()=>$a,markMessagesRequested:()=>wi,markMessagesRequestedSaga:()=>Jl,markMessagesSucceeded:()=>xi,mdapConfig:()=>Gv,mediaListSelector:()=>KS,mediaMapSelector:()=>qS,mediaMessagesSelector:()=>Ef,mediaPreviewModalReducer:()=>uO,mediaPreviewerReducer:()=>eO,memoize:()=>GT,messageEntitiesSelector:()=>Tr,messageFillStatusMapSelector:()=>J_,messageHasNextSelector:()=>of,messageHttpStatusSelector:()=>H_,messageMaxWidthSelector:()=>xf,messageOffersSelector:()=>Tf,messageSchema:()=>c,messageShortcutGroupContentSelector:()=>kf,messageShortcutGroupEntitiesSelector:()=>Rr,messageShortcutGroupHttpStatusSelector:()=>Lf,messageShortcutGroupSelector:()=>Uf,messageShortcutsSchema:()=>f,messageShortcutsSelector:()=>Gf,messageShortcutsStatusSelector:()=>Kf,messageSourceIdsSelector:()=>vf,messageSourceSelector:()=>hf,messagesLengthLevelSelector:()=>Nr,messagesRelatedMapSelector:()=>V_,messagesSelector:()=>sf,missedReadNoticeCountSelector:()=>As,modalReducer:()=>cn,modalSelector:()=>$r,modalShowSelector:()=>Jr,muteConversationRequested:()=>tu,myShopSelector:()=>fp,navigateToUnreadMessageIdSelector:()=>pi,networkJudge:()=>ST,networkStatusSelector:()=>wn,newMessageFlagSelector:()=>Yn,newbieSelector:()=>Nn,normalize:()=>T,noticesCountSelector:()=>YS,notificationTypes:()=>Hu,offerCleaner:()=>Se,offerDetailCleaner:()=>Ee,offerHttpStatusSelector:()=>EE,offerSchema:()=>l,offerSelector:()=>hE,offersSelector:()=>SE,offlineMessagesSelector:()=>B_,openedMenuSelector:()=>so,orderCleaner:()=>Ye,orderEntitiesSelector:()=>gr,orderHttpStatusSelector:()=>ih,orderSchema:()=>i,orderSelector:()=>ch,personalMessageShortcutsSelector:()=>Ff,pinConversationRequested:()=>Mi,previewMediasSelector:()=>Sf,productCleaner:()=>jT,productEntitiesSelector:()=>br,productSchema:()=>u,productSelector:()=>_h,productsSelector:()=>fh,rateCardEntitiesSelector:()=>Dr,rateCardSelector:()=>yf,rateCardsSchema:()=>E,readMessage:()=>Na,readRequestIdsSelector:()=>Rs,reconnectFlagSelector:()=>BS,redirectConversationRequested:()=>rv,reduxReset:()=>bE,relatedOfferIdsSelector:()=>OE,removeAllDraft:()=>IE,removeAllDraftHandler:()=>bu,removeSingleDraft:()=>CE,removeSingleDraftHandler:()=>gu,replyToMessageIdSelector:()=>Af,replyToMessageSelector:()=>Cf,reportApiTime:()=>Jv,reportArraySelector:()=>Ah,reportMessageApiTimer:()=>Lu,reportReducer:()=>Fh,reportRequested:()=>Ih,reportUserRequested:()=>os,requestIdleCallback:()=>mv,resendMessagePayloadSelector:()=>Bn,resetConversationRequested:()=>Gi,resetNavigateToUnreadMessageId:()=>Zi,resetSearchParams:()=>ki,resultsSelector:()=>oi,reverseMessagesSelector:()=>lf,saveDraft:()=>NE,saveDraftHandler:()=>Ru,scrollToMessageIdSelector:()=>Df,searchConversationHttpStatusSelector:()=>ai,searchConversationsRequested:()=>Hd,searchConversationsSucceeded:()=>Vd,searchMoreResults:()=>Yi,searchShopsRequested:()=>gp,selectHydrated:()=>m,selectVideoInfoByKey:()=>W_,selectVideoInfoKeyByVid:()=>Q_,sellerRecommendGroupsFetchStatusSelector:()=>bh,sellerRecommendGroupsSelector:()=>Th,sellerRecommendProductFetchStatusSelector:()=>gh,sellerRecommendProductsSelector:()=>hh,sendingMessageIdsSelector:()=>ef,serviceDownAlertSelector:()=>hi,serviceDownFlagSelector:()=>Oi,serviceDownListSelector:()=>vi,serviceDownManualCloseSelector:()=>Ti,setChatListWidth:()=>ds,setChatSource:()=>ya,setConversationBeenDeleted:()=>eu,setCurrentConversationCanRead:()=>Li,setCurrentConversationCanReadHandler:()=>hu,setCurrentConversationId:()=>au,setNavigateToUnreadMessage:()=>Ji,setNavigateToUnreadMessageId:()=>$i,setTextBoxHeight:()=>ls,setToastInformation:()=>o_,setToastInformationSaga:()=>l_,settingsFetchStatusSelector:()=>Qf,settingsNeedForceUpdateSelectors:()=>Yf,settingsReducer:()=>_E,settingsSelector:()=>Bf,settingsStatusSelector:()=>Wf,shopAccessSelector:()=>li,shopReducer:()=>$p,shopSchema:()=>p,shopSelector:()=>pp,shopService:()=>wt,shopStatisticsMapSelector:()=>Xn,shopStatisticsSelector:()=>Jn,shopTranslationSettingsSelector:()=>lO,shoppingCartItemDetailCleaner:()=>fe,shopsEntitiesSelector:()=>Cr,shopsUnreadConversationCountSelector:()=>sn,shouldInitFSSDKSelector:()=>xn,shouldPersistItem:()=>uT,showAutoHangupModalSelector:()=>Eo,showCartReminder:()=>KO,showChatWindowSelector:()=>co,showConversationDetailSelector:()=>ao,showConversationRequested:()=>ji,showConversationSucceeded:()=>Fi,showEntrySelector:()=>po,showFaqHistory:()=>zO,showFeedStory:()=>qO,showMediaPreviewModalRequested:()=>cO,showMediaPreviewModalSelector:()=>nO,showModal:()=>on,showOffer:()=>WO,showOrder:()=>BO,showProduct:()=>VO,showSearchedConversationRequested:()=>Qi,showShop:()=>Ap,showUser:()=>Cc,showUserRequested:()=>Dc,showVoucher:()=>QO,showWarningMessageIdsSelector:()=>df,socket:()=>Ht,socketReducer:()=>HS,socketSuccessSelector:()=>lo,sortConversations:()=>Uu,sortedConversationsSelector:()=>Vs,stickerEntitiesSelector:()=>mr,stickerSchema:()=>d,subaccountHasUnrepliedPermissionSelector:()=>Fn,systemRecommendProductFetchStatusSelector:()=>mh,systemRecommendProductsSelector:()=>vh,takeEveryWithCancel:()=>iv,teamMessageShortcutsSelector:()=>Hf,textBoxHeightSelector:()=>oo,timerHandler:()=>Mh,toBottomHasConflictSelector:()=>cf,toMessageIdSelector:()=>Rf,toastReducer:()=>T_,toastSelector:()=>Zp,totalUnreadConversationsCountSelector:()=>un,translatePreferenceReducer:()=>PO,unreadCountActions:()=>ln,unreadCountReducer:()=>Cn,unreadMessageIdsSelector:()=>Of,unreadMessagesSelector:()=>pf,updateCaptchaSignature:()=>zc,updateCaptchaSignatureSaga:()=>Jc,updateCaptchaSignatureSucceeded:()=>Xc,updateCaptchaVisible:()=>Kc,updateChatEntryStatus:()=>Da,updateChatWindowStatus:()=>va,updateChatWindowStatusSaga:()=>xa,updateChatWindowStatusSucceeded:()=>Ta,updateConversationDetailStatus:()=>ma,updateConversationDetailStatusSaga:()=>Ua,updateConversationDetailStatusSucceeded:()=>ga,updateConversationFilter:()=>Ni,updateConversationFilterRequested:()=>su,updateConversationListsHash:()=>pr,updateConversationTimestamp:()=>Pi,updateCurTabFocused:()=>kc,updateCurTabFocusedSaga:()=>jc,updateCurTabFocusedSucceeded:()=>Lc,updateDelPermission:()=>hc,updateEntities:()=>jr,updateFetchConversationsDirection:()=>Ii,updateFetchConversationsDirectionHandler:()=>Su,updateFetchConversationsStatusHandler:()=>Eu,updateFetchStatus:()=>yO,updateFetchedShopIds:()=>vp,updateGuide:()=>Xo,updateGuideRequested:()=>qo,updateGuideSucceeded:()=>Ko,updateHasFetchedUnread:()=>Ca,updateIsMainPage:()=>Mc,updateLocationMode:()=>Ki,updateLoginSuccessStatus:()=>Ra,updateNetworkStatus:()=>Ea,updateNoticesCount:()=>PS,updateOpenedMenu:()=>ba,updateOrReplaceAction:()=>ZO,updatePreviousConversationIdHandler:()=>Ou,updateReadRequestData:()=>Ui,updateReconnectFlag:()=>eS,updateRecord:()=>Gr,updateSearchParams:()=>Bd,updateServiceDownStatus:()=>cu,updateSettingPreferenceStatus:()=>RO,updateShopFilter:()=>Tp,updateShopTranslationSettings:()=>bO,updateShopTranslationSettingsRecord:()=>AO,updateShowAutoHangupModal:()=>ha,updateSocketSuccessStatus:()=>Aa,updateStatusSelector:()=>pO,updateTimeNowSelector:()=>Cs,updateTotalUnreadConversationsCount:()=>vn,updateUnreadCount:()=>hn,updateUser:()=>Ia,updateUserRequested:()=>fa,updateVoucherStatus:()=>Ae,userEntitiesSelector:()=>Or,userReducer:()=>bs,userSchema:()=>a,userSelector:()=>Wn,videoMapSelector:()=>Y_,visitShopSellerCenterRequested:()=>mp,voucherCleaner:()=>Re,voucherEntitiesSelector:()=>yr,voucherHttpStatusSelector:()=>rh,voucherSelector:()=>oh,vouchersSchema:()=>h,vouchersSelector:()=>nh,waitingTimeFilterSelector:()=>jn,watchBlock:()=>Do,watchCaptcha:()=>$c,watchChannel:()=>xS,watchCheck:()=>mc,watchConversationSagas:()=>up,watchFeedback:()=>dS,watchGuides:()=>jo,watchLogin:()=>cc,watchReportSagas:()=>Gh,watchReportUser:()=>cs,watchSearch:()=>Wd,watchSettingsSagas:()=>pE,watchShopSagas:()=>Xp,watchShow:()=>Ic,watchSocketSagas:()=>FS,watchTab:()=>Gc,watchToastSagas:()=>v_,watchTranslationSagas:()=>NO,watchTranslationSettings:()=>IO,watchUncontrolledSagas:()=>cv,watchUnreadSagas:()=>Dn,watchUpdate:()=>Ma,watchUpdateGuides:()=>Jo,watchUserSagas:()=>hs});var t=y(383);function r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function n(t){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?r(Object(o),!0).forEach((function(r){e(t,r,o[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var o=function(e,r,o){return new t.schema.Entity(e,n({},r),n({},o))},a=o("users"),c=o("messages"),s=o("conversations"),i=o("orders"),u=o("products"),l=o("offers"),d=o("stickers"),p=o("shops"),_=o("feedStories"),f=o("messageShortcuts"),E=o("rateCards"),S=o("agentConversations"),O=o("contacts",{},{idAttribute:"account_id"}),h=o("vouchers"),v={users:a,messages:c,conversations:s,orders:i,offers:l,products:u,stickers:d,shops:p,feedStories:_,messageShortcuts:f,rateCards:E,agentConversations:S,contacts:O,vouchers:h};const T=function(e,r){var n=v[e]||o(e);return r instanceof Array?(0,t.normalize)(r,[n]):(0,t.normalize)(r,n)};var m=function(e,r,n){try{var o=v[e];return r instanceof Array?(0,t.denormalize)(r,[o],n.entityReducer):null==r?void 0:(0,t.denormalize)(r,o,n.entityReducer)}catch(e){return}};function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function b(e,t){if(e){if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(e,t):void 0}}function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],c=!0,s=!1;try{for(r=r.call(e);!(c=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{c||null==r.return||r.return()}finally{if(s)throw o}}return a}}(e,t)||b(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var D=y(855);function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function I(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?C(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var P,N=["id","name","region","shop_id","sold","stock","status","original_price","actual_price","image","image_hash","promotion_label","raw_discount"],w={region:"country",status:"status",original_price:"original_prices",actual_price:"actual_prices",promotion_label:"promotion_label"},x={id:"item_id",region:"region",actual_price:"price"},U=I(I({},x),{},{original_price:"price_before_discount",image_hash:"thumb_url"}),M=I(I({},x),{},{original_price:"price_before_discount",shop_id:"shop_id"}),k=I(I({},x),{},{shop_id:"shop_id"}),L=I(I({},x),{},{shop_id:"shop_id",original_price:"hidden_price_display"}),j={id:"item_id",name:"name",actual_price:"price"},G=["asking_price","buyer_id","conversation_id","create_at","discount","id","model_id","model_name","offer_price","product","product_id","product_deleted","products_count","region","shop_id","status","tax_applicable","tax_value","total_price"],F=["discount","total_price","region","disclaimer"],H=["product","product_deleted"],V={asking_price:"asking_price",create_at:"create_at",model_name:"model_name",offer_price:"offer_price",tax_value:"tax_value"},B=["claimed","code","country","type","id","is_used","name","expired","usage_progress","stock_out","rule_text","displayed_time","discount_text","show_usage_progress_bar","show_usage_progress_text","status","start_time","end_time","current_usage","total_usage"],Y={rule_text:"rule_text",displayed_time:"displayed_time",expired:"expired",stock_out:"stock_out",discount_text:"discount_text",show_usage_progress_bar:"show_usage_progress_bar",show_usage_progress_text:"show_usage_progress_text"},W=y(439).t;function Q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function q(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Q(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var K,z=D.ProductPromotionLabel.SHOW_DISCOUNT,X=D.ProductPromotionLabel.FLASH_SALES,J=D.ProductPromotionLabel.CAMPAIGN,$=D.ProductPromotionLabel.BUNDLE_DEAL,Z=D.ProductPromotionLabel.ADD_ON_DEAL,ee=D.ProductPromotionLabel.GIFT_WITH_PURCHASE,te=[z,X,J,$,Z,ee],re=(e(P={},D.ProductStatusUsingString.DELETED,D.ProductStatusUsingNumber.DELETED),e(P,D.ProductStatusUsingString.NORMAL,D.ProductStatusUsingNumber.NORMAL),e(P,D.ProductStatusUsingString.BANNED,D.ProductStatusUsingNumber.BANNED),e(P,D.ProductStatusUsingString.SOLD_OUT,D.ProductStatusUsingNumber.SOLD_OUT),e(P,D.ProductStatusUsingString.DELISTED,D.ProductStatusUsingNumber.DELISTED),P),ne="???",oe=function(e,t){if(!e)return e;var r=(0,D.formatPrice)(e,t);return r.includes("NaN")&&(r=r.replace("NaN",ne)),r},ae=function(e){var t=e.original_price,r=e.actual_price;return(t===r||r.includes(ne))&&(e.original_price=""),e},ce=function(e){var t={};return N.forEach((function(r){var n=w[r];switch(n){case"country":t[r]=e[n];break;case"status":t[r]=re[e[n]];break;case"original_prices":case"actual_prices":t[r]=function(e,t){var r=A(e,2),n=r[0],o=r[1];if(n===o)return oe(n,t);var a=oe(n,t),c=oe(o,t);return a.includes(ne)?a:c.includes(ne)?c:"".concat(a," - ").concat(c)}(e[n],e.country);break;case"promotion_label":t[r]=function(e){var t=[];return te.forEach((function(r){if(e[r]){var n="common.label.".concat(r);r===z?t.push({key:r,value:W(n,{discount:(0,D.formatDiscount)(e[r])})}):t.push({key:r,value:W(n)})}})),t}(e[n]);break;default:t[r]=e[r]}})),ae(t)},se=function(e,t){var r={};return N.forEach((function(n){var o=U[n];switch(o){case"item_id":case"thumb_url":r[n]=e[o];break;case"region":r[n]=t;break;case"price_before_discount":case"price":r[n]=oe(e[o],t);break;default:r[n]=e[n]}})),ae(r)},ie=function(e,t,r){var n={};return N.forEach((function(o){var a=M[o];switch(a){case"item_id":n[o]=e[a];break;case"region":n[o]=t;break;case"shop_id":n[o]=r;break;case"price_before_discount":case"price":n[o]=oe(e[a],t);break;default:n[o]=e[o]}})),ae(n)},ue=1e5,le=function(e,t){var r=e.amount_spent;return e.amount_spent=oe("".concat(r/ue),t),e},de=function(e,t,r){var n={};return N.forEach((function(o){var a=k[o];switch(a){case"item_id":n[o]=e[a];break;case"region":n[o]=t;break;case"shop_id":n[o]=r;break;case"price":n[o]=oe(e[a],t);break;default:n[o]=e[o]}})),ae(n)},pe=function(e,t){var r=e.rule_type,n=e.discount_percentage,o=e.discount_value,a=e.fix_price;if(1===r)e.fix_price=oe("".concat(a/ue),t);else if(2===r){var c=n/ue;"tw"===(t||"SG").toLowerCase()&&(c=10-c/10,Number.isInteger(c)||(c=c.toFixed(1))),e.discount_percentage=c}else e.discount_value=oe("".concat(o/ue),t);return e},_e=function(e,t,r){var n={};return N.forEach((function(o){var a=L[o];switch(a){case"item_id":n[o]=e[a];break;case"region":n[o]=t;break;case"shop_id":n[o]=r;break;case"hidden_price_display":n[o]=(0,D.transPrice)(e[a],t);break;case"price":n[o]=oe("".concat(e[a]/ue),t);break;default:n[o]=e[o]}})),ae(n)},fe=function(e){var t={};return N.forEach((function(r){var n,o=j[r];switch(o){case"item_id":t[r]=e[o];break;case"name":t[r]=null!=e&&null!==(n=e.model)&&void 0!==n&&n.model_name?e.model.model_name:e[o];break;case"price":var a,c=null!=e&&null!==(a=e.model)&&void 0!==a&&a.price?e.model.price:e[o];t[r]=oe(c,e.region);break;default:t[r]=e[r]}})),ae(t)},Ee=function(e){var t=e.model_name;return t&&t.includes(",")&&(e.model_name=t.replace(/,/g," · ")),e},Se=function(e,t,r,n,o,a){var c={};return F.forEach((function(t){switch(t){case"discount":c[t]=function(e,t,r){var n=e.offer_price,o=e.asking_price,a=Number(n)/Number(o);if(function(e,t){return e&&(0,D.isVisitingCNSC)()||"TW"===(null==t?void 0:t.toUpperCase())}(t,r)){var c=(10*a).toFixed(a<.05?2:1),s=Number.isInteger(Number(c))?Number.parseInt(c):c;return"".concat(s,"折")}var i=(100*(1-a)).toFixed(1),u=Number.parseInt(i),l=[0,100].includes(u)?u:i;return"".concat(l).concat(W("message.offer.discount"))}(e,n,r);break;case"total_price":c[t]=oe(function(e){var t=e.offer_price,r=e.tax_value,n=e.products_count;return((Number(t)-Number(r))*n).toString()}(e),r);break;case"region":c[t]=r;break;case"disclaimer":c[t]=function(e,t){var r=e.offer_disclaimer;return(r.find((function(e){return(0,D.getTranslationLocale)(t).toLocaleLowerCase().includes(e.language.toLocaleLowerCase())}))||r.find((function(e){return"en"===e.language}))||{}).disclaimer}(e,a)}})),H.forEach((function(t){switch(t){case"product":c[t]=q(q({},o),{},{original_price:"",actual_price:oe(e.asking_price,r)});break;case"product_deleted":c[t]=function(e){var t=e.id,r=e.status;return!(!t||r!==D.ProductStatusUsingNumber.DELETED)}(o)}})),G.forEach((function(n){if(!F.includes(n)&&!H.includes(n)){var o=V[n];switch(o){case"asking_price":case"offer_price":case"tax_value":c[n]=oe(e[o],r);break;case"create_at":c[n]=(0,D.getFormattedTime)(e[o]);break;case"model_name":c[n]=function(e,t){if(t&&t.includes(",")){var r="detail"===e?" · ":" / ";return t.replace(/,/g,r)}return t}(t,e[o]);break;default:c[n]=e[n]}}})),c},Oe="message.voucher.rule",he=function(e,t){return(0,D.formatPrice)(e,t,{withUnit:e>=1e4})},ve=function(e){var t=e.country,r=e.min_basket_size,n=e.reward.max_capped_amount,o=he(r,t),a=W("".concat(Oe,".min_spend"),{spend:o});return"number"==typeof n&&(a=W("".concat(Oe,".min_spend_max_cap"),{spend:o,cap:he(n,t)})),a},Te=function(e){var t=e.country,r=e.reward,n=r.value,o=r.type,a=r.discount_type===D.DiscountType.PERCENTAGE?"".concat(n,"%").concat(" "+W("common.label.off")):(0,D.formatPrice)(n,t);return o===D.RewardType.COIN_CASHBACK&&(a="".concat(a," ").concat(W("conversation_detail.workstation.voucher_panel.coins_cashback"))),a},me=function(e){return e.status===D.VoucherStatus.FINISHED},ge=function(e){return e.current_usage>=e.total_usage},be=function(e,t){var r=!t&&me(e),n=e.status,o=e.start_time,a=e.end_time,c="tw"===e.country.toLowerCase()?"YYYY/MM/DD":"MM.DD.YYYY";return W("".concat("conversation_detail.workstation.voucher_panel",".").concat(r?D.VoucherStatus.ONGOING:n,"_time"),{time:n===D.VoucherStatus.SCHEDULED?(0,D.getFormattedTime)(o,"".concat(c," h:mm")):(0,D.getFormattedTime)(a,c)})},ye=function(e,t){var r=me(e),n=ge(e),o=e.is_used,a=e.usage_progress,c=e.country,s=o||r||n;return(a>=50||"id"===c.toLowerCase()&&(t||a>=25))&&!s},Re=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r={},n=me(e),o=ge(e);return B.forEach((function(a){switch(Y[a]){case"rule_text":r[a]=ve(e);break;case"displayed_time":r[a]=be(e,t);break;case"expired":r[a]=n;break;case"stock_out":r[a]=o;break;case"discount_text":r[a]=Te(e);break;case"show_usage_progress_bar":r[a]=ye(e,!0);break;case"show_usage_progress_text":r[a]=ye(e,!1);break;default:r[a]=e[a]}})),r},Ae=function(e,t){var r=t.expired,n=t.stockOut,o=q({},e);return r?(o.status="finished",{status:"finished",expired:r,displayed_time:be(o,r),show_usage_progress_bar:ye(o,!0),show_usage_progress_text:ye(o,!1)}):n?(o.current_usage=o.total_usage,{current_usage:o.total_usage,stock_out:n,show_usage_progress_bar:ye(o,!0),show_usage_progress_text:ye(o,!1)}):{}},De=y(439).t;function Ce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ie(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Ce(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ce(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Pe,Ne=D.LogisticsLog.ORDER_DETAIL_SHIPPING_CONFIRMED,we=D.LogisticsLog.ORDER_DETAIL_SHIPPED,xe=D.LogisticsLog.ORDER_DETAIL_RECEIVED,Ue=D.LogisticsLog.ORDER_DETAIL_CANCELED,Me=D.LogisticsLog.ORDER_DETAIL_NOTIFY_SHIP,ke=(e(K={},Ne,"detail_received"),e(K,we,"shipped"),e(K,xe,"received_by_buyer"),e(K,Ue,"cancelled"),e(K,Me,"notify_ship"),["amount","buyer_id","buyer_is_rated","cancel_pending","cancel_reason","cancel_time","canceller","carrier","checkout_id","coin_offset","complete_time","created_at","credit_card_promotion","delivery_time","id","image","image_hash","over_rate_time","pay_by_wallet","pay_time","payment_method","payment_method_str","price_before_discount","products","products_count","rate_by_date","receivables","refund_amount","refund_serial_number","region","remark","seller_note","seller_rate_comment","seller_rate_star","serial_number","ship_by_date","shipping_fee","shop_id","show_cancel_order_btn","show_ship_warning","status","tax_amount","third_party_tns","title","tracking_number","voucher_price","wallet_discount"]),Le=["model_id","product_id","model_name","image","image_hash","rate_star","region","price","sku","count","title","rate_comment","is_pre_order","returned","id","shop_id"],je=function(e,t,r){var n={},o=e.status;return Le.forEach((function(a){var c;switch(a){case"model_name":n[a]=null!==(c=e[a])&&void 0!==c&&c.includes(",")?e[a].replace(/,/g," · "):e[a];break;case"region":n[a]=t;break;case"price":n[a]=(0,D.formatPrice)(e[a],t);break;case"returned":n[a]=o===D.OrderItemStatus.RETURNED||o===D.OrderItemStatus.RETURN_RATED;break;case"rate_star":n[a]=e[a]?parseInt(e[a]):-1;break;case"id":n[a]=e.product_id;break;case"shop_id":n[a]=r;break;default:n[a]=e[a]}})),n},Ge=["coin_offset","voucher_price","wallet_discount","local_shopee_coin"],Fe=function(e){return De(e?"label_buyer_cancel_order_reason_".concat(e):"label_cancel_order_reason_buyer")},He=function(e){var t=e.cancel_user_id;return t===e.buyer_id?"buyer":t<=0?"system":"seller"},Ve=function(e){var t=e.status,r=e.buyer_cancel_reason,n=e.cancel_reason,o=He(e);return t===D.OrderTabStatus.CANCELLED?"buyer"===o?Fe(r):De("seller"===o?"label_cancel_order".concat(n?"_reason_".concat(n):""):"label_cancel_order_reason_admin".concat(n?"_".concat(n):"")):Fe(r)},Be=15*D.ONE_DAY,Ye=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4?arguments[4]:void 0,a={},c=e.price_before_discount,s=e.shipping_fee,i=e.tax_amount,u=e.shop_id,l=e.rate_by_date,d=e.complete_time,p=e.status_ext,_=e.payment_method,f=e.ship_by_date,E=u===o,S=(0,D.getOrderPayment)({order:e,region:r,isOwnOrder:E,isNewPrice:n}),O=S.shopeeCoin,h=S.payment,v=Date.now()>(l?new Date(l).getTime():new Date(d).getTime()+Be);return ke.forEach((function(n){switch(n){case"region":a[n]=r;break;case"created_at":case"pay_time":case"delivery_time":case"complete_time":case"cancel_time":a[n]=e[n]?(0,D.customizeTime)(e[n],{needFullFormat:!0}):"";break;case"rate_by_date":a[n]=l?(0,D.customizeTime)(l,{needFullFormat:!0}):"";break;case"over_rate_time":a[n]=v;break;case"ship_by_date":a[n]=e[n]?(0,D.customizeTime)(e[n],{needFullFormat:!0}):"--";break;case"show_ship_warning":a[n]=!!f&&D.ONE_DAY+Date.now()>new Date(f).getTime();break;case"payment_method_str":a[n]=(0,D.getPayMethod)(_);break;case"products":a[n]=e[n].map((function(e){return je(e,r,t)}));break;case"amount":a[n]=(0,D.formatPrice)(c-s-i,r);break;case"receivables":a[n]=h;break;case"coin_offset":a[n]=(0,D.formatPrice)(O,r,{withMinus:!0});break;case"refund_amount":case"price_before_discount":case"shipping_fee":case"tax_amount":case"credit_card_promotion":case"voucher_price":case"wallet_discount":a[n]=(0,D.formatPrice)(e[n]||0,r,{withMinus:Ge.includes(n)});break;case"seller_note":a[n]=(e[n]||"").trim();break;case"cancel_reason":a[n]=Ve(e);break;case"canceller":a[n]=He(e);break;case"show_cancel_order_btn":a[n]=(0,D.getCancelOrderDisplayStatus)(e);break;case"cancel_pending":a[n]=p===D.OrderStatusExt.ORDER_EXT_CANCEL_PENDING;break;default:a[n]=e[n]}})),a};!function(e){e[e.unpaid=1]="unpaid",e[e.to_ship=2]="to_ship",e[e.shipping=3]="shipping",e[e.completed=4]="completed",e[e.cancelled=5]="cancelled"}(Pe||(Pe={}));var We=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o={},a=Ie(Ie({},e),{},{status:Pe[e.order_status],products_count:e.item_count,created_at:1e3*e.create_time,serial_number:e.order_sn,estimated_escrow:e.seller_estimated_escrow/1e5,total_price:e.buyer_pay_amount/1e5}),c=a.shop_id,s=c===t,i=(0,D.getOrderPayment)({order:a,region:r,isOwnOrder:s,isNewPrice:n}),u=i.payment;return ke.forEach((function(e){switch(e){case"region":o[e]=r;break;case"created_at":o[e]=a[e]?(0,D.customizeTime)(a[e],{needFullFormat:!0}):"";break;case"products":o[e]=a.items;break;case"receivables":o[e]=u;break;default:o[e]=a[e]}})),o};function Qe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ke(e,t,r){return t&&qe(e.prototype,t),r&&qe(e,r),e}function ze(e,t){return ze=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ze(e,t)}function Xe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ze(e,t)}function Je(e){return Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Je(e)}function $e(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ze(e,t){return!t||"object"!==Je(t)&&"function"!=typeof t?$e(e):t}function et(e){return et=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},et(e)}function tt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function rt(e,t,r){return rt=tt()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&ze(o,r.prototype),o},rt.apply(null,arguments)}function nt(e){var t="function"==typeof Map?new Map:void 0;return nt=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return rt(e,arguments,et(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),ze(n,e)},nt(e)}var ot=function(e){Xe(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=et(e);if(t){var o=et(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ze(this,r)}}(r);function r(e){var n;return Qe(this,r),(n=t.call(this)).name=n.constructor.name,n.message=e,n}return Ke(r,[{key:"handler",value:function(){}}]),r}(nt(Error)),at=function(e){Xe(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=et(e);if(t){var o=et(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ze(this,r)}}(r);function r(e,n){var o;return Qe(this,r),(o=t.call(this,e)).name=o.constructor.name,o}return Ke(r,[{key:"handler",value:function(){(0,D.removeItem)("mini-session"),D.LS.removeItem("mini-session")}}]),r}(nt(Error));const ct=function(e){Xe(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=et(e);if(t){var o=et(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ze(this,r)}}(r);function r(e){var n;return Qe(this,r),(n=t.call(this,e)).name=n.constructor.name,n}return r}(nt(Error));var st=function(e){Xe(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=et(e);if(t){var o=et(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ze(this,r)}}(r);function r(e,n){var o;return Qe(this,r),(o=t.call(this,e)).name=o.constructor.name,o.errors=n,o}return r}(nt(Error)),it=function(e){Xe(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=et(e);if(t){var o=et(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ze(this,r)}}(r);function r(e){var n;return Qe(this,r),(n=t.call(this,e)).name=n.constructor.name,n.handler=n.handler.bind($e(n)),n}return Ke(r,[{key:"handler",value:function(){}}]),r}(nt(Error)),ut=function(e){Xe(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=et(e);if(t){var o=et(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ze(this,r)}}(r);function r(e,n){var o;return Qe(this,r),(o=t.call(this,e)).name=o.constructor.name,o}return Ke(r,[{key:"handler",value:function(){}}]),r}(nt(Error)),lt=y(439).t,dt=function(e){Xe(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=et(e);if(t){var o=et(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ze(this,r)}}(r);function r(e){var n;return Qe(this,r),(n=t.call(this)).name=n.constructor.name,n.error=e,n.handler=n.handler.bind($e(n)),n}return Ke(r,[{key:"handler",value:function(){var e="";switch(this.error.error_code){case"unauthorized_for_shop":e="forward.error.unauthorized_for_shop";break;case"target_subaccount_unauthorized_for_shop":e="forward.error.target_subaccount_unauthorized_for_shop";break;case"target_group_unauthorized_for_shop":e="forward.error.target_group_unauthorized_for_shop";break;case"conversation_not_belong_to_you":e="forward.error.conversation_not_belong_to_you";break;case"conversation_not_dispatch":e="forward.error.conversation_not_dispatch";break;case"cannot_move_conversation_to_yourself":e="forward.error.cannot_move_conversation_to_yourself";break;case"target_subaccount_not_online":e="forward.error.target_subaccount_not_online";break;case"subaccount_conversation_not_found":e="forward.error.subaccount_conversation_not_found";break;case"conversation_closed":e="forward.error.conversation_closed";break;case"user_have_delete_disable":e="forward.error.user_deleted";break;case"user_has_pending_order":e="conversation_detail.workstation.block_fail_modal.title"}return{show:!0,type:"fail",message:lt(e)}}}]),r}(nt(Error)),pt=function(e){Xe(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=et(e);if(t){var o=et(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ze(this,r)}}(r);function r(e,n,o){var a;return Qe(this,r),(a=t.call(this,e)).name=a.constructor.name,a}return r}(nt(Error)),_t=y(439).t,ft=function(e){Xe(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=et(e);if(t){var o=et(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ze(this,r)}}(r);function r(e){var n;return Qe(this,r),(n=t.call(this)).name=n.constructor.name,n.error=e,n}return Ke(r,[{key:"handler",value:function(){var e;switch(this.error.error_code){case"send_rating_card_too_frequently":e="conversation_detail.message_list.rating_card_duplicate";break;case"rating_card_rated":case"rating_card_expired":e="rate_card.submit.fail";break;default:e="common.server_error.warning_tips"}return{message:_t(e),show:!0,type:"fail"}}}]),r}(nt(Error)),Et=function(e){Xe(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=et(e);if(t){var o=et(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ze(this,r)}}(r);function r(e){var n;return Qe(this,r),(n=t.call(this,e)).name=n.constructor.name,n}return r}(nt(Error)),St=function(e){Xe(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=et(e);if(t){var o=et(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ze(this,r)}}(r);function r(e){var n;return Qe(this,r),(n=t.call(this,e.message)).name=n.constructor.name,n.message=e.message,n}return r}(nt(Error)),Ot=function(e){Xe(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=et(e);if(t){var o=et(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ze(this,r)}}(r);function r(e){var n;return Qe(this,r),(n=t.call(this,e)).name=n.constructor.name,n}return r}(nt(Error));const ht=function(e){Xe(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=et(e);if(t){var o=et(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ze(this,r)}}(r);function r(e,n,o){var a;return Qe(this,r),(a=t.call(this,e)).name=a.constructor.name,a.errors=n,a.data=o,a}return r}(nt(Error)),vt=function(e){Xe(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=et(e);if(t){var o=et(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ze(this,r)}}(r);function r(e){var n;return Qe(this,r),(n=t.call(this,e)).name=n.constructor.name,n.message=e,n}return r}(nt(Error));var Tt=function(e){Xe(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=et(e);if(t){var o=et(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ze(this,r)}}(r);function r(e){var n;return Qe(this,r),(n=t.call(this)).message=e,n}return r}(nt(Error)),mt=function(e){switch(e){case 400:return ot;case 401:return at;case 403:return ut;case 404:return ct;case 422:return st;case 429:return Et;case 451:return St;case 452:return Tt;case 491:return dt;case 492:return pt;case 493:return ft;case 494:return Ot;case 495:return ht;case 500:return it;default:return Error}},gt=function(e){return"".concat(e).startsWith("4")||"".concat(e).startsWith("5")};function bt(e,t,r,n,o,a,c){try{var s=e[a](c),i=s.value}catch(e){return void r(e)}s.done?t(i):Promise.resolve(i).then(n,o)}function yt(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function c(e){bt(a,n,o,c,s,"next",e)}function s(e){bt(a,n,o,c,s,"throw",e)}c(void 0)}))}}var Rt=y(757),At=y.n(Rt),Dt=y(672),Ct=y(598),It=y.n(Ct);function Pt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Nt(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Pt(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var wt=new(function(){function t(){Qe(this,t),this.shopsMap={}}var r;return Ke(t,[{key:"updateShopMap",value:function(e){this.shopsMap=Nt(Nt({},this.shopsMap),e)}},{key:"getRegion",value:(r=yt(At().mark((function t(r,n){var o,a,c,s;return At().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=11;break}if(a=null===(o=this.shopsMap[n])||void 0===o?void 0:o.country){t.next=8;break}return t.next=5,Ev({resource:"shop",id:n,params:{need_cache:1,cache_expires:600}});case 5:return c=t.sent,this.updateShopMap(e({},c.id,c)),t.abrupt("return",c.country);case 8:return t.abrupt("return",a);case 11:if(s=(0,D.getRuntimeRegion)().toUpperCase(),!["KR","CN"].includes(s)&&!r){t.next=14;break}return t.abrupt("return","GLOBAL");case 14:return t.abrupt("return",s);case 15:case"end":return t.stop()}}),t,this)}))),function(e,t){return r.apply(this,arguments)})}]),t}());"live"!==(0,D.getRuntimeServer)()&&(window.shopService=wt);var xt,Ut=y(674),Mt=y.n(Ut);function kt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Lt(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?kt(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var jt=(0,D.checkIsScChat)();xt=jt?"scminichat":"pmminichat";var Gt=new(Mt())({shouldShared:jt,name:"".concat((0,D.getRuntimeRegion)(),"_").concat((0,D.getRuntimeServer)(),"_seller-push-ws")}),Ft=Gt.isShared,Ht=Gt.socket;Ht.dispatch||(Ht.dispatch=function(){return{}});var Vt=function(e){return Ft?Ht.emit("login",Lt(Lt({},e),{},{app_id:xt}),!0):new Promise((function(t){Ht.emit("login",Lt(Lt({},e),{},{app_id:xt}),(function(e){return t(JSON.parse(e))}))}))},Bt=function(e){var t=e.noticesCount,r=e.readMissedCount,n={app_id:xt,noticesCount:t,readMissedCount:r},o="".concat(xt,"|").concat(t,"|").concat(r);return Ft?Ht.heartbeat({emitEvent:"heartbeat",args:n,pollingTime:6e4,remedyTime:9e4,separator:"|"}):Ht.emit("heartbeat",o)};function Yt(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||b(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Wt=y(444),Qt=y.n(Wt);window.__CHANGE_FETCH__||(window.fetch=Qt(),window.__CHANGE_FETCH__=!0);var qt="CHAT_API",Kt=function(){window.caches&&window.caches.delete(qt)};function zt(e,t){return Xt.apply(this,arguments)}function Xt(){return(Xt=yt(At().mark((function e(t,r){var n,o,a,c,s,i,u,l,d,p,_,f,E,S,O,h,v,T,m,g;return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=new URL(t),o=n.searchParams,a=o.get("need_cache"),c=o.get("force_update"),s=o.get("_ts"),i=r.method&&"get"===r.method.toLowerCase(),u="&csrf_token=".concat(encodeURIComponent(o.get("csrf_token")||"")),l="&force_update=".concat(String(c)),d=t.replace(u,"").replace(l,"").replace(s||"",""),!(i&&a&&window.caches)){e.next=44;break}return e.next=13,window.caches.open(qt);case 13:return p=e.sent,e.next=16,p.match(d);case 16:if(_=e.sent,f=Date.now(),!_){e.next=25;break}if(!(f<Number(_.headers.get("cache-expires")))||c){e.next=23;break}return e.abrupt("return",_);case 23:return e.next=25,p.delete(d);case 25:return e.next=27,window.fetch(t,r);case 27:if(E=e.sent,S=E.clone(),200!==E.status){e.next=41;break}return O=Yt(E.headers.entries()),h={},v=Number(o.get("cache_expires"))||3600,T=f+1e3*v,e.next=36,E.blob();case 36:m=e.sent,O.forEach((function(e){h[e[0]]=e[1]})),h["cache-expires"]=T,g=new Response(m,{headers:new Headers(h)});try{p.put(d,g)}catch(e){window.caches.delete(qt)}case 41:return e.abrupt("return",S);case 44:return e.abrupt("return",window.fetch(t,r));case 45:e.next=50;break;case 47:return e.prev=47,e.t0=e.catch(0),e.abrupt("return",window.fetch(t,r));case 50:case"end":return e.stop()}}),e,null,[[0,47]])})))).apply(this,arguments)}var Jt,$t,Zt,er=y(378),tr=y.n(er),rr=y(464),nr=y.n(rr);!function(e){e[e.ONE=1]="ONE",e[e.TWO=2]="TWO",e[e.THREE=3]="THREE",e[e.FOUR=4]="FOUR"}(Zt||(Zt={}));var or=(e(Jt={},Zt.ONE,"70c74f4e-dcda-483e-826b-19dd2c42e799"),e(Jt,Zt.TWO,"29ffec18-c614-4645-8f1c-686e22d2e26a"),e(Jt,Zt.THREE,"04229e76-1ba3-4ac9-8a4e-68d46a3881a2"),e(Jt,Zt.FOUR,"a3769a87-35cf-45e9-a5a7-2b4016c52e92"),Jt),ar=(e($t={},Zt.ONE,"396c15ad-6d3e-4018-98be-cef58cb45cd0"),e($t,Zt.TWO,"607c871d-b766-4c6f-ba89-b6c6ca32b156"),e($t,Zt.THREE,"42990074-9a73-4459-b749-f3110d222a72"),e($t,Zt.FOUR,"5702b6f3-62a3-44d2-abe8-fece100a8bf4"),$t);function cr(e,t){var r=t.url,n=t.method,o=t.token,a=t.ctoken,c=t.extra,s=function(e){return"live"===(0,D.getRuntimeServer)()?ar[e]:or[e]}(e);switch(e){case 1:return function(e,t,r){if(r){var n=r.plat,o=r.fromID,a=r.reqID,c=r.toID,s=r.timestamp,i=r.type,u=r.strinput,l="key=".concat(t,"&plat=").concat(n,"&ver=v1.2&fromID=").concat(o,"&reqID=").concat(a,"&toID=").concat(c,"&timestamp=").concat(s,"&type=").concat(i,"&strinput=").concat(u);return nr()(l).toString()}return tr()(e+t).toString()}(r,s,c);case 2:return function(e,t,r){return tr()(e+t+r).toString()}(r,s,n);case 3:return function(e,t,r){return tr()(e+t+r).toString()}(r,s,o);case 4:return function(e,t,r){return tr()(e+t+r).toString()}(r,s,a);default:return""}}var sr,ir=function(e){var t=e.url,r=e.method,n=e.token,o=e.ctoken,a=void 0===o?"":o,c=e.version,s=e.fromID,i=e.payload,u=void 0===i?"{}":i,l=e.timestamp,d=JSON.parse(u),p=d.to_id,_=d.request_id,f=d.type,E=d.content,S=void 0===E?{}:E;return{url:t,method:r,token:n,ctoken:a,extra:{plat:c,fromID:s,reqID:_,toID:p,timestamp:l,type:f,strinput:"text"===f&&S.text?S.text:""}}},ur=y(252);!function(e){e.HANDLE_401_ERROR_REQUESTED="HANDLE_401_ERROR_REQUESTED",e.UPDATE_CONVERSATION_LISTS_HASH="UPDATE_CONVERSATION_LISTS_HASH"}(sr||(sr={}));var lr,dr=(0,ur.createActions)(e({},sr.HANDLE_401_ERROR_REQUESTED,(function(e){return{resource:e.resource}}))).handle401ErrorRequested,pr=(0,ur.createActions)(e({},sr.UPDATE_CONVERSATION_LISTS_HASH,(function(){return{}}))).updateConversationListsHash,_r=y(944),fr=y(975),Er=function(e){return e<=100?1:e<=500?2:e<=1e3?3:4},Sr=function(e){return e.entityReducer},Or=(0,fr.createSelector)(Sr,(function(e){return e.users})),hr=(0,fr.createSelector)(Sr,(function(e){return e.conversations})),vr=(0,fr.createSelector)(Sr,(function(e){return e.agentConversations})),Tr=(0,fr.createSelector)(Sr,(function(e){return function(e){return(0,D.checkEmptyObject)(e)?{}:e}(e.messages)})),mr=(0,fr.createSelector)(Sr,(function(e){return e.stickers})),gr=(0,fr.createSelector)(Sr,(function(e){return e.orders})),br=(0,fr.createSelector)(Sr,(function(e){return e.products})),yr=(0,fr.createSelector)(Sr,(function(e){return e.vouchers})),Rr=(0,fr.createSelector)(Sr,(function(e){return e.messageShortcutsGroups})),Ar=(0,fr.createSelector)(Sr,(function(e){return e.feedStories})),Dr=(0,fr.createSelector)(Sr,(function(e){return e.rateCards})),Cr=(0,fr.createSelector)(Sr,(function(e){return e.shops})),Ir=(0,fr.createSelector)(Sr,(function(e){return e.contacts})),Pr=(0,fr.createSelector)(hr,vr,(function(e,t){var r=Object.keys(e).length+Object.keys(t).length;return Er(r)})),Nr=(0,fr.createSelector)(Tr,(function(e){return Er(Object.keys(e).length)}));function wr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xr(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?wr(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}!function(e){e.UPDATE_ENTITIES="UPDATE_ENTITIES",e.UPDATE_RECORD="UPDATE_RECORD",e.DELETE_RECORD="DELETE_RECORD",e.BATCH_UPDATE_RECORD="BATCH_UPDATE_RECORD"}(lr||(lr={}));const Ur=e({},lr.UPDATE_ENTITIES,(function(t,r){var n=r.payload.entities;return Object.entries(n).reduce((function(t,r){var n=A(r,2),o=n[0],a=n[1];return"persist"!==o?("shops"===o&&wt.updateShopMap(a),xr(xr({},t),{},e({},o,xr(xr({},t[o]),a)))):xr(xr({},t),{},e({},o,a))}),t)}));var Mr,kr,Lr=(0,ur.createActions)((e(Mr={},lr.UPDATE_ENTITIES,(function(e){return{entities:e.entities}})),e(Mr,lr.UPDATE_RECORD,(function(e){return{name:e.name,id:e.id,record:e.record}})),e(Mr,lr.DELETE_RECORD,(function(e){return{name:e.name,id:e.id}})),e(Mr,lr.BATCH_UPDATE_RECORD,(function(e){return{name:e.name,records:e.records,checkProp:e.checkProp}})),Mr)),jr=Lr.updateEntities,Gr=Lr.updateRecord,Fr=Lr.deleteRecord,Hr=Lr.batchUpdateRecord;function Vr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Br(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Vr(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Vr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}const Yr=(e(kr={},lr.UPDATE_RECORD,(function(t,r){var n=r.payload,o=n.name,a=n.id,c=n.record;return Br(Br({},t),{},e({},o,Br(Br({},t[o]),{},e({},a,Br(Br({},t[o][a]),c)))))})),e(kr,lr.DELETE_RECORD,(function(t,r){var n=r.payload,o=n.name,a=n.id,c=t[o];return delete c[a],Br(Br({},t),{},e({},o,c))})),e(kr,lr.BATCH_UPDATE_RECORD,(function(t,r){var n=r.payload,o=n.name,a=n.records,c=n.checkProp,s=Br({},t[o]);return Object.keys(a).forEach((function(e){(!c||c&&a[e][c]>s[e][c])&&(s[e]=Br(Br({},s[e]),a[e]))})),Br(Br({},t),{},e({},o,s))})),kr);function Wr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Qr(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Wr(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Wr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var qr,Kr=(0,ur.handleActions)(Qr(Qr({},Ur),Yr),{users:{},messages:{},conversations:{},agentConversations:{},stickers:{},orders:{},offers:{},products:{},shops:{},rateCards:{},feedStories:{},persist:null,vouchers:{},messageShortcuts:{}});!function(e){e.SHOW_MODAL="SHOW_MODAL",e.CLOSE_MODAL="CLOSE_MODAL"}(qr||(qr={}));var zr,Xr,Jr=function(e){return e.modalReducer.show},$r=(0,fr.createSelector)(Jr,(function(e){return e.modalReducer.type}),(function(e,t){return{show:e,type:t}}));function Zr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function en(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Zr(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Zr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var tn,rn,nn=(0,ur.createActions)((e(zr={},qr.SHOW_MODAL,(function(e){var t=e.type,r=e.title,n=void 0===r?"":r,o=e.content,a=e.actions,c=void 0===a?{}:a,s=e.additions;return{type:t,title:n,content:o,actions:c,additions:void 0===s?{}:s}})),e(zr,qr.CLOSE_MODAL,(function(){return{}})),zr)),on=nn.showModal,an=nn.closeModal,cn=(0,ur.handleActions)((e(Xr={},qr.SHOW_MODAL,(function(e,t){var r=t.payload,n=r.type,o=r.title;return{show:!0,type:n,content:r.content,title:o,actions:r.actions,additions:r.additions}})),e(Xr,qr.CLOSE_MODAL,(function(e){return en(en({},e),{},{show:!1})})),Xr),{show:!1,type:"",title:"",content:"",actions:{},additions:{}}),sn=function(e){return e.unreadCountReducer.shopsUnreadConversationCount},un=function(e){return e.unreadCountReducer.totalUnreadConversationsCount},ln={MARK_AS_READ:"markAsRead",MARK_AS_UNREAD:"markASUnread",CLOSE_CONVERSATION:"closeConversation",RESTART_CONVERSATION:"restartConversation",DELETE_CONVERSATION:"deleteConversation",FORWARD_CONVERSATION:"forwardConversation",RECEIVE_UNREADABLE_MESSAGE:"receiveUnreadableMessage",REFRESH_TOTAL_UNREAD_CONVERSATION_COUNT:"refreshTotalUnreadConversationCount",REFRESH_SHOPS_UNREAD_CONVERSATIONS_COUNT:"refreshShopsUnreadConversationsCount",REFRESH_SINGLE_SHOP_UNREAD_CONVERSATION_COUNT:"refreshSingleShopUnreadConversationCount",UPDATE_CONVERSATION:"updateConversation",MESSAGE_QUEUE_UPDATE:"messageQueueUpdate",MASS_READ:"mass_read",MASS_UNREAD:"mass_unread",MASS_CLOSE:"mass_close",ACTIVE_CONVERSATION:"activeConversation",CLEAR_CONVERSATION_COUNT:"clearConversationCount"};function dn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pn(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?dn(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}!function(e){e.UPDATE_UNREAD_COUNT="UPDATE_UNREAD_COUNT",e.UPDATE_TOTAL_UNREAD_CONVERSATIONS_COUNT="UPDATE_TOTAL_UNREAD_CONVERSATIONS_COUNT",e.UPDATE_SINGLE_SHOP_UNREAD_COUNT="UPDATE_SINGLE_SHOP_UNREAD_COUNT",e.UPDATE_SHOPS_UNREAD_CONVERSATIONS_COUNT="UPDATE_SHOPS_UNREAD_CONVERSATIONS_COUNT",e.UPDATE_REGION_UNREAD_COUNT="UPDATE_REGION_UNREAD_COUNT",e.UPDATE_AGENT_UNREAD_CONVERSATION_COUNT="UPDATE_AGENT_UNREAD_CONVERSATION_COUNT"}(tn||(tn={}));var _n=At().mark(Tn),fn=At().mark(mn),En=At().mark(gn),Sn=At().mark(bn),On=(0,ur.createActions)((e(rn={},tn.UPDATE_UNREAD_COUNT,(function(e){return{type:e.type,conversation:e.conversation,messageQueueUpdate:e.messageQueueUpdate,shopId:e.shopId,shopIds:e.shopIds,source:e.source,count:e.count}})),e(rn,tn.UPDATE_TOTAL_UNREAD_CONVERSATIONS_COUNT,(function(e){return{count:e.count}})),e(rn,tn.UPDATE_SINGLE_SHOP_UNREAD_COUNT,(function(e){return{shopId:e.shopId,num:e.num,action:e.action}})),e(rn,tn.UPDATE_SHOPS_UNREAD_CONVERSATIONS_COUNT,(function(e){return{shopUnreadCounts:e.shopUnreadCounts}})),rn)),hn=On.updateUnreadCount,vn=On.updateTotalUnreadConversationsCount;function Tn(e,t){return At().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,_r.put)(Gr({name:"conversations",id:e,record:{unread_count:t}}));case 2:case"end":return r.stop()}}),_n)}function mn(e){var t,r,n,o,a,c;return At().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.source,s.prev=1,r=t===D.UnreadSource.PRELOAD,n=t?{_s:t}:{},s.next=6,(0,_r.call)(Ev,{shared:!r,parent:"conversation",resource:"unread-count",params:n});case 6:return o=s.sent,a=o.total_unread_count,s.next=10,(0,_r.put)(vn({count:a}));case 10:return s.next=12,(0,_r.select)(io);case 12:c=s.sent,r&&UT({operation:D.TrackerOperation.IMPRESSION,trackerName:"impressionChatIcon",data:{ctx_url:window.location.href,has_unread_convo:!!a,unread_convo_cnt:a},page:c?"seller_center_chat":"minichat_page"}),s.next=18;break;case 16:s.prev=16,s.t0=s.catch(1);case 18:case"end":return s.stop()}}),fn,null,[[1,16]])}function gn(e){var t,r,n,o,a,c,s,i,u,l,d,p;return At().wrap((function(_){for(;;)switch(_.prev=_.next){case 0:return t=e.payload,r=t.type,n=t.conversation,o=void 0===n?{}:n,t.shopId,t.shopIds,a=t.messageQueueUpdate,c=t.source,s=t.count,i=o.id,u=o.unread_count,o.shop_id,_.next=4,(0,_r.select)(un);case 4:l=_.sent,_.t0=r,_.next=_.t0===ln.FORWARD_CONVERSATION||_.t0===ln.CLOSE_CONVERSATION||_.t0===ln.DELETE_CONVERSATION||_.t0===ln.UPDATE_CONVERSATION?8:_.t0===ln.CLEAR_CONVERSATION_COUNT||_.t0===ln.MARK_AS_READ?14:_.t0===ln.ACTIVE_CONVERSATION?20:_.t0===ln.MARK_AS_UNREAD?23:_.t0===ln.RECEIVE_UNREADABLE_MESSAGE?28:_.t0===ln.RESTART_CONVERSATION?34:_.t0===ln.REFRESH_TOTAL_UNREAD_CONVERSATION_COUNT?37:_.t0===ln.MESSAGE_QUEUE_UPDATE?42:_.t0===ln.MASS_READ?46:_.t0===ln.MASS_UNREAD?49:_.t0===ln.MASS_CLOSE?52:55;break;case 8:if(0===u){_.next=13;break}return _.next=11,(0,_r.put)(vn({count:l-1}));case 11:return _.next=13,(0,_r.call)(Tn,i,0);case 13:case 19:case 22:case 27:case 33:case 36:case 41:case 45:case 48:case 51:case 54:case 55:return _.abrupt("break",56);case 14:if(!(u>0)){_.next=19;break}return _.next=17,(0,_r.put)(vn({count:l-1}));case 17:return _.next=19,(0,_r.call)(Tn,i,0);case 20:return _.next=22,(0,_r.put)(vn({count:l+1}));case 23:return _.next=25,(0,_r.put)(vn({count:l+1}));case 25:return _.next=27,(0,_r.call)(Tn,i,u+1);case 28:if(0!==u){_.next=31;break}return _.next=31,(0,_r.put)(vn({count:l+1}));case 31:return _.next=33,(0,_r.call)(Tn,i,u+1);case 34:return _.next=36,(0,_r.call)(mn,{source:c});case 37:return _.next=39,(0,_r.call)(mn,{source:c});case 39:return _.next=41,(0,_r.put)(Ca({hasFetchedUnread:!0}));case 42:return p=(d=a).totalIncrease,d.shopsIncrease,_.next=45,(0,_r.put)(vn({count:l+p}));case 46:return _.next=48,(0,_r.put)(vn({count:l-s}));case 49:return _.next=51,(0,_r.put)(vn({count:l+s}));case 52:return _.next=54,(0,_r.put)(vn({count:l-s}));case 56:case"end":return _.stop()}}),En)}function bn(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_r.takeEvery)(hn,gn);case 2:case"end":return e.stop()}}),Sn)}On.updateSingleShopUnreadCount,On.updateShopsUnreadConversationsCount;const yn=e({},tn.UPDATE_TOTAL_UNREAD_CONVERSATIONS_COUNT,(function(e,t){var r=t.payload.count;return pn(pn({},e),{},{totalUnreadConversationsCount:r<0?0:r})}));function Rn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var An,Dn=[bn],Cn=(0,ur.handleActions)(function(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Rn(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Rn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},yn),{totalUnreadConversationsCount:0}),In=function(e){return e.userReducer.loading},Pn=function(e){return e.userReducer.currentUserId},Nn=function(e){return e.userReducer.newbie},wn=function(e){return e.userReducer.networkStatus},xn=function(e){return e.userReducer.shouldInitFSSDK},Un=function(e){return e.userReducer.hasVideoPermission},Mn=function(e){return e.userReducer.hasReplyPermission},kn=function(e){return e.userReducer.hasDeletePermission},Ln=function(e){return e.userReducer.deleteConfigDuration},jn=function(e){return e.userReducer.waitingTimeFilter},Gn=function(e){var t=e.userReducer;return{hasDeletePermission:t.hasDeletePermission,deleteConfigVersion:t.deleteConfigVersion,deleteConfigDuration:t.deleteConfigDuration}},Fn=function(e){return e.userReducer.subaccountHasUnrepliedPermission},Hn=function(e){return e.userReducer.captchaVisible},Vn=function(e){return e.userReducer.captchaSignature},Bn=function(e){return e.userReducer.resendMessagePayload},Yn=function(e){return e.userReducer.newMessageFlag},Wn=function(e){return(0,fr.createSelector)(Sr,(function(r){return(0,t.denormalize)(e,a,{users:r})}))},Qn=(0,fr.createSelector)(Or,Pn,(function(e,r){return(0,t.denormalize)(r,a,{users:e})||{}})),qn=(0,fr.createSelector)(Qn,(function(e){return e&&e.locale})),Kn=(0,fr.createSelector)(Qn,(function(e){return!(0,D.checkEmptyObject)(e)&&e.type===D.AccountType.SUBACCOUNT})),zn=(0,fr.createSelector)(Qn,(function(e){return!(0,D.checkEmptyObject)(e)&&e.is_cb})),Xn=function(e){return e.userReducer.shopStatisticsMap},Jn=function(e,t){return(0,fr.createSelector)(Xn,(function(r){return r["".concat(e,"-").concat(t)]||{}}))},$n=(0,fr.createSelector)(Qn,Kn,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t?void 0:e.shop_id})),Zn=(0,fr.createSelector)(Qn,Kn,Cr,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return r?void 0:(0,t.denormalize)(e.shop_id,p,{shops:n})||{}})),eo=(0,fr.createSelector)(Qn,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.role||""})),to=(0,fr.createSelector)(Qn,(function(e){return e&&e.distribution_status||""})),ro=function(e){return e.userReducer.isMainPage},no=function(e){return e.userReducer.curTabFocused},oo=function(e){return e.userReducer.textBoxHeight},ao=function(e){return e.userReducer.showConversationDetail},co=function(e){return e.userReducer.showChatWindow},so=function(e){return e.userReducer.openedMenu},io=function(e){return e.userReducer.isScChat},uo=function(e){return e.userReducer.loginSuccess},lo=function(e){return e.userReducer.socketSuccess},po=function(e){return e.userReducer.showEntry},_o=function(e){return e.userReducer.hasFetchedUnread},fo=(0,fr.createSelector)(Qn,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.authorizedShopsCount||0})),Eo=function(e){return e.userReducer.showAutoHangupModal},So=(0,fr.createSelector)(Qn,Kn,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return!!t||e.is_seller}));!function(e){e.BLOCK_USER_REQUESTED="BLOCK_USER_REQUESTED",e.CHECK_USER_PERMISSION_REQUESTED="CHECK_USER_PERMISSION_REQUESTED",e.CHECK_USER_PERMISSION_SUCCEEDED="CHECK_USER_PERMISSION_SUCCEEDED",e.CLOSE_HANGUP_TIPS_REQUESTED="CLOSE_HANGUP_TIPS_REQUESTED",e.SEND_FEEDBACK_REQUESTED="SEND_FEEDBACK_REQUESTED",e.GET_GUIDE_REQUESTED="GET_GUIDE_REQUESTED",e.GET_GUIDE_SUCCEEDED="GET_GUIDE_SUCCEEDED",e.GET_GUIDE_FAILED="GET_GUIDE_FAILED",e.SHOW_LOADING_SUCCEEDED="SHOW_LOADING_SUCCEEDED",e.SET_HAS_SESSION="SET_HAS_SESSION",e.SHOW_USER_REQUESTED="SHOW_USER_REQUESTED",e.FETCH_USER_ORDER_DETAIL_REQUESTED="FETCH_USER_ORDER_DETAIL_REQUESTED",e.FETCH_USER_ORDER_DETAIL_SUCCEEDED="FETCH_USER_ORDER_DETAIL_SUCCEEDED",e.FETCH_USER_PERFORMANCE_REQUESTED="FETCH_USER_PERFORMANCE_REQUESTED",e.FETCH_USER_PERFORMANCE_SUCCEED="FETCH_USER_PERFORMANCE_SUCCEED",e.UPDATE_USER_REQUESTED="UPDATE_USER_REQUESTED",e.UPDATE_NETWORK_STATUS="UPDATE_NETWORK_STATUS",e.UPDATE_CUR_TAB_FOCUSED="UPDATE_CUR_TAB_FOCUSED",e.UPDATE_CUR_TAB_FOCUSED_SUCCEEDED="UPDATE_CUR_TAB_FOCUSED_SUCCEEDED",e.UPDATE_WORKSTATION_PANEL="UPDATE_WORKSTATION_PANEL",e.UPDATE_NEW_MESSAGE_FLAG="UPDATE_NEW_MESSAGE_FLAG",e.UPDATE_CHAT_WINDOW_STATUS="UPDATE_CHAT_WINDOW_STATUS",e.UPDATE_CHAT_WINDOW_STATUS_SUCCEEDED="UPDATE_CHAT_WINDOW_STATUS_SUCCEEDED",e.UPDATE_CONVERSATION_DETAIL_STATUS="UPDATE_CONVERSATION_DETAIL_STATUS",e.UPDATE_CONVERSATION_DETAIL_STATUS_SUCCEEDED="UPDATE_CONVERSATION_DETAIL_STATUS_SUCCEEDED",e.UPDATE_OPENED_MENU="UPDATE_OPENED_MENU",e.SET_CHAT_SOURCE="SET_CHAT_SOURCE",e.UPDATE_LOGIN_SUCCESS_STATUS="UPDATE_LOGIN_SUCCESS_STATUS",e.UPDATE_SOCKET_SUCCESS_STATUS="UPDATE_SOCKET_SUCCESS_STATUS",e.UPDATE_CHAT_ENTRY_STATUS="UPDATE_CHAT_ENTRY_STATUS",e.UPDATE_GUIDE_REQUESTED="UPDATE_GUIDE_REQUESTED",e.UPDATE_GUIDE_SUCCEEDED="UPDATE_GUIDE_SUCCEEDED",e.LOGIN_REQUESTED="LOGIN_REQUESTED",e.LOGIN_SUCCEEDED="LOGIN_SUCCEEDED",e.LOGOUT_REQUESTED="LOGOUT_REQUESTED",e.LOGOUT_SUCCEEDED="LOGOUT_SUCCEEDED",e.UPDATE_LOGIN_STATUS="UPDATE_LOGIN_STATUS",e.SHOW_TRANSLATION_GUIDE="SHOW_TRANSLATION_GUIDE",e.SHOW_REGION_FILTER_GUIDE="SHOW_REGION_FILTER_GUIDE",e.FORCE_LOGOUT_REQUESTED="FORCE_LOGOUT_REQUESTED",e.CONNECT_SOCKET="CONNECT_SOCKET",e.REPORT_ASYNC_TASK="REPORT_ASYNC_TASK",e.UPLOAD_FEEDBACK_VIDEO_REQUESTED="UPLOAD_FEEDBACK_VIDEO_REQUESTED",e.UPLOAD_FEEDBACK_VIDEO_STATUS="UPLOAD_FEEDBACK_VIDEO_STATUS",e.UPDATE_CAPTCHA_VISIBLE="UPDATE_CAPTCHA_VISIBLE",e.UPDATE_CAPTCHA_SIGNATURE="UPDATE_CAPTCHA_SIGNATURE",e.UPDATE_CAPTCHA_SIGNATURE_SUCCEEDED="UPDATE_CAPTCHA_SIGNATURE_SUCCEEDED",e.SET_TEXT_BOX_HEIGHT="SET_TEXT_BOX_HEIGHT",e.UPDATE_RELATED_CAPACITY="UPDATE_RELATED_CAPACITY",e.UPDATE_IS_MAIN_PAGE="UPDATE_IS_MAIN_PAGE",e.UPDATE_DEL_PERMISSION="UPDATE_DEL_PERMISSION",e.GET_FEEDBACK_CLASSIFICATION_REQUESTED="GET_FEEDBACK_CLASSIFICATION_REQUESTED",e.GET_CLASSIFICATION_SUCCEED="GET_CLASSIFICATION_SUCCEED",e.UPDATE_SHOW_AUTO_HANGUP_MODAL="UPDATE_SHOW_AUTO_HANGUP_MODAL",e.REPORT_USER_REQUESTED="REPORT_USER_REQUESTED",e.SET_CHAT_LIST_WIDTH="SET_CHAT_LIST_WIDTH",e.UPDATE_HAS_FETCHED_UNREAD="UPDATE_HAS_FETCHED_UNREAD"}(An||(An={}));var Oo,ho,vo=y(439).t,To=At().mark(Ao),mo=At().mark(Do),go=(0,ur.createActions)(e({},An.BLOCK_USER_REQUESTED,(function(e){var t=e.buyerName,r=e.buyerId,n=e.block;return{buyerName:t,buyerId:r,block:void 0===n||n,shopId:e.shopId,conversationId:e.conversationId}}))),bo=go.blockUserRequested,yo=function(e){return{type:"CONFIRM_MODAL",title:{key:"conversation_detail.workstation.block_fail_modal.title",vars:{username:e}},actions:{confirm:{label:{key:"common.confirm"}}}}},Ro=function(e,t,r){return{toast:{show:!0,type:e?"fail":"warn",message:e?vo("common.server_error.warning_tips"):vo("conversation_detail.".concat(t?"blocked":"unblocked"),{username:r})}}};function Ao(e){var t,r,n,o,a,c,s;return At().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,r=t.buyerName,n=t.buyerId,o=t.block,a=t.shopId,c=t.conversationId,i.prev=1,s=o?"PUT":"DELETE",i.next=5,(0,_r.call)(Ev,{method:s,parent:"user",resource:"blocks",id:n,params:{shop_id:a}});case 5:return i.next=7,(0,_r.put)(o_(Ro(!1,o,r)));case 7:return i.next=9,(0,_r.put)(Gr({name:"users",id:n,record:{is_blocked:o}}));case 9:return i.next=11,(0,_r.put)(Gr({name:"conversations",id:c,record:{is_blocked:o}}));case 11:case 18:i.next=22;break;case 13:if(i.prev=13,i.t0=i.catch(1),!(i.t0 instanceof dt&&o&&i.t0.handler().message)){i.next=20;break}return i.next=18,(0,_r.put)(on(yo(r)));case 20:return i.next=22,(0,_r.put)(o_(Ro(!0)));case 22:case"end":return i.stop()}}),To,null,[[1,13]])}function Do(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_r.takeEvery)(bo,Ao);case 2:case"end":return e.stop()}}),mo)}function Co(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Io(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Co(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Co(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Po=At().mark(Lo),No=At().mark(jo),wo=(0,ur.createActions)((e(Oo={},An.GET_GUIDE_REQUESTED,(function(e){return{userId:e.userId,version:e.version}})),e(Oo,An.GET_GUIDE_SUCCEEDED,(function(e){return{newbie:e.newbie}})),e(Oo,An.GET_GUIDE_FAILED,(function(){return{}})),Oo)),xo=wo.getGuideRequested,Uo=wo.getGuideSucceeded,Mo=wo.getGuideFailed,ko="newbie-completed-info";function Lo(e){var t,r,n,o,a,c;return At().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,r=t.userId,n=t.version,s.prev=1,s.next=4,(0,D.getItem)(ko);case 4:if(s.sent!=="".concat(r,"-").concat(n)){s.next=7;break}return s.abrupt("return",[]);case 7:return o=[1],s.next=10,(0,_r.call)(Ev,{resource:"newbie",suffix:"uncompleted",params:{chat_types:"[".concat(o.join(","),"]")}});case 10:return a=s.sent,c=a.newbie,s.next=14,(0,_r.put)(Uo({newbie:c}));case 14:if(!(c.findIndex((function(e){return(e.name||"").toLocaleLowerCase().includes("mini")}))<0)){s.next=18;break}return s.next=18,(0,D.setItem)(ko,"".concat(r,"-").concat(n));case 18:return s.abrupt("return",c);case 21:return s.prev=21,s.t0=s.catch(1),s.next=25,(0,_r.put)(Mo());case 25:return s.abrupt("return",[]);case 26:case"end":return s.stop()}}),Po,null,[[1,21]])}function jo(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_r.takeEvery)(xo,Lo);case 2:case"end":return e.stop()}}),No)}const Go=(e(ho={},An.GET_GUIDE_SUCCEEDED,(function(e,t){var r=t.payload.newbie;return Io(Io({},e),{},{newbie:r})})),e(ho,An.GET_GUIDE_FAILED,(function(e){return Io(Io({},e),{},{newbie:[]})})),ho);var Fo;function Ho(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Vo(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Ho(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ho(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Bo=At().mark(Xo),Yo=At().mark(Jo);function Wo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Qo=(0,ur.createActions)((e(Fo={},An.UPDATE_GUIDE_REQUESTED,(function(e){return{newbieId:e.newbieId}})),e(Fo,An.UPDATE_GUIDE_SUCCEEDED,(function(e){return{newbie:e.newbie}})),Fo)),qo=Qo.updateGuideRequested,Ko=Qo.updateGuideSucceeded;function zo(e,t){var r,n=Yt(e),o=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Wo(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Wo(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){s=!0,a=e},f:function(){try{c||null==r.return||r.return()}finally{if(s)throw a}}}}(n);try{for(o.s();!(r=o.n()).done;){var a=r.value,c=a.children.findIndex((function(e){return e.id===t}));if(-1!==c){a.children.splice(c,1);break}}}catch(e){o.e(e)}finally{o.f()}return n}function Xo(e){var t,r,n;return At().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload.newbieId,o.next=3,(0,_r.select)(Nn);case 3:return r=o.sent,n=zo(r,t),o.next=7,(0,_r.put)(Ko({newbie:n}));case 7:return o.prev=7,o.next=10,(0,_r.call)(Ev,{method:"PUT",resource:"newbie",id:t});case 10:o.next=14;break;case 12:o.prev=12,o.t0=o.catch(7);case 14:case"end":return o.stop()}}),Bo,null,[[7,12]])}function Jo(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_r.takeEvery)(qo,Xo);case 2:case"end":return e.stop()}}),Yo)}const $o=e({},An.UPDATE_GUIDE_SUCCEEDED,(function(e,t){var r=t.payload.newbie;return Vo(Vo({},e),{},{newbie:r})}));var Zo,ea,ta=y(550),ra=y.n(ta),na=y(947),oa=y.n(na);function aa(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ca(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?aa(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aa(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var sa=At().mark(Ia),ia=At().mark(Pa),ua=At().mark(Na),la=At().mark(xa),da=At().mark(Ua),pa=At().mark(Ma),_a=(0,ur.createActions)((e(Zo={},An.UPDATE_USER_REQUESTED,(function(e){return{status:e.status}})),e(Zo,An.UPDATE_NETWORK_STATUS,(function(e){return{networkStatus:e.networkStatus}})),e(Zo,An.FETCH_USER_ORDER_DETAIL_REQUESTED,(function(e){return{userId:e.userId,shopId:e.shopId}})),e(Zo,An.FETCH_USER_ORDER_DETAIL_SUCCEEDED,(function(e){return{userId:e.userId,shopId:e.shopId,data:e.data}})),e(Zo,An.UPDATE_SHOW_AUTO_HANGUP_MODAL,(function(e){return{showAutoHangupModal:e.showAutoHangupModal}})),e(Zo,An.UPDATE_CHAT_WINDOW_STATUS,(function(e){return{shouldShowWindow:e.shouldShowWindow,from:e.from}})),e(Zo,An.UPDATE_CHAT_WINDOW_STATUS_SUCCEEDED,(function(e){return{shouldShowWindow:e.shouldShowWindow}})),e(Zo,An.UPDATE_CONVERSATION_DETAIL_STATUS,(function(e){var t=e.shouldShowConversationDetail,r=e.needMark;return{shouldShowConversationDetail:t,needMark:void 0!==r&&r}})),e(Zo,An.UPDATE_CONVERSATION_DETAIL_STATUS_SUCCEEDED,(function(e){return{shouldShowConversationDetail:e.shouldShowConversationDetail}})),e(Zo,An.UPDATE_OPENED_MENU,(function(e){return{openedMenu:e}})),e(Zo,An.SET_CHAT_SOURCE,(function(e){return{isScChat:e.isScChat}})),e(Zo,An.UPDATE_LOGIN_SUCCESS_STATUS,(function(e){return{loginSuccess:e.loginSuccess}})),e(Zo,An.UPDATE_SOCKET_SUCCESS_STATUS,(function(e){return{socketSuccess:e.socketSuccess}})),e(Zo,An.UPDATE_CHAT_ENTRY_STATUS,(function(e){return{showEntry:e.showEntry}})),e(Zo,An.UPDATE_HAS_FETCHED_UNREAD,(function(e){return{hasFetchedUnread:e.hasFetchedUnread}})),Zo)),fa=_a.updateUserRequested,Ea=_a.updateNetworkStatus,Sa=_a.fetchUserOrderDetailRequested,Oa=_a.fetchUserOrderDetailSucceeded,ha=_a.updateShowAutoHangupModal,va=_a.updateChatWindowStatus,Ta=_a.updateChatWindowStatusSucceeded,ma=_a.updateConversationDetailStatus,ga=_a.updateConversationDetailStatusSucceeded,ba=_a.updateOpenedMenu,ya=_a.setChatSource,Ra=_a.updateLoginSuccessStatus,Aa=_a.updateSocketSuccessStatus,Da=_a.updateChatEntryStatus,Ca=_a.updateHasFetchedUnread;function Ia(e){var t;return At().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload.status,r.prev=1,r.next=4,(0,_r.call)(Ev,{method:"PUT",resource:"user",payload:JSON.stringify({distribution_status:t})});case 4:if(!(0,D.checkIsScChat)()||"working"!==t){r.next=9;break}return r.next=9,(0,_r.put)(Ih({event_time:(Date.parse(new Date+"")/1e3).toString(),url:window.location.href}));case 9:r.next=15;break;case 11:return r.prev=11,r.t0=r.catch(1),r.next=15,(0,_r.put)(o_({error:r.t0}));case 15:case"end":return r.stop()}}),sa,null,[[1,11]])}function Pa(e){var t,r,n,o;return At().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,r=t.userId,n=t.shopId,a.prev=1,a.next=4,(0,_r.call)(Ev,{parent:"users",parentId:r,resource:"get_user_shop_statistics_info",params:{shop_id:n}});case 4:return o=a.sent,a.next=7,(0,_r.put)(Oa({userId:r,shopId:n,data:o}));case 7:a.next=11;break;case 9:a.prev=9,a.t0=a.catch(1);case 11:case"end":return a.stop()}}),ia,null,[[1,9]])}function Na(){var e,t,r,n,o;return At().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,_r.select)(Bs);case 2:if(!(e=a.sent)){a.next=8;break}if(t=e.status,r=e.id,n=e.unread_count,o=e.latest_message_id,!("closed"!==t&&n>0)){a.next=8;break}return a.next=8,(0,_r.put)(wi({conversationId:r,isRead:!0,latestMessageId:o}));case 8:case"end":return a.stop()}}),ua)}var wa=!0;function xa(e){var t,r,n;return At().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,r=t.shouldShowWindow,n=t.from,o.next=3,(0,_r.put)(Ta({shouldShowWindow:r}));case 3:if(!r){o.next=17;break}return o.next=6,ra().call(oa().updateChatbotFrom({payload:n||D.ChatbotFromType.LandingPage}));case 6:return window.CsChat&&window.CsChat.minimizeCsChatWindow&&window.CsChat.minimizeCsChatWindow(),o.next=9,(0,_r.call)(Na);case 9:if(!wa){o.next=15;break}return o.next=12,(0,_r.spawn)(cE);case 12:return o.next=14,(0,_r.call)(jl,{payload:{direction:"reset"}});case 14:wa=!1;case 15:return o.next=17,ra().call(oa().handleNewConversationMessageQueue());case 17:case"end":return o.stop()}}),la)}function Ua(e){var t,r,n;return At().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,r=t.shouldShowConversationDetail,n=t.needMark,o.next=3,(0,_r.put)(ga({shouldShowConversationDetail:r}));case 3:if(!n||!r){o.next=6;break}return o.next=6,(0,_r.call)(Na);case 6:case"end":return o.stop()}}),da)}function Ma(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_r.takeEvery)(fa,Ia);case 2:return e.next=4,(0,_r.takeEvery)(Sa,Pa);case 4:return e.next=6,(0,_r.takeEvery)(va,xa);case 6:return e.next=8,(0,_r.takeEvery)(ma,Ua);case 8:case"end":return e.stop()}}),pa)}const ka=(e(ea={},An.UPDATE_NETWORK_STATUS,(function(e,t){var r=t.payload.networkStatus;return ca(ca({},e),{},{networkStatus:r})})),e(ea,An.FETCH_USER_ORDER_DETAIL_SUCCEEDED,(function(t,r){var n=r.payload,o=n.userId,a=n.shopId,c=n.data,s="".concat(o,"-").concat(a),i=t.shopStatisticsMap;return ca(ca({},t),{},{shopStatisticsMap:ca(ca({},i),{},e({},s,c))})})),e(ea,An.UPDATE_SHOW_AUTO_HANGUP_MODAL,(function(e,t){var r=t.payload.showAutoHangupModal;return ca(ca({},e),{},{showAutoHangupModal:r})})),e(ea,An.UPDATE_CHAT_WINDOW_STATUS_SUCCEEDED,(function(e,t){var r=t.payload.shouldShowWindow;return ca(ca({},e),{},{showChatWindow:r})})),e(ea,An.UPDATE_CONVERSATION_DETAIL_STATUS_SUCCEEDED,(function(e,t){var r=t.payload.shouldShowConversationDetail;return ca(ca({},e),{},{showConversationDetail:r})})),e(ea,An.UPDATE_OPENED_MENU,(function(e,t){var r=t.payload.openedMenu;return ca(ca({},e),{},{openedMenu:r})})),e(ea,An.SET_CHAT_SOURCE,(function(e,t){var r=t.payload.isScChat;return ca(ca({},e),{},{isScChat:r})})),e(ea,An.UPDATE_LOGIN_SUCCESS_STATUS,(function(e,t){var r=t.payload.loginSuccess;return ca(ca({},e),{},{loginSuccess:r})})),e(ea,An.UPDATE_SOCKET_SUCCESS_STATUS,(function(e,t){var r=t.payload.socketSuccess;return ca(ca({},e),{},{socketSuccess:r})})),e(ea,An.UPDATE_CHAT_ENTRY_STATUS,(function(e,t){var r=t.payload.showEntry;return ca(ca({},e),{},{showEntry:r})})),e(ea,An.UPDATE_HAS_FETCHED_UNREAD,(function(e,t){var r=t.payload.hasFetchedUnread;return ca(ca({},e),{},{hasFetchedUnread:r})})),ea);var La,ja,Ga=y(459);function Fa(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ha(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Fa(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Fa(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Va,Ba=At().mark(ec),Ya=At().mark(tc),Wa=At().mark(oc),Qa=At().mark(ac),qa=At().mark(cc);Va=(0,D.checkIsScChat)();var Ka=(0,ur.createActions)((e(La={},An.LOGIN_REQUESTED,(function(){return{}})),e(La,An.LOGIN_SUCCEEDED,(function(e){return{currentUserId:e.currentUserId,status:e.status}})),e(La,An.LOGOUT_REQUESTED,(function(){return{}})),e(La,An.LOGOUT_SUCCEEDED,(function(){return{}})),e(La,An.FORCE_LOGOUT_REQUESTED,(function(){return{}})),La)),za=Ka.loginRequested,Xa=Ka.loginSucceeded,Ja=Ka.logoutRequested,$a=Ka.logoutSucceeded,Za=Ka.forceLogoutRequested;function ec(e){return At().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,_r.call)(D.getItem,e);case 2:if(t.sent){t.next=6;break}return t.next=6,(0,_r.call)(D.setItem,e,(0,Ga.v4)());case 6:case"end":return t.stop()}}),Ba)}function tc(){var e,t;return At().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e=(0,D.getTranslationLocale)((0,D.getRuntimeLocale)()),r.next=3,(0,_r.call)(oT,{locale:e});case 3:return t=r.sent,r.next=6,(0,_r.call)(D.changeLanguage,e,t);case 6:case"end":return r.stop()}}),Ya)}var rc=At().mark((function e(t){var r,n,o,a;return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_r.select)(io);case 2:return e.sent?n=(0,D.getTranslationLocale)(t):(o=It().get("language"))?n=D.localeInMallToTspLocale[o]||"en":(a=D.defaultLocalInMall[(0,D.getRuntimeRegion)()]||"en",n=D.localeInMallToTspLocale[a]||"en"),e.prev=4,e.next=7,(0,_r.call)(oT,{locale:n});case 7:r=e.sent,e.next=15;break;case 10:return e.prev=10,e.t0=e.catch(4),e.next=14,(0,_r.call)(oT,{locale:(0,D.getTranslationLocale)((0,D.getRuntimeLocale)())});case 14:r=e.sent;case 15:return e.next=17,(0,_r.call)(D.changeLanguage,n,r);case 17:return e.next=19,(0,_r.call)(D.updateTimeLocale,(0,D.getServiceLocale)(t));case 19:case"end":return e.stop()}}),e,null,[[4,10]])})),nc=At().mark((function e(t){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_r.call)(tc);case 2:return e.next=4,(0,_r.put)(Da({showEntry:!0}));case 4:return e.next=6,(0,_r.put)(Ra({loginSuccess:!1}));case 6:qv(Yv.LOGIN_FAILED,0,{type:(r=t,r instanceof it?"InternalServerError":r instanceof ut?"Forbidden":r instanceof at?"Unauthoried":"Other")});case 7:case"end":return e.stop()}var r}),e)}));function oc(e,t){var r,n,o,a,c,s,i,u,l,d,p;return At().wrap((function(_){for(;;)switch(_.prev=_.next){case 0:return _.prev=0,r=t.godToken,n=e.user,o=n.id,a=n.type,c=n.locale,s=n.distribution_status,i=a===D.AccountType.SUBACCOUNT,window.__WEBCHAT_LOGIN__||i&&"working"===s&&(window.__WEBCHAT_LOGIN__=!0),_.next=8,(0,_r.call)(rc,c||"en");case 8:return performance.mark("APP_RENDERING"),Wv(),Gv(a),CT(n),_.next=14,(0,_r.put)(Ea({networkStatus:"online"}));case 14:return window.addEventListener("online",(function(){Dt.store.dispatch(Ea({networkStatus:"online"}))})),window.addEventListener("offline",(function(){Dt.store.dispatch(Ea({networkStatus:"offline"}))})),_.next=18,(0,_r.put)(Ra({loginSuccess:!0}));case 18:return _.next=20,(0,_r.put)(Da({showEntry:!0}));case 20:return u=T("users",n),l=u.entities,_.next=23,(0,_r.put)(jr({entities:l}));case 23:return!r&&Ht.connect(),Va&&Ht.dispatch(D.CustomShareEvent.CALC_CONNECTIONS),_.next=27,(0,_r.put)(Xa({currentUserId:o}));case 27:return d=JSON.parse(D.LS.getItem("mini-filter"))||{},_.next=30,(0,_r.select)(Fs);case 30:if(p=_.sent,!d.filter||d.userid!==o||d.filter===p){_.next=34;break}return _.next=34,(0,_r.put)(Ni({filter:d.filter}));case 34:return _.next=36,(0,_r.call)(Tc);case 36:return _.next=38,(0,_r.spawn)(ec,"device_id");case 38:if(i){_.next=41;break}return _.next=41,(0,_r.call)(DO,gO({shopId:n.shop_id}));case 41:_.next=47;break;case 43:return _.prev=43,_.t0=_.catch(0),_.next=47,(0,_r.call)(nc,_.t0);case 47:return _.prev=47,_.finish(47);case 49:case"end":return _.stop()}}),Wa,null,[[0,43,47,49]])}function ac(){var e,t,r;return At().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,performance.mark("APP_PREPARED"),e={},t="",!window.__WEBCHAT_SESSION__){n.next=9;break}qv(Yv.LOGIN_IN_HTML,0),e=window.__WEBCHAT_SESSION__,n.next=16;break;case 9:return qv(Yv.LOGIN_IN_SERVICE,0),(r={method:"POST",subServer:"coreapi",resource:"login"}).params={source:Va?"sc":"pcmall"},((0,D.isVisitingCNSC)()||(0,D.isVisitingKRSC)())&&(r.parent="cbsc"),n.next=15,(0,_r.call)(Ev,r);case 15:e=n.sent;case 16:return performance.mark("LOGIN_API_RESPONSED"),n.next=19,(0,D.setItem)("mini-session",e);case 19:return D.LS.setItem("mini-session",JSON.stringify(e)),n.abrupt("return",{session:e,params:{godToken:t}});case 23:return n.prev=23,n.t0=n.catch(0),n.next=27,(0,_r.call)(nc,n.t0);case 27:return n.prev=27,n.finish(27);case 29:case"end":return n.stop()}}),Qa,null,[[0,23,27,29]])}function cc(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_r.takeLatest)(za,ac);case 2:return e.next=4,(0,_r.takeLatest)(Ja,fs);case 4:return e.next=6,(0,_r.takeLatest)(Za,_s);case 6:case"end":return e.stop()}}),qa)}const sc=(e(ja={},An.LOGIN_SUCCEEDED,(function(e,t){var r=t.payload.currentUserId;return Ha(Ha({},e),{},{currentUserId:r})})),e(ja,An.LOGOUT_SUCCEEDED,(function(e){return Ha(Ha({},e),{},{currentUserId:null,performance:{},closeHangupTips:!1,hasVideoPermission:!1,captchaVisible:!1,curTabFocused:!0})})),ja);var ic,uc,lc,dc=At().mark(Tc),pc=At().mark(mc);function _c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fc(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?_c(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}lc=(0,D.checkIsScChat)();var Ec=(0,ur.createActions)((e(ic={},An.CHECK_USER_PERMISSION_REQUESTED,(function(){return{}})),e(ic,An.CHECK_USER_PERMISSION_SUCCEEDED,(function(e){return{shouldInitFSSDK:e.shouldInitFSSDK,hasVideoPermission:e.hasVideoPermission,hasReplyPermission:e.hasReplyPermission,hasDeletePermission:e.hasDeletePermission,deleteConfigDuration:e.deleteConfigDuration,deleteConfigVersion:e.deleteConfigVersion,waitingTimeFilter:e.waitingTimeFilter,subaccountHasUnrepliedPermission:e.subaccountHasUnrepliedPermission}})),e(ic,An.UPDATE_DEL_PERMISSION,(function(e){return{hasDeletePermission:e.hasDeletePermission,deleteConfigDuration:e.deleteConfigDuration,deleteConfigVersion:e.deleteConfigVersion}})),ic)),Sc=Ec.checkUserPermissionRequested,Oc=Ec.checkUserPermissionSucceeded,hc=Ec.updateDelPermission,vc=function(){try{return D.LS.getItem("minichat-service-down")||!1}catch(e){return!1}};function Tc(){var e,t,r,n,o,a,c,s,i,u,l,d,p;return At().wrap((function(_){for(;;)switch(_.prev=_.next){case 0:return e={hasVideoPermission:!1,hasReplyPermission:!1,shouldInitFSSDK:!1,hasDeletePermission:!1,deleteConfigDuration:0,deleteConfigVersion:0,waitingTimeFilter:!1},_.next=3,(0,_r.select)(Qn);case 3:return t=_.sent,r=t.type,n=t.country,o=t.id,a=JSON.parse(D.LS.getItem("mini-filter"))||{},_.prev=6,_.next=9,(0,_r.call)(Ev,{subServer:"coreapi",parent:"user",resource:"global_config"});case 9:if(c=_.sent,e.hasVideoPermission=c.video,e.hasReplyPermission=c.reply,e.shouldInitFSSDK=c.privacy&&lc||"live"!==(0,D.getRuntimeServer)(),e.waitingTimeFilter=c.waiting_time_filter,!lc&&(e.waitingTimeFilter=!1),"seller"===r?(s=c.delete_msg||{},e.deleteConfigVersion=s.config_version,i=(s.region_config||[]).find((function(e){return e.region===n})),i&&i.duration&&(e.hasDeletePermission=!0,e.deleteConfigDuration=i.duration)):e.subaccountHasUnrepliedPermission=c.support_subaccount_unreplied,a.filter&&a.userid===o){_.next=20;break}return u=e.waitingTimeFilter?"Unreplied":"All",_.next=20,(0,_r.put)(su({filter:u}));case 20:if(void 0===c.br_site_close){_.next=25;break}return _.next=23,(0,_r.put)(cu({alert:(null==c||null===(l=c.br_site_close)||void 0===l?void 0:l.site_close)||!1,close:vc()}));case 23:window.__SERVICEDOWN_STATT_TIME__=(null==c||null===(d=c.br_site_close)||void 0===d?void 0:d.start_time)||0,window.__SERVICEDOWN_END_TIME__=(null==c||null===(p=c.br_site_close)||void 0===p?void 0:p.end_time)||0;case 25:_.next=32;break;case 27:if(_.prev=27,_.t0=_.catch(6),a.filter&&a.userid===o){_.next=32;break}return _.next=32,(0,_r.put)(su({filter:"All"}));case 32:return _.next=34,(0,_r.put)(Oc(fc({},e)));case 34:case"end":return _.stop()}}),dc,null,[[6,27]])}function mc(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_r.takeEvery)(Sc,Tc);case 2:case"end":return e.stop()}}),pc)}const gc=(e(uc={},An.CHECK_USER_PERMISSION_SUCCEEDED,(function(e,t){var r=t.payload,n=r.shouldInitFSSDK,o=r.hasVideoPermission,a=r.hasReplyPermission,c=r.hasDeletePermission,s=r.deleteConfigDuration,i=r.deleteConfigVersion,u=r.waitingTimeFilter,l=r.subaccountHasUnrepliedPermission;return fc(fc({},e),{},{shouldInitFSSDK:n,hasVideoPermission:o,hasReplyPermission:a,hasDeletePermission:c,deleteConfigDuration:s,deleteConfigVersion:i,waitingTimeFilter:u,subaccountHasUnrepliedPermission:l})})),e(uc,An.UPDATE_DEL_PERMISSION,(function(e,t){var r=t.payload,n=r.hasDeletePermission,o=r.deleteConfigDuration,a=r.deleteConfigVersion;return fc(fc({},e),{},{hasDeletePermission:n,deleteConfigDuration:o,deleteConfigVersion:a})})),uc);var bc,yc,Rc=At().mark(Cc),Ac=At().mark(Ic),Dc=(0,ur.createActions)(e({},An.SHOW_USER_REQUESTED,(function(e){return{userId:e.userId,shopId:e.shopId,buyerShopId:e.buyerShopId}}))).showUserRequested;function Cc(e){var t,r,n,o,a,c,s;return At().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,r=t.userId,n=t.shopId,o=t.buyerShopId,i.prev=1,i.next=4,(0,_r.call)(Ev,{resource:"users",id:r,params:{shop_id:n,need_cache:1,cache_expires:1800}});case 4:a=i.sent,i.next=10;break;case 7:i.prev=7,i.t0=i.catch(1),a={id:r,shop_id:o};case 10:return c=T("users",a),s=c.entities,i.next=13,(0,_r.put)(jr({entities:s}));case 13:return i.next=15,(0,_r.put)(Sa({userId:r,shopId:n}));case 15:case"end":return i.stop()}}),Rc,null,[[1,7]])}function Ic(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_r.takeEvery)(Dc,Cc);case 2:case"end":return e.stop()}}),Ac)}function Pc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Nc(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Pc(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pc(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var wc=At().mark(jc),xc=At().mark(Gc),Uc=(0,ur.createActions)((e(bc={},An.UPDATE_IS_MAIN_PAGE,(function(e){return{isMainPage:e.isMainPage}})),e(bc,An.UPDATE_CUR_TAB_FOCUSED,(function(e){return{focused:e.focused}})),e(bc,An.UPDATE_CUR_TAB_FOCUSED_SUCCEEDED,(function(e){return{focused:e.focused}})),bc)),Mc=Uc.updateIsMainPage,kc=Uc.updateCurTabFocused,Lc=Uc.updateCurTabFocusedSucceeded;function jc(e){var t;return At().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(t=e.payload.focused)){r.next=5;break}return Ht.dispatch(D.CustomShareEvent.TAB_FOCUSED),r.next=5,(0,_r.put)(Mc({isMainPage:!0}));case 5:return r.next=7,(0,_r.put)(Lc({focused:t}));case 7:case"end":return r.stop()}}),wc)}function Gc(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_r.takeEvery)(kc,jc);case 2:case"end":return e.stop()}}),xc)}const Fc=(e(yc={},An.UPDATE_IS_MAIN_PAGE,(function(e,t){var r=t.payload.isMainPage;return Nc(Nc({},e),{},{isMainPage:r})})),e(yc,An.UPDATE_CUR_TAB_FOCUSED_SUCCEEDED,(function(e,t){var r=t.payload.focused;return Nc(Nc({},e),{},{curTabFocused:r})})),yc);var Hc,Vc;function Bc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Yc(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Bc(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Bc(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Wc=At().mark(Jc),Qc=At().mark($c),qc=(0,ur.createActions)((e(Hc={},An.UPDATE_CAPTCHA_VISIBLE,(function(e){return{visible:e.visible,resendMessagePayload:e.resendMessagePayload}})),e(Hc,An.UPDATE_CAPTCHA_SIGNATURE,(function(e){var t=e.signature;return{signature:void 0===t?"":t}})),e(Hc,An.UPDATE_CAPTCHA_SIGNATURE_SUCCEEDED,(function(e){var t=e.signature;return{signature:void 0===t?"":t}})),Hc)),Kc=qc.updateCaptchaVisible,zc=qc.updateCaptchaSignature,Xc=qc.updateCaptchaSignatureSucceeded;function Jc(e){var t,r,n,o;return At().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(t=e.payload.signature)){a.next=12;break}return a.next=4,(0,_r.select)(Bn);case 4:if(!(r=a.sent)){a.next=12;break}return a.next=8,(0,_r.select)(q_(r.messageId));case 8:return n=a.sent,o={message:n,conversationId:r.conversationId},a.next=12,ra().put(oa().resendMessageRequested({payload:o}));case 12:return a.next=14,(0,_r.put)(Xc({signature:t}));case 14:case"end":return a.stop()}}),Wc)}function $c(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_r.takeEvery)(zc,Jc);case 2:case"end":return e.stop()}}),Qc)}const Zc=(e(Vc={},An.UPDATE_CAPTCHA_VISIBLE,(function(e,t){var r=t.payload,n=r.visible,o=r.resendMessagePayload;return Yc(Yc({},e),{},{captchaVisible:n,resendMessagePayload:o})})),e(Vc,An.UPDATE_CAPTCHA_SIGNATURE_SUCCEEDED,(function(e,t){var r=t.payload.signature;return Yc(Yc({},e),{},{captchaSignature:r})})),Vc);var es,ts,rs=At().mark(as),ns=At().mark(cs),os=(0,ur.createActions)(e({},An.REPORT_USER_REQUESTED,(function(e){return{userId:e.userId,shopId:e.shopId}}))).reportUserRequested;function as(e){var t,r,n,o,a,c,s,i,u,l;return At().wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return t=e.payload,r=t.userId,n=t.shopId,d.prev=1,d.next=4,(0,_r.call)(Ev,{resource:"shop",id:n});case 4:o=d.sent,a=o.is_official_shop,c=void 0===a||a,s=o.country,i=void 0===s?"SG":s,u=(0,D.getMallUrl)(i),l="https://".concat(u,"/report/").concat(r),c&&(l="".concat(l,"?is_official_shop=true")),window.open(l),d.next=17;break;case 15:d.prev=15,d.t0=d.catch(1);case 17:case"end":return d.stop()}}),rs,null,[[1,15]])}function cs(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_r.takeEvery)(os,as);case 2:case"end":return e.stop()}}),ns)}function ss(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function is(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?ss(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ss(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var us=(0,ur.createActions)((e(es={},An.SET_TEXT_BOX_HEIGHT,(function(e){return e})),e(es,An.SET_CHAT_LIST_WIDTH,(function(e){return e})),es)),ls=us.setTextBoxHeight,ds=us.setChatListWidth;const ps=(e(ts={},An.SET_TEXT_BOX_HEIGHT,(function(e,t){var r=t.payload;return is(is({},e),{},{textBoxHeight:r})})),e(ts,An.SET_CHAT_LIST_WIDTH,(function(e,t){var r=t.payload;return is(is({},e),{},{chatlistWidth:r})})),ts);var _s=At().mark((function e(){var t=arguments;return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(!(t.length>0&&void 0!==t[0])||t[0])&&Ht.close(),e.next=4,(0,_r.put)($a());case 4:return e.next=6,(0,_r.put)(bE());case 6:(0,D.removeItem)("mini-session"),(0,D.removeItem)("mini-sc_redirect");case 8:case"end":return e.stop()}}),e)})),fs=At().mark((function e(){var t;return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={server:(0,D.getSCApiServer)(),namespace:"",resource:"logout",suffixSlash:!0,params:{SPC_CDS:It().get("SPC_CDS"),SPC_CDS_VER:2}},(0,D.isVisitingCNSC)()||(0,D.isVisitingKRSC)()?(t.version="cnsc",t.parent="selleraccount"):t.version="v1",e.next=5,(0,_r.call)(Ev,t);case 5:return document.location.replace("https://".concat((0,D.getSellerCenterUrl)(),"/account/signin")),window.removeEventListener("online",(function(){Dt.store.dispatch(Ea({networkStatus:"online"}))})),window.removeEventListener("offline",(function(){Dt.store.dispatch(Ea({networkStatus:"offline"}))})),Kt(),e.next=11,(0,_r.call)(_s);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),e.t0.handler?(0,_r.call)(e.t0.handler):console.error("[Logout Failed] ",e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])}));function Es(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ss(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Es(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Es(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Os,hs=[Do,jo,Jo,Ma,cc,Ic,mc,$c,Gc,cs],vs="983743070955270817";Os=D.MINI_MIN_TEXT_BOX_HEIGHT,vs="983743070955270818";var Ts,ms,gs={newbie:[],networkStatus:"online",hasVideoPermission:!1,currentUserId:null,currentUser:{},shouldInitFSSDK:!1,hasReplyPermission:!1,hasDeletePermission:!1,deleteConfigVersion:0,deleteConfigDuration:0,captchaVisible:!1,captchaSignature:"",resendMessagePayload:void 0,curTabFocused:!0,isMainPage:!0,shopStatisticsMap:{},subaccountHasUnrepliedPermission:!1,textBoxHeight:Os,showAutoHangupModal:!1,waitingTimeFilter:!1,isScChat:!0,openedMenus:"",loginSuccess:!0,socketSuccess:!0,showChatWindow:!1,showConversationDetail:!0,showEntry:!1,hasFetchedUnread:!1},bs=(0,ur.handleActions)(Ss(Ss(Ss(Ss(Ss(Ss(Ss(Ss(Ss({},{}),gc),Zc),Fc),ps),Go),$o),ka),sc),gs),ys=function(e){return e.conversationReducer.conversationIds},Rs=function(e){return e.conversationReducer.readRequestIds},As=function(e){return e.conversationReducer.missedReadNoticeCount},Ds=function(e){return e.conversationReducer.inlocation},Cs=function(e){return e.conversationReducer.updateTimeNow},Is=function(e){return e.conversationReducer.currentConversationId},Ps=function(e){return e.conversationReducer.currentConversationCanRead},Ns=function(e){return e.conversationReducer.status},ws=function(e){return e.conversationReducer.direction},xs=(0,fr.createSelector)(hr,ys,(function(e,r){return((0,t.denormalize)(r,[s],{conversations:e})||[]).filter(Boolean)})),Us=(0,fr.createSelector)(xs,Is,(function(e,t){return e.filter((function(e){var r=e.id,n=e.unread_count;return e&&(n>0||r===t)}))})),Ms=(0,fr.createSelector)(xs,(function(e){return e.filter((function(e){return e.pinned}))})),ks=(0,fr.createSelector)(xs,(function(e){return e.filter((function(e){return e.status&&"closed"===e.status}))})),Ls=(0,fr.createSelector)(xs,Is,(function(e,t){return e.filter((function(e){var r=e.unreplied,n=e.id;return void 0===r||r||!r&&n===t}))})),js=(0,fr.createSelector)(xs,(function(e){return e.filter((function(e){return e.lack})).map((function(e){return e.id}))||[]})),Gs=function(e){return e.conversationReducer.keyword},Fs=function(e){return e.conversationReducer.filter},Hs=(0,fr.createSelector)(Fs,xs,Us,Ms,ks,Ls,(function(e,t,r,n,o,a){return{All:t,Unread:r,Pinned:n,Closed:o,Unreplied:a}[e]})),Vs=(0,fr.createSelector)(Hs,jn,Fs,(function(e,t,r){return e.sort((function(e,t){return parseInt(t.latest_message_id)-parseInt(e.latest_message_id)})),e.filter((function(e){return void 0===e.faking}))})),Bs=(0,fr.createSelector)(xs,Is,Kn,Ds,Or,hr,(function(e,r,n,o,c,i){var u=e.find((function(e){return e.id===r}))||{};if(o&&!u.id&&(u=(0,t.denormalize)(r,s,{conversations:i})||{}),!n&&u.lack){var l=u.to_id,d=(0,t.denormalize)(l,a,{users:c})||{},p={to_shop_id:d.shop_id,to_status:d.status,to_name:d.name||"-",to_avatar:d.avatar};return Object.assign(u,p)}return u})),Ys=(0,fr.createSelector)(Bs,(function(e){return(e||{}).to_id||null})),Ws=(0,fr.createSelector)(Bs,Cr,(function(e,r){return(0,t.denormalize)(e.shop_id,p,{shops:r})||{}})),Qs=(0,fr.createSelector)(Ws,(function(e){return(null==e?void 0:e.country)||"SG"})),qs=(0,fr.createSelector)(Bs,(function(e){return e.shop_id})),Ks=(0,fr.createSelector)(Bs,(function(e){return e.to_id})),zs=(0,fr.createSelector)(Bs,(function(e){return e.status})),Xs=(0,fr.createSelector)(Bs,(function(e){return e.auto_translation})),Js=(0,fr.createSelector)(Bs,(function(e){return e.max_general_option_hide_time})),$s=function(e){return(0,fr.createSelector)(hr,(function(r){return(0,t.denormalize)(e,s,{conversations:r})||{}}))},Zs=function(e){return(0,fr.createSelector)($s(e),(function(e){return e.shop_id}))},ei=function(e){return(0,fr.createSelector)(xs,(function(t){return e.map((function(e){return t.find((function(t){return t.id===e}))})).filter(Boolean)}))},ti=(0,fr.createSelector)(Bs,(function(e){return(e||{}).shop_id||null})),ri=(0,fr.createSelector)(Or,Bs,(function(e,r){return r?(0,t.denormalize)(r.to_id,a,{users:e}):{}})),ni=(0,fr.createSelector)(Bs,(function(e){return(e||{}).to_shop_id||null})),oi=function(e){return e.conversationReducer.results},ai=function(e){return e.conversationReducer.searchStatus},ci=(0,fr.createSelector)(Bs,(function(e){return e.translationAccess})),si=function(e){return e.conversationReducer.listsHash},ii=function(e){return e.conversationReducer.conversationBeenDeleted},ui=(0,fr.createSelector)(Bs,(function(e){return(e||{}).to_name})),li=function(e){return e.conversationReducer.access},di=function(e){return e.conversationReducer.isNavigateToUnreadMessage},pi=function(e){return e.conversationReducer.navigateToUnreadMessageId},_i=function(e){return e.conversationReducer.pendingOffersCount},fi=(0,fr.createSelector)(Bs,_i,(function(e,t){var r=e.shop_id,n=e.to_id;return t["".concat(r,"_").concat(n)]||0})),Ei=function(e){return(0,fr.createSelector)($s(e),_i,(function(e,t){var r=e.shop_id,n=e.to_id;return t["".concat(r,"_").concat(n)]||0}))},Si=function(e){return(0,fr.createSelector)(Zs(e),Cr,(function(e,r){var n=(0,t.denormalize)(e,p,{shops:r})||{};return(null==n?void 0:n.country)||"SG"}))},Oi=function(e){return e.conversationReducer.serviceDown},hi=function(e){return e.conversationReducer.serviceDownAlert},vi=function(e){return e.conversationReducer.serviceDownList},Ti=function(e){return e.conversationReducer.manualClose};!function(e){e.DELETE_CONVERSATION_REQUESTED="DELETE_CONVERSATION_REQUESTED",e.DELETE_CONVERSATION_SUCCEEDED="DELETE_CONVERSATION_SUCCEEDED",e.GET_CONVERSATION_DETAIL_REQUESTED="GET_CONVERSATION_DETAIL_REQUESTED",e.FAKE_CONVERSATION_SUCCEEDED="FAKE_CONVERSATION_SUCCEEDED",e.FETCH_CONVERSATIONS_REQUESTED="FETCH_CONVERSATIONS_REQUESTED",e.FETCH_CONVERSATIONS_SUCCEEDED="FETCH_CONVERSATIONS_SUCCEEDED",e.UPDATE_FETCH_CONVERSATIONS_STATUS="UPDATE_FETCH_CONVERSATIONS_STATUS",e.UPDATE_FETCH_CONVERSATIONS_DIRECTION="UPDATE_FETCH_CONVERSATIONS_DIRECTION",e.UPDATE_CONVERSATION_TIMESTAMP="UPDATE_CONVERSATION_TIMESTAMP",e.UPDATE_CONVERSATION_FILTER="UPDATE_CONVERSATION_FILTER",e.FORWARD_CONVERSATION_REQUESTED="FORWARD_CONVERSATION_REQUESTED",e.MASS_FORWARD_CONVERSATION_REQUESTED="MASS_FORWARD_CONVERSATION_REQUESTED",e.MARK_MESSAGES_REQUESTED="MARK_MESSAGES_REQUESTED",e.MARK_MESSAGES_SUCCEEDED="MARK_MESSAGES_SUCCEEDED",e.UPDATE_READ_REQUEST_DATA="UPDATE_READ_REQUEST_DATA",e.PIN_CONVERSATION_REQUESTED="PIN_CONVERSATION_REQUESTED",e.SEARCH_CONVERSATIONS_REQUESTED="SEARCH_CONVERSATIONS_REQUESTED",e.SEARCH_CONVERSATIONS_SUCCEEDED="SEARCH_CONVERSATIONS_SUCCEEDED",e.RESET_SEARCH_PARAMS="RESET_SEARCH_PARAMS",e.UPDATE_EXISTED_RESULT_ID_MAP="UPDATE_EXISTED_RESULT_ID_MAP",e.UPDATE_CURRENT_CONVERSATION_MODE="UPDATE_CURRENT_CONVERSATION_MODE",e.SET_CURRENT_CONVERSATION_MODE="SET_CURRENT_CONVERSATION_MODE",e.SEARCH_BY_COMBINED_API="SEARCH_BY_COMBINED_API",e.TOGGLE_MULTIPLE_SELECTION_MODE="TOGGLE_MULTIPLE_SELECTION_MODE",e.SET_SELECTED_CONVERSATION_LIST="SET_SELECTED_CONVERSATION_LIST",e.UPDATE_SELECTED_CONVERSATION_ID="UPDATE_SELECTED_CONVERSATION_ID",e.SELECTED_CONVERSATIONS_REQUESTED="SELECTED_CONVERSATIONS_REQUESTED",e.CONVERSATION_BATCH_OPERATE_REQUESTED="CONVERSATION_BATCH_OPERATE_REQUESTED",e.SET_CURRENT_CONVERSATION_CAN_READ="SET_CURRENT_CONVERSATION_CAN_READ",e.UPDATE_PREVIOUS_CONVERSATION_ID="UPDATE_PREVIOUS_CONVERSATION_ID",e.CLOSE_CONVERSATION_REQUESTED="CLOSE_CONVERSATION_REQUESTED",e.FETCH_GROUPS_REQUESTED="FETCH_GROUPS_REQUESTED",e.FETCH_MASS_GROUPS_REQUESTED="FETCH_MASS_GROUPS_REQUESTED",e.SHOW_CONVERSATION_REQUESTED="SHOW_CONVERSATION_REQUESTED",e.RESET_CONVERSATION_REQUESTED="RESET_CONVERSATION_REQUESTED",e.SHOW_CONVERSATION_SUCCEEDED="SHOW_CONVERSATION_SUCCEEDED",e.SHOW_NORMAL_CONVERSATION_SUCCEEDED="SHOW_NORMAL_CONVERSATION_SUCCEEDED",e.CHANGE_CONVERSATION_STATUS_REQUESTED="CHANGE_CONVERSATION_STATUS_REQUESTED",e.FETCH_DEGRADE_CONVERSATIONS_DETAIL="FETCH_DEGRADE_CONVERSATIONS_DETAIL",e.CONVERSATION_OPERATE_REQUESTED="CONVERSATION_OPERATE_REQUESTED",e.SEARCH_MORE_RESULTS="SEARCH_MORE_RESULTS",e.SEARCH_MORE_SUCCEED="SEARCH_MORE_SUCCEED",e.SET_SEARCH_STATUS="SET_SEARCH_STATUS",e.UPDATE_ACCESS="UPDATE_ACCESS",e.SHOW_SEARCHED_CONVERSATION_REQUESTED="SHOW_SEARCHED_CONVERSATION_REQUESTED",e.UPDATE_SEARCH_PARAMS="UPDATE_SEARCH_PARAMS",e.LOCATION_MESSAGE="LOCATION_MESSAGE",e.UPDATE_LOCATION_MODE="UPDATE_LOCATION_MODE",e.UPDATE_SYNC_TIME_NOW="UPDATE_SYNC_TIME_NOW",e.SET_CURRENT_CONVERSATION_TYPE="SET_CURRENT_CONVERSATION_TYPE",e.SET_CONVERSATION_BEEN_DELETED="SET_CONVERSATION_BEEN_DELETED",e.MUTE_CONVERSATION_REQUESTED="MUTE_CONVERSATION_REQUESTED",e.SET_NAVIGATE_TO_UNREAD_MESSAGE="SET_NAVIGATE_TO_UNREAD_MESSAGE",e.SET_NAVIGATE_TO_UNREAD_MESSAGE_ID="SET_NAVIGATE_TO_UNREAD_MESSAGE_ID",e.RESET_NAVIGATE_TO_UNREAD_MESSAGE_ID="RESET_NAVIGATE_TO_UNREAD_MESSAGE_ID",e.GET_PENDING_OFFERS_COUNT_REQUESTED="GET_PENDING_OFFERS_COUNT_REQUESTED",e.GET_PENDING_OFFERS_COUNT_SUCCEED="GET_PENDING_OFFERS_COUNT_SUCCEED",e.GET_BATCH_PENDING_OFFERS_COUNT_SUCCEED="GET_BATCH_PENDING_OFFERS_COUNT_SUCCEED",e.SET_ACTIVE_TAB="SET_ACTIVE_TAB",e.SET_ACTIVE_TAB_SUCCEED="SET_ACTIVE_TAB_SUCCEED",e.UPDATE_IS_CONTACTS_VISIBLE="UPDATE_IS_CONTACTS_VISIBLE",e.SET_CURRENT_CONVERSATION_ID="SET_CURRENT_CONVERSATION_ID",e.UPDATE_CONVERSATION_SORT_BY_FILTER="UPDATE_CONVERSATION_SORT_BY_FILTER",e.UPDATE_SERVICE_DOWN_STATUS="UPDATE_SERVICE_DOWN_STATUS",e.UPDATE_CONVERSATION_FILTER_REQUESTED="UPDATE_CONVERSATION_FILTER_REQUESTED",e.UPDATE_SORT_BY_FILTER_REQUESTED="UPDATE_SORT_BY_FILTER_REQUESTED"}(Ts||(Ts={}));var mi=(0,ur.createActions)((e(ms={},Ts.DELETE_CONVERSATION_REQUESTED,(function(e){return{conversationId:e.conversationId}})),e(ms,Ts.DELETE_CONVERSATION_SUCCEEDED,(function(e){return{conversationId:e.conversationId}})),e(ms,Ts.GET_CONVERSATION_DETAIL_REQUESTED,(function(e){return{conversationId:e.conversationId}})),e(ms,Ts.FAKE_CONVERSATION_SUCCEEDED,(function(e){return{conversationId:e.conversationId}})),e(ms,Ts.FETCH_CONVERSATIONS_REQUESTED,(function(e){var t=e.direction,r=void 0===t?"reset":t,n=e.noPending;return{direction:r,noPending:void 0!==n&&n,source:e.source}})),e(ms,Ts.FETCH_CONVERSATIONS_SUCCEEDED,(function(e){var t=e.conversationIds,r=e.conversationIdsMap,n=e.oldestMessageRegion,o=e.latestMessageRegion,a=e.oldestReceivedMessageId,c=e.latestReceivedMessageId,s=e.oldestTimestampNano,i=e.latestTimestampNano,u=e.direction;return{conversationIds:t,conversationIdsMap:r,oldestMessageRegion:n,latestMessageRegion:o,oldestReceivedMessageId:a,latestReceivedMessageId:c,direction:void 0===u?"reset":u,status:e.status,hasMore:e.hasMore,latestTimestampNano:i,oldestTimestampNano:s,persist:e.persist,shouldFetchByTimestamp:e.shouldFetchByTimestamp,maxLatestTimestampNano:e.maxLatestTimestampNano,maxLatestReceivedMessageId:e.maxLatestReceivedMessageId,syncFetchException:e.syncFetchException,nextMessageTimeNano:e.nextMessageTimeNano,sortByWaitTime:e.sortByWaitTime,subAccountNextTimestampNano:e.subAccountNextTimestampNano,subAccountLastMessageNano:e.subAccountLastMessageNano}})),e(ms,Ts.UPDATE_FETCH_CONVERSATIONS_STATUS,(function(e){return{status:e.status}})),e(ms,Ts.UPDATE_FETCH_CONVERSATIONS_DIRECTION,(function(e){return{direction:e.direction}})),e(ms,Ts.UPDATE_CONVERSATION_TIMESTAMP,(function(e){return{latestTimestampNano:e.latestTimestampNano,oldestTimestampNano:e.oldestTimestampNano}})),e(ms,Ts.UPDATE_CONVERSATION_FILTER,(function(e){return{filter:e.filter}})),e(ms,Ts.FORWARD_CONVERSATION_REQUESTED,(function(e){return{conversationId:e.conversationId,type:e.type,forwardId:e.forwardId}})),e(ms,Ts.MASS_FORWARD_CONVERSATION_REQUESTED,(function(e){return{type:e.type,forwardId:e.forwardId,conversationIds:e.conversationIds}})),e(ms,Ts.MARK_MESSAGES_REQUESTED,(function(e){return{conversationId:e.conversationId,isRead:e.isRead,latestMessageId:e.latestMessageId}})),e(ms,Ts.MARK_MESSAGES_SUCCEEDED,(function(e){return{conversationId:e.conversationId,markType:e.markType}})),e(ms,Ts.UPDATE_READ_REQUEST_DATA,(function(e){return{requestId:e.requestId,requestIds:e.requestIds,count:e.count}})),e(ms,Ts.PIN_CONVERSATION_REQUESTED,(function(e){return{conversationId:e.conversationId}})),e(ms,Ts.SEARCH_CONVERSATIONS_REQUESTED,(function(e){var t=e.keyword,r=void 0===t?"":t,n=e.filter;return{keyword:r,filter:void 0===n?"all":n}})),e(ms,Ts.RESET_SEARCH_PARAMS,(function(e){var t=e.keyword;return{keyword:void 0===t?"":t,searchFilter:e.searchFilter}})),e(ms,Ts.UPDATE_EXISTED_RESULT_ID_MAP,(function(e){return{addedMap:e.addedMap}})),e(ms,Ts.UPDATE_CURRENT_CONVERSATION_MODE,(function(e){return{mode:e.mode,conversationId:e.conversationId}})),e(ms,Ts.SET_CURRENT_CONVERSATION_MODE,(function(e){return{mode:e.mode}})),e(ms,Ts.SEARCH_BY_COMBINED_API,(function(){return{}})),e(ms,Ts.TOGGLE_MULTIPLE_SELECTION_MODE,(function(e){return{mode:e.mode}})),e(ms,Ts.SET_SELECTED_CONVERSATION_LIST,(function(e){return{list:e.list}})),e(ms,Ts.UPDATE_SELECTED_CONVERSATION_ID,(function(e){return{id:e.id,selected:e.selected}})),e(ms,Ts.SELECTED_CONVERSATIONS_REQUESTED,(function(e){return{type:e.type,id:e.id}})),e(ms,Ts.CONVERSATION_BATCH_OPERATE_REQUESTED,(function(e){return{type:e.type}})),e(ms,Ts.SET_CURRENT_CONVERSATION_CAN_READ,(function(e){return{canRead:e.canRead}})),e(ms,Ts.SHOW_CONVERSATION_REQUESTED,(function(e){return{conversation:e.conversation,previousId:e.previousId,messageId:e.messageId,sourceInfo:e.sourceInfo}})),e(ms,Ts.RESET_CONVERSATION_REQUESTED,(function(){return{}})),e(ms,Ts.SHOW_NORMAL_CONVERSATION_SUCCEEDED,(function(e){var t=e.conversationId,r=e.previousId;return{conversationId:t,previousId:void 0===r?null:r}})),e(ms,Ts.CHANGE_CONVERSATION_STATUS_REQUESTED,(function(e){return{conversationId:e.conversationId}})),e(ms,Ts.FETCH_DEGRADE_CONVERSATIONS_DETAIL,(function(e){return{conversationIds:e.conversationIds}})),e(ms,Ts.CONVERSATION_OPERATE_REQUESTED,(function(e){return{type:e.type,extra:e.extra}})),e(ms,Ts.SEARCH_MORE_RESULTS,(function(e){return{type:e.type,reset:e.reset}})),e(ms,Ts.SEARCH_MORE_SUCCEED,(function(e){return{type:e.type,total:e.total,results:e.results,isFromCache:e.isFromCache,hasMore:e.hasMore,nextOffset:e.nextOffset}})),e(ms,Ts.SET_SEARCH_STATUS,(function(e){return{type:e.type,status:e.status}})),e(ms,Ts.UPDATE_ACCESS,(function(e){return{access:e.access}})),e(ms,Ts.SHOW_SEARCHED_CONVERSATION_REQUESTED,(function(e){return{conversation:e.conversation}})),e(ms,Ts.LOCATION_MESSAGE,(function(e){return{msgId:e.msgId,shopId:e.shopId}})),e(ms,Ts.UPDATE_LOCATION_MODE,(function(e){return{inlocation:e.inlocation}})),e(ms,Ts.UPDATE_SYNC_TIME_NOW,(function(e){return{timeNow:e.timeNow}})),e(ms,Ts.SHOW_CONVERSATION_SUCCEEDED,(function(e){var t=e.conversationId,r=e.previousId,n=void 0===r?null:r,o=e.type;return{conversationId:t,previousId:n,type:void 0===o?D.ConversationTypeEnum.Normal:o}})),e(ms,Ts.SET_CURRENT_CONVERSATION_TYPE,(function(e){var t=e.type;return{type:void 0===t?D.ConversationTypeEnum.Normal:t}})),e(ms,Ts.SET_NAVIGATE_TO_UNREAD_MESSAGE,(function(e){return{isNavigateToUnreadMessage:e.isNavigateToUnreadMessage}})),e(ms,Ts.SET_NAVIGATE_TO_UNREAD_MESSAGE_ID,(function(e){return{navigateToUnreadMessageId:e.navigateToUnreadMessageId}})),e(ms,Ts.RESET_NAVIGATE_TO_UNREAD_MESSAGE_ID,(function(){})),e(ms,Ts.SET_CONVERSATION_BEEN_DELETED,(function(e){return{conversationBeenDeleted:e.conversationBeenDeleted}})),e(ms,Ts.MUTE_CONVERSATION_REQUESTED,(function(e){return{conversationId:e.conversationId}})),e(ms,Ts.GET_PENDING_OFFERS_COUNT_REQUESTED,(function(e){return{shopId:e.shopId,buyerId:e.buyerId}})),e(ms,Ts.GET_PENDING_OFFERS_COUNT_SUCCEED,(function(e){return{shopId:e.shopId,buyerId:e.buyerId,count:e.count}})),e(ms,Ts.GET_BATCH_PENDING_OFFERS_COUNT_SUCCEED,(function(e){return{records:e.records}})),e(ms,Ts.SET_CURRENT_CONVERSATION_ID,(function(e){return{conversationId:e.conversationId,previousId:e.previousId}})),e(ms,Ts.UPDATE_SERVICE_DOWN_STATUS,(function(e){return{flag:e.flag,alert:e.alert,list:e.list,close:e.close}})),e(ms,Ts.UPDATE_CONVERSATION_FILTER_REQUESTED,(function(e){return{filter:e.filter}})),ms)),gi=mi.deleteConversationRequested,bi=mi.deleteConversationSucceeded,yi=mi.getConversationDetailRequested,Ri=mi.fakeConversationSucceeded,Ai=mi.fetchConversationsRequested,Di=mi.fetchConversationsSucceeded,Ci=mi.updateFetchConversationsStatus,Ii=mi.updateFetchConversationsDirection,Pi=mi.updateConversationTimestamp,Ni=mi.updateConversationFilter,wi=(mi.forwardConversationRequested,mi.massForwardConversationRequested,mi.markMessagesRequested),xi=mi.markMessagesSucceeded,Ui=mi.updateReadRequestData,Mi=mi.pinConversationRequested,ki=(mi.searchConversationsRequested,mi.resetSearchParams),Li=(mi.updateExistedResultIdMap,mi.updateCurrentConversationMode,mi.setCurrentConversationMode,mi.searchByCombinedApi,mi.toggleMultipleSelectionMode,mi.setSelectedConversationList,mi.updateSelectedConversationId,mi.selectedConversationsRequested,mi.conversationBatchOperateRequested,mi.setCurrentConversationCanRead),ji=mi.showConversationRequested,Gi=mi.resetConversationRequested,Fi=mi.showConversationSucceeded,Hi=mi.changeConversationStatusRequested,Vi=mi.fetchDegradeConversationsDetail,Bi=mi.conversationOperateRequested,Yi=mi.searchMoreResults,Wi=(mi.searchMoreSucceed,mi.setSearchStatus,mi.updateAccess),Qi=mi.showSearchedConversationRequested,qi=mi.locationMessage,Ki=mi.updateLocationMode,zi=mi.updateSyncTimeNow,Xi=mi.showNormalConversationSucceeded,Ji=mi.setNavigateToUnreadMessage,$i=mi.setNavigateToUnreadMessageId,Zi=mi.resetNavigateToUnreadMessageId,eu=mi.setConversationBeenDeleted,tu=mi.muteConversationRequested,ru=mi.getPendingOffersCountRequested,nu=mi.getPendingOffersCountSucceed,ou=mi.getBatchPendingOffersCountSucceed,au=mi.setCurrentConversationId,cu=mi.updateServiceDownStatus,su=mi.updateConversationFilterRequested,iu=At().mark(lu),uu=At().mark(du);function lu(e){var t,r,n,o,a;return At().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload.conversationId,c.prev=1,c.next=4,(0,_r.select)($s(t));case 4:return r=c.sent,n=r.shop_id,o=r.pinned,a={method:"PUT",parent:"conversations",parentId:t,resource:o?"unpin":"pin"},n&&(a.payload=JSON.stringify({shop_id:n})),c.next=11,(0,_r.call)(Ev,a);case 11:c.next=17;break;case 13:return c.prev=13,c.t0=c.catch(1),c.next=17,(0,_r.put)(o_({error:c.t0}));case 17:case"end":return c.stop()}}),iu,null,[[1,13]])}function du(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_r.takeEvery)(Mi,lu);case 2:case"end":return e.stop()}}),uu)}function pu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _u(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?pu(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pu(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var fu=function(t,r){var n=r.payload.conversationId,o=_u(_u({},t.conversationIdsMap),{},e({},n,!1)),a=new Set(t.conversationIds);a.delete(n);var c=Array.from(a),s=t.currentConversationId;return _u(_u({},t),{},{currentConversationId:s===n?null:s,conversationIds:c,conversationIdsMap:o})},Eu=function(e,t){var r=t.payload.status;return _u(_u({},e),{},{status:r})},Su=function(e,t){var r=t.payload.direction;return _u(_u({},e),{},{direction:r})},Ou=function(e,t){var r=t.payload.conversationId;return _u(_u({},e),{},{previousConversationId:r})},hu=function(e,t){var r=t.payload.canRead;return _u(_u({},e),{},{currentConversationCanRead:r})};function vu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Tu(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?vu(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vu(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var mu,gu=function(e,t){var r=t.payload.conversationId,n=Tu({},e.draftHash);return delete n[r],Tu(Tu({},e),{},{draftHash:n})},bu=function(e){return Tu(Tu({},e),{},{draftHash:{}})},yu=function(e,t){var r=t.payload.conversationIds,n=void 0===r?[]:r,o=Tu({},e.draftHash);return n.forEach((function(e){delete o[e]})),Tu(Tu({},e),{},{draftHash:o})},Ru=function(e,t){var r=t.payload,n=r.conversationId,o=r.draft,a=Tu({},e.draftHash);return a[n]=o,Tu(Tu({},e),{},{draftHash:a})},Au=At().mark(Cu),Du=(e(mu={},D.ConversationTypeEnum.Agent,"receiveAgentMessageRequested"),e(mu,D.ConversationTypeEnum.Normal,"receiveMessageRequested"),mu);function Cu(e){var t,r,n;return At().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,r=e.type,n=Du[r],o.next=4,(0,_r.spawn)(Lu,t.request_id);case 4:return o.next=6,ra().put(oa()[n]({payload:{message:t}}));case 6:case"end":return o.stop()}}),Au)}function Iu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pu(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Iu(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Iu(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Nu=function(t,r){var n=r.payload,o=n.medias,a=n.conversationId,c=t.mediaMap,s=(c[a]||[]).concat(Array.isArray(o)?o:[o]);return Pu(Pu({},t),{},{mediaMap:Pu(Pu({},c),{},e({},a,s))})},wu=function(t,r){var n=r.payload,o=n.id,a=n.conversationId,c=t.mediaMap,s=Yt(c[a])||[];return s.splice(o,1),Pu(Pu({},t),{},{mediaMap:Pu(Pu({},c),{},e({},a,s))})},xu=function(t,r){var n=r.payload.conversationId,o=t.mediaMap;return Pu(Pu({},t),{},{mediaMap:Pu(Pu({},o),{},e({},n,[]))})},Uu=function(e){e.sort((function(e,t){return parseInt(t.latest_message_id)-parseInt(e.latest_message_id)}))},Mu=function(e,t){var r=e.last_message_time_nano,n=e.next_timestamp_nano;return t&&!n&&(n=t.next_message_time_nano),{nextTimestampNano:n,oldestTimestampNano:n,latestTimestampNano:r}},ku=At().mark(Lu);function Lu(e){var t,r,n;return At().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,D.getItem)(e);case 2:(t=o.sent)&&(r=new Date,n=+r-+t,qv(Yv.MESSAGE_SOCKET,n),(0,D.removeItem)(e));case 4:case"end":return o.stop()}}),ku)}var ju=y(439).t,Gu=D.MessageTypes.MSG_TYPE_TEXT,Fu=function(e,r,n){var o=e.all||[],a=e.sending||[],s=e.failed||[],i=o.length,u=null;if(i){for(var l=0,d=null;l<i&&!d;){var p=e.all[l];(d=(0,t.denormalize)(p,c,{messages:n}))&&(d.type===D.MessageTypes.MSG_TYPE_SECURITY_TIPS||d.isFaking)&&(d=null),l++}d&&d.created_timestamp>Math.floor(r.last_message_time_nano/Math.pow(10,9))&&(u=(0,D.fillMessagePreview)(d))}if(!u){var _=r.latest_message_id,f=r.latest_message_content,E=r.latest_message_type,S=r.last_message_option,O=r.latest_message_source,h=r.last_message_time_nano;(u={id:_,content:f,type:E,message_option:S,source:O,to_shop_id:r.latest_message_to_shop_id}).created_at=new Date(h/1e6)+""}var v=u,T=v.id,m=v.message_option,g=a.includes(T)?D.MessageSendStatus.SENDING:s.includes(T)?D.MessageSendStatus.FAILED:u.send_status?D.MessageSendStatus.SUCCEED:null;return(0,D.hasTargetMessageOption)(m,D.MessageOption.MSG_OPT_CENSORED_BLACKLIST)&&(g=D.MessageSendStatus.FAILED,u.type=Gu,u.content={text:ju("common.blacklist.replaced_text")}),(0,D.hasTargetMessageOption)(m,D.MessageOption.MSG_OPT_CANCELORDER_WARNING_NOT_SEND)&&(g=D.MessageSendStatus.FAILED),u.send_status=g,u},Hu={MARK_AS_READ:"mark_as_read",MARK_AS_UNREAD:"mark_as_unread",DELETE_CONVERSATION:"delete_conversation",UPDATE_OFFER_STATUS:"update_offer_status",UPDATE_CONVERSATION:"update_conversation",UPDATE_USER_STATUS:"update_user_status",UPDATE_CONVERSATION_FLAG:"update_conversation_flag",FORCE_LOGOUT:"force_logout",UPDATE_RATING_CARD_STATUS:"update_rating_card_status",PULL_NOTIFICATION:"pull_notification",PIN_CONVERSATION:"pin_conversation",UNPIN_CONVERSATION:"unpin_conversation",MASS_READ:"mass_read",MASS_UNREAD:"mass_unread",MASS_PIN:"mass_pin",MASS_UNPIN:"mass_unpin",MASS_CLOSE:"mass_close",MASS_ACTIVATE:"mass_activate",VIDEO_UPLOAD:"video_upload",MARK_AS_REPLIED:"mark_as_replied",MARK_AS_UNREPLIED:"mark_as_unreplied",CHAT_DELETE_MSG:"chat_delete_msg",FAQ_SESSION_UPDATE:"faq_session_update",MUTE_CONVERSATION:"mute_conversation",UNMUTE_CONVERSATION:"unmute_conversation"},Vu=At().mark(Yu),Bu=At().mark(Wu);function Yu(e){var t,r;return At().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload.conversationId,n.prev=1,n.next=4,(0,_r.select)(Zs(t));case 4:return r=n.sent,n.next=7,(0,_r.call)(Ev,{method:"DELETE",resource:"conversations",id:t,params:{shop_id:r}});case 7:n.next=13;break;case 9:return n.prev=9,n.t0=n.catch(1),n.next=13,(0,_r.put)(o_({error:n.t0}));case 13:case"end":return n.stop()}}),Vu,null,[[1,9]])}function Wu(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_r.takeEvery)(gi,Yu);case 2:case"end":return e.stop()}}),Bu)}const Qu=e({},Ts.DELETE_CONVERSATION_SUCCEEDED,fu);var qu,Ku=At().mark(rl),zu=At().mark(nl),Xu=At().mark(ol),Ju=At().mark(al),$u=At().mark(cl),Zu=At().mark(sl);function el(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function tl(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?el(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):el(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function rl(e){var t,r,n,o,a,c,s,i,u,l,d,p,_;return At().wrap((function(f){for(;;)switch(f.prev=f.next){case 0:if(t=e.conversation,r=e.isSubAccount,n=t.id,o=t.to_id,a={},r){f.next=8;break}return f.next=6,(0,_r.call)(D.getItem,"mini-sc_redirect");case 6:(c=f.sent)&&(s=c.orderId,i=c.productId,u=c.conversationId,l=c.shopId,parseInt(n)===parseInt(u)&&(s?a={order_id:parseInt(s)}:i?a={product_id:parseInt(i)}:l&&(a={shop_id:parseInt(l)})));case 8:return f.next=10,(0,_r.call)(Ev,{method:"POST",parent:"conversation",resource:"enter",payload:JSON.stringify(tl({conversation_id:n,to_id:o},a))});case 10:if(d=f.sent,p=d.faq_session_id,_=d.session_expiry_timestamp,r){f.next=16;break}return f.next=16,ra().put(oa().fetchFaqSessionSucceed({payload:{conversationId:n,faqSessionId:p,sessionExpiryTime:_}}));case 16:case"end":return f.stop()}}),Ku)}function nl(e){var t,r,n,o,a,c,s,i,u,l,d,p,_,f,E,S,O,h,v,T,m,g,b,y;return At().wrap((function(R){for(;;)switch(R.prev=R.next){case 0:return t=e.conversation,e.previousId,r=e.messageId,n=e.messageList,e.sourceInfo,a=(o=t).id,c=o.lack,R.next=4,(0,_r.select)(Kn);case 4:if((s=R.sent)||!c){R.next=11;break}return R.next=8,(0,_r.call)(Gl,{payload:{conversationIds:[a]}});case 8:return R.next=10,(0,_r.select)($s(a));case 10:t=R.sent;case 11:return u=(i=t).faking,l=i.status,d=i.to_id,p=i.shop_id,_=i.latest_message_id,f=i.to_shop_id,E=i.unread_count,S=i.last_read_message_id,UT({shopId:p,operation:D.TrackerOperation.IMPRESSION,trackerName:"impressionChatRoom",data:{convo_userid:d,conversation_id:a}}),R.next=15,(0,_r.spawn)(rl,{conversation:t,isSubAccount:s});case 15:return R.next=17,(0,_r.select)(lO);case 17:if((O=R.sent)&&O[p]||!s){R.next=22;break}return R.next=22,(0,_r.call)(DO,gO({shopId:p}));case 22:return R.next=24,(0,_r.put)(Dc({userId:d,shopId:p,buyerShopId:f}));case 24:return R.next=26,(0,_r.put)(Zi());case 26:return h="number"==typeof E&&E>0&&!r,R.next=29,(0,_r.put)(Ji({isNavigateToUnreadMessage:h}));case 29:return R.next=31,ra().put(oa().fetchMessagesRequested({payload:{conversationId:a,messageId:r||(h?S:void 0),direction:r||h?"around":"older",messageList:n,reset:!0}}));case 31:return R.next=33,(0,_r.put)(ru({shopId:p,buyerId:d}));case 33:return R.next=35,ra().call(oa().handleCurrentConversationChange({payload:a}));case 35:if(v=R.sent,!(!u&&"closed"!==l&&E>0||v)){R.next=41;break}return T=v||_,R.next=41,(0,_r.put)(wi({conversationId:a,isRead:!0,latestMessageId:T}));case 41:if(m={},!s){R.next=50;break}return R.next=45,(0,_r.call)(Vp,{payload:{shopId:p}});case 45:return g=R.sent,b=g.auth_names,y=void 0===b?[]:b,R.next=50,(0,_r.put)(Wi({access:y}));case 50:return R.next=52,(0,_r.select)(pp(p));case 52:if(m=R.sent){R.next=59;break}return R.next=56,(0,_r.call)(Ap,{payload:{shopId:p}});case 56:return m=R.sent,R.next=59,(0,_r.put)(Gr({name:"shops",id:p,record:tl({},m)}));case 59:return R.next=63,ra().put(oa().messageSyncUpdate({payload:{conversation:t}}));case 63:return R.next=65,(0,_r.put)(eu({conversationBeenDeleted:!1}));case 65:case"end":return R.stop()}}),zu)}function ol(e){var t,r,n,o,a,c,s;return At().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,r=t.conversation,n=t.previousId,o=t.messageId,a=t.messageList,c=t.sourceInfo,s=void 0===c?{}:c,i.prev=1,i.next=4,(0,_r.put)(cu({flag:!1}));case 4:return i.next=6,(0,_r.spawn)(nl,{conversation:r,previousId:n,messageId:o,messageList:a,sourceInfo:s});case 6:i.next=11;break;case 8:i.prev=8,i.t0=i.catch(1),console.log("*** Show Conversation Failed: ",i.t0);case 11:case"end":return i.stop()}}),Xu,null,[[1,8]])}function al(e){var t,r,n;return At().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,r=t.conversationId,n=t.previousId,o.next=3,(0,_r.put)(Fi({conversationId:r,previousId:n}));case 3:case"end":return o.stop()}}),Ju)}function cl(e){var t,r,n;return At().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return(t=e.payload).type,r=t.conversationId,n=t.previousId,o.next=4,(0,_r.put)(Xi({conversationId:r,previousId:n}));case 4:case"end":return o.stop()}}),$u)}function sl(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_r.takeLatest)(ji,ol);case 2:return e.next=4,(0,_r.takeEvery)(au,al);case 4:return e.next=6,(0,_r.takeEvery)(Fi,cl);case 6:case"end":return e.stop()}}),Zu)}const il=(e(qu={},Ts.SHOW_NORMAL_CONVERSATION_SUCCEEDED,(function(e,t){var r=t.payload,n=r.conversationId;return r.previousId,tl(tl({},e),{},{currentConversationId:n})})),e(qu,Ts.RESET_CONVERSATION_REQUESTED,(function(e){return tl(tl({},e),{},{currentConversationId:null})})),e(qu,Ts.SET_NAVIGATE_TO_UNREAD_MESSAGE,(function(e,t){var r=t.payload.isNavigateToUnreadMessage;return tl(tl({},e),{},{isNavigateToUnreadMessage:r})})),e(qu,Ts.SET_NAVIGATE_TO_UNREAD_MESSAGE_ID,(function(e,t){var r=t.payload.navigateToUnreadMessageId;return tl(tl({},e),{},{navigateToUnreadMessageId:r})})),e(qu,Ts.RESET_NAVIGATE_TO_UNREAD_MESSAGE_ID,(function(e){return tl(tl({},e),{},{navigateToUnreadMessageId:""})})),qu);function ul(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ll(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?ul(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ul(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var dl=At().mark(_l),pl=At().mark(fl);function _l(e){var t,r;return At().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload.filter,n.prev=1,n.next=4,(0,_r.select)(Qn);case 4:return r=n.sent,D.LS.setItem("mini-filter",JSON.stringify({filter:t,userid:r.id})),n.next=8,(0,_r.put)(Ni({filter:t}));case 8:n.next=12;break;case 10:n.prev=10,n.t0=n.catch(1);case 12:case"end":return n.stop()}}),dl,null,[[1,10]])}function fl(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_r.takeEvery)(su,_l);case 2:case"end":return e.stop()}}),pl)}const El=e({},Ts.UPDATE_CONVERSATION_FILTER,(function(e,t){var r=t.payload.filter;return ll(ll({},e),{},{filter:r})}));function Sl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ol(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Sl(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Sl(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var hl,vl=At().mark(ml),Tl=At().mark(gl);function ml(e,t,r,n,o){var a,c,s,i,u,l,d,p,_,f,E,S,O,h,v;return At().wrap((function(m){for(;;)switch(m.prev=m.next){case 0:return a=T("conversations",e),m.next=3,(0,_r.select)(Bs);case 3:return c=m.sent,m.next=6,(0,_r.select)((function(e){return e.entityReducer}));case 6:return s=m.sent,i=s.conversations,u=void 0===i?{}:i,l=s.shops,d=void 0===l?{}:l,m.next=13,(0,_r.select)(jn);case 13:return m.sent,m.next=16,(0,_r.select)(Fs);case 16:return m.sent,p=[],c&&c.faking?(_=c.id,p=aT({previousConversationIds:t,fetchedConversationIds:a.result,direction:n,fakeConversationId:_,sortByWaitTime:!1})):p=aT({previousConversationIds:t,fetchedConversationIds:a.result,direction:n,sortByWaitTime:!1}),f=p.length<D.persistLimit?null:Yt(p).splice(0,D.persistLimit),m.next=23,(0,_r.put)(jr({entities:{persist:f}}));case 23:return m.next=25,(0,_r.call)(ZO,u,e,"conversations");case 25:return m.next=27,(0,_r.spawn)(gl,e);case 27:if(!(E=o&&o.length)){m.next=33;break}return m.next=31,(0,_r.call)(ZO,d,o,"shops");case 31:return m.next=33,(0,_r.put)(vp({shopIds:o.map((function(e){return e.id}))}));case 33:return m.next=35,(0,_r.put)(pr());case 35:if(!(S=iT(f,r,t))||!S.changed){m.next=47;break}if(h=S.lastConversationId,"older"!==n&&"reset"!==n){m.next=42;break}O=a.entities.conversations&&a.entities.conversations[h],m.next=46;break;case 42:return m.next=44,(0,_r.select)(xs);case 44:v=m.sent,O=v.find((function(e){return e.id===h}));case 46:O&&(E?(S.oldestReceivedMessageId=O.latest_message_id,S.oldestMessageRegion=O.last_message_region):S.oldestTimestampNano=O.last_msg_time_nano);case 47:return m.abrupt("return",{persistObj:S,resultConversationIds:p});case 48:case"end":return m.stop()}}),vl)}function gl(e){var t,r,n,o,a,c,s,i,u,l,d,p,_,f;return At().wrap((function(E){for(;;)switch(E.prev=E.next){case 0:if(t=[],e.forEach((function(e){(0,D.hasTargetMessageOption)(e.last_message_option,D.MessageOption.MSG_OPT_RECALL)&&t.push({conversation_id:e.id,shop_id:e.shop_id})})),!t.length){E.next=27;break}return E.next=5,(0,_r.call)(Ev,{method:"POST",parent:"conversation",resource:"last_msg_in_conversation_batch",payload:JSON.stringify({pairs:t})});case 5:if(r=E.sent,!(n=Object.keys(r)).length){E.next=27;break}o={};case 9:if(!n.length){E.next=24;break}if(!(a=n.shift())){E.next=22;break}return E.next=14,(0,_r.select)($s(a));case 14:if(c=E.sent,(0,D.hasTargetMessageOption)(c.last_message_option,D.MessageOption.MSG_OPT_RECALL)){E.next=17;break}return E.abrupt("continue",9);case 17:s=r[a],i=s.id,u=s.type,l=s.content,d=s.to_shop_id,p=s.created_at,_=(0,D.getChatBotParams)(s,{updateMaxGeneralOptionHideTime:c.shop_id!==d}),f=(0,D.getCrmPreviewParams)(s),o[a]=Ol(Ol({latest_message_id:i,latest_message_type:u,latest_message_content:l,last_message_time:p},_),f);case 22:E.next=9;break;case 24:if((0,D.checkEmptyObject)(o)){E.next=27;break}return E.next=27,(0,_r.put)(Hr({name:"conversations",records:o}));case 27:case"end":return E.stop()}}),Tl)}var bl=At().mark(kl),yl=At().mark(Ll),Rl=At().mark(jl),Al=At().mark(Gl),Dl=At().mark(Fl),Cl=At().mark(Hl);function Il(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pl(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Il(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Il(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Nl=["pinned","unreplied"],wl=function(e,t,r,n,o,a,c){var s={},i="older"===e?r:"latest"===e?n:"",u=Nl.includes(o);return s.resource=u?"conversation/list":"conversations",s.params={next_timestamp_nano:i,direction:"latest"===e&&i?"latest":"older"},"unread"===o&&(s.params.unread_only=!0),u&&(s.params.type=o),new Promise((function(e,t){Ev(s).then((function(t){var r=t.conversations,n=void 0===r?[]:r,o=t.page_result;e([n,void 0===o?{}:o])})).catch((function(e){t(e)}))}))},xl=function(e){e.source;var t=e.filter,r=e.shopId,n=e.direction,o=e.oldestMessageRegion,a=e.latestMessageRegion,c=e.oldestReceivedMessageId,s=e.latestReceivedMessageId,i=e.subAccountNextTimestampNano,u=e.subAccountLastMessageNano,l=(e.hasSortParams,""),d="",p="";"older"===n?(l=o,d=c,p=i):"latest"===n&&(l=a,d=s,p=u);var _={direction:"latest"===n?"latest":"older"};return r&&(_.shop_id=r),l&&(_.last_message_region=l),d&&(_.last_received_message_id=d),_.next_timestamp_nano=p||0,t&&["unread","pinned","unreplied"].includes(t)&&(_.type=t),new Promise((function(e,t){Ev({parent:"subaccount",resource:"conversations",params:_}).then((function(t){var r=t.conversations;e(void 0===r?[]:r)})).catch((function(e){t(e)}))}))},Ul=function(e){return new Promise((function(t,r){Ev({subServer:"coreapi",parent:"conversation_list_by_ids",params:{conversation_ids:JSON.stringify(e)}}).then((function(e){var r=e.conversations;t(void 0===r?[]:r)})).catch((function(e){r(e)}))}))},Ml=function(e){return e=e.filter((function(e){return e})),new Promise((function(t){Ev({parent:"setting",resource:"auto_translations",params:{shop_ids:JSON.stringify(e)}}).then((function(e){var r=e.auto_translations;t(void 0===r?[]:r)})).catch((function(){t([])}))}))};function kl(t){var r,n,o,a,c,s,i,u,l,d,p,_,f,E,S,O,h,v,T,m,g,b,y,R,A,D,C,I,P,N,w,x,U,M,k,L,j,G,F,H,V,B,Y,W,Q,q,K;return At().wrap((function(z){for(;;)switch(z.prev=z.next){case 0:return r=t.list,n=t.needFetchOfferCount,o=void 0!==n&&n,a=t.conversationId,c=t.handleSave,z.next=3,(0,_r.select)(Kn);case 3:s=z.sent,i=[],u=[],l=[],d=[],p={},_=0;case 10:if(!(_<r.length)){z.next=26;break}if(f=r[_],E=f.id,S=f.conversation_id,O=f.type,h=f.content,v=f.latest_message_type,T=f.latest_message_content,m=f.to_id,g=f.shop_id,b=v||O,y=T||h,R=S||E,o&&d.push({buyer_id:m,shop_id:g}),!["order","offer","voucher"].includes(b)){z.next=23;break}return z.next=19,(0,_r.select)(Zs(R));case 19:A=z.sent,D=!1,"order"===b&&s&&A!==y.shop_id&&(D=!0),D||(C="".concat(b,"_id"),I=y[C],P="order"===b?u:"offer"===b?i:l,0!==(N=y.shop_id)&&0!==parseInt(I)&&(P.push(e({shop_id:N},C,parseInt(I))),p[E]={type:b,itemId:I,conversationId:R}));case 23:_++,z.next=10;break;case 26:if(Object.keys(p).length||d.length){z.next=28;break}return z.abrupt("return");case 28:return w={},z.next=31,(0,_r.select)($n);case 31:if(x=z.sent){z.next=37;break}if(!a){z.next=37;break}return z.next=36,(0,_r.select)(Zs(a));case 36:x=z.sent;case 37:return x&&(w={params:{shop_id:x}}),z.prev=38,z.next=41,(0,_r.call)(Ev,Pl(Pl({method:"POST",parent:"chat_preview",resource:"detail"},w),{},{payload:JSON.stringify({offer_preview_req:i,order_preview_req:u,voucher_preview_req:l,offer_count_req:d})}));case 41:U=z.sent,z.next=47;break;case 44:z.prev=44,z.t0=z.catch(38),U={};case 47:if(k=(M=U).vouchers,L=void 0===k?[]:k,j=M.offers,G=void 0===j?[]:j,F=M.orders,H=void 0===F?[]:F,V=M.buyer_offer_counts,B=void 0===V?[]:V,L.length||G.length||H.length||B.length){z.next=50;break}return z.abrupt("return");case 50:Y={},W=Object.keys(p),Q=At().mark((function e(){var t,r,n,o,a,c,s,i,u;return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=K[q],r=void 0,n=p[t],o=n.type,a=n.itemId,c=n.conversationId,e.next=5,(0,_r.select)(Si(c));case 5:s=e.sent,e.t0=o,e.next="voucher"===e.t0?9:"offer"===e.t0?12:"order"===e.t0?15:17;break;case 9:return i=L.find((function(e){return e.id===a})),r=i?Pl(Pl({},i),Re(i)):i,e.abrupt("break",17);case 12:return u=G.find((function(e){return e.id===a})),r=u?Pl(Pl({},u),{},{offer_price:oe(u.offer_price,s)}):u,e.abrupt("break",17);case 15:return r=H.find((function(e){return e.id===a})),e.abrupt("break",17);case 17:r&&(Y[t]=r);case 18:case"end":return e.stop()}}),e)})),q=0,K=W;case 54:if(!(q<K.length)){z.next=59;break}return z.delegateYield(Q(),"t1",56);case 56:q++,z.next=54;break;case 59:c&&c({records:Y,buyerOfferCounts:B});case 60:case"end":return z.stop()}}),bl,null,[[38,44]])}function Ll(e){var t,r;return At().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t={},r={},n.next=4,(0,_r.call)(kl,{list:e,needFetchOfferCount:!0,handleSave:function(e){var n=e.records,o=e.buyerOfferCounts;Object.keys(n).forEach((function(e){t[e]={latest_message_content:n[e]}})),o.forEach((function(e){var t=e.shop_id,n=e.buyer_id,o=e.pending_count,a="".concat(t,"_").concat(n);r[a]=o}))}});case 4:return n.next=6,(0,_r.put)(Hr({name:"conversations",records:t}));case 6:return n.next=8,(0,_r.put)(ou({records:r}));case 8:case"end":return n.stop()}}),yl)}function jl(e){var t,r,n,o,a,c,s,i,u,l,d,p,_,f,E,S,O,h,v,T,m,g,b,y,R,C,I,P,N,w,x,U,M,k,L,j,G,F,H,V,B,Y,W,Q,q,K,z,X,J,$,Z,ee,te,re,ne,oe,ae,ce,se,ie,ue,le,de,pe,_e,fe,Ee,Se,Oe,he,ve;return At().wrap((function(Te){for(;;)switch(Te.prev=Te.next){case 0:return t=e.payload,r=t.direction,n=t.noPending,o=t.source,a="latest"===r,c=null,s=!1,i=!1,Te.next=7,(0,_r.select)(Fs);case 7:return u=Te.sent.toLowerCase(),Te.next=10,(0,_r.select)(jn);case 10:return Te.sent,Te.next=13,(0,_r.select)(io);case 13:return l=Te.sent,Te.next=16,(0,_r.select)(Kn);case 16:if(d=Te.sent,p=!d,_=o===D.ConversationSource.SYNC,"reset"!==r){Te.next=24;break}return Te.next=22,ra().put(oa().resetConversationQueue({isLazy:!0}));case 22:return Te.next=24,(0,_r.put)(Di({conversationIds:[],oldestMessageRegion:"",latestMessageRegion:"",oldestReceivedMessageId:"",latestReceivedMessageId:"",maxLatestReceivedMessageId:"",oldestTimestampNano:"",latestTimestampNano:"",maxLatestTimestampNano:"",direction:"reset",hasMore:!0,status:D.DataFetchStatus.SUCCEED,persist:null,shouldFetchByTimestamp:p,subAccountNextTimestampNano:"",subAccountLastMessageNano:""}));case 24:return Te.next=26,(0,_r.select)((function(e){return e.conversationReducer}));case 26:if(f=Te.sent,E=f.oldestTimestampNano,S=f.latestTimestampNano,O=f.maxLatestTimestampNano,h=f.oldestReceivedMessageId,v=f.latestReceivedMessageId,T=f.maxLatestReceivedMessageId,m=f.hasMore,g=f.persist,b=f.conversationIds,y=f.status,R=f.syncFetchException,C=f.currentConversationId,I=f.oldestMessageRegion,P=f.latestMessageRegion,N=f.nextMessageTimeNano,w=f.subAccountNextTimestampNano,x=f.subAccountLastMessageNano,U="reset"===r||(p?!E:!h)&&"older"===r,Te.prev=45,"older"===r&&(p?"0"===E:!m)){Te.next=165;break}if(n){Te.next=50;break}return Te.next=50,(0,_r.put)(Ci({status:U?D.DataFetchStatus.INIT_PENDING:D.DataFetchStatus.PENDING}));case 50:if(M=[],k={},!p){Te.next=61;break}return Te.next=55,(0,_r.call)(wl,r,N,E,S,u,s,o);case 55:L=Te.sent,j=A(L,2),M=j[0],k=j[1],Te.next=64;break;case 61:return Te.next=63,(0,_r.call)(xl,{source:o,shopId:c,direction:r,oldestMessageRegion:I,latestMessageRegion:P,oldestReceivedMessageId:h,latestReceivedMessageId:v,filter:u,subAccountNextTimestampNano:w,subAccountLastMessageNano:x,hasSortParams:s});case 63:M=Te.sent;case 64:if(!(G=M.length)){Te.next=161;break}if("reset"===r&&(!p||Nl.includes(u))){Te.next=76;break}if(F=M[G-1],H="older"===r,p?(V=H?E:S,B=H?F.next_timestamp_nano:F.last_message_time_nano):(V=H?h:v,B=F.latest_message_id),!V||!B){Te.next=76;break}if(H?B<V:B>V){Te.next=76;break}return Te.next=75,(0,_r.put)(Di({direction:r,status:D.DataFetchStatus.SUCCEED,hasMore:a,persist:g,oldestReceivedMessageId:h,latestReceivedMessageId:v,oldestMessageRegion:I,latestMessageRegion:P,maxLatestReceivedMessageId:v,conversationIds:b,oldestTimestampNano:E,latestTimestampNano:S,maxLatestTimestampNano:S,shouldFetchByTimestamp:p,subAccountNextTimestampNano:w,subAccountLastMessageNano:x}));case 75:return Te.abrupt("return");case 76:if(l||d){Te.next=86;break}return Te.next=79,(0,_r.select)(qf);case 79:if("enabled"===Te.sent){Te.next=86;break}return Y=Array.from(new Set(M.map((function(e){return e.to_shop_id})))),Te.next=84,(0,_r.call)(Ml,Y);case 84:W=Te.sent,M=M.map((function(e){var t=W.find((function(t){return t.shop_id===e.to_shop_id}));return Pl(Pl({},e),{},{translationAccess:!!t&&t.is_auto_translation})}));case 86:if(Q={},M.forEach((function(e){Q[e.id]=!0})),i?(K=Yt(M),Uu(K),q=K[0]):(Uu(M),q=M[0]),z=Mu(q,k.next_cursor),X=q.latest_message_id,J={status:D.DataFetchStatus.SUCCEED,direction:r,conversationIdsMap:Q,shouldFetchByTimestamp:p,latestMessageRegion:q.last_message_region,maxLatestReceivedMessageId:!T||T<X?X:T},!p){Te.next=107;break}return ee=z.oldestTimestampNano,te=z.latestTimestampNano,Te.next=96,(0,_r.select)((function(e){return e.conversationReducer}));case 96:return re=Te.sent,ne=re.conversationIds,oe=re.persist,Te.next=101,(0,_r.call)(ml,M,ne,oe,r);case 101:ae=Te.sent,ce=ae.persistObj,se=ae.resultConversationIds,J=Object.assign({},J,{sortByWaitTime:i,nextMessageTimeNano:null===($=k)||void 0===$||null===(Z=$.next_cursor)||void 0===Z?void 0:Z.next_message_time_nano,oldestTimestampNano:ee,latestTimestampNano:te,persist:ce,conversationIds:se,maxLatestTimestampNano:!O||O<te?te:O}),Te.next=127;break;case 107:return ie=[],ue=[],Te.next=111,(0,_r.select)(_p);case 111:if(le=Te.sent,M.forEach((function(e){!le.includes(e.shop_id)&&ue.push(e.shop_id)})),!ue.length){Te.next=117;break}return Te.next=116,(0,_r.call)(Hp,{shopIds:Yt(new Set(ue))});case 116:ie=Te.sent;case 117:return Te.next=119,(0,_r.select)((function(e){return e.conversationReducer}));case 119:return de=Te.sent,pe=de.conversationIds,_e=de.persist,Te.next=124,(0,_r.call)(ml,M,pe,_e,r,ie);case 124:fe=Te.sent,Ee=M[G-1],J=Object.assign({},J,{hasMore:!0,conversationIdsMap:Q,persist:fe.persistObj,oldestMessageRegion:Ee.last_message_region,oldestReceivedMessageId:Ee.latest_message_id,latestReceivedMessageId:X,conversationIds:fe.resultConversationIds,subAccountNextTimestampNano:q.next_timestamp_nano,subAccountLastMessageNano:q.last_message_time_nano});case 127:if(!_){Te.next=139;break}if(!C||!Q[C]){Te.next=139;break}return Se=M.find((function(e){return e.id===C})),Oe=(Se||{}).latest_message_id,Te.next=133,(0,_r.select)(mf);case 133:if(he=Te.sent,ve=he.length?he[he.length-1].id:"",Oe===ve){Te.next=139;break}return Te.next=139,ra().put(oa().fetchMessagesRequested({payload:{conversationId:null==Se?void 0:Se.id,reset:!0},isLazy:!0}));case 139:return Te.next=141,(0,_r.put)(Di(J));case 141:return Te.next=143,(0,_r.spawn)(Ll,M);case 143:if(!a){Te.next=156;break}if(!p){Te.next=152;break}if("0"===z.nextTimestampNano){Te.next=150;break}return Te.next=148,(0,_r.put)(Ai({direction:r,noPending:!0}));case 148:Te.next=150;break;case 150:Te.next=154;break;case 152:return Te.next=154,(0,_r.put)(Ai({direction:r,noPending:!0}));case 154:Te.next=159;break;case 156:if(!(J.conversationIds.length<=20)){Te.next=159;break}return Te.next=159,(0,_r.put)(Ai({direction:"older",noPending:!0}));case 159:Te.next=163;break;case 161:return Te.next=163,(0,_r.put)(Di({direction:r,status:D.DataFetchStatus.SUCCEED,hasMore:a,persist:g,oldestReceivedMessageId:h,latestReceivedMessageId:v,oldestMessageRegion:I,latestMessageRegion:P,maxLatestReceivedMessageId:T,oldestTimestampNano:E,latestTimestampNano:S,maxLatestTimestampNano:O,shouldFetchByTimestamp:p,syncFetchException:_?R+1:0,nextMessageTimeNano:N,subAccountNextTimestampNano:w,subAccountLastMessageNano:x}));case 163:Te.next=168;break;case 165:if(y===D.DataFetchStatus.INIT_FAILED){Te.next=168;break}return Te.next=168,(0,_r.put)(Ci({status:D.DataFetchStatus.SUCCEED}));case 168:Te.next=179;break;case 170:if(Te.prev=170,Te.t0=Te.catch(45),!(Te.t0 instanceof Tt||Te.t0 instanceof ct)){Te.next=177;break}return Te.next=175,(0,_r.put)(Ci({status:D.DataFetchStatus.TEMPORY_ERROR}));case 175:Te.next=179;break;case 177:return Te.next=179,(0,_r.put)(Ci({status:U?D.DataFetchStatus.INIT_FAILED:D.DataFetchStatus.FAILED}));case 179:case"end":return Te.stop()}}),Rl,null,[[45,170]])}function Gl(e){var t,r,n,o,a;return At().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(t=e.payload.conversationIds,r=void 0===t?[]:t,c.prev=1,r.length){c.next=6;break}return c.next=5,(0,_r.select)(js);case 5:r=c.sent;case 6:if(!r.length){c.next=16;break}return c.next=9,(0,_r.call)(Ul,r.slice(0,20));case 9:if(n=c.sent,!(o=n.filter((function(e){return!e.lack}))).length){c.next=16;break}return a={},o.forEach((function(e){a[e.id]=e})),c.next=16,(0,_r.put)(Hr({name:"conversations",records:a}));case 16:c.next=20;break;case 18:c.prev=18,c.t0=c.catch(1);case 20:case"end":return c.stop()}}),Al,null,[[1,18]])}function Fl(e){var t,r,n,o,a;return At().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,r=t.shopId,n=t.buyerId,c.prev=1,c.next=4,(0,_r.call)(Ev,{parent:"offer",resource:"count",params:{shop_id:r,buyer_id:n}});case 4:return o=c.sent,a=o.pending_count,c.next=8,(0,_r.put)(nu({shopId:r,buyerId:n,count:a}));case 8:c.next=14;break;case 10:return c.prev=10,c.t0=c.catch(1),c.next=14,(0,_r.put)(nu({shopId:r,buyerId:n,count:0}));case 14:case"end":return c.stop()}}),Dl,null,[[1,10]])}function Hl(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_r.takeEvery)(Ai,jl);case 2:return e.next=4,(0,_r.takeEvery)(Vi,Gl);case 4:return e.next=6,(0,_r.takeEvery)(ru,Fl);case 6:case"end":return e.stop()}}),Cl)}const Vl=(e(hl={},Ts.FETCH_CONVERSATIONS_SUCCEEDED,(function(e,t){var r=t.payload,n=r.conversationIds,o=r.conversationIdsMap,a=void 0===o?{}:o,c=r.oldestMessageRegion,s=r.latestMessageRegion,i=r.oldestReceivedMessageId,u=r.latestReceivedMessageId,l=r.direction,d=void 0===l?"reset":l,p=r.status,_=r.hasMore,f=r.oldestTimestampNano,E=r.latestTimestampNano,S=r.persist,O=r.shouldFetchByTimestamp,h=r.maxLatestReceivedMessageId,v=r.maxLatestTimestampNano,T=r.syncFetchException,m=void 0===T?0:T,g=r.nextMessageTimeNano,b=r.sortByWaitTime,y=r.subAccountNextTimestampNano,R=r.subAccountLastMessageNano,A=Pl(Pl({},e),{},{status:p,hasMore:_,persist:S,conversationIds:n||e.conversationIds,conversationIdsMap:"reset"===d?a:Pl(Pl({},e.conversationIdsMap),a),direction:"latest"===d?d:"older",maxLatestReceivedMessageId:h,maxLatestTimestampNano:v,syncFetchException:m,nextMessageTimeNano:g});switch(d){case"reset":O?(A.latestTimestampNano=E,A.oldestTimestampNano=f):(A.oldestReceivedMessageId=i,A.latestReceivedMessageId=u,A.subAccountNextTimestampNano=y,A.subAccountLastMessageNano=R);break;case"latest":O?A.latestTimestampNano=E>e.latestTimestampNano?E:e.latestTimestampNano:(A.latestReceivedMessageId=u,A.subAccountLastMessageNano=R);break;case"older":O?(A.oldestTimestampNano=f,b&&(A.latestTimestampNano=E)):(A.oldestReceivedMessageId=i,A.subAccountNextTimestampNano=y)}return c&&(A.oldestMessageRegion=c),s&&(A.latestMessageRegion=s),A})),e(hl,Ts.UPDATE_FETCH_CONVERSATIONS_STATUS,Eu),e(hl,Ts.UPDATE_FETCH_CONVERSATIONS_DIRECTION,Su),e(hl,Ts.UPDATE_CONVERSATION_TIMESTAMP,(function(e,t){var r=t.payload,n=r.latestTimestampNano,o=r.oldestTimestampNano;return Pl(Pl({},e),{},{latestTimestampNano:n,oldestTimestampNano:o})})),e(hl,Ts.GET_PENDING_OFFERS_COUNT_SUCCEED,(function(t,r){var n=r.payload,o=n.shopId,a=n.buyerId,c=n.count,s="".concat(o,"_").concat(a);return Pl(Pl({},t),{},{pendingOffersCount:Pl(Pl({},t.pendingOffersCount),{},e({},s,c))})})),e(hl,Ts.GET_BATCH_PENDING_OFFERS_COUNT_SUCCEED,(function(e,t){var r=t.payload.records;return Pl(Pl({},e),{},{pendingOffersCount:Pl(Pl({},e.pendingOffersCount),r)})})),hl);var Bl;function Yl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}const Wl=(e(Bl={},Ts.SET_CURRENT_CONVERSATION_CAN_READ,hu),e(Bl,Ts.UPDATE_SERVICE_DOWN_STATUS,(function(t,r){var n=r.payload,o=n.flag,a=n.alert,c=n.list,s=n.close,i=function(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Yl(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Yl(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},t);return void 0!==o&&(i.serviceDown=o),void 0!==a&&(i.serviceDownAlert=a),void 0!==c&&(i.serviceDownList=c),void 0!==s&&(i.manualClose=s),i})),Bl);var Ql,ql=At().mark(Jl),Kl=At().mark($l);function zl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Xl(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?zl(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zl(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Jl(e){var t,r,n,o,a,c,s,i,u,l,d,p,_,f,E,S,O,h;return At().wrap((function(v){for(;;)switch(v.prev=v.next){case 0:return t=e.payload,r=t.conversationId,n=t.isRead,o=t.latestMessageId,v.prev=1,a=Date.now()+"",c=n?"read":"unread",v.next=6,(0,_r.select)($s(r));case 6:if(s=v.sent,i=s.shop_id,u=s.last_read_message_id,!n){v.next=16;break}return v.next=12,(0,_r.select)($s(r));case 12:if(l=v.sent,d=l.unread_count,u!==o||d){v.next=16;break}return v.abrupt("return");case 16:if(p=n?{last_read_message_id:o}:{},i&&(p.shop_id=i),!n){v.next=21;break}return v.next=21,(0,_r.put)(Ui({requestId:a}));case 21:return v.next=23,(0,_r.call)(Ev,{method:"PUT",parent:"conversations",parentId:r,resource:c,params:{request_id:a},payload:JSON.stringify(Xl({},p))});case 23:if(!n){v.next=41;break}return v.next=26,(0,_r.select)((function(e){return e.conversationReducer}));case 26:return _=v.sent,f=_.conversationMark,E="socket"===f[r],v.next=31,(0,_r.put)(xi({conversationId:r,markType:E?"":"api"}));case 31:if(E){v.next=41;break}return v.next=34,(0,_r.select)($s(r));case 34:return S=v.sent,O=S.unread_count,h=S.shop_id,v.next=39,(0,_r.put)(Gr({name:"conversations",id:r,record:{last_read_message_id:o,unread_count:0}}));case 39:return v.next=41,(0,_r.put)(hn({type:ln.MARK_AS_READ,conversation:{id:r,shop_id:h,unread_count:O}}));case 41:v.next=47;break;case 43:return v.prev=43,v.t0=v.catch(1),v.next=47,(0,_r.put)(o_({error:v.t0}));case 47:case"end":return v.stop()}}),ql,null,[[1,43]])}function $l(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_r.takeEvery)(wi,Jl);case 2:case"end":return e.stop()}}),Kl)}const Zl=(e(Ql={},Ts.MARK_MESSAGES_SUCCEEDED,(function(t,r){var n=r.payload,o=n.conversationId,a=n.markType;return Xl(Xl({},t),{},{conversationMark:Xl(Xl({},t.conversationMark),{},e({},o,a))})})),e(Ql,Ts.UPDATE_READ_REQUEST_DATA,(function(e,t){var r=t.payload,n=r.requestId,o=r.requestIds,a=r.count,c=Xl({},e);return n&&(c.readRequestIds=[n].concat(e.readRequestIds)),o&&(c.readRequestIds=o),a&&(c.missedReadNoticeCount=a),c})),Ql);var ed,td=At().mark(nd),rd=At().mark(od);function nd(e){var t,r,n,o;return At().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload.conversationId,a.prev=1,a.next=5,(0,_r.select)(io);case 5:if(!a.sent){a.next=10;break}return a.next=10,(0,_r.put)(Ih({event_time:(Date.parse(new Date)/1e3).toString(),url:window.location.href}));case 10:return a.next=12,(0,_r.select)($s(t));case 12:return r=a.sent,n=r.shop_id,o=r.status,a.next=17,(0,_r.call)(Ev,{method:"PUT",resource:"conversations",id:t,suffix:"status",payload:JSON.stringify({shop_id:n,status:ed[o]})});case 17:a.next=23;break;case 19:return a.prev=19,a.t0=a.catch(1),a.next=23,(0,_r.put)(o_({error:a.t0}));case 23:case"end":return a.stop()}}),td,null,[[1,19]])}function od(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_r.takeEvery)(Hi,nd);case 2:case"end":return e.stop()}}),rd)}!function(e){e.activated="closed",e.closed="activated"}(ed||(ed={}));var ad=At().mark(sd),cd=At().mark(id);function sd(e){var t,r,n,o,a,c,s,i,u,l,d,p,_;return At().wrap((function(f){for(;;)switch(f.prev=f.next){case 0:return t=e.payload.conversationId,f.prev=1,f.next=4,(0,_r.select)($s(t));case 4:return r=f.sent,n=r.id,o=r.unread_count,a=r.shop_id,f.next=8,(0,_r.select)(Is);case 8:return c=f.sent,f.next=11,(0,_r.call)(Ev,{resource:"conversations",id:t,params:{shop_id:a}});case 11:if(s=f.sent,i=s.flag,u=s.entry_point,l=s.unread_count,d=s.latest_message_id,n){f.next=19;break}return p=T("conversations",s),_=p.entities,f.next=17,(0,_r.put)(jr({entities:_}));case 17:f.next=21;break;case 19:return f.next=21,(0,_r.put)(Gr({name:"conversations",id:t,record:{flag:i,entry_point:u,unread_count:l}}));case 21:if(o||o===s.unread_count){f.next=24;break}return f.next=24,(0,_r.put)(hn({conversation:s,type:ln.ACTIVE_CONVERSATION}));case 24:if(t!==c){f.next=28;break}if(!(l>0)){f.next=28;break}return f.next=28,(0,_r.put)(wi({conversationId:t,isRead:!0,latestMessageId:d}));case 28:return f.abrupt("return",s);case 31:return f.prev=31,f.t0=f.catch(1),f.abrupt("return",{});case 34:case"end":return f.stop()}}),ad,null,[[1,31]])}function id(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_r.takeEvery)(yi,sd);case 2:case"end":return e.stop()}}),cd)}function ud(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ld(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?ud(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ud(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}const dd=e({},Ts.FAKE_CONVERSATION_SUCCEEDED,(function(e,t){var r=t.payload.conversationId;return ld(ld({},e),{},{conversationIds:[r].concat(e.conversationIds.filter((function(e){return r!==e})))})}));var pd=At().mark(Od),_d=At().mark(hd);function fd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ed(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?fd(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fd(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Sd={restart:Hi,delete:gi,read:wi,unread:wi,pin:Mi,unpin:Mi,mute:tu,unmute:tu};function Od(e){var t,r,n,o;return At().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,r=t.type,n=t.extra,o=Sd[r],a.next=4,(0,_r.put)(o(Ed({},n)));case 4:case"end":return a.stop()}}),pd)}function hd(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_r.takeEvery)(Bi,Od);case 2:case"end":return e.stop()}}),_d)}function vd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Td(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?vd(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vd(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}Sd.close=Hi;var md={hasSCAccess:"login_sellercenter",hasEditOrderAccess:"webchat_order_edit",hasViewOrderAccess:"access_my_sale",hasViewProductAccess:"access_my_product",hasEditVoucherAccess:"my_marketing_voucher_edit",hasViewVoucherAccess:"my_marketing_voucher_access"},gd=function(e){var t={},r=e.length;return Object.keys(md).forEach((function(n){t[n]=!r||e.includes(md[n])})),t};const bd=e({},Ts.UPDATE_ACCESS,(function(e,t){var r=gd(t.payload.access);return Td(Td({},e),{},{access:r})}));var yd=["combine","user","orderId","message","agent","agentMessage"];function Rd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ad(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Rd(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Rd(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Dd=At().mark(Cd);function Cd(){var e,t,r,n,o,a,c,s;return At().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,_r.select)(Cs);case 2:return e=i.sent,i.prev=3,i.next=6,(0,_r.call)(Ev,{subServer:"coreapi",parent:"conversation",resource:"updated_conversation_list",params:{last_update_time:e}});case 6:if(t=i.sent,r=t.conversations,n=t.page_result,!(r.length>0)){i.next=13;break}return o={},r.forEach((function(e){o[e.id]=e})),i.next=13,(0,_r.put)(Hr({name:"conversations",records:o}));case 13:if(c=(a=n||{}).has_more,!(s=a.next_last_update_time)){i.next=17;break}return i.next=17,(0,_r.put)(zi({timeNow:s}));case 17:if(!(c&&r.length>0)){i.next=20;break}return i.next=20,(0,_r.call)(Cd);case 20:i.next=29;break;case 22:if(i.prev=22,i.t0=i.catch(3),!(i.t0 instanceof dt)){i.next=29;break}return i.next=27,(0,_r.put)(zi({timeNow:"0"}));case 27:return i.next=29,(0,_r.call)(jl,{payload:{direction:"reset"}});case 29:case"end":return i.stop()}}),Dd,null,[[3,22]])}const Id=e({},Ts.UPDATE_SYNC_TIME_NOW,(function(e,t){var r=t.payload.timeNow;return Ad(Ad({},e),{},{updateTimeNow:r})}));var Pd,Nd,wd=At().mark(Ud),xd=At().mark(Md);function Ud(e){var t,r,n,o,a,c,s;return At().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload.conversationId,i.prev=1,i.next=4,(0,_r.select)($s(t));case 4:return r=i.sent,n=r.shop_id,o=r.mute,i.next=9,(0,_r.select)(Kn);case 9:return a=i.sent,c={biz_type:a?2:0},n&&(c.shop_id=n),s={method:"PUT",parent:"conversations",parentId:t,resource:o?"unmute":"mute",payload:JSON.stringify(c)},i.next=15,(0,_r.call)(Ev,s);case 15:i.next=21;break;case 17:return i.prev=17,i.t0=i.catch(1),i.next=21,(0,_r.put)(o_({error:i.t0}));case 21:case"end":return i.stop()}}),wd,null,[[1,17]])}function Md(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_r.takeEvery)(tu,Ud);case 2:case"end":return e.stop()}}),xd)}var kd=At().mark(Yd),Ld=At().mark(Wd);function jd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Gd(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?jd(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jd(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Fd=(0,ur.createActions)((e(Pd={},Ts.SEARCH_CONVERSATIONS_REQUESTED,(function(e){var t=e.keyword,r=void 0===t?"":t,n=e.shopId;return{keyword:r,shopId:void 0===n?"":n}})),e(Pd,Ts.SEARCH_CONVERSATIONS_SUCCEEDED,(function(e){return{results:e.results,searchStatus:e.searchStatus}})),e(Pd,Ts.UPDATE_SEARCH_PARAMS,(function(e){var t=e.keyword;return{keyword:void 0===t?"":t,searchStatus:e.searchStatus}})),Pd)),Hd=Fd.searchConversationsRequested,Vd=Fd.searchConversationsSucceeded,Bd=Fd.updateSearchParams;function Yd(e){var t,r,n,o,a,c;return At().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload.keyword,r=[],n=t.trim(),s.next=5,(0,_r.put)(Bd({keyword:n,searchStatus:D.DataFetchStatus.INIT_PENDING}));case 5:if(!n){s.next=15;break}return o=n.toLocaleLowerCase(),s.next=9,(0,_r.select)((function(e){return e.entityReducer}));case 9:return a=s.sent,c=a.shops,s.next=13,(0,_r.select)(xs);case 13:s.sent.forEach((function(e){(e.to_name||"").toLocaleLowerCase().includes(o)&&!e.faking&&r.push(Gd(Gd({},e),{},{shop_name:(c[e.shop_id]||{}).name}))}));case 15:return s.next=17,(0,_r.put)(Vd({results:r,searchStatus:D.DataFetchStatus.SUCCEED}));case 17:case"end":return s.stop()}}),kd)}function Wd(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_r.takeLatest)(Hd,Yd);case 2:case"end":return e.stop()}}),Ld)}const Qd=(e(Nd={},Ts.SEARCH_CONVERSATIONS_SUCCEEDED,(function(e,t){var r=t.payload,n=r.results,o=r.searchStatus;return Gd(Gd({},e),{},{results:n,searchStatus:o})})),e(Nd,Ts.UPDATE_SEARCH_PARAMS,(function(e,t){var r=t.payload,n=r.keyword,o=r.searchStatus;return Gd(Gd({},e),{},{keyword:n,searchStatus:o})})),Nd);var qd,Kd=y(439).t;function zd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Xd(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?zd(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zd(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Jd=At().mark(ep),$d=At().mark(tp);function Zd(e,t){return Ev({parent:"conversation",resource:"conversation_info",params:{shop_id:t,message_id:e}})}function ep(e){var t,r,n,o,a,c,s,i,u,l,d,p,_,f,E,S,O,h;return At().wrap((function(v){for(;;)switch(v.prev=v.next){case 0:return t=e.payload,r=t.msgId,n=t.shopId,v.next=3,(0,_r.select)(mf);case 3:return o=v.sent,a={},c=o.find((function(e){return e.id===r})),v.next=8,(0,_r.put)(Ki({inlocation:!0}));case 8:if(!c){v.next=16;break}return s=c.conversation_id,v.next=12,(0,_r.select)($s(s));case 12:return a=v.sent,v.next=15,(0,_r.call)(ol,{payload:{conversation:a,messageId:r,messageList:[]}});case 15:lT.emit("scrollToMessage",r);case 16:if(a.id){v.next=58;break}return v.prev=17,v.next=20,(0,_r.all)([(0,_r.call)(Zd,r,n),ra().call(oa().fetchConversationMessagesSaga({payload:{msgId:r,shopId:n}}))]);case 20:if(i=v.sent,u=A(i,2),l=u[0],d=u[1],p=(l||{}).conversation_info,_=void 0===p?[]:p,f=(d||{}).get_messages,0!==(E=void 0===f?[]:f).length&&E.find((function(e){return e.id===r}))){v.next=28;break}throw new Error("message_not_found");case 28:if(!(a=_[0])){v.next=39;break}return S=T("conversations",a),O=S.entities,v.next=33,ra().put(oa().deleteConversationMessageHash({payload:{conversationId:a.id}}));case 33:return v.next=35,(0,_r.put)(jr({entities:O}));case 35:return v.next=37,(0,_r.delay)(300);case 37:return v.next=39,(0,_r.call)(ol,{payload:{conversation:a,messageId:r,messageList:E}});case 39:v.next=58;break;case 41:v.prev=41,v.t0=v.catch(17),h=Kd("common.server_error.warning_tips"),v.t1=v.t0.message,v.next="message_not_found"===v.t1?47:"conversation_not_found"===v.t1?49:55;break;case 47:return h=Kd("message.server_error.not_found"),v.abrupt("break",56);case 49:return h=Kd("conversation.server_error.deleted"),v.next=52,(0,_r.put)(eu({conversationBeenDeleted:!0}));case 52:return v.next=54,(0,_r.put)(Gi());case 54:case 55:return v.abrupt("break",56);case 56:return v.next=58,(0,_r.call)(l_,o_({toast:{show:!0,type:"fail",message:h}}));case 58:case"end":return v.stop()}}),Jd,null,[[17,41]])}function tp(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_r.takeLatest)(qi,ep);case 2:case"end":return e.stop()}}),$d)}const rp=(e(qd={},Ts.UPDATE_LOCATION_MODE,(function(e,t){var r=t.payload.inlocation;return Xd(Xd({},e),{},{inlocation:r})})),e(qd,Ts.SET_CONVERSATION_BEEN_DELETED,(function(e,t){var r=t.payload.conversationBeenDeleted;return Xd(Xd({},e),{},{conversationBeenDeleted:r})})),qd);function np(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function op(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?np(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):np(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ap,cp,sp,ip,up=[Wu,sl,du,$l,od,Hl,id,hd,Md,fl,Wd,tp],lp=(ap={},yd.forEach((function(e){ap[e]={pageIndex:1,pageSize:20,hasMore:!0,nextOffset:"0"}})),cp={},yd.forEach((function(e){cp[e]={status:"",results:[],total:0}})),{conversationIds:[],conversationIdsMap:{},maxLatestTimestampNano:"",latestTimestampNano:"",oldestTimestampNano:"",oldestMessageRegion:"",latestMessageRegion:"",oldestReceivedMessageId:"",latestReceivedMessageId:"",maxLatestReceivedMessageId:"",currentConversationId:null,currentConversationCanRead:!0,filter:"All",keyword:"",draftHash:{},status:"",hasMore:!0,persist:null,results:[],direction:"",searchStatus:"",inlocation:!1,conversationBeenDeleted:!1,syncFetchException:0,conversationMark:{},readRequestIds:[],missedReadNoticeCount:0,access:gd([]),updateTimeNow:"0",isNavigateToUnreadMessage:!1,navigateToUnreadMessageId:"",pendingOffersCount:{},nextMessageTimeNano:"",serviceDown:!1,serviceDownAlert:!1,serviceDownList:!1,manualClose:!1,subAccountNextTimestampNano:"",subAccountLastMessageNano:""}),dp=(0,ur.handleActions)(op(op(op(op(op(op(op(op(op(op(op({},Qu),il),El),Wl),Vl),dd),Zl),bd),Qd),rp),Id),lp),pp=function(e){return(0,fr.createSelector)(Cr,(function(r){return(0,t.denormalize)(e,p,{shops:r})}))},_p=function(e){return e.shopReducer.fetchedShopIds},fp=(0,fr.createSelector)(Bs,Cr,(function(e,r){return(0,t.denormalize)(e.shop_id,p,{shops:r})||{}})),Ep=(0,fr.createSelector)(ni,Sr,(function(e,r){return(0,t.denormalize)(e,p,r)||{}}));!function(e){e.FETCH_SHOPS_REQUESTED="FETCH_SHOPS_REQUESTED",e.FETCH_SHOPS_SUCCEED="FETCH_SHOPS_SUCCEED",e.UPDATE_FETCH_SHOPS_STATUS="UPDATE_FETCH_SHOPS_STATUS",e.FETCH_SHOP_AUTH_REQUESTED="FETCH_SHOP_AUTH_REQUESTED",e.UPDATE_FETCHED_SHOP_IDS="UPDATE_FETCHED_SHOP_IDS",e.UPDATE_SHOP_FILTER="UPDATE_SHOP_FILTER",e.VISIT_SHOP_SELLER_CENTER_REQUESTED="VISIT_SHOP_SELLER_CENTER_REQUESTED",e.VISIT_MALL_REQUESTED="VISIT_MALL_REQUESTED",e.SEARCH_SHOPS_REQUESTED="SEARCH_SHOPS_REQUESTED",e.SEARCH_SHOPS_SUCCEED="SEARCH_SHOPS_SUCCEED",e.UPDATE_SEARCH_SHOPS_STATUS="UPDATE_SEARCH_SHOPS_STATUS",e.FETCH_SHOP_DETAIL_INFO="FETCH_SHOP_DETAIL_INFO",e.UPDATE_CURRENT_FETCH_SHOP_IDS="UPDATE_CURRENT_FETCH_SHOP_IDS",e.RESET_CURRENT_FETCH_SHOPS="RESET_CURRENT_FETCH_SHOPS"}(sp||(sp={}));var Sp=(0,ur.createActions)((e(ip={},sp.FETCH_SHOPS_REQUESTED,(function(){return{}})),e(ip,sp.FETCH_SHOPS_SUCCEED,(function(e){return{pagination:e.pagination,result:e.result}})),e(ip,sp.UPDATE_FETCH_SHOPS_STATUS,(function(e){return{status:e.status}})),e(ip,sp.FETCH_SHOP_AUTH_REQUESTED,(function(e){return{shopId:e.shopId}})),e(ip,sp.UPDATE_FETCHED_SHOP_IDS,(function(e){return{shopIds:e.shopIds}})),e(ip,sp.UPDATE_SHOP_FILTER,(function(e){return{filter:e.filter}})),e(ip,sp.VISIT_SHOP_SELLER_CENTER_REQUESTED,(function(e){return{url:e.url,shopId:e.shopId,orderId:e.orderId,itemId:e.itemId}})),e(ip,sp.SEARCH_SHOPS_REQUESTED,(function(e){return{keyword:e.keyword}})),e(ip,sp.SEARCH_SHOPS_SUCCEED,(function(e){return{pagination:e.pagination,result:e.result,keyword:e.keyword}})),e(ip,sp.UPDATE_SEARCH_SHOPS_STATUS,(function(e){return{status:e.status}})),e(ip,sp.FETCH_SHOP_DETAIL_INFO,(function(e){return{shopId:e.shopId}})),ip)),Op=Sp.fetchShopsRequested,hp=(Sp.fetchShopsSucceed,Sp.updateFetchShopsStatus,Sp.fetchShopAuthRequested),vp=Sp.updateFetchedShopIds,Tp=Sp.updateShopFilter,mp=Sp.visitShopSellerCenterRequested,gp=Sp.searchShopsRequested,bp=(Sp.searchShopsSucceed,Sp.updateSearchShopsStatus,Sp.fetchShopDetailInfo),yp=At().mark(Ap),Rp=At().mark(Dp);function Ap(e){var t,r,n,o;return At().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload.shopId,a.prev=1,a.next=4,(0,_r.select)(pp(t));case 4:return r=a.sent,a.next=7,(0,_r.call)(Ev,{resource:"shop",id:t,params:{need_cache:1,cache_expires:600}});case 7:return r=a.sent,n=T("shops",r),o=n.entities,a.next=11,(0,_r.put)(jr({entities:o}));case 11:return a.next=13,(0,_r.put)(vp({shopIds:[r.id]}));case 13:return a.abrupt("return",r);case 16:return a.prev=16,a.t0=a.catch(1),a.abrupt("return",{});case 19:case"end":return a.stop()}}),yp,null,[[1,16]])}function Dp(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_r.takeEvery)(bp,Ap);case 2:case"end":return e.stop()}}),Rp)}function Cp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ip(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Cp(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Cp(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}const Pp=e({},sp.UPDATE_SHOP_FILTER,(function(e,t){var r=t.payload.filter;return Ip(Ip({},e),{},{shopFilter:r})}));var Np,wp=At().mark(Up),xp=At().mark(Mp);function Up(e){var t,r,n,o,a,c,s,i,u,l,d,p,_,f,E,S,O,h,v,T,m,g,b,y,R;return At().wrap((function(A){for(;;)switch(A.prev=A.next){case 0:return t=e.payload,r=t.url,n=t.shopId,o=t.orderId,a=t.itemId,A.prev=1,A.next=4,(0,_r.call)(Ev,{resource:"shop",id:n,suffix:"sc"});case 4:if(c=A.sent,s=c.sc_url,i=c.upgraded,u=c.region,!i){A.next=12;break}return l=window.open(),r?((d=r.split("/"))[2]=(0,D.getSellerCenterUrl)(u),p=d.join("/"),l.location=p.includes("?")?"".concat(p,"&cnsc_shop_id=").concat(n):"".concat(p,"?cnsc_shop_id=").concat(n)):l.location=o?"https://".concat((0,D.getSellerCenterUrl)(u),"/portal/sale/").concat(o,"?cnsc_shop_id=").concat(n):a?"https://".concat((0,D.getSellerCenterUrl)(u),"/portal/product/").concat(a,"?cnsc_shop_id=").concat(n):"https://".concat((0,D.getSellerCenterUrl)(u),"?cnsc_shop_id=").concat(n),A.abrupt("return");case 12:if(!s){A.next=25;break}if(_=s.split("?"),f=_[1].split("&").find((function(e){return e.startsWith("sig=")})),E=f.substring(4),S=_[0].split("."),O=S[S.length-1],h=window.open(),!r){A.next=22;break}return h.location=r.includes("?")?"".concat(r,"&sig=").concat(E):"".concat(r,"?sig=").concat(E),A.abrupt("return");case 22:o||a?o?(v="https://".concat((0,D.getSellerCenterUrl)(O),"/portal/sale/").concat(o,"?sig=").concat(E),h.location=v):a&&(T="https://".concat((0,D.getSellerCenterUrl)(O),"/portal/product/").concat(a,"?sig=").concat(E),h.location=T):(m="https://".concat((0,D.getSellerCenterUrl)(O),"?sig=").concat(E),h.location=m),A.next=28;break;case 25:return g=t_(!1,{type:"permission-denied"}),A.next=28,(0,_r.put)(o_({toast:g}));case 28:A.next=38;break;case 30:return A.prev=30,A.t0=A.catch(1),A.next=34,(0,_r.select)(pp(n));case 34:b=A.sent,y="https://".concat((0,D.getSellerCenterUrl)(b.country),"/portal/"),R=o?"sale/".concat(o):a?"product/".concat(a):"",window.open(y+R);case 38:case"end":return A.stop()}}),wp,null,[[1,30]])}function Mp(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_r.takeEvery)(mp,Up);case 2:case"end":return e.stop()}}),xp)}function kp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Lp(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?kp(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kp(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var jp=At().mark(Vp),Gp=At().mark(Bp),Fp=function(e){return new Promise((function(t){Ev({parent:"conversation",resource:"unread-counts",params:{shop_ids:JSON.stringify(e)}}).then((function(e){var r=e["unread-counts"];t(void 0===r?[]:r)})).catch((function(){t([])}))}))},Hp=function(e){var t=e.shopIds,r={ids:JSON.stringify(t)};return new Promise((function(e){Ev({resource:"shops",params:r}).then((function(t){var r=t.shops;e(void 0===r?[]:r)})).catch((function(){e([])}))}))};function Vp(e){var t,r;return At().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload.shopId,n.prev=1,n.next=4,(0,_r.call)(Ev,{parent:"shop",parentId:t,resource:"auth"});case 4:return r=n.sent,n.abrupt("return",r);case 8:return n.prev=8,n.t0=n.catch(1),n.abrupt("return",{});case 11:case"end":return n.stop()}}),jp,null,[[1,8]])}function Bp(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_r.takeEvery)(hp,Vp);case 2:case"end":return e.stop()}}),Gp)}const Yp=(e(Np={},sp.FETCH_SHOPS_SUCCEED,(function(e,t){var r=t.payload,n=r.pagination,o=r.result;return Lp(Lp({},e),{},{fetchResult:Lp(Lp({},e.fetchResult),{},{pagination:n,result:o})})})),e(Np,sp.SEARCH_SHOPS_SUCCEED,(function(e,t){var r=t.payload,n=r.pagination,o=r.result,a=r.keyword;return Lp(Lp({},e),{},{searchResult:Lp(Lp({},e.searchResult),{},{pagination:n,result:o,keyword:a})})})),e(Np,sp.UPDATE_FETCH_SHOPS_STATUS,(function(e,t){var r=t.payload.status;return Lp(Lp({},e),{},{status:r})})),e(Np,sp.UPDATE_SEARCH_SHOPS_STATUS,(function(e,t){var r=t.payload.status;return Lp(Lp({},e),{},{searchStatus:r})})),e(Np,sp.UPDATE_FETCHED_SHOP_IDS,(function(e,t){var r=t.payload.shopIds,n=e.fetchedShopIds;return Lp(Lp({},e),{},{fetchedShopIds:Yt(new Set(n.concat(r)))})})),Np);function Wp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Qp(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Wp(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Wp(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var qp,Kp,zp={currentPage:0,perPage:20,hasMore:!0},Xp=[Dp,Bp,Mp],Jp={shopFilter:null,fetchedShopIds:[],fetchResult:{pagination:Qp({},zp),result:[]},status:"",searchResult:{pagination:Qp({},zp),result:[],keyword:""},searchStatus:""},$p=(0,ur.handleActions)(Qp(Qp({},Pp),Yp),Jp),Zp=function(e){return e.toastReducer.toast},e_=y(439).t,t_=function(e,t){var r={};if(t){switch(t.type){case"auto-reply":e?t.first&&"enabled"===t.action?(r.message=e_("settings.enable_auto_reply_successfully"),r.show=!0):(r.message="",r.show=!1):(t.first&&"enabled"===t.action?r.message=e_("settings.failed_to_enable_auto_reply"):r.message="enabled"===t.action?e_("settings.failed_to_enable"):e_("settings.failed_to_disable"),r.show=!0);break;case"message":r.message=e?"save"===t.action?e_("settings.message.save_successfully"):"delete"===t.action?e_("settings.message.delete_successfully"):e_("settings.message.import_successfully"):"save"===t.action?e_("settings.message.failed_to_save"):"delete"===t.action?e_("settings.message.failed_to_delete"):e_("settings.message.failed_to_import"),r.show=!0;break;case"message-tips":e?(r.message="",r.show=!1):(r.message="enabled"===t.action?e_("settings.failed_to_enable"):e_("settings.failed_to_disable"),r.show=!0);break;case"forward":e||(r.message=403===t.status?e_("forward.exception",{forwardName:""}):e_("forward.server_error"),r.show=!0);break;case"send-feedback":r.message=e_("feedback_modal.error.failed_to_send"),r.show=!0;break;case"server-error-tips":r.message=e_("common.server_error.warning_tips"),r.show=!0;break;case"conversation-closed-tip":r.message=e_("conversation_detail.closed.warning_tips"),r.show=!0;break;case"permission-denied":r.message=e_("common.permission_denied"),r.show=!0;break;case"claim-voucher":r.message=e_(e?"voucher.claim.success":"voucher.claim.fail"),r.show=!0;break;case"private-image":r.message=e_("common.image.expired"),r.show=!0;break;case"operation":"save"===t.action&&(r.message=e_(e?"text.save_successfully":"text.save_failed")),r.show=!0;break;default:r.message=t.message,r.show=!0}r.type=e?"success":"fail"}return r};!function(e){e.COPY_SUCCEED_FEEDBACK="COPY_SUCCEED_FEEDBACK",e.SET_TOAST_INFORMATION="SET_TOAST_INFORMATION",e.SET_TOAST_INFORMATION_SUCCEEDED="SET_TOAST_INFORMATION_SUCCEEDED"}(qp||(qp={}));var r_=(0,ur.createActions)((e(Kp={},qp.COPY_SUCCEED_FEEDBACK,(function(){return{}})),e(Kp,qp.SET_TOAST_INFORMATION,(function(e){return{type:e.type,error:e.error,toast:e.toast}})),e(Kp,qp.SET_TOAST_INFORMATION_SUCCEEDED,(function(e){return{toast:e.toast}})),Kp)),n_=r_.copySucceedFeedback,o_=r_.setToastInformation,a_=r_.setToastInformationSucceeded;function c_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s_(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?c_(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var i_=At().mark(l_),u_=At().mark(d_);function l_(e){var t,r,n,o,a;return At().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,r=t.type,n=t.error,o=t.toast,c.next=3,(0,_r.select)(ao);case 3:if(!c.sent){c.next=11;break}return a=null,r&&(a=t_(!1,{type:r})),void 0!==n&&(a=n instanceof dt||n instanceof ft?n.handler():t_(!1,{type:"server-error-tips"})),o&&(a=o),c.next=11,(0,_r.put)(a_({toast:a}));case 11:case"end":return c.stop()}}),i_)}function d_(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_r.takeEvery)(o_,l_);case 2:case"end":return e.stop()}}),u_)}const p_=e({},qp.SET_TOAST_INFORMATION_SUCCEEDED,(function(e,t){var r=t.payload.toast;return s_(s_({},e),{},{toast:r})}));var __=y(439).t,f_=At().mark(S_),E_=At().mark(O_);function S_(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_r.put)(o_({toast:t_(!0,{message:__("common.successful_copied")})}));case 2:case"end":return e.stop()}}),f_)}function O_(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_r.takeEvery)(n_,S_);case 2:case"end":return e.stop()}}),E_)}function h_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var v_=[d_,O_],T_=(0,ur.handleActions)(function(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?h_(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},p_),{toast:{type:"",message:"",show:!1}});function m_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g_(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?m_(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var b_,y_,R_=D.MessageTypes.MSG_TYPE_OFFER,A_=D.MessageTypes.MSG_TYPE_ORDER,D_=D.MessageTypes.MSG_TYPE_PRODUCT,C_=D.MessageTypes.MSG_TYPE_IMAGE,I_=D.MessageTypes.MSG_TYPE_FAQ_UNSUPPORTED,P_=D.MessageTypes.MSG_TYPE_FAQ_LIVEAGENT_PROMPT,N_=D.MessageTypes.MSG_TYPE_VIDEO,w_=D.MessageTypes.MSG_TYPE_NOTIFICATION,x_=D.MessageTypes.MSG_TYPE_RATE_CARD,U_=D.MessageTypes.MSG_TYPE_IMAGE_WITH_TEXT,M_=D.MessageTypes.MSG_TYPE_SECURITY_TIPS,k_=[A_,D_],L_=function(e){return(e.messageReducer||{}).faqHistoryStatus},j_=function(e){return(e.messageReducer||{}).faqHistoryHash},G_=function(e){return(e.messageReducer||{}).faqId},F_=(0,fr.createSelector)(j_,G_,(function(e,t){return e&&t&&e[t]||{all:[]}})),H_=function(e){return(e.messageReducer||{}).status},V_=(0,fr.createSelector)((function(e){return e}),(function(e){return(e.messageReducer||{}).messagesRelatedMap||{}})),B_=function(e){return e.messageReducer.offlineMessages},Y_=function(e){var t;return(null===(t=e.messageReducer)||void 0===t?void 0:t.videoMap)||{}},W_=function(e){return(0,fr.createSelector)(Y_,(function(t){return JSON.parse(JSON.stringify(t[e]||{}))}))},Q_=function(e){return(0,fr.createSelector)(Y_,(function(t){return Object.keys(t).find((function(r){return t[r].vid===e}))}))},q_=function(e){return(0,fr.createSelector)(Tr,(function(r){return(0,t.denormalize)(e,c,{messages:r})}))},K_=function(e){return(0,fr.createSelector)(Tr,(function(r){return(0,t.denormalize)(e,[c],{messages:r})}))},z_=(0,fr.createSelector)(Is,V_,(function(e,t){return t[e]||{all:[]}})),X_=function(e){return(0,fr.createSelector)(V_,(function(t){return t[e]||{all:[],sending:[],failed:[]}}))},J_=function(e){return(e.messageReducer||{}).messageFillStatusMap||{}},$_=GT((function(e){return(0,fr.createSelector)(X_(e),$s(e),Tr,(function(e,t,r){return Fu(e,t,r)}))})),Z_=(0,fr.createSelector)(z_,(function(e){var t=Yt(e.all||[]);return e.securityTipsMessageId&&t.push(e.securityTipsMessageId),t})),ef=(0,fr.createSelector)(z_,(function(e){return e.sending||[]})),tf=(0,fr.createSelector)(z_,(function(e){return e.failed||[]})),rf=(0,fr.createSelector)(z_,(function(e){return e.hasMoreOlderMessage})),nf=(0,fr.createSelector)(z_,(function(e){return e.hasMoreLatestMessage})),of=(0,fr.createSelector)(z_,(function(e){return e.hasNext})),af=function(e){return e.messageReducer.entryPoint},cf=function(e){return e.messageReducer.toBottomHasConflict},sf=(0,fr.createSelector)(Tr,Z_,(function(e,r){return((0,t.denormalize)(r,[c],{messages:e})||[]).filter(Boolean)})),uf=function(e){return(0,fr.createSelector)(X_(e),Tr,(function(e,r){return((0,t.denormalize)(e.all,[c],{messages:r})||[]).filter((function(e){return null==e?void 0:e.isFaking}))}))},lf=(0,fr.createSelector)(sf,(function(e){return e.reverse()})),df=(0,fr.createSelector)(lf,Bs,(function(e,t){var r=0,n=[];return e.forEach((function(e,o){var a=(0,D.getMessageIsSend)(e,t);e.warning&&!a&&(o-r<10&&n.pop(),n.push(e.id),r=o)})),n})),pf=(0,fr.createSelector)(Bs,lf,(function(e,t){if(!e)return[];var r=e.last_read_message_id;return t.filter((function(t){var n=(0,D.getMessageIsSend)(t,e);return t&&!n&&(0,D.greaterThan)(t.id,r)&&t.type!==w_}))})),_f=(0,fr.createSelector)(Sr,F_,(function(e,r){var n=r.all;return(0,t.denormalize)(n,[c],e)})),ff=(0,fr.createSelector)(_f,(function(e){return e.map((function(t,r){var n=!0,o=!0,a=t.created_timestamp,c=t.to_id,s=t.type;if(gf(s))n=!1;else if(0===r)n=!0;else{var i=e[r-1],u=i.created_timestamp,l=i.to_id,d=i.type;n=l!==c||!(0,D.compareSameDayOfTimestamp)(1e3*a,1e3*u)||gf(d)}if(0===r)o=!0;else{var p=e[r-1].created_timestamp;o=!(0,D.compareSameDayOfTimestamp)(1e3*a,1e3*p)}return g_(g_({},t),{},{groupHeader:n,dayHeader:o})}))})),Ef=(0,fr.createSelector)(_f,lf,(function(e,t){return(e&&e.length?e:t).filter((function(e){var t=(e||{}).type;return!(0,D.isDeletedMessage)(e)&&[C_,N_,U_].includes(t)}))})),Sf=(0,fr.createSelector)(Ef,Bs,Ws,Qn,ti,(function(e,t,r,n,o){var a=r&&r.country||"sg",c=(0,D.getVideoServer)(a);return e.map((function(e){var r="",a=!1,s=(0,D.getMessageIsSend)(e,t);switch(e.type){case C_:var i=e.content;r=1!==i.file_server_id&&i.url_hash?"".concat((0,D.getFileServer)()).concat(i.url_hash):i.url||i.localUrl,a=i.unknown_qr_code&&!s;break;case N_:var u=e.content;r=u.video_url?"".concat(c).concat(u.video_url):u.localVideoUrl;break;case U_:var l=e.content;r=l.thumb_url?"".concat((0,D.getFileServer)()).concat(l.thumb_url):l.image_url}var d=e.id,p=e.type,_=e.request_id,f=e.content;return{type:p,id:d,url:r,unknownQrCode:a,trackerData:{shopid:o,account_type:n.role||"shopee_user",message_id:d===_?0:d,conversation_id:t.id,account_id:n.id,is_sender:s,video_original_duration:f.duration_seconds}}}))})),Of=(0,fr.createSelector)(pf,(function(e){return e.length?e.map((function(e){return e.id})):[]})),hf=(0,fr.createSelector)(Bs,lf,(function(e,t){return e?t.filter(Boolean).reduce((function(e,t){var r=t.type,n=t.source_type,o=t.source_content,a=t.content;if(!n||r===R_||[-1,0].includes(o["".concat(n,"_id")]))return e;if(k_.includes(r)&&o){var c="".concat(r,"_id");if(a[c]===o[c])return e}var s=e.lastSourceMessage,i=e.sourceList;if(!i.length)return{sourceList:i.concat(t),lastSourceMessage:t};if(n===D_){var u=null==o?void 0:o.product_id,l=s.source_content&&s.source_content.product_id;if(!u||l===u)return e}else if(n===A_){var d=null==o?void 0:o.order_id,p=s.source_content&&s.source_content.order_id;if(!d||[-1,0,p].includes(d))return e}return{sourceList:i.concat(t),lastSourceMessage:t}}),{sourceList:[],lastSourceMessage:null}).sourceList:[]})),vf=(0,fr.createSelector)(hf,(function(e){return e.map((function(e){return e.id}))})),Tf=(0,fr.createSelector)(Sr,sf,(function(e,r){var n=r.filter((function(e){return e&&e.type===R_})).map((function(e){return e.content.offer_id}));return(0,t.denormalize)(n,[l],e)})),mf=(0,fr.createSelector)(lf,vf,ef,tf,Bs,Dr,Tf,(function(e,t,r,n,o,a,c){return o?e.filter((function(e){if(!e)return!1;var t=e.content,r=e.type;return!(![I_,P_].includes(r)&&(!t||t&&0===Object.keys(t).length))})).map((function(e){var o=r.includes(e.id)?D.MessageSendStatus.SENDING:n.includes(e.id)?D.MessageSendStatus.FAILED:e.send_status?D.MessageSendStatus.SUCCEED:null,s=t.includes(e.id),i=Object.assign({},e,{send_status:o,hasMessageSource:s}),u=i,l=u.type,d=u.content,p=void 0===d?{}:d,_=u.message_option;switch(l){case R_:var f=c.find((function(e){return e&&e.id===p.offer_id}));i=Object.assign({},i,{textContent:f});break;case x_:var E=a[p.card_id];E&&(i=Object.assign({},i,{textContent:E}))}return(0,D.hasTargetMessageOption)(_,D.MessageOption.MSG_OPT_CENSORED_BLACKLIST)&&(i=g_(g_({},i),{},{send_status:D.MessageSendStatus.FAILED,errorCode:D.MessageErrorCode.BLACKLIST})),i})):[]})),gf=function(e){return[w_,M_].includes(e)},bf=(0,fr.createSelector)(mf,(function(e){return e.map((function(t,r){var n=!0,o=!0,a=t.created_timestamp,c=t.to_id,s=t.type;if(gf(s))n=!1;else if(0===r)n=!0;else{var i=e[r-1],u=i.created_timestamp,l=i.to_id,d=i.type;n=l!==c||!(0,D.compareSameDayOfTimestamp)(1e3*a,1e3*u)||gf(d)}if(0===r)o=!0;else{var p=e[r-1].created_timestamp;o=!(0,D.compareSameDayOfTimestamp)(1e3*a,1e3*p)}return g_(g_({},t),{},{groupHeader:n,dayHeader:o})}))})),yf=function(e){return(0,fr.createSelector)(Dr,(function(r){return(0,t.denormalize)(e,E,{rateCards:r})}))},Rf=(0,fr.createSelector)((function(e){var t;return null==e||null===(t=e.messageReducer)||void 0===t?void 0:t.reply}),(function(e){return e?e.toMessageId:{}})),Af=(0,fr.createSelector)(Is,Rf,(function(e,t){return t[e]||""})),Df=function(e){var t,r;return null===(t=e.messageReducer)||void 0===t||null===(r=t.reply)||void 0===r?void 0:r.scrollToMessageId},Cf=(0,fr.createSelector)(Af,Tr,(function(e,r){return(0,t.denormalize)(e,c,{messages:r})})),If=function(e){var t,r;return null===(t=e.messageReducer)||void 0===t||null===(r=t.reply)||void 0===r?void 0:r.inScrollToMessage},Pf=function(e){return e.messageReducer.imageUrl},Nf=function(e){return e.messageReducer.faqSessions||{}},wf=(0,fr.createSelector)(Is,Nf,(function(e,t){return t[e]||{}})),xf=function(e){return e.messageReducer.messageMaxWidth},Uf=function(e){return e.messageShortcutGroupReducer},Mf=function(e){return e.messageShortcutGroupReducer&&e.messageShortcutGroupReducer.currentGroupType},kf=(0,fr.createSelector)(Uf,Mf,(function(e,t){return e&&e[t]||{groups:[],status:""}})),Lf=(0,fr.createSelector)(kf,(function(e){return e.status})),jf=(0,fr.createSelector)(kf,(function(e){return e.currentGroupId})),Gf=(0,fr.createSelector)(kf,(function(e){var t=e.groups,r=void 0===t?[]:t,n=e.currentGroupId,o=(r.find((function(e){return e.id===n}))||{}).message_shortcuts;return void 0===o?[]:o})),Ff=(0,fr.createSelector)(Uf,(function(e){var t=(e&&e[D.MessageShortcutGroupType.PERSONAL]||{groups:[]}).groups;return(void 0===t?[]:t).reduce((function(e,t){var r=t.message_shortcuts,n=void 0===r?[]:r;return e.concat(n)}),[])})),Hf=(0,fr.createSelector)(Uf,(function(e){var t=(e&&e[D.MessageShortcutGroupType.TEAM]||{groups:[]}).groups;return(void 0===t?[]:t).reduce((function(e,t){var r=t.message_shortcuts,n=void 0===r?[]:r;return e.concat(n)}),[])})),Vf=(0,fr.createSelector)(Ff,Hf,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return[].concat(Yt(e),Yt(t))})),Bf=function(e){return e.settingsReducer.settings},Yf=function(e){return e.settingsReducer.needForceUpdate},Wf=function(e){return e.settingsReducer.status},Qf=function(e){return e.settingsReducer.fetchStatus},qf=(0,fr.createSelector)(Bf,(function(e){return e.auto_translation_status||""})),Kf=(0,fr.createSelector)(Bf,(function(e){return e.message_shortcuts_status||""})),zf=(0,fr.createSelector)(Bf,(function(e){return e.legacy_message_shortcuts_count||0})),Xf=(0,fr.createSelector)(Bf,(function(e){return e.distribution_account_status||"enabled"}));!function(e){e.FETCH_SETTINGS_REQUESTED="FETCH_SETTINGS_REQUESTED",e.FETCH_SETTINGS_SUCCEEDED="FETCH_SETTINGS_SUCCEEDED",e.FETCH_SETTINGS_STATUS="FETCH_SETTINGS_STATUS",e.UPDATE_SETTING_STATUS="UPDATE_SETTING_STATUS",e.UPDATE_SETTINGS_REQUESTED_BY_TYPE="UPDATE_SETTINGS_REQUESTED_BY_TYPE",e.UPDATE_SETTINGS_REQUESTED="UPDATE_SETTINGS_REQUESTED",e.UPDATE_SETTINGS_SUCCEEDED="UPDATE_SETTINGS_SUCCEEDED"}(b_||(b_={}));var Jf,$f=(0,ur.createActions)((e(y_={},b_.FETCH_SETTINGS_REQUESTED,(function(){return{}})),e(y_,b_.FETCH_SETTINGS_SUCCEEDED,(function(e){return{settings:e.settings,fetchStatus:e.fetchStatus,timestamp:e.timestamp,needForceUpdate:e.needForceUpdate}})),e(y_,b_.FETCH_SETTINGS_STATUS,(function(e){return{fetchStatus:e.fetchStatus}})),e(y_,b_.UPDATE_SETTING_STATUS,(function(e){return{status:e.status}})),e(y_,b_.UPDATE_SETTINGS_REQUESTED_BY_TYPE,(function(e){return e})),e(y_,b_.UPDATE_SETTINGS_REQUESTED,(function(e){return{params:e.params}})),e(y_,b_.UPDATE_SETTINGS_SUCCEEDED,(function(e){return{settings:e.settings,needForceUpdate:e.needForceUpdate}})),y_)),Zf=$f.fetchSettingsRequested,eE=$f.fetchSettingsSucceeded,tE=$f.fetchSettingsStatus;function rE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function nE(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?rE(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rE(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}$f.updateSettingStatus,$f.updateSettingsRequestedByType,$f.updateSettingsRequested,$f.updateSettingsSucceeded;var oE=At().mark(cE),aE=At().mark(sE);function cE(){var e;return At().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,_r.put)(tE({fetchStatus:D.DataFetchStatus.PENDING}));case 3:return t.next=5,(0,_r.call)(Ev,{parent:"user",resource:"setting"});case 5:return e=t.sent,t.next=8,(0,_r.put)(eE({settings:e,fetchStatus:D.DataFetchStatus.SUCCEED,timestamp:Date.now(),needForceUpdate:!1}));case 8:return t.abrupt("return",e);case 11:return t.prev=11,t.t0=t.catch(0),t.next=15,(0,_r.put)(tE({fetchStatus:D.DataFetchStatus.FAILED}));case 15:return t.abrupt("return",{});case 16:case"end":return t.stop()}}),oE,null,[[0,11]])}function sE(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_r.takeLatest)([Zf],cE);case 2:case"end":return e.stop()}}),aE)}const iE=(e(Jf={},b_.FETCH_SETTINGS_SUCCEEDED,(function(e,t){var r=t.payload,n=r.settings,o=r.fetchStatus,a=r.timestamp,c=r.needForceUpdate;return nE(nE({},e),{},{settings:n,fetchStatus:o,timestamp:a,needForceUpdate:c})})),e(Jf,b_.FETCH_SETTINGS_STATUS,(function(e,t){var r=t.payload.fetchStatus;return nE(nE({},e),{},{fetchStatus:r})})),Jf);function uE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var lE,dE,pE=[sE],_E=(0,ur.handleActions)(function(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?uE(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uE(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},iE),{settings:{},fetchStatus:""}),fE={currentPage:0,perPage:20,total:0,hasMore:!0},EE=function(e){return e.offerReducer.status},SE=(0,fr.createSelector)(Sr,(function(e){return e.offers||{}})),OE=function(e,t,r,n){return(0,fr.createSelector)(SE,(function(o){return Object.values(o).filter((function(o){return o.product_id===n&&o.model_id===t&&o.conversation_id===e&&o.id!==r&&o.status===D.OfferStatus.PENDING}))}))},hE=function(e){return(0,fr.createSelector)(Sr,(function(r){return(0,t.denormalize)(e,l,r)}))},vE=function(e){return e.offerReducer.fetchResult},TE=function(e,t){return(0,fr.createSelector)(vE,(function(r){return r["".concat(e,"_").concat(t)]||{pagination:fE,result:[]}}))},mE=(0,fr.createSelector)(vE,Bs,(function(e,t){var r=t.shop_id,n=t.to_id,o=e["".concat(r,"_").concat(n)];return o?o.pagination:fE})),gE=(0,fr.createSelector)(vE,Bs,Sr,(function(e,r,n){var o=r.shop_id,a=r.to_id,c=e["".concat(o,"_").concat(a)];if(!c)return[];var s=c.result||[];return(0,t.denormalize)(s,[l],n).filter((function(e){return e}))})),bE=(0,ur.createActions)({REDUX_RESET:function(){return{}}}).reduxReset;!function(e){e.REMOVE_SINGLE_DRAFT="REMOVE_SINGLE_DRAFT",e.REMOVE_ALL_DRAFT="REMOVE_ALL_DRAFT",e.BATCH_REMOVE_DRAFT="BATCH_REMOVE_DRAFT",e.SAVE_DRAFT="SAVE_DRAFT"}(lE||(lE={}));const yE=(e(dE={},lE.REMOVE_SINGLE_DRAFT,gu),e(dE,lE.REMOVE_ALL_DRAFT,bu),e(dE,lE.BATCH_REMOVE_DRAFT,yu),dE),RE=e({},lE.SAVE_DRAFT,Ru);var AE,DE=(0,ur.createActions)((e(AE={},lE.REMOVE_SINGLE_DRAFT,(function(e){return{conversationId:e.conversationId}})),e(AE,lE.REMOVE_ALL_DRAFT,(function(){return{}})),e(AE,lE.BATCH_REMOVE_DRAFT,(function(e){return{conversationIds:e.conversationIds}})),e(AE,lE.SAVE_DRAFT,(function(e){return{conversationId:e.conversationId,draft:e.draft}})),AE)),CE=DE.removeSingleDraft,IE=DE.removeAllDraft,PE=DE.batchRemoveDraft,NE=DE.saveDraft;function wE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xE(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?wE(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wE(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var UE=(0,ur.handleActions)(xE(xE({},RE),yE),{draftHash:{}}),ME=function(e){return e.draftReducer.draftHash},kE=function(e){return(0,fr.createSelector)(ME,(function(t){return t[e]}))},LE=(0,fr.createSelector)(Is,ME,(function(e,t){return e&&t[e]}));function jE(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function GE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function FE(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?GE(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GE(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var HE,VE=function(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=e.exceptionType,a=e.reconnectCount,c=void 0===a?0:a,s=e.exceptionReason,i=void 0===s?"":s,u={status:-1,userId:t,userType:r};if(o===D.SocketConnectionStatus.DISCONNECT){var l=c<=5?"s":c<=10?"m":"l";u=FE(FE({},u),{},{reconnectType:l,exceptionReason:i,exceptionType:o})}else u=FE(FE({},u),{},{exceptionType:o});qv(Yv[n?"SOCKET_FAILED":"CHATWS_SOCKET_FAILED"],0,u)};!function(e){e.FEEDBACK_REQUESTED="FEEDBACK_REQUESTED",e.FEEDBACK_SUCCEEDED="FEEDBACK_SUCCEEDED",e.UPDATE_RECONNECT_FLAG="UPDATE_RECONNECT_FLAG",e.UPDATE_NOTICES_COUNT="UPDATE_NOTICES_COUNT"}(HE||(HE={}));var BE=y(439).t,YE=["type"];function WE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function QE(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?WE(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WE(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var qE,KE,zE=At().mark($E),XE=At().mark(ZE),JE=function(e){return iS({feedback:{status:e,network:!0,content:BE("common.toast.".concat(e))}})};function $E(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.__WEBCHAT_LOGIN__){e.next=19;break}return e.next=3,(0,_r.select)(Kn);case 3:if(!e.sent){e.next=19;break}return e.next=7,(0,_r.select)(Qn);case 7:if("working"!==(e.sent||{}).distribution_status){e.next=19;break}return e.prev=10,e.next=13,(0,_r.call)(Ev,{method:"POST",subServer:"coreapi",parent:"user",resource:"report_event",payload:JSON.stringify({event_type:"login"})});case 13:window.__WEBCHAT_LOGIN__=!1,e.next=19;break;case 16:e.prev=16,e.t0=e.catch(10),window.__WEBCHAT_LOGIN__=!1;case 19:case"end":return e.stop()}}),zE,null,[[10,16]])}function ZE(e,t){return At().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:r.t0=e,r.next=r.t0===D.ShareDataType.UNREAD?3:6;break;case 3:return r.next=5,(0,_r.put)(vn({count:t.total_unread_count}));case 5:return r.abrupt("break",6);case 6:case"end":return r.stop()}}),XE)}var eS=(0,ur.createActions)(e({},HE.UPDATE_RECONNECT_FLAG,(function(e){return{flag:e.flag}}))).updateReconnectFlag;qE=At().mark((function e(t){var r;return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(201!==(r=t.status)){e.next=8;break}return e.next=4,(0,_r.put)(Aa({socketSuccess:!0}));case 4:return e.next=6,(0,_r.spawn)($E);case 6:e.next=11;break;case 8:return qv(Yv.SOCKET_FAILED,0,{status:r}),e.next=11,(0,_r.put)(Aa({socketSuccess:!1}));case 11:case"end":return e.stop()}}),e)})),KE=At().mark((function e(t){var r,n,o,a,c,s,i,u,l,d,p,_,f,E,S,O,h,v,T,m;return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.event,n=t.payload,"reportUPLPoint"!==r){e.next=9;break}return e.next=4,(0,D.getItem)("session");case 4:c=e.sent,s=c&&c.user,u=(i=s||{}).id,l=i.type,o=u,a=l;case 9:e.t0=r,e.next=e.t0===D.SocketConnectionStatus.CONNECT?12:e.t0===D.SocketConnectionStatus.DISCONNECT?38:e.t0===D.SocketConnectionStatus.RECONNECT_ERROR?43:e.t0===D.SocketConnectionStatus.RECONNECTING?49:e.t0===D.SocketConnectionStatus.RECONNECT?52:"emit"===e.t0?55:"close"===e.t0?60:"ack"===e.t0?63:"reportUPLPoint"===e.t0?65:"reportConnections"===e.t0?67:"setMainPage"===e.t0?69:"shareApiData"===e.t0?72:76;break;case 12:return e.next=14,(0,_r.select)(BS);case 14:if(!e.sent){e.next=19;break}return d=1e3*Math.floor(30*Math.random()+1),e.next=19,(0,_r.delay)(d);case 19:return e.next=21,(0,_r.put)(uS({feedback:void 0}));case 21:return e.next=23,(0,D.getItem)("mini-session");case 23:if(p=e.sent,_=p&&p.p_token,f=p&&p.user,!_||!f){e.next=33;break}return e.next=29,(0,_r.call)(Vt,{token:_,account_id:f.uid});case 29:if(E=e.sent,Ft){e.next=33;break}return e.next=33,(0,_r.call)(qE,E);case 33:return e.next=35,(0,_r.put)(eS({flag:!1}));case 35:return e.next=37,(0,_r.put)(Aa({socketSuccess:!0}));case 37:return e.abrupt("break",76);case 38:return e.next=40,(0,_r.put)(eS({flag:!0}));case 40:return e.next=42,(0,_r.put)(JE("error"));case 42:return e.abrupt("break",76);case 43:return e.next=45,(0,_r.put)(JE("error"));case 45:return qv(Yv.SOCKET_FAILED,0,{status:-1}),e.next=48,(0,_r.put)(Aa({socketSuccess:!1}));case 48:return e.abrupt("break",76);case 49:return e.next=51,(0,_r.put)(JE("pending"));case 51:return e.abrupt("break",76);case 52:return e.next=54,(0,_r.put)(JE("resolved"));case 54:return e.abrupt("break",76);case 55:if(O=(S=n).type,h=S.response,"login"!==O){e.next=59;break}return e.next=59,(0,_r.call)(qE,h);case 59:return e.abrupt("break",76);case 60:return e.next=62,(0,_r.call)(_s,!1);case 62:return e.abrupt("break",76);case 63:return Ht.dispatch(D.CustomShareEvent.ACK),e.abrupt("break",76);case 65:return VE(n,o,a),e.abrupt("break",76);case 67:return qv(Yv.SHARED_TABS,n),e.abrupt("break",76);case 69:return e.next=71,(0,_r.put)(Mc({isMainPage:n.isMainPage}));case 71:return e.abrupt("break",76);case 72:return T=(v=n).type,m=jE(v,YE),e.next=75,(0,_r.call)(ZE,T,m);case 75:return e.abrupt("break",76);case 76:case"end":return e.stop()}}),e)}));const tS=e({},HE.UPDATE_RECONNECT_FLAG,(function(e,t){var r=t.payload.flag;return QE(QE({},e),{},{reconnectFlag:r})}));var rS;function nS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function oS(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?nS(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nS(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var aS=At().mark(lS),cS=At().mark(dS),sS=(0,ur.createActions)((e(rS={},HE.FEEDBACK_REQUESTED,(function(e){return{feedback:e.feedback}})),e(rS,HE.FEEDBACK_SUCCEEDED,(function(e){return{feedback:e.feedback}})),rS)),iS=sS.feedbackRequested,uS=sS.feedbackSucceeded;function lS(e){var t;return At().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload.feedback,r.next=3,(0,_r.put)(uS({feedback:t}));case 3:return r.next=5,(0,_r.delay)(2500);case 5:return r.next=7,(0,_r.put)(uS({feedback:void 0}));case 7:case"end":return r.stop()}}),aS)}function dS(){var e,t,r;return At().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,_r.actionChannel)(iS);case 2:e=n.sent;case 3:return n.next=6,(0,_r.take)(e);case 6:return t=n.sent,r=t.payload,n.next=10,(0,_r.call)(lS,{payload:r});case 10:n.next=3;break;case 12:case"end":return n.stop()}}),cS)}const pS=e({},HE.FEEDBACK_SUCCEEDED,(function(e,t){var r=t.payload.feedback;return oS(oS({},e),{},{feedback:r})}));var _S=y(655);function fS(e){if(null==e)throw new TypeError("Cannot destructure undefined")}var ES=y(439).t,SS=At().mark(bS),OS=At().mark(yS);function hS(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return vS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?vS(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){s=!0,a=e},f:function(){try{c||null==r.return||r.return()}finally{if(s)throw a}}}}function vS(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function TS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function mS(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?TS(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TS(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var gS=function(e,t){var r,n,o=t.conversation,a=t.read,c=t.pinned,s=t.offer,i=t.status,u=t.userId,l=t.flag,d=t.cardId,p=t.mute;switch(e){case"conversations":r=l?{flag:l}:i?{status:i}:a?{last_read_message_id:o.latest_message_id,unread_count:0}:{unread_count:1},void 0!==c&&(r={pinned:c}),void 0!==p&&(r={mute:p}),n=o.id;break;case"offers":r={status:i},n=s.id;break;case"users":r={distribution_status:i},n=u;break;case"rateCards":r={status:i},n=d}return Gr({name:e,id:n,record:r})};function bS(e){var t,r,n,o,a,c,s,i,u,l,d,p,_,f,E,S,O,h,v,m,g,b,y,R,A,C,I,P,N,w,x,U,M,k,L,j,G,F,H,V,B,Y,W,Q,q,K,z,X,J,$,Z,ee,te,re,ne,oe,ae,ce,se,ie,ue,le,de,pe,_e,fe,Ee,Se,Oe,he;return At().wrap((function(ve){for(;;)switch(ve.prev=ve.next){case 0:return t=e.type,r=e.payload,ve.next=3,(0,_r.select)(Pn);case 3:return n=ve.sent,ve.next=6,(0,_r.select)(Is);case 6:if(o=ve.sent,"notification"!==t){ve.next=301;break}if(c=(a=r).type,s=a.user_id,i=a.from_id,u=a.content,l=u.flag,d=u.status,p=u.card_id,_=u.offer_id,f=u.shop_id,E=u.request_id,S=u.conversation_id,O=u.conversation_ids,h=void 0===O?[]:O,v=u.is_main_agent_change,m=u.msg_id,g=u.faq_session_id,b=u.expiry_time,y=u.is_auto_update,R={},A={},!S){ve.next=17;break}return ve.next=14,(0,_r.select)($s(S));case 14:R=ve.sent,ve.next=22;break;case 17:if(!_){ve.next=22;break}return ve.next=20,(0,_r.select)(SE);case 20:C=ve.sent,A=C[_];case 22:return I=R&&n===s,ve.next=25,(0,_r.select)(Fs);case 25:P=ve.sent,N="Unread"===P,ve.t0=c,ve.next=ve.t0===Hu.MARK_AS_READ?30:ve.t0===Hu.MARK_AS_UNREAD?59:ve.t0===Hu.DELETE_CONVERSATION?65:ve.t0===Hu.UPDATE_OFFER_STATUS?84:ve.t0===Hu.UPDATE_CONVERSATION?98:ve.t0===Hu.UPDATE_USER_STATUS?126:ve.t0===Hu.UPDATE_CONVERSATION_FLAG?150:ve.t0===Hu.FORCE_LOGOUT?154:ve.t0===Hu.UPDATE_RATING_CARD_STATUS?157:ve.t0===Hu.PIN_CONVERSATION?160:ve.t0===Hu.UNPIN_CONVERSATION?163:ve.t0===Hu.MASS_READ?169:ve.t0===Hu.MASS_UNREAD?179:ve.t0===Hu.MASS_PIN?189:ve.t0===Hu.MASS_UNPIN?195:ve.t0===Hu.MASS_ACTIVATE?201:ve.t0===Hu.MASS_CLOSE?230:ve.t0===Hu.VIDEO_UPLOAD?249:ve.t0===Hu.MARK_AS_UNREPLIED||ve.t0===Hu.MARK_AS_REPLIED?258:ve.t0===Hu.CHAT_DELETE_MSG?266:ve.t0===Hu.FAQ_SESSION_UPDATE?287:ve.t0===Hu.MUTE_CONVERSATION?291:ve.t0===Hu.UNMUTE_CONVERSATION?295:299;break;case 30:if(!I){ve.next=58;break}return ve.next=33,(0,_r.select)((function(e){return e.conversationReducer}));case 33:return w=ve.sent,x=w.conversationMark,U="api"===x[S],ve.next=38,(0,_r.put)(xi({conversationId:S,markType:U?"":"socket"}));case 38:return ve.next=40,(0,_r.select)(Rs);case 40:if(M=ve.sent,k=M.findIndex((function(e){return e===E})),-1===k){ve.next=51;break}return qv(Yv.READ_SOCKET,Date.now()-E),ve.next=46,(0,_r.select)(As);case 46:return L=ve.sent,k>0&&(L+=k),M=M.slice(k+1),ve.next=51,(0,_r.put)(Ui({requestIds:M,count:L}));case 51:if(U){ve.next=58;break}if(!R.unread_count){ve.next=58;break}return ve.next=56,(0,_r.put)(gS("conversations",{conversation:R,read:!0}));case 56:return ve.next=58,(0,_r.put)(hn({type:ln.MARK_AS_READ,conversation:R}));case 58:return ve.abrupt("break",299);case 59:if(N&&(I=R&&n===s),!I){ve.next=64;break}if(0!==R.unread_count){ve.next=64;break}return ve.next=64,(0,_r.put)(hn({type:ln.MARK_AS_UNREAD,conversation:R}));case 64:return ve.abrupt("break",299);case 65:return ve.next=67,ra().put(oa().deleteConversationMessageHash({payload:{conversationId:S},isLazy:!0}));case 67:return ve.next=69,(0,_r.put)(CE({conversationId:S}));case 69:return ve.next=71,(0,_r.put)(bi({conversationId:S}));case 71:return ve.next=73,(0,_r.put)(Fr({name:"conversations",id:S}));case 73:return ve.next=75,(0,_r.select)(ys);case 75:if(!(ve.sent.length<20)){ve.next=79;break}return ve.next=79,(0,_r.put)(Ai({direction:"older"}));case 79:if(!R){ve.next=83;break}return ve.next=83,(0,_r.put)(hn({type:ln.DELETE_CONVERSATION,conversation:R}));case 83:return ve.abrupt("break",299);case 84:if(!A||!d||d===D.OfferStatus.PENDING){ve.next=97;break}return j=r.conversation_id,ve.next=88,(0,_r.select)($s(j));case 88:return G=ve.sent,ve.next=91,(0,_r.put)(gS("offers",{offer:A,status:d}));case 91:return ve.next=93,(0,_r.put)(ru({buyerId:A.buyer_id,shopId:A.shop_id}));case 93:if(F=G.latest_message_type,H=G.latest_message_content,F!==D.MessageTypes.MSG_TYPE_OFFER||(null==H?void 0:H.offer_id)!==_||(null==H?void 0:H.status)!==D.OfferStatus.PENDING){ve.next=97;break}return ve.next=97,(0,_r.put)(Gr({name:"conversations",id:j,record:{latest_message_content:mS(mS({},H),{},{status:d})}}));case 97:return ve.abrupt("break",299);case 98:if(!I){ve.next=125;break}return fS(R),ve.next=103,(0,_r.put)(gS("conversations",{conversation:R,status:d}));case 103:if("closed"!==d){ve.next=116;break}return ve.next=106,(0,_r.put)($S({conversationId:S}));case 106:return ve.next=108,(0,_r.put)(CE({conversationId:S}));case 108:return ve.next=110,ra().call(oa().deleteFakingMessages({payload:{conversationId:S}}));case 110:return ve.next=112,(0,_r.put)(hn({type:ln.CLOSE_CONVERSATION,conversation:R}));case 112:return ve.next=114,(0,_r.put)(gS("conversations",{conversation:R,read:!0}));case 114:ve.next=125;break;case 116:if("activated"!==d){ve.next=125;break}return o===S&&ra().put(oa().fetchMessagesRequested({payload:{conversationId:S,reset:!0},isLazy:!0})),ve.next=121,(0,_r.select)(ys);case 121:if(!ve.sent.includes(S)){ve.next=125;break}return ve.next=125,(0,_r.put)(yi({conversationId:S}));case 125:return ve.abrupt("break",299);case 126:return ve.next=128,(0,_r.select)(Eo);case 128:if(V=ve.sent,n!==s){ve.next=147;break}if(!y){ve.next=138;break}if(V){ve.next=136;break}return ve.next=134,(0,_r.put)(on({type:"CONFIRM_MODAL",title:ES("modal.title.auto_switch_to_hangup"),actions:{confirm:{label:ES("common.close"),handler:function(){Dt.store.dispatch(an()),Dt.store.dispatch(ha({showAutoHangupModal:!1}))}}},additions:{content:ES("modal.content.auto_switch_to_hangup")}}));case 134:return ve.next=136,(0,_r.put)(ha({showAutoHangupModal:!0}));case 136:ve.next=144;break;case 138:if("working"!==d){ve.next=144;break}if(!V){ve.next=144;break}return ve.next=142,(0,_r.put)(an());case 142:return ve.next=144,(0,_r.put)(ha({showAutoHangupModal:!1}));case 144:if(!v){ve.next=147;break}return ve.next=147,(0,_r.put)(on({type:"CONFIRM_MODAL",title:ES("common.confirm"),additions:{content:{key:"modal.content.switch_status",vars:{status:ES("common.".concat("working"===d?"online":"offline"))}}},actions:{confirm:{label:ES("common.ok")}}}));case 147:return ve.next=149,(0,_r.put)(gS("users",{userId:s,status:d}));case 149:return ve.abrupt("break",299);case 150:if(!I){ve.next=153;break}return ve.next=153,(0,_r.put)(gS("conversations",{conversation:R,flag:l}));case 153:return ve.abrupt("break",299);case 154:return ve.next=156,(0,_r.call)(fs);case 156:return ve.abrupt("break",299);case 157:return ve.next=159,(0,_r.put)(gS("rateCards",{cardId:p,status:d}));case 159:return ve.abrupt("break",299);case 160:return ve.next=162,(0,_r.put)(gS("conversations",{conversation:R,pinned:!0}));case 162:return ve.abrupt("break",299);case 163:return ve.next=165,(0,_r.put)(gS("conversations",{conversation:R,pinned:!1}));case 165:if(o!==S||"Pinned"!==P){ve.next=168;break}return ve.next=168,(0,_r.put)(Gi());case 168:return ve.abrupt("break",299);case 169:if(!(B=h.length)){ve.next=178;break}return Y={},h.forEach((function(e){Y[e]={unread_count:0}})),ve.next=175,(0,_r.put)(Hr({name:"conversations",records:Y}));case 175:return W=Object.assign({},{count:B,type:ln.MASS_READ},f?{shopId:f}:{}),ve.next=178,(0,_r.put)(hn(W));case 178:return ve.abrupt("break",299);case 179:if(Q=h.length,!h.length){ve.next=188;break}return q={},h.forEach((function(e){q[e]={unread_count:1}})),ve.next=185,(0,_r.put)(Hr({name:"conversations",records:q}));case 185:return K=Object.assign({},{count:Q,type:ln.MASS_UNREAD},f?{shopId:f}:{}),ve.next=188,(0,_r.put)(hn(K));case 188:return ve.abrupt("break",299);case 189:if(!h.length){ve.next=194;break}return z={},h.forEach((function(e){z[e]={pinned:!0}})),ve.next=194,(0,_r.put)(Hr({name:"conversations",records:z}));case 194:return ve.abrupt("break",299);case 195:if(!h.length){ve.next=200;break}return X={},h.forEach((function(e){X[e]={pinned:!1}})),ve.next=200,(0,_r.put)(Hr({name:"conversations",records:X}));case 200:return ve.abrupt("break",299);case 201:return ve.next=203,(0,_r.put)(Ai({direction:"latest"}));case 203:if(!h.length){ve.next=229;break}J={},$=hS(h),ve.prev=207,$.s();case 209:if((Z=$.n()).done){ve.next=217;break}if(ee=Z.value,J[ee]={status:"activated"},o!==ee){ve.next=215;break}return ve.next=215,ra().put(oa().fetchMessagesRequested({payload:{conversationId:o,reset:!0},isLazy:!0}));case 215:ve.next=209;break;case 217:ve.next=222;break;case 219:ve.prev=219,ve.t1=ve.catch(207),$.e(ve.t1);case 222:return ve.prev=222,$.f(),ve.finish(222);case 225:return ve.next=227,(0,_r.put)(Hr({name:"conversations",records:J}));case 227:return ve.next=229,(0,_r.call)(handleNotifyBatchConversation);case 229:return ve.abrupt("break",299);case 230:if(!h.length){ve.next=248;break}return te={},re=[],ve.next=236,(0,_r.select)(ei(h));case 236:return ne=ve.sent,oe=ne.filter((function(e){return(null==e?void 0:e.unread_count)>0})),h.forEach((function(e){te[e]={status:"closed",unread_count:0},re.push((0,_r.put)($S({conversationId:e}))),ra().call(oa().deleteFakingMessages({payload:{conversationId:e}}))})),ve.next=241,(0,_r.all)(re);case 241:return ve.next=243,(0,_r.put)(Hr({name:"conversations",records:te}));case 243:return ae=Object.assign({},{count:oe.length,type:ln.MASS_CLOSE},f?{shopId:f}:{}),ve.next=246,(0,_r.put)(hn(ae));case 246:return ve.next=248,(0,_r.put)(PE({conversationIds:h}));case 248:return ve.abrupt("break",299);case 249:return ce=r.content,ve.next=252,(0,_r.select)(Q_(ce.vid));case 252:return se=ve.sent,ve.next=255,(0,_r.select)(W_(se));case 255:return ve.sent.status||(ie=ce.status,ue=ce.vid,"successful"===ie&&(le=performance.getEntriesByName("REPORT_UPLOAD_".concat(ue),"mark")[0])&&(performance.mark("SERVICE_DONE_".concat(ue)),de=performance.getEntriesByName("SERVICE_DONE_".concat(ue))[0].startTime-le.startTime,performance.clearMarks("REPORT_UPLOAD_".concat(ue)),performance.clearMarks("SERVICE_DONE_".concat(ue)),qv(Yv.SERVICE_DONE,de)),ra().put(oa().updateVideoInfo({payload:{id:se,info:{status:ie,uploadResult:ce}}}))),ve.abrupt("break",299);case 258:if("Unreplied"!==P){ve.next=265;break}return ve.next=261,(0,_r.select)(ys);case 261:if(!ve.sent.includes(S)){ve.next=265;break}return ve.next=265,(0,_r.put)(Gr({name:"conversations",id:S,record:{unreplied:c===Hu.MARK_AS_UNREPLIED}}));case 265:return ve.abrupt("break",299);case 266:return ve.next=268,(0,_r.select)(q_(m));case 268:if(!(pe=ve.sent)){ve.next=281;break}return _e=pe.message_option|D.MessageOption.MSG_OPT_DELETE,fe=T("messages",mS(mS({},pe),{},{message_option:_e})),Ee=fe.entities,ve.next=274,(0,_r.put)(jr({entities:Ee}));case 274:if(![D.MessageTypes.MSG_TYPE_VIDEO,D.MessageTypes.MSG_TYPE_IMAGE,D.MessageTypes.MSG_TYPE_IMAGE_WITH_TEXT].includes(pe.type)){ve.next=281;break}return ve.next=277,(0,_r.select)((function(e){return e.mediaPreviewModalReducer&&e.mediaPreviewModalReducer.currentPreviewMediaId}));case 277:if(ve.sent!==m){ve.next=281;break}return ve.next=281,(0,_r.put)(sO());case 281:if(!R||R.latest_message_id!==m){ve.next=286;break}return Se=R.last_message_option|D.MessageOption.MSG_OPT_DELETE,Oe=T("conversations",mS(mS({},R),{},{last_message_option:Se,latest_message_content:{text:""},latest_message_from_id:i})),he=Oe.entities,ve.next=286,(0,_r.put)(jr({entities:he}));case 286:return ve.abrupt("break",299);case 287:if(!I){ve.next=290;break}return ve.next=290,ra().put(oa().fetchFaqSessionSucceed({payload:{faqSessionId:g,sessionExpiryTime:b,conversationId:S}}));case 290:return ve.abrupt("break",299);case 291:if(!I){ve.next=294;break}return ve.next=294,(0,_r.put)(gS("conversations",{conversation:R,mute:!0}));case 294:return ve.abrupt("break",299);case 295:if(!I){ve.next=298;break}return ve.next=298,(0,_r.put)(gS("conversations",{conversation:R,mute:!1}));case 298:return ve.abrupt("break",299);case 299:ve.next=304;break;case 301:if("message"!==t){ve.next=304;break}return ve.next=304,(0,_r.call)(Cu,{payload:r,type:D.ConversationTypeEnum.Normal});case 304:case"end":return ve.stop()}}),SS,null,[[207,219,222,225]])}function yS(e){return At().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,_r.call)(bS,e);case 2:case"end":return t.stop()}}),OS)}function RS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function AS(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?RS(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RS(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var DS=At().mark(wS),CS=At().mark(xS),IS=(0,ur.createActions)(e({},HE.UPDATE_NOTICES_COUNT,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,r=void 0===t?"add":t;return{type:r}}))),PS=IS.updateNoticesCount,NS=function(){return(0,_S.eventChannel)((function(e){return Ft?Ht.on("message",(function(t){var r=t.data,n=r.message_type,o=r.message_content,a=r.worker_event,c=r.payload;e(a?{event:a,payload:void 0===c?{}:c}:{pushedType:n,payload:JSON.parse(o)})})):(Object.values(D.SocketConnectionStatus).forEach((function(t){Ht.on(t,(function(){return e({event:t})}))})),Ht.on("message",(function(t){if(t){var r=t.message_type,n=t.message_content;e({pushedType:r,payload:JSON.parse(n)})}}))),function(){}}))};function wS(e){var t,r,n;return At().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(t=e.event,r=e.pushedType,n=e.payload,!t){o.next=6;break}return o.next=4,(0,_r.call)(KE,{event:t,payload:n});case 4:o.next=11;break;case 6:if(!r){o.next=11;break}return o.next=9,(0,_r.put)(PS());case 9:return o.next=11,(0,_r.call)(yS,{type:r,payload:n});case 11:case"end":return o.stop()}}),DS)}function xS(){var e;return At().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,_r.call)(NS);case 2:return e=t.sent,t.next=5,(0,_r.takeEvery)(e,wS);case 5:case"end":return t.stop()}}),CS)}const US=e({},HE.UPDATE_NOTICES_COUNT,(function(e,t){var r=t.payload.type;return AS(AS({},e),{},{noticesCount:"add"===r?e.noticesCount+1:0})}));var MS=At().mark(kS);function kS(){var e,t,r,n;return At().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:e="mini-session";case 1:return o.next=4,(0,_r.delay)(6e4);case 4:return o.next=6,(0,D.getItem)(e);case 6:return t=o.sent,o.next=9,(0,_r.select)(YS);case 9:return r=o.sent,o.next=12,(0,_r.select)(As);case 12:if(n=o.sent,!t||!t.token){o.next=19;break}return Bt({noticesCount:r,readMissedCount:n}),o.next=17,(0,_r.put)(Ui({count:0}));case 17:return o.next=19,(0,_r.put)(PS({type:"reset"}));case 19:o.next=1;break;case 21:case"end":return o.stop()}}),MS)}function LS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function jS(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?LS(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LS(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var GS,FS=[dS,kS,xS],HS=(0,ur.handleActions)(jS(jS(jS({},tS),pS),US),{reconnectFlag:!1,feedback:null,noticesCount:0}),VS=function(e){return e.socketReducer.feedback},BS=function(e){return e.socketReducer.reconnectFlag},YS=function(e){return e.socketReducer.noticesCount};function WS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var QS,qS=function(e){return e.mediaPreviewerReducer.mediaMap},KS=(0,fr.createSelector)(Is,qS,(function(e,t){return t[e]||[]})),zS=(0,ur.createActions)({ADD_MEDIA_FILE:function(e){return{medias:e.medias,conversationId:e.conversationId}},DELETE_MEDIA_FILE:function(e){return{id:e.id,conversationId:e.conversationId}},CLEAR_MEDIA_FILE:function(e){return{conversationId:e.conversationId}}}),XS=zS.addMediaFile,JS=zS.deleteMediaFile,$S=zS.clearMediaFile,ZS=(e(GS={},XS,Nu),e(GS,JS,wu),e(GS,$S,xu),GS),eO=(0,ur.handleActions)(function(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?WS(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WS(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},ZS),{mediaMap:{}});function tO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var rO,nO=function(e){return e.mediaPreviewModalReducer&&e.mediaPreviewModalReducer.showMediaPreviewModal},oO=function(e){return e.mediaPreviewModalReducer&&e.mediaPreviewModalReducer.currentPreviewMediaId},aO=(0,ur.createActions)({SHOW_MEDIA_PREVIEW_MODAL_REQUESTED:function(e){return{messageId:e.messageId}},CLOSE_MEDIA_PREVIEW_MODAL_REQUESTED:function(){return{}}}),cO=aO.showMediaPreviewModalRequested,sO=aO.closeMediaPreviewModalRequested,iO=(e(QS={},cO,(function(e,t){return{showMediaPreviewModal:!0,currentPreviewMediaId:t.payload.messageId}})),e(QS,sO,(function(e){return{showMediaPreviewModal:!1,currentPreviewMediaId:null}})),QS),uO=(0,ur.handleActions)(function(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?tO(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tO(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},iO),{showMediaPreviewModal:!1,currentPreviewMediaId:null}),lO=function(e){return e.translatePreferenceReducer.translationSettings},dO=function(e){return e.translatePreferenceReducer.fetchSettingsStatus},pO=function(e){return e.translatePreferenceReducer.updateStatus};!function(e){e.FETCH_SHOP_TRANSLATION_SETTINGS="FETCH_SHOP_TRANSLATION_SETTINGS",e.UPDATE_SHOP_TRANSLATION_SETTINGS="UPDATE_SHOP_TRANSLATION_SETTINGS",e.UPDATE_FETCH_STATUS="UPDATE_FETCH_STATUS",e.UPDATE_SETTING_PREFERENCE_STATUS="UPDATE_SETTING_PREFERENCE_STATUS",e.UPDATE_SHOP_TRANSLATION_SETTINGS_RECORD="UPDATE_SHOP_TRANSLATION_SETTINGS_RECORD"}(rO||(rO={}));var _O,fO,EO=y(439).t;function SO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function OO(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?SO(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SO(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var hO=At().mark(DO),vO=At().mark(CO),TO=At().mark(IO),mO=(0,ur.createActions)((e(_O={},rO.FETCH_SHOP_TRANSLATION_SETTINGS,(function(e){return{shopId:e.shopId}})),e(_O,rO.UPDATE_SHOP_TRANSLATION_SETTINGS,(function(e){return{settings:e.settings}})),e(_O,rO.UPDATE_FETCH_STATUS,(function(e){return{status:e.status}})),e(_O,rO.UPDATE_SETTING_PREFERENCE_STATUS,(function(e){return{status:e.status}})),e(_O,rO.UPDATE_SHOP_TRANSLATION_SETTINGS_RECORD,(function(e){return{shopId:e.shopId,source:e.source,translationPreference:e.translationPreference,autoTranslationStatus:e.autoTranslationStatus,inTranslationFeedbackWhitelist:e.inTranslationFeedbackWhitelist}})),_O)),gO=mO.fetchShopTranslationSettings,bO=mO.updateShopTranslationSettings,yO=mO.updateFetchStatus,RO=mO.updateSettingPreferenceStatus,AO=mO.updateShopTranslationSettingsRecord;function DO(e){var t,r,n,o,a,c;return At().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload.shopId,s.prev=1,s.next=4,(0,_r.put)(yO({status:"loading"}));case 4:return s.next=6,(0,_r.call)(Ev,{subServer:"workbenchapi",parent:"shop",resource:"setting",params:{shop_id:t}});case 6:return r=s.sent,n=r.source,o=r.translation_preference,a=r.auto_translation_status,c=r.in_translation_feedback_whitelist,s.next=13,(0,_r.put)(yO({status:"succeed"}));case 13:return s.next=15,(0,_r.put)(AO({shopId:t,source:n,translationPreference:o,autoTranslationStatus:a,inTranslationFeedbackWhitelist:c}));case 15:s.next=21;break;case 17:return s.prev=17,s.t0=s.catch(1),s.next=21,(0,_r.put)(yO({status:"failed"}));case 21:case"end":return s.stop()}}),hO,null,[[1,17]])}function CO(e){var t,r,n,o;return At().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload.settings,a.prev=1,a.next=4,(0,_r.put)(Ih({event_time:(Date.parse(new Date)/1e3).toString(),url:window.location.href}));case 4:return a.next=6,(0,_r.put)(RO({status:""}));case 6:return r=t.shop_id,n=t.auto_translation_status,o=t.translation_preference,a.next=9,(0,_r.call)(Ev,{method:"PUT",subServer:"workbenchapi",parent:"shop",resource:"setting",payload:JSON.stringify(t)});case 9:return a.next=11,(0,_r.put)(AO({shopId:r,translationPreference:o,autoTranslationStatus:n}));case 11:return a.next=13,(0,_r.call)(l_,o_({toast:{show:!0,type:"success",message:EO("tips.set_preference_succeed")}}));case 13:a.next=21;break;case 15:return a.prev=15,a.t0=a.catch(1),a.next=19,(0,_r.put)(RO({status:"failed"}));case 19:return a.next=21,(0,_r.call)(l_,o_({toast:{show:!0,type:"fail",message:EO("tips.set_preference_failed")}}));case 21:case"end":return a.stop()}}),vO,null,[[1,15]])}function IO(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_r.takeEvery)(gO,DO);case 2:return e.next=4,(0,_r.takeEvery)(bO,CO);case 4:case"end":return e.stop()}}),TO)}var PO=(0,ur.handleActions)((e(fO={},rO.UPDATE_SHOP_TRANSLATION_SETTINGS_RECORD,(function(e,t){var r=t.payload,n=r.shopId,o=r.source,a=r.translationPreference,c=r.autoTranslationStatus,s=r.inTranslationFeedbackWhitelist,i=OO({},e.translationSettings),u=i[n]||{};return i[n]=OO(OO({},u),{},{translationPreference:a,autoTranslationStatus:c}),o&&(i[n].source=o),s&&(i[n].inTranslationFeedbackWhitelist=s),OO(OO({},e),{},{translationSettings:i})})),e(fO,rO.UPDATE_FETCH_STATUS,(function(e,t){var r=t.payload.status;return OO(OO({},e),{},{fetchSettingsStatus:r})})),e(fO,rO.UPDATE_SETTING_PREFERENCE_STATUS,(function(e,t){var r=t.payload.status;return OO(OO({},e),{},{updateStatus:r})})),fO),{translationSettings:{},fetchSettingsStatus:"",updateStatus:""}),NO=[IO];function wO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xO(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?wO(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wO(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var UO=At().mark(VO),MO=At().mark(BO),kO=At().mark(YO),LO=At().mark(WO),jO=At().mark(QO),GO=At().mark(qO),FO=At().mark(KO),HO=At().mark(zO);function VO(e){var t,r,n,o,a,c;return At().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,r=t.id,n=t.shopId,s.next=3,(0,_r.call)(Ev,{resource:"products",id:r,params:{shop_id:n,need_cache:1,cache_expires:600},cleaner:jT});case 3:return o=s.sent,o=ce(o),a=T("products",o),c=a.entities,s.next=8,(0,_r.put)(jr({entities:c}));case 8:return s.abrupt("return",o);case 9:case"end":return s.stop()}}),UO)}function BO(e){var t,r,n,o,a,c,s,i,u,l,d;return At().wrap((function(p){for(;;)switch(p.prev=p.next){case 0:return t=e.payload,r=t.id,n=t.shopId,o=t.isChatbotOrder,a=t.currentUserShopId,p.next=3,(0,_r.select)(Qs);case 3:return c=p.sent,p.next=6,(0,_r.call)(Ev,{resource:"order",id:r,params:{shop_id:n}});case 6:return s=p.sent,p.next=9,(0,_r.select)(io);case 9:return i=p.sent,u=Ye(s,n,c,!i||o,a),l=T("orders",u),d=l.entities,p.next=15,(0,_r.put)(jr({entities:d}));case 15:return p.abrupt("return",u);case 16:case"end":return p.stop()}}),MO)}function YO(e,t,r,n,o){var a,c,s,i,u,l;return At().wrap((function(d){for(;;)switch(d.prev=d.next){case 0:if(a=Array.isArray(e),c=a?e:[e],s=Array.from(new Set(c.map((function(e){return e.product_id})))),i=[],!a){d.next=19;break}return d.prev=5,d.next=8,(0,_r.call)(showProducts,{payload:{productIds:s,shopId:t}});case 8:i=d.sent,d.next=17;break;case 11:return d.prev=11,d.t0=d.catch(5),u=s.map((function(e){return(0,_r.call)(VO,{payload:{id:e,shopId:t}})})),d.next=16,(0,_r.all)(u);case 16:i=d.sent;case 17:d.next=23;break;case 19:return d.next=21,(0,_r.call)(VO,{payload:{id:e.product_id,shopId:t}});case 21:l=d.sent,i=[l];case 23:return d.abrupt("return",c.map((function(e){var t=i.find((function(t){return t.id===e.product_id}))||{};return Se(e,"list",r,n,t,o)})));case 24:case"end":return d.stop()}}),kO,null,[[5,11]])}function WO(e){var t,r,n,o,a,c,s,i,u,l,d;return At().wrap((function(p){for(;;)switch(p.prev=p.next){case 0:return t=e.payload,r=t.id,n=t.shopId,p.next=3,(0,_r.select)(hE(r));case 3:return o=p.sent,p.next=6,(0,_r.select)(Qs);case 6:return a=p.sent,p.next=9,(0,_r.select)(zn);case 9:return c=p.sent,p.next=12,(0,_r.select)(qn);case 12:if(s=p.sent,!o||o.status===D.OfferStatus.PENDING){p.next=15;break}return p.abrupt("return",o);case 15:return p.next=17,(0,_r.call)(Ev,{resource:"offers",id:r,params:{shop_id:n}});case 17:return i=p.sent,p.next=20,(0,_r.call)(YO,i,n,a,c,s);case 20:return u=p.sent,l=T("offers",u),d=l.entities,p.next=24,(0,_r.put)(jr({entities:d}));case 24:return p.abrupt("return",u[0]);case 25:case"end":return p.stop()}}),LO)}function QO(e){var t,r,n,o,a,c,s,i,u;return At().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.shopId,r=e.id,l.next=3,(0,_r.select)(Pn);case 3:return n=l.sent,l.next=6,(0,_r.select)(Kn);case 6:return o=l.sent,a="vouchers_by_ids",l.next=10,(0,_r.call)(Ev,{parent:"vouchers",resource:a,params:{ids:JSON.stringify([parseInt(r)]),shop_id:t,buyer_id:o?0:n}});case 10:if(c=l.sent,!(s=c[a])||!s.length){l.next=18;break}return s=s.map((function(e){return Re(e,!1)})),i=T("vouchers",s),u=i.entities,l.next=17,(0,_r.put)(jr({entities:u}));case 17:return l.abrupt("return",s[0]);case 18:case"end":return l.stop()}}),jO)}function qO(e){var t,r,n,o,a,c,s,i,u;return At().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.payload,r=t.id,n=t.creatorId,l.next=3,(0,_r.select)(Bs);case 3:return o=l.sent,a=o.shop_id,l.next=7,(0,_r.call)(Ev,{parent:"feed",resource:"stories",params:{ids:JSON.stringify([r]),creator:n,shop_id:a,need_cache:1,cache_expire:1800}});case 7:return c=l.sent,s=c.stories[0],i=T("feedStories",s),u=i.entities,l.next=12,(0,_r.put)(jr({entities:u}));case 12:return l.abrupt("return",s);case 13:case"end":return l.stop()}}),GO)}function KO(e){var t,r,n,o,a;return At().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.cartItems,r=e.shopId,c.next=3,(0,_r.call)(Ev,{parent:"product",resource:"get",method:"POST",payload:JSON.stringify({shop_id:r,items:t.slice(0,4)})});case 3:return n=c.sent,o=n.get,a=void 0===o?[]:o,c.abrupt("return",a.map(fe));case 7:case"end":return c.stop()}}),FO)}function zO(e){var t,r,n,o,a,c,s,i;return At().wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.payload,r=t.ids,n=t.id,u.next=3,(0,_r.select)(Bs);case 3:return o=u.sent,a=o.shop_id,c=o.id,u.next=7,(0,_r.call)(Ev,{parent:"conversation",resource:"messages",params:{ids:"[".concat(r.join(","),"]"),shop_id:a}});case 7:return s=u.sent,i=s.messages,u.next=11,(0,_r.call)(kl,{list:Yt(i),conversationId:c,handleSave:function(e){var t=e.records;Object.keys(t).forEach((function(e){var r=i.findIndex((function(t){return t.id===e}));if(r>=0){var n=i[r];i.splice(r,1,xO(xO({},n),{},{content:xO(xO({},n.content),t[e])}))}}))}});case 11:return u.abrupt("return",{id:n,messages:i});case 12:case"end":return u.stop()}}),HO)}var XO=At().mark(ZO);function JO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $O(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?JO(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JO(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ZO(e,t,r){var n,o,a,c,s=arguments;return At().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return n=s.length>3&&void 0!==s[3]?s[3]:[],o=e,a=[],c=[],Array.isArray(e)&&(o=(T(r,e).entities||{})[r]||{}),t.forEach((function(e){var t=e.id,s=o[t];s?["conversations","agentConversations"].includes(r)&&(void 0!==s.faking||s.latestMessageStatus||void 0!==s.unreplied)?(delete(e=$O($O({},s),e)).faking,delete e.latestMessageStatus,delete e.unreplied,c.push(e)):(n.length&&n.forEach((function(t){e[t]=s[t]})),a.push((0,_r.put)(Gr({name:r,id:t,record:$O({},e)})))):c.push(e)})),c.length&&a.push((0,_r.put)(jr({entities:T(r,c).entities}))),i.next=9,(0,_r.all)(a);case 9:case"end":return i.stop()}}),XO)}var eh,th,rh=function(e){return e.voucherReducer.status},nh=(0,fr.createSelector)(yr,(function(e){return e.voucherReducer.voucherIds}),(function(e,r){return((0,t.denormalize)(r,[h],{vouchers:e})||[]).filter((function(e){return e}))})),oh=function(e){return(0,fr.createSelector)(yr,(function(r){return(0,t.denormalize)(e,h,{vouchers:r})}))},ah={currentPage:0,perPage:20,total:0,hasMore:!0},ch=function(e){return(0,fr.createSelector)(gr,(function(r){return(0,t.denormalize)(e,i,{orders:r})}))},sh=function(e){return(e.orderReducer||{}).cancelReasons},ih=function(e){return e.orderReducer.status},uh=function(e){return e.orderReducer.fetchResult},lh=function(e,t){return(0,fr.createSelector)(uh,(function(r){return r["".concat(e,"_").concat(t)]||{pagination:ah,result:[]}}))},dh=(0,fr.createSelectorCreator)(fr.defaultMemoize,(function(e,t){return e.id===t.id}))(Bs,(function(e){return e})),ph=(0,fr.createSelector)(uh,dh,gr,(function(e,r,n){var o=r.shop_id,a=r.to_id,c=e["".concat(o,"_").concat(a)];if(!c)return[];var s=c.result||[];return(0,t.denormalize)(s,[i],{orders:n})})),_h=function(e){return(0,fr.createSelector)(br,(function(r){return(0,t.denormalize)(e,u,{products:r})}))},fh=function(e){return(0,fr.createSelector)(br,(function(r){return(0,t.denormalize)(e,[u],{products:r})}))},Eh={currentPage:0,perPage:20,total:0,hasMore:!0},Sh=function(e){return e.productReducer.fetchResult},Oh=function(e){return e.productReducer.allProductsSearchStatus},hh=function(e){return e.productReducer.sellerRecommendProducts},vh=function(e){return e.productReducer.systemRecommendProducts},Th=function(e){return e.productReducer.groups},mh=function(e){return e.productReducer.systemRecommendProductsFetchStatus},gh=function(e){return e.productReducer.sellerRecommendProductsFetchStatus},bh=function(e){return e.productReducer.fetchGroupsStatus},yh=function(e){return(0,fr.createSelector)(Sh,(function(t){return t[e]||{pagination:Eh,result:[]}}))},Rh=(0,fr.createSelector)(Sh,ti,br,(function(e,r,n){var o=e[r];if(!o)return[];var a=o.result||[];return(0,t.denormalize)(a,[u],{products:n})})),Ah=function(e){return e.reportReducer.beingReported};!function(e){e.REPORT_REQUESTED="REPORT_REQUESTED",e.CLEAR_REPORT_REQUESTED="CLEAR_REPORT_REQUESTED"}(eh||(eh={}));var Dh,Ch=(0,ur.createActions)((e(th={},eh.REPORT_REQUESTED,(function(e){return{event_time:e.event_time,url:e.url}})),e(th,eh.CLEAR_REPORT_REQUESTED,(function(){return{}})),th)),Ih=Ch.reportRequested,Ph=Ch.clearReportRequested,Nh=At().mark(Mh),wh=At().mark(kh);function xh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Uh(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?xh(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xh(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Mh(){var e,t;return At().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,_r.select)(Ah);case 2:if(!(e=r.sent).length){r.next=10;break}return t=Yt(e),r.next=7,(0,_r.put)(Ph());case 7:return t.sort((function(e,t){return Number(t.event_time)-Number(e.event_time)})),r.next=10,(0,_r.call)(Ev,{method:"POST",subServer:"coreapi",parent:"user",resource:"report_active",payload:JSON.stringify(Uh(Uh({},t[0]),{},{platform_id:(0,D.isVisitingCNSC)()||(0,D.isVisitingKRSC)()?2:1}))});case 10:case"end":return r.stop()}}),Nh)}function kh(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,(0,_r.delay)(6e4);case 3:return e.next=5,Mh();case 5:e.next=0;break;case 7:case"end":return e.stop()}}),wh)}const Lh=(e(Dh={},eh.REPORT_REQUESTED,(function(e,t){var r=t.payload,n=r.event_time,o=r.url;return{beingReported:[].concat(Yt(e.beingReported),[{event_time:n,url:o}])}})),e(Dh,eh.CLEAR_REPORT_REQUESTED,(function(e){return{beingReported:[]}})),Dh);function jh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var Gh=[kh],Fh=(0,ur.handleActions)(function(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?jh(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jh(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Lh),{beingReported:[]}),Hh=At().mark(zh);function Vh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Bh(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Vh(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Vh(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Yh,Wh=48e4,Qh=6e4,qh=!1,Kh="9223372036854775807";function zh(){var e,t,r,n,o,a,c,s,i,u,l,d,p,_,f,E,S;return At().wrap((function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=3,(0,_r.delay)(Qh);case 3:return e=void 0,e="mini-session",O.next=7,(0,D.getItem)(e);case 7:if(!(t=O.sent)||!t.token){O.next=58;break}return O.prev=9,O.next=12,(0,_r.select)((function(e){return e.conversationReducer}));case 12:return r=O.sent,n=r.maxLatestReceivedMessageId,o=r.maxLatestTimestampNano,O.next=17,(0,_r.select)(Kn);case 17:return a=O.sent,O.next=20,(0,_r.select)(Fs);case 20:return c=O.sent.toLowerCase(),s=!a&&["all","unread"].includes(c),i=["pinned","unread"].includes(c),u={},s?u.last_timestamp_nano=o||Kh:u.last_message_id=n||Kh,u.last_unread_count_sync=qh,O.next=28,(0,_r.spawn)(Ev,{method:"POST",resource:"user",suffix:"sync",params:Bh({},u)});case 28:return l=O.sent,O.next=31,(0,_r.join)(l);case 31:if(d=O.sent,p=d.have_new_msg,_=d.unread_count,f=d.current_version,qh=!1,!p){O.next=44;break}return O.next=39,(0,_r.select)((function(e){return e.conversationReducer}));case 39:if(!(O.sent.syncFetchException<3)||i){O.next=44;break}return O.next=44,(0,_r.put)(Ai({direction:"latest",source:D.ConversationSource.SYNC}));case 44:if(!(_>-1)){O.next=53;break}return O.next=47,(0,_r.select)(un);case 47:if((E=O.sent)===_){O.next=52;break}return O.next=51,(0,_r.put)(vn({count:_}));case 51:qh=!0;case 52:a||(Qh=E!==_||p?6e4:Qh>=Wh?Wh:2*Qh);case 53:f&&f!==t.version&&(S=Object.assign({},t,{version:f}),(0,D.setItem)(e,S)),O.next=58;break;case 56:O.prev=56,O.t0=O.catch(9);case 58:O.next=0;break;case 60:case"end":return O.stop()}}),Hh,null,[[9,56]])}function Xh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Jh(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Xh(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Xh(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}!function(e){e.REDIRECT_CONVERSATION_REQUESTED="REDIRECT_CONVERSATION_REQUESTED"}(Yh||(Yh={}));var $h=At().mark(nv),Zh=At().mark(ov),ev=At().mark(av),tv=(0,ur.createActions)(e({},Yh.REDIRECT_CONVERSATION_REQUESTED,(function(e){var t=e.userId,r=e.shopId,n=e.orderId,o=e.productId,a=e.message;return{userId:t,shopId:r,orderId:n,productId:o,message:void 0===a?"":a,entryPointType:e.entryPointType}}))),rv=tv.redirectConversationRequested;function nv(e){var t;return At().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=T("conversations",e),r.next=3,(0,_r.put)(jr({entities:t.entities}));case 3:case"end":return r.stop()}}),$h)}function ov(e){var t,r,n,o,a,c,s,i,u,l,d,p,_,f,E,S,O,h,v,T;return At().wrap((function(m){for(;;)switch(m.prev=m.next){case 0:return t=e.payload,r=t.userId,n=t.shopId,o=t.orderId,a=t.isFromSearch,c=void 0!==a&&a,s=t.productId,i=t.message,u=t.entryPointType,m.next=3,(0,_r.select)(ys);case 3:return l=m.sent,m.next=6,(0,_r.call)(Ev,{method:"POST",resource:"conversation",suffix:"redirection",payload:JSON.stringify({user_id:parseInt(r),shop_id:n})});case 6:if(d=m.sent,p=d.id,_=d.faking,f=d.mask,E=d.to_name,O=Jh(Jh({userId:r,shopId:n},S={orderId:o,productId:s}),{},{conversationId:d.id}),h=l.length,v=_||!l.includes(p),u&&ra().put(oa().setEntryPoint({payload:{type:u,conversationId:p}})),!v){m.next=21;break}return m.next=16,(0,_r.call)(nv,d);case 16:if(!h){m.next=19;break}return m.next=19,(0,_r.put)(Ri({conversationId:p}));case 19:m.next=23;break;case 21:return m.next=23,(0,_r.put)(Gr({name:"conversations",id:p,record:{to_name:E,mask:f}}));case 23:if(!i){m.next=26;break}return m.next=26,(0,_r.put)(NE({draft:i,conversationId:p}));case 26:return m.next=28,(0,_r.call)(D.setItem,"mini-sc_redirect",O);case 28:return m.next=30,(0,_r.select)(Is);case 30:if(m.sent===p&&!v){m.next=36;break}return m.next=34,(0,_r.put)(au({conversationId:d.id}));case 34:return m.next=36,(0,_r.put)(ji({conversation:d,sourceInfo:S}));case 36:return m.next=38,(0,_r.select)(co);case 38:if(m.sent){m.next=44;break}return T="",o?T=D.ChatbotFromType.OrderPage:s?T=D.ChatbotFromType.ProductPage:n&&(T=D.ChatbotFromType.ShopPage),m.next=44,(0,_r.call)(xa,{payload:{shouldShowWindow:!0,from:T}});case 44:if(h){m.next=47;break}return m.next=47,(0,_r.put)(Ri({conversationId:p}));case 47:return m.next=49,(0,_r.put)(ma({shouldShowConversationDetail:!0}));case 49:!c&&ra().put(oa().sendMessagesRequested({payload:{conversationId:d.id,messages:[{type:"text",content:{text:""},isFaking:!0}],more:{isFakingSource:!0}}}));case 50:case"end":return m.stop()}}),Zh)}function av(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_r.takeEvery)(rv,ov);case 2:case"end":return e.stop()}}),ev)}var cv=[zh,av],sv=At().mark(iv);function iv(e,t,r){return At().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,_r.takeEvery)(e,At().mark((function e(n){var o;return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.payload.id){e.next=5;break}return e.next=4,(0,_r.call)(t,n);case 4:return e.abrupt("return");case 5:return e.next=7,(0,_r.race)({task:(0,_r.call)(t,n),cancel:(0,_r.take)((function(e){return e.type===r.toString()&&e.payload.id===o}))});case 7:case"end":return e.stop()}}),e)})));case 2:case"end":return n.stop()}}),sv)}function uv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function lv(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?uv(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uv(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var dv=(0,D.checkIsScChat)(),pv=(0,D.getRuntimeVersion)(),_v=function(){var e=window.__SERVICEDOWN_STATT_TIME__,t=window.__SERVICEDOWN_END_TIME__,r=void 0!==e&&void 0!==t,n=Math.ceil(Date.now()/1e3);return r&&n>=e&&n<=t},fv=function(e){var t=e.split("?")[0];return t.endsWith("conversations")||t.endsWith("conversation/list")};function Ev(e){return Sv.apply(this,arguments)}function Sv(){return Sv=yt(At().mark((function t(r){var n,o,a,c,s,i,u,l,d,p,_,f,E,S,O,h,v,T,m,g,b,y,R,C,I,P,N,w,x,U,M,k,L,j,G;return At().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.shared,o=void 0!==n&&n,a=r.url,c=r.ssl,s=void 0===c||c,i=r.server,u=r.subServer,l=r.version,d=void 0===l?"v1.2":l,p=r.parent,_=r.parentId,f=r.resource,E=r.id,S=r.suffix,O=r.method,h=void 0===O?"GET":O,v=r.credentials,T=void 0===v?"include":v,m=r.extension,g=r.params,b=void 0===g?{}:g,y=r.payload,R=r.headers,C=void 0===R?{}:R,I=r.namespace,P=void 0===I?"mini":I,N=r.cleaner,w=void 0===N?function(e){return e}:N,x=r.fetcher,U="mini-session",M="mini-session",k=function(){return!!Ft&&Dt.store.getState().userReducer.isMainPage},L=function(){if("sc"===S)return E;if("auth"===f)return _;if(b.shop_id)return b.shop_id;if(y)try{return JSON.parse(y).shop_id}catch(e){}},j=function(){var t=yt(At().mark((function t(r){var n,c,l,O,v,g,R,I,N,U,M,j,G,F,H,V,B,Y,W,Q,q,K,z,X,J,$,Z,ee,te,re,ne,oe,ae,ce,se;return At().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=It().get("CTOKEN"),l=(c=r||{}).token,O=c.version,v=c.user,g=(v=void 0===v?{}:v).id,R=v.type,I=0,N=0,U=0,F="",H={},t.next=11,wt.getRegion("subaccount"===R,L());case 11:if(V=t.sent,B=l&&"include"===T||!i?{Authorization:"Bearer ".concat(l),"x-shop-region":V}:{},!i&&(i=(0,D.getApiServer)()),a?j=a:(Y=[s?"https:/":"http:/",i,u,d,P,p,_,f,E,S].filter(Boolean).join("/"),W=m?"".concat(Y,".").concat(m):Y,(Q=r&&r.user&&r.user.uid)&&(b._uid=Q),pv&&(b._v=pv),n&&(b.csrf_token=n),b._api_source=dv?"sc":"pcmall",G=Object.entries(b).filter((function(e){var t=A(e,2),r=(t[0],t[1]);return r||0===r})).map((function(e){var t=A(e,2),r=t[0],n=t[1];return"".concat(r,"=").concat(encodeURIComponent(n))})).join("&"),j=[W,G].filter(Boolean).join("?"),q=[P,p,_,f,E,S].filter(Boolean).join("/"),K=m?"/".concat(q,".").concat(m):"/".concat(q),H._uid=Q||"",H._v=pv||"",z=Object.entries(H).map((function(e){var t=A(e,2),r=t[0],n=t[1];return"".concat(r,"=").concat(encodeURIComponent(n))})).join("&"),F=[K,z].join("?")),t.prev=15,!(void 0!==E&&parseInt(E)<=0&&!j.includes("message_shortcuts/group")||void 0!==_&&parseInt(_)<=0)){t.next=19;break}throw new Error;case 19:return X={},J=Date.now(),x&&($=ir({url:F,method:h,version:pv,token:B.Authorization||"",fromID:g,payload:y,timestamp:J}),X={ts:J,"x-v":O||"","x-s":cr(O,$)}),Z={method:h,credentials:T,headers:lv(lv(lv({},B),X),C),body:y},ee=x||zt,t.next=27,ee(j,Z);case 27:te=t.sent,I=te.status,t.t0=I,t.next=204===t.t0?32:404===t.t0?34:452===t.t0?36:500===t.t0?38:502===t.t0?40:42;break;case 32:return re=null,t.abrupt("break",46);case 34:return re={message:"Resource not found"},t.abrupt("break",46);case 36:return re={message:"Tempory Error"},t.abrupt("break",46);case 38:return re={message:"Internal server error"},t.abrupt("break",46);case 40:return re={message:"Bad Gateway"},t.abrupt("break",46);case 42:return 200===I&&(N=parseInt(te.headers.get("total")),U=parseInt(te.headers.get("per-page"))),t.next=45,te.json();case 45:re=t.sent;case 46:if([200,204].includes(I)&&"report_upload"===f&&y&&(ne=JSON.parse(y),oe=ne.vid,performance.mark("REPORT_UPLOAD_".concat(oe))),gt(I)||_v()||Dt.store.dispatch(cu({flag:!1,alert:!1,list:!1})),200!==I){t.next=53;break}return ae=re instanceof Array?e({total:N,perPage:U},f,re.map((function(e){return w(e,dv)}))):w(re,dv),o&&k()&&Ht.dispatch(D.CustomShareEvent.SHARE_API_DATA,lv({type:D.ShareDataType.UNREAD},"object"===Je(ae)?ae:{res:ae})),x&&y&&(M=JSON.parse(y).request_id,(0,D.setItem)(M,J)),t.abrupt("return",ae);case 53:if(204!==I){t.next=55;break}return t.abrupt("return",null);case 55:if(!gt(I)){t.next=81;break}if(!_v()){t.next=63;break}throw fv(j)?Dt.store.dispatch(cu({list:!0,alert:!0})):Dt.store.dispatch(cu({flag:!0,alert:!0})),new(mt(I))(re.message,re.errors||re.error_code||re.errcode,re.data);case 63:if(Dt.store.dispatch(cu({flag:!1,list:!1,alert:!1})),[400,404].includes(I),![429,451,491,493].includes(I)){t.next=70;break}throw new(mt(I))(re);case 70:if(401!==I){t.next=78;break}if(Dt.store.dispatch(dr({resource:f})),"login"!==f){t.next=76;break}throw(ce=new(mt(I))(re.message,re.errors||re.error_code||re.errcode,re.data))&&(ce._type_="forbidden"),ce;case 76:t.next=81;break;case 78:throw(se=new(mt(I))(re.message,re.errors||re.error_code||re.errcode,re.data))&&400===I&&(se._type_="client"),se;case 81:t.next=87;break;case 83:throw t.prev=83,t.t1=t.catch(15),I||(t.t1.offlineError=!0),t.t1;case 87:case"end":return t.stop()}}),t,null,[[15,83]])})));return function(e){return t.apply(this,arguments)}}(),!o||k()){t.next=8;break}return t.abrupt("return");case 8:G=null;try{G=D.LS.getItem(M,!0)}catch(e){G=null}if(G){t.next=14;break}return t.next=13,(0,D.getItem)(U);case 13:G=t.sent;case 14:return t.abrupt("return",j(G));case 15:case"end":return t.stop()}}),t)}))),Sv.apply(this,arguments)}var Ov,hv,vv,Tv,mv=function(e,t){if(window.requestIdleCallback)return window.requestIdleCallback(e,t);var r=Date.now();return setTimeout((function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-r))}})}),1)},gv=y(782),bv=y(830),yv=y.n(bv),Rv=y(292),Av=y.n(Rv),Dv={"18a6f08d7326025b60ded61f60c9ea20":"LOAD_HTML","0d2968a6996a60fee2db1270a70ef563":"LOAD_STATIC",ea02fc90bd3663f3179be7a1b7847a83:"APP_PREPARE","4e0b71ed91b3eacb1dfc4ec7f63b2966":"LOGIN_API","9d4a48b69fed6d1001e63ee668a05488":"LOGIN_SUCCEEDED","84fcedc144bfce212ae8db9f6ebb84ec":"SHOW_WEBCHAT"};Ov={LOAD_HTML:"31b7f223943eee895738ce50e49a359a",LOAD_STATIC:"0ec7c5189cc4ada79908cfe5d6bd97ca",APP_PREPARE:"a61675f22b23600e51007c24a9b8aaf2",LOGIN_API:"75cbf76696b4f8d988de72cdfeb1877c",LOGIN_SUCCEEDED:"05c0e68ee42384c7e07e47fec4400e28",SHOW_WEBCHAT:"1b16553696a08e9f016235005a5a0678",VIDEO_UPLOAD:"334a26e8a6dc82c95a47430f8af2e198",SERVICE_DONE:"19f2ea17be2d1d80257667787e54c882",MESSAGE_SOCKET:"f76ebd29ea3ed4571c9ea48ca893ac14",READ_SOCKET:"37e5b36437f0166056d3312fcea2b592",LOGIN_FAILED:"df8a83f83c949bb6a2b84c6f0048e203",SOCKET_FAILED:"13ddf42d9169b2ce05feb84224d79057",SHARED_TABS:"94e8d83005c95982268ff1c8b036313e",CHATWS_SOCKET_FAILED:"9034ae776ecbdc29ec67fb0edf78011f"},hv={LOAD_HTML:"18a6f08d7326025b60ded61f60c9ea20",LOAD_STATIC:"0d2968a6996a60fee2db1270a70ef563",APP_PREPARE:"ea02fc90bd3663f3179be7a1b7847a83",LOGIN_API:"4e0b71ed91b3eacb1dfc4ec7f63b2966",LOGIN_SUCCEEDED:"9d4a48b69fed6d1001e63ee668a05488",SHOW_WEBCHAT:"84fcedc144bfce212ae8db9f6ebb84ec",VIDEO_UPLOAD:"cc0dbd7370b7ade934cfe7c01bbd4ae9",SERVICE_DONE:"26ba92fb54150fe3bd6f827bb08ce8c9",MESSAGE_SOCKET:"a01882e94fde5237ca815e13b0e2a88b",READ_SOCKET:"e46fdcb42cae43a7e6f49213f150fa8e",LOGIN_FAILED:"87df9f73fb8b93629ae8a08822cfcf77",SOCKET_FAILED:"3a74221d64cf853a5c3ca65c3c3339eb",SHARED_TABS:"22557ca0a2caca6bae43f1932f088d47",CHATWS_SOCKET_FAILED:"f729b9774aef5b67bfd37afc711bdd3f"},vv="b23651c629e54c7bc1c9a743f25dbb5825cb1ed4e7bb7f8a78cd788dfc769127",Tv="2b74d02be173856bde260473166da16b83fcc18d18057ce8b4a73eab5f1c7280";var Cv,Iv={HTML_LOADED:"HTML_LOADED",STATIC_LOADED:"STATIC_LOADED",APP_PREPARED:"APP_PREPARED",LOGIN_API_RESPONSED:"LOGIN_API_RESPONSED",APP_RENDERING:"APP_RENDERING",RENDER_CONVERSATION_LIST:"RENDER_CONVERSATION_LIST",RENDER_MESSAGE_LIST:"RENDER_MESSAGE_LIST",RENDER_WELCOME_PAGE:"RENDER_WELCOME_PAGE"},Pv={WELCOME_PAGE:"WELCOME_PAGE",MESSAGE_LIST:"MESSAGE_LIST",CONVERSATION_LIST:"CONVERSATION_LIST",APP:"APP"},Nv={TYPE_ERROR:"TypeError",RANGE_ERROR:"RangeError",SYNTAX_ERROR:"SyntaxError",REFERENCE_ERROR:"ReferenceError",SAGA_ERROR:"Saga Error",ERROR_BOUNDARY:"Error Boundary",PRELOAD_ERROR:"Preload Error",SOCKET_LOGIN_FAILED:"Socket Login Failed",LOGIN_ERROR:"Login Error",PARAMETER_ERROR:"Parameter Error",API_UNCAUGHT_ERROR:"Api Uncaught Error",API_CLIENT_ERROR:"Api Client Error"},wv={TYPE_ERROR:"type_error",RANGE_ERROR:"range_error",SYNTAX_ERROR:"syntax_error",REFERENCE_ERROR:"reference_error",ERROR_BOUNDARY:"error_boundary",PRELOAD_ERROR:"preload_error",SOCKET_LOGIN_FAILED:"socket_login_failed",LOGIN_ERROR:"login_error",PARAMETER_ERROR:"parameter_error",API_CLIENT_ERROR:"api_client_error",API_UNCAUGHT_ERROR:"api_uncaught_error"};function xv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Uv(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?xv(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xv(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}window.__CHANGE_FETCH__||(window.fetch=Qt(),window.__CHANGE_FETCH__=!0);var Mv,kv,Lv,jv,Gv=function(e){Cv=e},Fv=!1,Hv=location.host.includes("shopee.cn"),Vv=(0,D.checkIsScChat)(),Bv=[],Yv="live"===(0,D.getRuntimeServer)()?Ov:hv,Wv=function(){try{var e=performance.getEntriesByName(Iv.HTML_LOADED,"mark")[0].startTime,t=performance.getEntriesByName(Iv.STATIC_LOADED,"mark")[0].startTime,r=performance.getEntriesByName(Iv.APP_PREPARED,"mark")[0].startTime,n=performance.getEntriesByName(Iv.LOGIN_API_RESPONSED,"mark")[0].startTime,o=performance.getEntriesByName(Iv.APP_RENDERING,"mark")[0].startTime;Bv.push({id:Yv.LOAD_HTML,duration:window.__INDEX_HTML_LOADED__},{id:Yv.LOAD_STATIC,duration:Math.floor(t-e)},{id:Yv.APP_PREPARE,duration:Math.floor(r-t)},{id:Yv.LOGIN_API,duration:Math.floor(n-r)},{id:Yv.LOGIN_SUCCEEDED,duration:Math.floor(o-n)})}catch(e){}},Qv=function(e,t){try{var r=null,n=performance.getEntriesByName(Iv.APP_RENDERING,"mark")[0].startTime;switch(e){case Pv.WELCOME_PAGE:r=performance.getEntriesByName(Iv.RENDER_WELCOME_PAGE,"mark")[0].startTime,Bv.push({id:Yv.RENDER_WELCOME_PAGE,duration:Math.floor(r-n)});break;case Pv.MESSAGE_LIST:r=performance.getEntriesByName(Iv.RENDER_MESSAGE_LIST,"mark")[0].startTime,Bv.push({id:Yv.RENDER_MESSAGE_LIST,duration:Math.floor(r-n)});break;case Pv.CONVERSATION_LIST:r=performance.getEntriesByName(Iv.RENDER_CONVERSATION_LIST,"mark")[0].startTime,Bv.push({id:Yv.RENDER_CONVERSATION_LIST,duration:Math.floor(r-n)})}Bv.push(t),mv(Kv,{timeout:2e3})}catch(e){}},qv=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Bv.push({id:e,duration:t,extra:r}),mv(Kv,{timeout:2e3})};function Kv(e){for(;(e.timeRemaining()>5||e.didTimeout)&&Bv.length;){var t=Bv.shift(),r=t.id,n=t.duration,o=t.extra;r&&Jv(r,n,o),"live"!==(0,D.getRuntimeServer)()&&Dv[r]&&console.log("|-- 上报阶段: ",Dv[r],", 耗时为: ".concat(n))}Bv.length&&mv(Kv,{timeout:2e3})}var zv,Xv=function(){if(!Fv){var e=(0,D.getRuntimeServer)(),t="live"===e,r=(0,D.getRuntimeRegion)(),n=(0,D.getRuntimeVersion)();Mv=new gv.MdapSdk({app_name:"minichat",secret_key:t?vv:Tv,environment:e,region:r,app_version:n,sample:t?.2:1}),kv=new(yv())({path:[/[\\/]webchat[\\/]api[\\/].*[\\/](login|(conversations[\\/](\d+)[\\/]messages)|conversations|orders_by_buyer_id|vouchers|products|items|(offer[\\/]given)|read|(video[\\/](in_whitelist|preupload|report_upload|upload_status)))[\\?]/,"/webchat/api/v1.2/messages",/[\\/]api[\\/]tsp[\\/].*/]}),Lv=new(Av())({path:[/.*[\\/]chateasy[\\/].*\.(js|css)/]}),jv=new gv.CustomPlugin({}),Mv.use(kv),Mv.use(Lv),Mv.use(jv),Fv=!0}};function Jv(e,t,r){Fv||Xv();var n={point_id:e,data:{userType:Cv,localOrCn:void 0!==zv?zv:zv=Hv&&"CN"!==(0,D.getRuntimeRegion)().toUpperCase()?"cn":"local",chatHost:Vv?"seller":"pcmall"}};t&&(n=Uv(Uv({},n),{},{duration:t})),r&&(n.data=Uv(Uv({},n.data),r)),jv.sendData(n)}var $v,Zv=y(455),eT=y.n(Zv),tT=At().mark(oT),rT=[];$v=[202,215];var nT=function(e,t){var r=$v.includes(e)?"c":"r",n=(t||"").toLocaleLowerCase(),o="".concat((0,D.getCDNUrl)(),"shopee-seller-live-sg/tsp/api/").concat(r,"_").concat(e,"_").concat(n,".json");return Qt()(o).then(function(){var e=yt(At().mark((function e(t){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())};function oT(e){var t,r,n,o,a,c;return At().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.locale,r="live"===(0,D.getRuntimeServer)()||"live-test"===(0,D.getRuntimeServer)(),n=new(eT())({name:"webchat"}),o={},s.next=6,n.create({locale:t,env:r?"live":"non-live",region:(0,D.getRuntimeRegion)(),translation:{resources:rT,collections:$v}});case 6:if(a=s.sent,o=a.translation,!(0,D.checkEmptyObject)(o)){s.next=15;break}return c=[],$v.concat(rT).forEach((function(e){c.push(nT(e,t))})),s.next=13,(0,_r.all)(c);case 13:s.sent.forEach((function(e){Object.assign(o,e)}));case 15:return s.abrupt("return",o);case 16:case"end":return s.stop()}}),tT)}var aT=function(e){var t=e.previousConversationIds,r=e.fetchedConversationIds,n=e.direction,o=e.fakeConversationId,a=e.sortByWaitTime;switch(n){case"reset":if(o){var c=Array.isArray(r)?Yt(r):[];return c.unshift(o),c}return r;case"latest":return a?t.filter((function(e){return!r.includes(e)})).concat(r):r.concat(t.filter((function(e){return!r.includes(e)})));case"older":return t.concat(r.filter((function(e){return!t.includes(e)})));default:return r}};function cT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function sT(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?cT(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cT(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var iT=function(e,t,r){if(e){var n={};return e.forEach((function(e){n[e]=!0})),(0,D.simpleEqualCheck)(r.slice(0,D.persistLimit),e)?sT(sT({},t),{},{changed:!1}):{changed:!0,conversationIds:e,conversationIdsMap:n,lastConversationId:e[e.length-1]}}return null},uT=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e||"number"!=typeof e.storedTimestamp)return!1;var r=18e4,n=18e5;return Date.now()<e.storedTimestamp+(t?r:n)},lT=new(y(187).EventEmitter),dT=!1,pT=null,_T=document.location,fT="".concat(_T.protocol,"//").concat(_T.host,"/favicon.ico");function ET(){var e="t=".concat(Date.now()),t=[fT,e].join("?");pT=setTimeout((function(){Qt()(t,{method:"GET"}).then((function(){clearTimeout(pT),dT=!1,window.dispatchEvent(new Event("judge-online"))})).catch((function(){ET()}))}),5e3)}function ST(){if(dT)return null;dT=!0,ET()}var OT,hT=(0,y(428).createBrowserHistory)({basename:"/chateasy"}),vT=function(){var e=hT.location,t=e&&e.pathname;return t&&t.startsWith("/")?t.split("/")[1]:t},TT=y(846);function mT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function gT(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?mT(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mT(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var bT=function(t){var r={};for(var n in t)for(var o in t[n])r=gT(gT({},r),{},e({},o,{section:n,type:t[n][o]}));return r}({buyer_information_dropdown:{clickViewProfile:"more_view_profile",clickMoreReport:"more_report",clickBlockInProfile:"more_block"},buyer_information:{clickProfileMenus:"username_more_button",impressionProfileMenus:""},chat_more_dropdown:{clickClosedInProfile:"chat_more_close",markAsPinned:"pin_chat",markAsUnpinned:"unpin_chat",markAsRead:"mark_as_read",markAsUnread:"mark_as_unread",markAsDelete:"delete",markAsClose:"close",markAsRestart:"restart",markAsMute:"mute",markAsUnmute:"unmute"},conversation_window:{replyIcon:"reply_icon",deleteIcon:"delete_icon",repliedMessageBar:"replied_message_bar",repliedMessageBarCloseButton:"replied_message_bar_close_button",actionDragVideoInMediaPreivew:"",deletePreviewMediaInMediaPreivew:"",closePreviewMediaInMediaPreivew:"",impressionMediaInMediaPreivew:"preview_media",clickAddMediaInMediaPreivew:"preview_add_media",clickResendVideo:"resend_video",impressionVideoMessage:"video_play_thumbnail",impressionImageMessage:"qrcode_alert",clickCancelVideo:"cancel_video",clickAcceptOffer:"accept_offer",clickRejectOffer:"reject_offer",clickViewProductInMall:"view_in_mall",clickViewProductInSellerCenter:"view_in_seller_center",clickViewDetailInSellerCenter:"order_view_detail_button",clickHandleStoryMessage:"story",clickPlayInVideoMessage:"video_play_thumbnail",impressionResendVideo:"resend_video",clickPreviewQrcode:"open_qrcode_alert",clickOrderMessage:"order_message",clickProductMessage:"product_message",clickProductItemMessage:"item_collection_message",clickClaimVoucher:"voucher_claim",impressionPopupOrderCard:"popup_order_card",impressionOrderMessage:"order_message",impressionProductMessage:"product_message",impressionBundleDealCard:"bundle_deal_card",impressionVoucherCard:"claim_card",impressionProductListCard:"product_list_card",impressionCartCard:"cart_card",impressionRateCard:"rate_card",impressionProductCategoryCard:"product_category_card",impressionFlashSaleCard:"flash_sale_card",impressionOrderFromSourceInSpecialMessage:"order_message_source",impressionProductFromSourceInSpecialMessage:"product_message_source",clickVisitProductInSellerCenter:"product_message_source",clickVisitOrderInSellerCenter:"order_message_source",impressionOrClickUnreadBriefMessage:"latest_message",clickFlashSaleItemsDetail:"flash_sale_items",clickViewFlashSaleInMall:"flash_sale_button",clickViewBundleDealInMall:"bundle_deal_button",clickBundleDealDetail:"bundle_deal_items",clickCartButton:"cart_button",clickCartProduct:"cart_product",clickProductListMessage:"product_list_items",clickRateButton:"rate_button",clickRateProduct:"rate_product",impressionVoucherForReceiverInMinichat:"claim_card",impressionPopupProductCard:"popup_product_card"},conversation_window_pop_up:{clickCloseMediaPreviewModalFromX:"close_pop_up",clickCloseMediaPreviewModalFromBackground:"close_pop_up_background",clickPreviewLeftMedia:"left",clickPreviewRightMedia:"right",impressionAfterSwipeMedia:""},conversation_window_qrcode_pop_up:{impressionUnknowQrcode:"qrcode_alert",clickQrcodeToLearnMore:"learn_more",clickBackToChat:"back_to_chat",clickOpenQrcode:"open_image",impressionQrcode:""},conversation_window_video_pop_up:{actionFinishVideo:"video_end",clickSlideBar:"slide_bar",clickDownloadVideo:"download",clickVideoMinimize:"minimize",clickVideoExpand:"expand",impressionReloadVideoError:"reload_video",clickReloadVideo:"reload_video",clickStopVideo:"stop_video",clickRestartVideo:"restart_video"},voucher_information_tab:{impressionVoucherInWorkStation:"voucher_card"},order_information_tab:{clickViewOrderDetail:"order_view_detail",clickSendOrderLink:"order_sendlink"},chat_list_dropdown:{clickFilter:"filter",clickFilterAll:"filter_all",clickFilterUnreplied:"filter_unreplied",clickFilterUnread:"filter_unread",clickFilterPinned:"filter_pinned",clickFilterClosed:"filter_closed"},chat_list:{clickChatMore:"chat_more",clickChatUser:"chat_user"},shop_head_status_dropdown:{clickStatusOnlineButton:"status_online_button",clickStatusHangup:"status_hangup"},delete_confirmation_popup:{deleteConfirm:"delete_confirmation",cancelConfirm:"cancel_confirmation"},error_popup:{error:"error_popup"},product_card_pop_up:{clickSendPopupProductCard:"send",clickClosePopupProductCard:"close"},order_card_pop_up:{clickSendPopupOrderCard:"send",clickClosePopupOrderCard:"close"},order_card:{clickCopyOrderSN:"copy"}}),yT=(["message_shortcuts","auto_reply","notification","translation_assistant","timestamp","performance_data","login_status","faq_assistant","seller_recom"].reduce((function(t,r){return gT(gT({},t),{},e({},"click_".concat(r),{section:"",type:r}))}),{}),gT(gT({},bT),{},(e(OT={impressionSwitchViewAll:{section:"chat_list_dropdown",type:"switch_view_all"},clickSwitchViewAll:{section:"chat_list_dropdown",type:"switch_view_all"},impressionMsgGamesFailBlock:{section:"conversation_window",type:"msg_games_fail_block"},impressionMsgGamesFailQuota:{section:"conversation_window",type:"msg_games_fail_quota"},impressionConversationCell:{section:"",type:"chat_conversation"},clickConversationCell:{section:"",type:"chat_conversation"},operateHints:{section:"message_toolbar",type:"shortcut_result_from_auto_popup"},clickEditShortcut:{section:"message_toolbar",type:"shortcut_button_draft"},operateSearchShortcuts:{section:"message_toolbar",type:"shortcut_result_from_search_available"},searchShortcutsFocus:{section:"message_toolbar",type:"shortcut_button"},impressionEmptySearchShortcuts:{section:"message_toolbar",type:"shortcut_result_from_search_empty"},selectShortcutFromShortcutButton:{section:"message_toolbar",type:"shortcut_result_from_shortcut_button"},clickMuteInProfile:{section:"personal_information_dropdown",type:"mute"},clickUnmuteInProfile:{section:"personal_information_dropdown",type:"unmute"},impressionMuteInProfile:{section:"personal_information_dropdown",type:"mute"},impressionUnmuteInProfile:{section:"personal_information_dropdown",type:"unmute"},impressionSafetyTip:{section:"conversation_window",type:"safety_tip"},clickSafetyTipLearnMore:{section:"safety_tip",type:"learn_more"},clickAddFromTemplate:{section:"message_shortcuts_detail_tab",type:"add_message_template"},actionAdjustMessageShortcuts:{section:"message_shortcuts_tab",type:""},actionAdjustMessageShortcutsDetail:{section:"message_shortcuts_detail_tab",type:""},impressionClickableCard:{section:"conversation_window",type:"clickable_message"},clickClickableCard:{section:"conversation_window",type:"clickable_message"},clickRateCardSubmit:{section:"evaluation_card",type:"evaluation_submit_button"},impressionRateCard:{section:"evaluation_card",type:""},impressionRateCardFeedback:{section:"evaluation_card_feedback",type:""},clickTranslationFeedback:{section:"",type:"translation_feedback"},impressionFeedbackPopup:{section:"feedback_popup_window",type:"translation_feedback"},clickFeedbackSubmit:{section:"feedback_popup_window",type:"feedback_submit_button"},impressionFeedbackMore:{section:"feedback_popup_window",type:"feedback_tell_us_more"},clickSendMessageButton:{section:"",type:"send_message_button"},clickRestartButton:{section:"",type:"restart_conversation"},clickStickerInToolbar:{section:"message_toolbar",type:"sticker_button"},clickImageInToolbar:{section:"message_toolbar",type:"image_button"},clickVideoInToolbar:{section:"message_toolbar",type:"video_button"},clickShortcutInToolbar:{section:"message_toolbar",type:"shortcut_button"},clickSendRatingCard:{section:"",type:"appraise_button"},clickVisitSellerCenterFromShopList:{section:"",type:"visit_seller_center"},clickBackChatFromShopList:{section:"",type:"view_message"},clickShopHeadStatus:{section:"",type:"shop_head_status"},viewPage:{section:"",type:""},impressionChatRoom:{section:"conversation_window",type:""},translationShowOriginal:{section:"",type:"show_original"},translationTryAgain:{section:"",type:"try_again"}},"clickShortcutInToolbar",{section:"message_toolbar",type:"shortcut_button"}),e(OT,"clickOrdersInToolbar",{section:"message_toolbar",type:"orders_button"}),e(OT,"clickProductsInToolbar",{section:"message_toolbar",type:"products_button"}),e(OT,"clickSearchNameResult",{section:"",type:"search_name_result"}),e(OT,"clickSearchName",{type:"search_name"}),e(OT,"impressionChatIcon",{type:"chat_icon"}),e(OT,"clickChatIcon",{type:"chat_icon"}),e(OT,"clickToWebchatButton",{type:"to_webchat_button"}),e(OT,"clickFoldButton",{type:"fold_button"}),e(OT,"clickUnFoldButton",{type:"unfold_button"}),e(OT,"clickCloseButton",{type:"close_button"}),e(OT,"impressionUnreadChange",{type:"chat_icon_status_change_to_with_unread_cnt"}),e(OT,"typeMessage",{type:"typing_message",section:"message_toolbar"}),OT)));function RT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var AT,DT=null,CT=function(e){e&&(DT=e)},IT=null,PT=function(){var t;if(t=(0,D.checkIsScChat)(),window.BITrack)IT=window.BITrack;else{var r={appId:t?1:0,fetch:Qt(),source:"pc",platform:"pc",ua:navigator?navigator.userAgent||navigator.vendor:"",getCookies:It().get,sendEventByInterval:!0,enableAutoTrack:!1};AT=(0,TT.createTrackingV3Sdk)(function(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?RT(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RT(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({locale:(0,D.getRuntimeRegion)(),env:(0,D.getRuntimeServer)()},r)),IT=AT.sync.bind(AT)}},NT=function(e){var t=e.trackerName,r=e.data,n=e.operation,o=void 0===n?D.TrackerOperation.CLICK:n,a=e.page,c=e.shopId;IT||PT();var s=function(e){var t=e.data,r=e.operation,n=e.page,o=e.shopId,a=yT[e.trackerName],c=a.section,s=void 0===c?"":c,i=a.type,u=void 0===i?"":i,l=DT||{},d=l.shop_id,p=void 0===d?"":d,_=l.role,f=void 0===_?"":_,E=l.id,S=void 0===E?"":E,O=Object.assign({},{shopid:p||o,account_type:f||"shopee_user",account_id:S},t);return{operation:r,page_section:s,target_type:u,page_type:n||"minichat_page",data:r===D.TrackerOperation.IMPRESSION?{viewed_objects:[O]}:O}}({trackerName:t,data:r,operation:o,page:a,shopId:c});IT({data:{type:"v3",timestamp:Date.now(),info:s}})},wT=[],xT=function e(t){for(;(t.timeRemaining()>5||t.didTimeout)&&wT.length;){var r=wT.shift();NT(r)}wT.length&&mv(e,{timeout:200})},UT=function(e){wT.push(e),mv(xT,{timeout:200})};function MT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function kT(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?MT(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MT(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var LT=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"SG",t=arguments.length>1?arguments[1]:void 0,r=void 0!==t&&!t;return"TW"!==e||r?D.Currencies[e]:"NT$"},jT=function(e,t){return kT(kT({},e),function(e,t){var r=e.original_prices,n=e.actual_prices,o=A(r.map((function(r){return(0,D.formatPrice)(r,e.country,{},t)})),2),a=o[0],c=o[1],s=A(n.map((function(r){return(0,D.formatPrice)(r,e.country,{},t)})),2),i=s[0],u=s[1],l=a===c?a:"".concat(a," - ").concat(c),d=i===u?i:"".concat(i," - ").concat(u),p=a.includes("NaN")||i.includes("NaN");return{original_price_string:p||l===d?"":l,actual_price_string:p?"".concat(LT(e.country,t),"???"):d,storedTimestamp:Date.now()}}(e,t))};function GT(e){return function(){var t=Array.prototype.slice.call(arguments);return e.memoize=e.memoize||{},t in e.memoize?e.memoize[t]:e.memoize[t]=e.apply(this,t)}}})(),R})(),e.exports=n(r(82677),r(26842),r(58518),r(28366),r(36808),r(6222),r(94301),r(68214),r(52153),r(53053),r(34857),r(20573),r(847),r(17311),r(67429),r(46811),r(59065),r(67677),r(58397),r(98282),r(47190),r(97869))},26842:function(e,t,r){var n;n=(e,t,r,n)=>(()=>{var o={757:(e,t,r)=>{e.exports=r(666)},470:(e,t,r)=>{"use strict";r.d(t,{D:()=>i,t:()=>u});var n=r(661),o=r.n(n),a=r(547),c=!1,s=function(e,t){c=!0;var r=t||(0,a.CE)();o().init({lng:r,fallbackLng:r,defaultNS:"common",keySeparator:!1,debug:!1,resources:e&&e.resources||{},interpolation:{prefix:"{",suffix:"}",escapeValue:!1},react:{wait:!1,bindI18n:"languageChanged loaded",bindStore:"added removed",nsMode:"default"}})},i=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"common";c||s({resources:{}},e),o().changeLanguage(e),o().addResourceBundle(e,r,t,!0,!0)},u=o().t.bind(o())},547:(e,t,r)=>{"use strict";r.d(t,{An:()=>F,CE:()=>K,Db:()=>z,E3:()=>D,Ey:()=>C,Fy:()=>V,Ht:()=>R,I7:()=>M,I9:()=>X,IE:()=>W,Jy:()=>w,L6:()=>q,Ll:()=>U,NJ:()=>v,Od:()=>k,S1:()=>i,S8:()=>y,Vm:()=>A,X7:()=>Q,Y8:()=>O,YH:()=>j,dV:()=>x,jz:()=>J,k2:()=>G,nr:()=>m,qk:()=>b,r:()=>Y,u7:()=>P,wK:()=>I,xC:()=>L,z$:()=>S});var n,o,a,c,s={sg:"en",ph:"en",tw:"zh-Hant",my:"ms-MY",th:"th-TH",vn:"vi-VN",id:"id-ID",br:"pt-BR",in:"hi",cn:"zh-CN",mx:"es-MX",co:"es-CO",cl:"es-CL",ar:"es-AR",pl:"pl",es:"es-ES",fr:"fr",us:"en",kr:"en"},i=function(e,t,r){n=e.toLowerCase(),o="liveish"===t?"live-test":"stable"===t?"test-stable":t,a=r,c=s[n]||"en"},u=["my","br","mx","co","ar"],l=["id","th"],d=["us"],p=function(e){return u.includes(e)?"com.".concat(e):l.includes(e)?"co.".concat(e):d.includes(e)?"com":e},_=function(e){return"tw"===e?"xiapi":e.toLowerCase()},f=function(e){return p(e)},E=function(){return"live"===o?"shopee":"".concat(o,".shopee")},S=function(){return"cn"===n},O=function(){return"kr"===n};function h(){return v()&&!S()}function v(){var e=window.location.hostname;return e&&e.includes("cn")}var T=function(e,t){return"seller"===e?"vn"!==t||h()?"seller":"banhang":e},m=function(e,t){var r=t?t.toLowerCase():n;return"".concat(T(e,r),".").concat(_(r),".").concat(E(),".").concat("cn")},g=function(e,t){var r,a=t?t.toLowerCase():n;return h()?m(e,a):"".concat(T(e,a),".").concat((r=window.location.hostname,r&&r.includes("shopeebrasil")?"live"===o?"shopeebrasil":"".concat(o,".shopeebrasil"):E()),".").concat(f(a))},b=function(e){return g("seller",e)},y=function(){return"live"===o?"seller.shopee.cn":"seller.".concat(o,".shopee.cn")},R=function(){return"live"===o?"seller.shopee.kr":"seller.".concat(o,".shopee.kr")},A=function(){return"".concat(b(),"/webchat/api")},D=function(){return"".concat(b(),"/api")},C=function(){return g("seller-push-ws")},I=function(){return g("chat-ws")},P=function(e){var t=e?e.toLowerCase():n;return"cn"!==t&&"kr"!==t||(t="my"),v()?"".concat(_(t),".").concat("live"===o?"":"".concat(o,".")).concat("xiapibuy.com"):"".concat(E(),".").concat(f(t))},N=["sg","my","th","ph","vn","id","tw","br"],w=function(e){var t=e?e.toLowerCase():n;if(S())return"https://s-cf-sg.shopeesz.com/file/";if(O())return"https://cf.shopee.sg/file/";var r=N.includes(t);return h()&&r?"https://s-cf-".concat(t,".shopeesz.com/file/"):"https://cf.shopee.".concat(p(t),"/file/")},x=function(e){var t=e?e.toLowerCase():n;return"tw"===t&&v()?"https://cvf.shopee.cn/file/":"https://cvf.shopee.".concat(p(t),"/file/")},U=function(e){var t=e?e.toLowerCase():n,r="test-stable"===o?"staging":o;return"".concat(v()?"deo.shopeesz.com":"deo.shopeemobile.com","/shopee").concat("live"===o?"":"/test","/shopee-sticker-").concat(r,"-").concat(t)},M=function(){return"https://subaccount.".concat(E(),".com/")},k=function(){return"https://deo.shopeemobile.com/shopee/shopee-seller-live-".concat(S()||O()?"sg":n,"/downloads/")},L=function(){return"https://".concat(g("seller"),"/webchat/conversations")},j=function(){return"https://".concat(g("seller"),"/webchat")},G=function(){var e="test-stable"===o?"stable":o;return"https://deo.".concat(h()?"shopeesz":"shopeemobile",".com/shopee/shopee-seller-").concat(e,"-").concat(n,"/")},F={sg:"https://help.shopee.sg/sg/s/article/What-happens-if-I-ve-accumulated-Penalty-Points-1542975961836",my:"https://help.shopee.com.my/my/s/article/What-is-Shopee-s-Seller-Penalty-Points-system-1542971633226",th:"https://help.shopee.co.th/th/s/article/%E0%B8%A3%E0%B8%B0%E0%B8%9A%E0%B8%9A%E0%B8%84%E0%B8%B0%E0%B9%81%E0%B8%99%E0%B8%99%E0%B8%84%E0%B8%A7%E0%B8%B2%E0%B8%A1%E0%B8%9B%E0%B8%A3%E0%B8%B0%E0%B8%9E%E0%B8%A4%E0%B8%95%E0%B8%B4%E0%B8%A3%E0%B9%89%E0%B8%B2%E0%B8%99%E0%B8%84%E0%B9%89%E0%B8%B2%E0%B8%84%E0%B8%B7%E0%B8%AD%E0%B8%AD%E0%B8%B0%E0%B9%84%E0%B8%A3-1542967300368",tw:"https://help.shopee.tw/tw/s/article/%E5%A6%82%E6%9E%9C%E7%B4%AF%E7%A9%8D%E4%BA%86%E8%A8%88%E5%88%86-%E8%B3%A3%E5%AE%B6%E6%9C%83%E6%9C%89%E5%93%AA%E4%BA%9B%E6%96%B9%E9%9D%A2%E7%9A%84%E9%99%90%E5%88%B6-1542986467060",vn:"https://banhang.shopee.vn/edu/article/237",ph:"https://help.shopee.ph/ph/s/article/How-does-the-Seller-Penalty-Points-system-work-1542963021404",id:"https://seller.shopee.co.id/edu/article/1762",in:"https://seller.shopee.in/edu/courseDetail/482"},H={sg:"7a48024995c847d9a4586bab9fde57a7",id:"888adc066bf3426a8c70227470281818",mx:"e58cb9c620f54aec9e18a01632c35c05",br:"d75e2dbb49594bd19d1ea83485339a45",co:"a503e7f7bc4849c0824985ddd9659d33",cl:"5484e709da71430cb8980abc5cef14f0",my:"b7a7ff2afd484f1dbddb3a922c7e90e7",th:"38e4b86fd0c04ae3b2c9200c7ea9c89e",ph:"bafd4812311d417c981d2690cda870bf",vn:"9e0e87184cf14246aabe6af0d78b2aa9",tw:"1bfa4a9834204eccb62858d0e2d9e083",pl:"3e8f2872acee4938951fa12e61f5b3f6",es:"756295fca7a04f0cb25cf51821ced04f"},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"sg",t=H[e];return t?"https://help.shopee.".concat(p(e),"/portal/webform/").concat(t):"https://help.shopee.".concat(p(e),"/s/contactusform")},B={sg:"cc5c96e6af6140b6920f13c6fa67ddd1",my:"2e11e4a4fd554f4aaba90814987e8d3f",th:"fab4029ae0614fdd96021ba21bdd5d56",tw:"6331df0cc3e5409c85b5f3331e385a5c",vn:"1214504dda894592a1c7ef4236912f4d",ph:"bafd4812311d417c981d2690cda870bf",id:"13a6214dacf54eeb83cea7110c6adde6",br:"23b02efbc1254721ab69549e442a6466",mx:"e58cb9c620f54aec9e18a01632c35c05",co:"a503e7f7bc4849c0824985ddd9659d33",cl:"5484e709da71430cb8980abc5cef14f0",ar:"16e6e483bc5244d9946daf570c954dc3",pl:"3e8f2872acee4938951fa12e61f5b3f6",es:"756295fca7a04f0cb25cf51821ced04f"},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"sg",t="";return t=["tw","vn"].includes(e)?"https://cs.shopee.".concat(p(e)):"https://help.shopee.".concat(p(e)),"".concat(t,"/portal/webform/").concat(B[e])},W=function(){return o},Q=function(){return n},q=function(){return a},K=function(){return c},z=function(e,t,r){var n=e||{},o=n.status,a=n.checkout_id,c=n.order_id,s=n.id,i=n.shop_id;return"unpaid"===o?"https://".concat(P(r),"/user/purchase/checkout/").concat(a,"/?shopid=").concat(i||t):"https://".concat(P(r),"/user/purchase/order/").concat(c||s,"/?shopid=").concat(i||t)},X=function(e,t,r,n){window.open("https://".concat(e?P(t):P(),"/product/").concat(n,"/").concat(r,"/"))},J=function(){return v()?"https://deo.shopeesz.com/shopee/":"https://deo.shopeemobile.com/shopee/"}},666:e=>{var t=function(e){"use strict";var t,r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function i(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(e){i=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof S?t:S,a=Object.create(o.prototype),c=new C(n||[]);return a._invoke=function(e,t,r){var n=d;return function(o,a){if(n===_)throw new Error("Generator is already running");if(n===f){if("throw"===o)throw a;return P()}for(r.method=o,r.arg=a;;){var c=r.delegate;if(c){var s=R(c,r);if(s){if(s===E)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===d)throw n=f,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=_;var i=l(e,t,r);if("normal"===i.type){if(n=r.done?f:p,i.arg===E)continue;return{value:i.arg,done:r.done}}"throw"===i.type&&(n=f,r.method="throw",r.arg=i.arg)}}}(e,r,c),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var d="suspendedStart",p="suspendedYield",_="executing",f="completed",E={};function S(){}function O(){}function h(){}var v={};v[a]=function(){return this};var T=Object.getPrototypeOf,m=T&&T(T(I([])));m&&m!==r&&n.call(m,a)&&(v=m);var g=h.prototype=S.prototype=Object.create(v);function b(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){function r(o,a,c,s){var i=l(e[o],e,a);if("throw"!==i.type){var u=i.arg,d=u.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(d).then((function(e){u.value=e,c(u)}),(function(e){return r("throw",e,c,s)}))}s(i.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function R(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,R(e,r),"throw"===r.method))return E;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return E}var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,E;var a=o.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,E):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,E)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function D(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function I(e){if(e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,c=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return c.next=c}}return{next:P}}function P(){return{value:t,done:!0}}return O.prototype=g.constructor=h,h.constructor=O,O.displayName=i(h,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===O||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,i(e,s,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(y.prototype),y.prototype[c]=function(){return this},e.AsyncIterator=y,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var c=new y(u(t,r,n,o),a);return e.isGeneratorFunction(r)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},b(g),i(g,s,"Generator"),g[a]=function(){return this},g.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=I,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(D),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var c=this.tryEntries[a],s=c.completion;if("root"===c.tryLoc)return o("end");if(c.tryLoc<=this.prev){var i=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(i&&u){if(this.prev<c.catchLoc)return o(c.catchLoc,!0);if(this.prev<c.finallyLoc)return o(c.finallyLoc)}else if(i){if(this.prev<c.catchLoc)return o(c.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return o(c.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var c=a?a.completion:{};return c.type=e,c.arg=t,a?(this.method="next",this.next=a.finallyLoc,E):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),E},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),D(r),E}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;D(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),E}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}},994:t=>{"use strict";t.exports=e},602:e=>{"use strict";e.exports=t},661:e=>{"use strict";e.exports=r},349:e=>{"use strict";e.exports=n}},a={};function c(e){var t=a[e];if(void 0!==t)return t.exports;var r=a[e]={exports:{}};return o[e](r,r.exports,c),r.exports}c.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return c.d(t,{a:t}),t},c.d=(e,t)=>{for(var r in t)c.o(t,r)&&!c.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),c.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var s={};return(()=>{"use strict";c.r(s),c.d(s,{AVAILABLE_IMAGE_TYPE:()=>xe,AVAILABLE_VIDEO_EXT:()=>Me,AVAILABLE_VIDEO_TYPE:()=>Ue,AccountType:()=>ve,AgentOnlineStatus:()=>P,AlertType:()=>Ye,AllProductFilters:()=>pe,ApiMessageTypes:()=>go,BATCH_OPERATE_MAX_SELECTION:()=>J,BatchOperates:()=>$,CHAT_MIN_TEXT_BOX_HEIGHT:()=>v,ChatBotInteractionType:()=>Ve,ChatBotMessageContentSource:()=>Be,ChatbotFromType:()=>re,ConversationFilter:()=>Z,ConversationSource:()=>ae,ConversationTab:()=>te,ConversationTypeEnum:()=>H,Currencies:()=>t,CustomShareEvent:()=>tt,DataFetchStatus:()=>x,DiscountType:()=>V,EvaluationErrorCode:()=>p,EvaluationStatus:()=>d,FeedbackInfo:()=>h,FetchMessageStatus:()=>g,HALF_HOUR:()=>pa,INVALID_PRICE:()=>Ct,LS:()=>Cr,LogisticsLog:()=>Ie,LogisticsStatus:()=>Pe,MAX_IMAGE_SIZE:()=>Le,MAX_MEDIA_NUM:()=>E,MAX_SHOWING_ITEM_COUNT:()=>fe,MAX_VIDEO_SIZE:()=>je,MAX_Z_INDEX:()=>nt,MINI_MIN_TEXT_BOX_HEIGHT:()=>T,MessageErrorCode:()=>a,MessageFillStatus:()=>m,MessageHasGroupHeader:()=>n,MessageLabelString:()=>l,MessageLabelType:()=>e,MessageMaxWidthMini:()=>R,MessageMaxWidthWeb:()=>A,MessageOption:()=>i,MessageSendStatus:()=>o,MessageShortcutGroupType:()=>S,MessageSource:()=>ce,MessageStatus:()=>f,MessageTypes:()=>r,MessagesRelatedKey:()=>b,NO_ACCESS_KEY:()=>Ge,ONE_DAY:()=>_a,OfferStatus:()=>j,OperationStatus:()=>U,OrderCancelReason:()=>Re,OrderItemStatus:()=>ge,OrderListTabs:()=>ie,OrderListType:()=>De,OrderPayMethod:()=>be,OrderStatusExt:()=>Ae,OrderTabStatus:()=>Te,OrderTabStatusIndex:()=>me,OrderType:()=>Ce,PERMISSION_DELETE_MESSAGE:()=>O,PredictionType:()=>ne,ProductFiltersMap:()=>de,ProductPromotionLabel:()=>Ee,ProductStatusUsingNumber:()=>ue,ProductStatusUsingString:()=>le,PromotionStatus:()=>_,ReportType:()=>oe,RewardType:()=>B,SECOND_TO_MILLISECOND:()=>da,SERVER_ERROR_CAPACITY:()=>we,SERVER_ERROR_VALID_CONV_COUNT:()=>Ne,SPECIAL_VIDEO_MIME_TYPE:()=>ke,SearchFilter:()=>Xe,SearchResultType:()=>Je,SellerCancelOrderReason:()=>ye,ShareDataType:()=>rt,SocketConnectionStatus:()=>X,SocketToAlertType:()=>We,SortByFilterEnum:()=>ee,StorageKey:()=>et,SubAccountRole:()=>he,SubAccountShopStatus:()=>Oe,SwitchStatus:()=>k,SystemProductFilters:()=>_e,TrackerOperation:()=>He,TranslationFeedbackQuality:()=>u,TranslationStatus:()=>L,UnreadSource:()=>se,UserLoginStatus:()=>M,VIEW_DETAIL_KEY:()=>Fe,VoucherOperateType:()=>z,VoucherStamp:()=>q,VoucherStatus:()=>Q,VoucherTab:()=>Y,VoucherTabIndex:()=>W,VoucherType:()=>K,WorkstationCommonKey:()=>Qe,WorkstationProductCommonKey:()=>qe,WorkstationProductPanel:()=>Se,WorkstationVoucherCommonKey:()=>Ke,camelCase:()=>ht,cancelOrderPolicy:()=>So.An,capitalizeFirstLetter:()=>ir,changeLanguage:()=>ka.D,checkEmptyObject:()=>at,checkEntryGuide:()=>Rr,checkHeaderGuide:()=>yr,checkImportTemplateGuide:()=>gr,checkIsScChat:()=>ut,checkMiniUnrepliedGuide:()=>mr,checkObjectId:()=>ct,checkProductDeleted:()=>sa,checkProductInvalid:()=>la,checkTranslationSettingsGuide:()=>br,checkUnrepliedFilterGuide:()=>Tr,compareSameDayOfTimestamp:()=>Yt,convertBase64ToBlob:()=>vt,countingDown:()=>Ea,customizeTime:()=>Gt,debounce:()=>Er,deepMerge:()=>Tt,defaultLocalInMall:()=>$e,detectTextAndTimestamp:()=>Ma,downloadVideoWithBlob:()=>Eo,encode:()=>ft,escapeRegex:()=>Mo,fillMessagePreview:()=>Ln,fillWithZero:()=>Sa,formatDiscount:()=>Ta,formatMessageTime:()=>Bt,formatPrice:()=>It,formatTransifyKeyWithNumber:()=>tr,getApiServer:()=>So.Vm,getBrowserInfo:()=>nr,getCDNUrl:()=>So.jz,getCNSCSellerCenterUrl:()=>So.S8,getCSChatServer:()=>So.wK,getCancelOrderDisplayStatus:()=>oa,getChatBotParams:()=>Un,getChatbotType:()=>Na,getCrmPreviewParams:()=>Mn,getCurrentTimestampString:()=>Oa,getCustomMessageText:()=>mn,getFileServer:()=>So.Jy,getFormattedData:()=>po,getFormattedTime:()=>Ht,getHasSameSourceAndTarget:()=>wn,getIsMessageShortcutKeywordValid:()=>wo,getIsMessageValidToDelete:()=>Ro,getItem:()=>Ir,getKRSCSellerCenterUrl:()=>So.Ht,getLocaleText:()=>Nn,getMallOrderUrl:()=>So.Db,getMallUrl:()=>So.u7,getMediaData:()=>so,getMessageIsRatecard:()=>Pn,getMessageIsSend:()=>Ao,getMessageMaxWidth:()=>zn,getMessageShortcutsKeywords:()=>xo,getOfferText:()=>qn,getOrderPayment:()=>jo,getOrderStatusTransifyKey:()=>Lo,getPayMethod:()=>na,getProductStatusTransifyKey:()=>ca,getPushServer:()=>So.Ey,getReplyTrackerMessageType:()=>bo,getRuntimeLocale:()=>So.CE,getRuntimeRegion:()=>So.X7,getRuntimeServer:()=>So.IE,getRuntimeVersion:()=>So.L6,getSCApiServer:()=>So.E3,getSellerCenterUrl:()=>So.qk,getServiceLocale:()=>_r,getShopeeCNUrl:()=>So.nr,getShopeeCustomerService:()=>So.Fy,getSpammerPolicyUrl:()=>So.r,getSystemMessageByLocale:()=>kn,getTimestampNano:()=>ha,getTranslateFileServer:()=>So.k2,getTranslationLocale:()=>dr,getUrlParam:()=>rr,getVideoServer:()=>So.dV,getVoucherCondition:()=>Ra,getVoucherTimeText:()=>Aa,getWebChatPureUrl:()=>So.YH,getWebChatUrl:()=>So.xC,goToPcMall:()=>So.I9,greaterThan:()=>it,handleBigNumber:()=>mt,handleDisplayTranslation:()=>ma,handleReportItem:()=>Pa,handleReportItems:()=>Ia,hasCancelOrderMetaMessage:()=>Qn,hasSelectShop:()=>dt,hasTargetMessageOption:()=>Dn,hasTargetMessageOptions:()=>In,init:()=>So.S1,isAbnormalProduct:()=>ia,isDeletedMessage:()=>Cn,isMessageTypeSupported:()=>Yn,isMessageTypeWithArrow:()=>Bn,isMessageTypeWithInlineTime:()=>Hn,isMessageTypeWithNoTime:()=>Vn,isProductSoldout:()=>ua,isShowWarningMessage:()=>Wn,isValidBrowser:()=>lt,isValidMessageStatusToReply:()=>mo,isValidMessageTypeToReply:()=>ho,isVisitingCNSC:()=>So.z$,isVisitingCn:()=>So.NJ,isVisitingKRSC:()=>So.Y8,itemSize:()=>ze,localeInMallToTspLocale:()=>Ze,makeSecurityTipsMessage:()=>xn,memFn:()=>Or,needWarnNotificationType:()=>y,newFormatMessageTime:()=>Qt,persistLimit:()=>wr,previewMessage:()=>An,redirectionWithAccess:()=>fr,removeItem:()=>Nr,removeItemFromArray:()=>gt,replyMessageWithInlineTime:()=>Xn,searchMessageShortcuts:()=>Uo,setItem:()=>Pr,showMetaInfoMessage:()=>Kn,simpleEqualCheck:()=>st,stickersURI:()=>So.Ll,subAccountURL:()=>So.I7,throttle:()=>Sr,transPrice:()=>Pt,transformVideoTime:()=>Vt,unifyLocale:()=>lr,updateTimeLocale:()=>Mt,validateDuration:()=>oo,validateMediaDuration:()=>no,validateTypeAndSize:()=>fo,videoURL:()=>So.Od,voucherIsExpired:()=>ba,voucherIsStockout:()=>ya});var e,t={SG:"$",TH:"฿",VN:"₫",ID:"Rp",TW:"$",MY:"RM",PH:"₱",BR:"R$",IN:"₹",CN:"¥",MX:"$",CO:"$",CL:"$",AR:"$",PL:"zł",ES:"€",FR:"€",KR:"₩",US:"$"},r={MSG_TYPE_TEXT:"text",MSG_TYPE_IMAGE:"image",MSG_TYPE_OFFER:"offer",MSG_TYPE_PRODUCT:"product",MSG_TYPE_ORDER:"order",MSG_TYPE_STICKER:"sticker",MSG_TYPE_NOTIFICATION:"notification",MSG_TYPE_VOUCHER:"voucher",MSG_TYPE_FEED_STORY:"feed_story",MSG_TYPE_ITEM_LIST:"item_list",MSG_TYPE_SHOPPING_CART:"shopping_cart",MSG_TYPE_FAQ:"faq",MSG_TYPE_FAQ_QUESTION:"faq_question",MSG_TYPE_FAQ_FEEDBACK:"faq_feedback",MSG_TYPE_FAQ_LIVEAGENT:"faq_liveagent",MSG_TYPE_FAQ_UNSUPPORTED:"faq_unsupported",MSG_TYPE_FAQ_FEEDBACK_PROMPT:"faq_feedback_prompt",MSG_TYPE_FAQ_LIVEAGENT_PROMPT:"faq_liveagent_prompt",MSG_TYPE_UNTATED_ORDER_REMINDER:"unrated_order_reminder",MSG_TYPE_FLASH_SALE:"flash_sale",MSG_TYPE_BUNDLE_DEAL:"bundle_deal",MSG_TYPE_BUNDLE_MESSAGE:"bundle_message",MSG_TYPE_OPTION_PACK:"option_pack",MSG_TYPE_SELECTED_OPTION:"selected_option",MSG_TYPE_ADD_ON_DEAL:"add_on_deal",MSG_TYPE_VIDEO:"video",MSG_TYPE_IMAGE_WITH_TEXT:"image_with_text",MSG_TYPE_RATE_CARD:"rating_card",MSG_TYPE_NEW_FAQ:"new_faq",MSG_TYPE_FAQ_CATEGORY_CHOICE:"faq_category_choice",MSG_TYPE_FAQ_QUESTION_LIST:"faq_question_list",MSG_TYPE_FAQ_TYPE_CHOICE:"faq_type_choice",MSG_TYPE_FAQ_CATEGORY_LIST:"faq_category_list",MSG_TYPE_FAQ_TYPE_BOT_REQUEST_TEXT_MESSAGE:"faq_bot_request_text",MSG_TYPE_FAQ_TYPE_BOT_REQUEST_ORDER_MESSAGE:"faq_bot_request_order",FAQ_TYPE_BOT_RESPONSE_MESSAGE:"faq_bot_response",MSG_TYPE_SECURITY_TIPS:"security_tips"},n=[r.MSG_TYPE_TEXT,r.MSG_TYPE_IMAGE,r.MSG_TYPE_VIDEO,r.MSG_TYPE_BUNDLE_MESSAGE,r.MSG_TYPE_FAQ_LIVEAGENT,r.MSG_TYPE_FAQ_QUESTION,r.MSG_TYPE_FAQ_FEEDBACK,r.MSG_TYPE_FAQ_UNSUPPORTED,r.MSG_TYPE_FAQ_LIVEAGENT_PROMPT,r.MSG_TYPE_NEW_FAQ,r.MSG_TYPE_FAQ_CATEGORY_CHOICE,r.MSG_TYPE_FAQ_QUESTION_LIST,r.MSG_TYPE_FAQ_TYPE_CHOICE,r.MSG_TYPE_FAQ_CATEGORY_LIST,r.MSG_TYPE_FAQ_TYPE_BOT_REQUEST_TEXT_MESSAGE,r.FAQ_TYPE_BOT_RESPONSE_MESSAGE,r.MSG_TYPE_SELECTED_OPTION],o={SENDING:1,FAILED:2,SUCCEED:3},a={FORBIDDEN:28,LIMITING:29,CUSTOM_ERROR:42,BLACKLIST:43,CANCEL_ORDER:44,UNVERIFIED_PHONE_NUMBER:45,EXCEED_DAILY_LIMIT:26,UNTRUSTED_NETWORK:46,NEED_CAPTCHA:47,DFP_ERROR:48,SPAMMER:49,FAQ_EXPIRED:50,FAQ_SESSION_OLD:51,DEFAULT:-1};!function(e){e[e.AUTO_REPLY=1]="AUTO_REPLY",e[e.OFFWORK_AUTO_REPLY=2]="OFFWORK_AUTO_REPLY",e[e.CHAT_ASSISTANT=3]="CHAT_ASSISTANT"}(e||(e={}));var i,u,l={AUTO_REPLY:"message.label_type.auto_reply",OFFWORK_AUTO_REPLY:"settings.auto_reply.offline_auto_reply",CHAT_ASSISTANT:"message.label_type.chat_assistant"},d={UNRATED:"unrated",RATED:"rated",EXPIRED:"expired",INVALID:"invalid"},p={RATED:"rating_card_rated",EXPIRED:"rating_card_expired"},_={UPCOMING:"upcoming",ONGOING:"ongoing",EXPIRED:"expired"},f={CENSORED_BLACKLIST:"censored_blacklist",NORMAL:"normal"},E=9,S={PERSONAL:1,TEAM:2},O=[r.MSG_TYPE_TEXT,r.MSG_TYPE_IMAGE,r.MSG_TYPE_VIDEO,r.MSG_TYPE_STICKER,r.MSG_TYPE_ORDER,r.MSG_TYPE_PRODUCT];!function(e){e[e.MSG_OPT_NORMAL=0]="MSG_OPT_NORMAL",e[e.MSG_OPT_AUTO_REPLY=1]="MSG_OPT_AUTO_REPLY",e[e.MSG_OPT_BLOCKED=2]="MSG_OPT_BLOCKED",e[e.MSG_OPT_CENSORED_BLACKLIST=16]="MSG_OPT_CENSORED_BLACKLIST",e[e.MSG_OPT_CENSORED_WHITELIST=32]="MSG_OPT_CENSORED_WHITELIST",e[e.MSG_OPT_IGNORE_UNREAD_FOR_RECEIVER=64]="MSG_OPT_IGNORE_UNREAD_FOR_RECEIVER",e[e.MSG_OPT_IGNORE_UNREAD_FOR_SENDER=128]="MSG_OPT_IGNORE_UNREAD_FOR_SENDER",e[e.MSG_OPT_INVISIBLE_FOR_RECEIVER=256]="MSG_OPT_INVISIBLE_FOR_RECEIVER",e[e.MSG_OPT_INVISIBLE_FOR_SENDER=512]="MSG_OPT_INVISIBLE_FOR_SENDER",e[e.MSG_OPT_ADS=1024]="MSG_OPT_ADS",e[e.MSG_OPT_FAQ_SESSION=2048]="MSG_OPT_FAQ_SESSION",e[e.MSG_OPT_TRIGGER_FAQ=4096]="MSG_OPT_TRIGGER_FAQ",e[e.MSG_OPT_SOCIAL_MESSAGE=8192]="MSG_OPT_SOCIAL_MESSAGE",e[e.MSG_OPT_OFFWORK_AUTOREPLY=16384]="MSG_OPT_OFFWORK_AUTOREPLY",e[e.MSG_OPT_CANCELORDER_WARNING_SENT=32768]="MSG_OPT_CANCELORDER_WARNING_SENT",e[e.MSG_OPT_CANCELORDER_WARNING_RETRACT=65536]="MSG_OPT_CANCELORDER_WARNING_RETRACT",e[e.MSG_OPT_CANCELORDER_WARNING_NOT_SEND=66496]="MSG_OPT_CANCELORDER_WARNING_NOT_SEND",e[e.MSG_OPT_CHATBOT_SESSION=131072]="MSG_OPT_CHATBOT_SESSION",e[e.MSG_OPT_TRIGGER_CHATBOT=262144]="MSG_OPT_TRIGGER_CHATBOT",e[e.MSG_OPT_PRIVATE_MESSAGE=524288]="MSG_OPT_PRIVATE_MESSAGE",e[e.MSG_OPT_SILENT_FOR_SENDER=1048576]="MSG_OPT_SILENT_FOR_SENDER",e[e.MSG_OPT_DELETE=2097152]="MSG_OPT_DELETE",e[e.MSG_OPT_RECALL=8388608]="MSG_OPT_RECALL"}(i||(i={})),function(e){e[e.bad=1]="bad",e[e.average=2]="average",e[e.good=3]="good"}(u||(u={}));var h={IMPROVED:1,WRONG:2,OFFENSIVE:4},v=156,T=88,m={FILLED:"filled",FILLING:"filling",FAILED:"failed"},g={PRELOADING:"preloading",FETCHING:"fetching"},b={TIME_NOW:"timeNow",PRELOADED:"preloaded"},y=["game_quota_reach","game_block"],R=312,A=360;function D(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){D(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var P,N,w={NORMAL:"normal",PENDING:"pending",SUCCEED:"succeed",FAILED:"failed"},x=I(I({},w),{},{INIT_PENDING:"pendingInit",INIT_FAILED:"failedInit",TEMPORY_ERROR:"temporyError"}),U=I(I({},w),{},{BLACKLIST_ERROR:"blacklistError",INTERNAL_SERVER_ERROR:"internalServerError"}),M={SUCCEED:"succeed",FORBIDDEN_ERROR:"forbidden",INTERNAL_SERVER_ERROR:"internalServerError",LOGOUT:"logout"},k={ENABLED:"enabled",DISABLED:"disabled",NO_PERSSION:"no_permission"},L={SUCCEED:"succeed",FAILED:"failed",HISTORY:"history",SHOW:"show",PENDING:"pending"},j={PENDING:"pending",ACCEPTED:"accepted",REJECTED:"rejected",CANCELLED:"cancelled"};function G(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?G(Object(r),!0).forEach((function(t){D(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}!function(e){e[e.OFFLINE=-1]="OFFLINE",e[e.ONLINE=0]="ONLINE",e[e.HANGUP=1]="HANGUP"}(P||(P={}));var H,V={AMOUNT:"amount",PERCENTAGE:"percentage"},B={DISCOUNT:"discount",COIN_CASHBACK:"coin_cashback"},Y={ONGOING:"ongoing",SCHEDULED:"scheduled"},W=(D(N={},Y.ONGOING,0),D(N,Y.SCHEDULED,1),N),Q=F(F({},Y),{},{FINISHED:"finished"}),q={USED:"used",EXPIRED:"expired",REDEEM:"redeem"},K={ITEM:"item",SHOP:"shop"},z={DETAILS:"details",CLAIM:"claim",USE:"use"},X={CONNECT:"connect",CONNECT_ERROR:"connect_error",DISCONNECT:"disconnect",RECONNECT_ATTEMPT:"reconnect_attempt",RECONNECT_ERROR:"reconnect_error",RECONNECTING:"reconnecting",RECONNECT:"reconnect"},J=50,$={PIN:"pin",UNPIN:"unpin",MARK_AS_READ:"mark_as_read",MARK_AS_UNREAD:"mark_as_unread",FORWARD:"forward"};!function(e){e[e.Normal=0]="Normal",e[e.Agent=1]="Agent"}(H||(H={}));var Z,ee,te={CUSTOMER:"customer",AGENT:"agent"};!function(e){e.All="All",e.Unread="Unread",e.Pinned="Pinned",e.Closed="Closed",e.Unreplied="Unreplied"}(Z||(Z={})),function(e){e[e.LatestMessage=0]="LatestMessage",e[e.LongestWaitTime=1]="LongestWaitTime"}(ee||(ee={}));var re,ne,oe,ae={FILTER:1,SHOP:2,SHOP_LIST:3,SYNC:4,QUEUE:5,FAKING:6,LATEST:7,OLDER:8,DELETE:9,LOAD_MORE:10,SOCKET:11,PRELOAD:12},ce={VIEW:1,FETCH:2,CLEAR_SEARCH:3,SHOW:4,SYNC:5,AUTO:6,SEND:7,UPDATE:8,CATCH:9},se={PRELOAD:1,QUEUE:2,RECEIVE_TOTAL:3,RECEIVE_SINGLE:4,SYNC:5},ie={MINE:"mine",HIS:"his"},ue={SOLD_OUT:-1,DELETED:0,NORMAL:1,REVIEWING:2,BANNED:3,INVALID:4,INVALID_HIDE:5,OFFENSIVE_HIDE:6,AUDITING:7,NORMAL_UNLIST:8,DELISTED:9},le={DELETED:"deleted",BANNED:"banned",NORMAL:"normal",SOLD_OUT:"sold_out",DELISTED:"delisted"},de={sales:"sold",recent:"mtime"},pe={SALES:"sales",RECENT:"recent"},_e={RELATED:"related",TOP_RATED:"top_rated",FREQUENTLY_BOUGHT_TOGETHER:"frequently_bought_together"},fe=4,Ee={ADD_ON_DEAL:"add_on_deal",BUNDLE_DEAL:"bundle_deal",CAMPAIGN:"campaign",FLASH_SALES:"flash_sales",GIFT_WITH_PURCHASE:"gift_with_purchase",SHOW_DISCOUNT:"show_discount"},Se={ALL:"All",SELLER_RECOMMENDATION:"Seller_Recommendation",SYSTEM_RECOMMENDATION:"System_Recommendation"},Oe={UNACCESSIBLE:"unaccessible",NONE:"none",UNALLOCATED:"unallocated"},he={MAIN_SUBACCOUNT:"main_subaccount",ADMIN_SUBACCOUNT:"admin_subaccount",NORMAL_SUBACCOUNT:"normal_subaccount"},ve={SELLER:"seller",SUBACCOUNT:"subaccount"},Te={ALL:"all",UNPAID:"unpaid",TO_SHIP:"to_ship",SHIPPING:"shipping",COMPLETED:"completed",CANCELLED:"cancelled",REFUND:"refund"},me={all:0,unpaid:1,to_ship:2,shipping:3,completed:4,cancelled:5,refund:6},ge={DELETE:0,UNRATED:1,RATED:2,RETURNED:3,RETURN_RATED:4,CANCEL:5},be={PAY_CREDIT_CARD:1,PAY_BANK_TRANSFER:2,PAY_OFFLINE_PAYMENT:3,PAY_IPAY88:4,PAY_FREE:5,PAY_COD:6,PAY_ESUN:7,PAY_BILL_PAYMENT:8,PAY_INDOMARET:13,PAY_KREDIVO:14,PAY_NICEPAY_CC:15,PAY_AIRPAY:18,PAY_SHOPEE_WALLET:20,PAY_SHOPEE_WALLET_V2:27,PAY_AKULAKU:21,PAY_INSTALLMENT:23,PAY_IBANKING:29},ye=[{cancel_reason_code:1,transify_key:"common.order.cancel_reason.out_of_stock"},{cancel_reason_code:3,transify_key:"common.order.cancel_reason.undeliverable_area"}],Re={NONE:0,OUT_OF_STOCK:1,CUSTOMER_REQUEST:2,UNDELIVERABLE_AREA:3,CANNOT_SUPPORT_COD:4,LOST_PARCEL:5,SYSTEM_UNPAID:100,SYSTEM_UNDERPAID:101,SYSTEM_PAYMENT_REJECTED:102,LOGISTICS_REQUEST_CANCELED:200,LOGISTICS_PICKUP_FAILED:201,LOGISTICS_DELIVERY_FAILED:202,LOGISTICS_COD_REJECTED:203,BACKEND_LOGISTICS_NOT_STARTED:204,BACKEND_ESCROW_TERMINATED:300,BACKEND_INACTIVE_SELLER:301,BACKEND_SELLER_DID_NOT_SHIP:302,RULE_ENGINE_AUTO_CANCEL:400},Ae={ORDER_EXT_DELETE:0,ORDER_EXT_UNPAID:1,ORDER_EXT_PAID:2,ORDER_EXT_SHIPPED:3,ORDER_EXT_COMPLETED:4,ORDER_EXT_INVALID:6,ORDER_EXT_CANCEL_PROCESSING:7,ORDER_EXT_CANCEL_COMPLETED:8,ORDER_EXT_RETURN_PROCESSING:9,ORDER_EXT_RETURN_COMPLETED:10,ORDER_EXT_ESCROW_PAID:11,ORDER_EXT_ESCROW_CREATED:12,ORDER_EXT_ESCROW_PENDING:13,ORDER_EXT_ESCROW_VERIFIED:14,ORDER_EXT_ESCROW_PAYOUT:15,ORDER_EXT_CANCEL_PENDING:16},De={PAID:1,UNPAID:2,COMPLETED:3,CANCELLED:4,SHIPPED:5,ALL:6,TOSHIP:7,TORECEIVE:8,TOPAY:9,TOSHIP_UNPROCESSED:10,TOSHIP_PROCESSED:11,RETURN:12,GROUP_BUY_ALL:13,GROUP_BUY_ONGOING:14,GROUP_BUY_COMPLETED:15,GROUP_BUY_INVALID:16},Ce={UNKNOWN:0,SIMPLE:1,ESCROW:2},Ie={ORDER_DETAIL_SHIPPING_CONFIRMED:2,ORDER_DETAIL_SHIPPED:4,ORDER_DETAIL_RECEIVED:5,ORDER_DETAIL_CANCELED:6,ORDER_DETAIL_NOTIFY_SHIP:7},Pe={LOGISTICS_NOT_STARTED:0,LOGISTICS_REQUEST_CREATED:1,LOGISTICS_PICKUP_DONE:2,LOGISTICS_PICKUP_RETRY:3,LOGISTICS_PICKUP_FAILED:4,LOGISTICS_DELIVERY_DONE:5,LOGISTICS_DELIVERY_FAILED:6,LOGISTICS_REQUEST_CANCELED:7,LOGISTICS_COD_REJECTED:8,LOGISTICS_READY:9,LOGISTICS_INVALID:10,LOGISTICS_LOST:11,LOGISTICS_PENDING_ARRANGE:12},Ne=-1,we=0,xe=["image/png","image/jpeg","image/jpg"],Ue=["video/*",".flv",".3gp",".rm",".rmvb",".asf",".mp4",".webm"],Me=["MP4","TS","FLV","WMV","ASF","RM","RMVB","MPG","MPEG","3GP","MOV","WEBM","AVI"],ke=["application/vnd.rn-realmedia","application/vnd.rn-realmedia-vbr"],Le=2097152,je=31457280,Ge="common.no_sc_access",Fe="conversation_detail.workstation.order_panel.manage",He={CLICK:"click",IMPRESSION:"impression",ACTION_DRAG_VIDEO:"action_drag_video",DELETE_PREVIEW_MEDIA:"delete_preview_media",CLOSE_PREVIEW_MEDIA:"close_preview_media",ACTION_FINISH_VIDEO:"action_finish_video",VIEW:"view",ACTION_ADJUST_MESSAGE_SHORTCUT:"action_adjust_message_shortcut",ACTION_SELECT:"action_select",ACTION_SEARCH:"action_search",CLOSE:"close",ACTION_ALERT_SETTINGS:"action_alert_settings"},Ve={MESSAGE:1001,SOLUTION:1002},Be={HEAD_HOTQUESTION_SOURCE:1,SHORTCUT_SOURCE:2,CATEGORY_HOTQUESTION_SOURCE:3,FAQ_RECOMMEND_SOURCE:4,KB_INTENT_SOURCE:5,LIVEAGENT_RECOMMENDER_SOURCE:6};!function(e){e.LandingPage="SIPDirectChatFromChatLandingPage",e.ProductPage="SIPProductPage",e.OrderPage="SIPOrderPageFromBuyer",e.ShopPage="SIPShopPage"}(re||(re={})),function(e){e[e.Faq=0]="Faq",e[e.Intent=1]="Intent"}(ne||(ne={})),function(e){e[e.Categories=0]="Categories",e[e.OtherFaqType=1]="OtherFaqType",e[e.Intent=2]="Intent",e[e.Question=3]="Question",e[e.ChatWithSeller=4]="ChatWithSeller"}(oe||(oe={}));var Ye={error:"error",success:"success",normal:"normal",warn:"warn",info:"info"},We={pending:Ye.warn,error:Ye.error,resolved:Ye.success},Qe="conversation_detail.workstation.panel",qe="".concat(Qe,".product"),Ke="conversation_detail.workstation.voucher_panel",ze={itemHeight:{conversationCellForBCSubAccount:94,conversationCell:72,shopCardCell:212,shopListCell:72,voucherCell:146,conversationShopListCell:60,dropdownShopListCell:44,contactCell:48},itemWidth:{shopCardCell:356}},Xe={ALL:"all",CUSTOMER:"customer",MESSAGES:"messages",AGENT:"agent"},Je={NAME:"name",ORDER:"order",MESSAGE:"message",AGENT:"agent",AGENT_MESSAGE:"agentMessage"},$e={sg:"en",ph:"en",tw:"zhHant",id:"id",th:"th",vn:"vi",my:"en",br:"pt-BR",mx:"es-MX",cl:"es-CL",pl:"pl",co:"es-CO"},Ze={en:"en",zhHans:"zh-Hans","ms-my":"ms-MY",zhHant:"zh-Hant",id:"id",th:"th",vi:"vi","pt-BR":"pt-BR","es-MX":"es-MX","es-CL":"es-CL","es-CO":"es-CO","es-AR":"es-AR",pl:"pl",fr:"fr","es-ES":"es-ES",fil:"fil"},et={USERID:"__chat_userid__",LAST_ACTIVE:"last-active-time",MINI_ALERT:"mini-should-show-alert"},tt={ACK:"ack",TAB_FOCUSED:"tabFocused",CALC_CONNECTIONS:"calcConnections",CLOSE_CONNECTION:"closeConnection",SHARE_API_DATA:"shareApiData"},rt={UNREAD:"unread",UPDATE_SETTING:"updateSetting",UPDATE_OFFLINE_SETTING:"updateOfflineSetting"},nt=199999;function ot(e){return ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ot(e)}var at=function(e){return!e||0===Object.keys(e).length},ct=function(e,t){return null===e&&null===t||(null==e?void 0:e.id)===(null==t?void 0:t.id)},st=function(e,t){return JSON.stringify(e)===JSON.stringify(t)},it=function(e,t){if(!e)return!1;if(!t)return!0;var r=(e+="").length,n=(t+="").length;if(r!==n)return r>n;var o=e.split(""),a=null;return o.forEach((function(e,r){"boolean"!=typeof a&&(a=parseInt(e)>parseInt(t[r])||parseInt(e)===parseInt(t[r])&&null)})),!!a},ut=function(){var e=window.location.hostname;return["seller","banhang","localhost"].some((function(t){return e.includes(t)}))},lt=function(){try{return!("undefined"!=typeof window&&"object"===ot(window.process)&&"renderer"===window.process.type||"undefined"!=typeof process&&"object"===ot(process.versions)&&process.versions.electron||"object"===("undefined"==typeof navigator?"undefined":ot(navigator))&&"string"==typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0)}catch(e){return!0}}(),dt=function(e){return!(null==e||!e.id)};function pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _t(e){return function(e){if(Array.isArray(e))return pt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return pt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?pt(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ft(e){var t=new Uint16Array(e.length);return Array.prototype.forEach.call(t,(function(t,r,n){n[r]=e.charCodeAt(r)})),window.encodeURIComponent(window.btoa(String.fromCharCode.apply(null,new Uint8Array(t.buffer))))}var Et,St,Ot,ht=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replace(/_([a-z])/g,(function(e,t){return t.toUpperCase()}))},vt=function(e){for(var t=window.atob(e.split(",")[1]),r=e.split(",")[0].split(":")[1].split(";")[0],n=new ArrayBuffer(t.length),o=new Uint8Array(n),a=0;a<t.length;a++)o[a]=t.charCodeAt(a);return new window.Blob([o],{type:r})},Tt=function e(t,r){var n=JSON.parse(JSON.stringify(t));for(var o in r)n[o]=n[o]&&"[object Object]"===n[o].toString()?e(n[o],r[o]):r[o];return n},mt=function(e){return e>=1e3?"999+":e},gt=function(e,t){var r=_t(e),n=r.indexOf(t);return n>-1&&r.splice(n,1),r},bt=c(994),yt=["PL","ES","FR"],Rt=function(e){return e?e.toUpperCase():"SG"},At=function(e){var t=e.price,r=e.country,n=function(e,t){return"TW"!==e||void 0!==t&&!t?"CL"===e?"$":(0,bt.getCurrencyConfig)(e).symbol||"":"NT$"}(r,e.isSCChat);if(yt.includes(r))return"".concat(n).concat(t).concat(n);var o=(0,bt.getCurrencyConfig)(r).symbolPosition===bt.SYMBOL_POSITION.BACK?"".concat(t).concat(n):"".concat(n).concat(t);return"MX"===r?"".concat(o," MXN"):o},Dt=function(e){for(var t="",r=+e,n=["K","M","B"];r>1e3&&(t=n.shift()||"");)r/=1e3;var o=parseInt(100*+r+"")/100;return{value:r=Number.isInteger(o)?o:o.toFixed(2),unit:t}},Ct="NaN",It=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0,o=r.withSpaces,a=void 0!==o&&o,c=r.withMinus,s=void 0!==c&&c,i=r.withUnit,u=void 0!==i&&i,l=r.withComma,d=void 0===l||l,p=Rt(t),_=Number(e);if(Number.isNaN(_))return At({price:Ct,country:p,isSCChat:n});var f="",E="";if(u){var S=Dt(_);f=S.unit,_=S.value}return s&&(E="-"),_=(0,bt.formatCurrency)(p,_,{symbol:"",spaceBetweenSymbol:a,noSeparator:!d}),_=At({price:_,country:p,isSCChat:n}),"".concat(E).concat(_).concat(f)},Pt=function(e,t,r){return t=Rt(t),At({price:e,country:t,isSCChat:r})},Nt=c(602),wt=c.n(Nt),xt=c(470).t,Ut=new(wt()),Mt=function(e){return Ut.locale.set(e)},kt=function(e){return e.format("hh:mm")};!function(e){e.Today="today",e.Yesterday="yesterday"}(Et||(Et={})),function(e){e[e.Time=0]="Time"}(St||(St={})),function(e){e[e.sunday=0]="sunday",e[e.monday=1]="monday",e[e.tuesday=2]="tuesday",e[e.wednesday=3]="wednesday",e[e.thursday=4]="thursday",e[e.friday=5]="friday",e[e.saturday=6]="saturday"}(Ot||(Ot={}));var Lt,jt=function(e){var t=e.value,r=e.date,n=e.suffix,o=e.prefix,a="",c="";if(o&&(a=xt("conversation_detail.message_list.".concat(o.type))+(void 0===o.separator?"  ":o.separator)),n){var s=n.type===St.Time?kt(r):"";c=(void 0===n.separator?", ":n.separator)+s}return a+t+c};!function(e){e[e.Yesterday=0]="Yesterday",e[e.Today=1]="Today",e[e.ThisMonth=2]="ThisMonth",e[e.ThisYear=3]="ThisYear",e[e.ThisWeek=4]="ThisWeek",e[e.NONE=5]="NONE"}(Lt||(Lt={}));var Gt=function(e,t){var r=t||{},n=r.noTodayFlag,o=r.noTimeFlag,a=r.needFullFormat,c=r.onlyKeepDate,s=r.isConvPreview,i=Ut.create(e);if(a)return jt({value:i.format("LHD"),date:i,suffix:{type:St.Time}});if(c)return i.format("LHD");var u=["tw","cn"].includes(Ut.locale.current),l=function(e,t){var r=new Date,n=new Date(e);if(t){var o=r-n,a=(new Date).setHours(0,0,0,0);if(o<=6048e5&&o>=r.getTime()-a+864e5)return Lt.ThisWeek}if(r.getFullYear()===n.getFullYear()){if(r.getMonth()===n.getMonth()){var c=r.getDate(),s=n.getDate();return c===s?Lt.Today:c-1===s?Lt.Yesterday:Lt.ThisMonth}return Lt.ThisYear}return Lt.NONE}(e,s);switch(l){case Lt.Today:var d=n?void 0:{type:Et.Today},p={type:St.Time,separator:""};return jt({value:"",date:i,prefix:d,suffix:p});case Lt.Yesterday:var _={type:Et.Yesterday},f=o?void 0:{type:St.Time,separator:""};return jt({value:"",date:i,prefix:_,suffix:f});case Lt.ThisWeek:return xt("common.".concat(Ot[new Date(e).getDay()]));case Lt.ThisMonth:case Lt.ThisYear:var E=o?void 0:{type:St.Time};return jt({value:i.format(s?u?"MM/DD":"DD/MM":"LHDS"),date:i,suffix:E});default:var S=o?void 0:{type:St.Time};return jt({value:i.format(s?u?"YY/MM/DD":"DD/MM/YY":"LHD"),date:i,suffix:S})}},Ft="YYYY-MM-DD hh:mm",Ht=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=Ut.create(e);return r.format(t||Ft)},Vt=function(e){var t=Math.ceil(e),r=t/3600<10?"0"+Math.floor(t/3600):Math.floor(t/3600),n=t/60%60<10?"0"+Math.floor(t/60%60):Math.floor(t/60%60),o=t%60<10?"0"+t%60:t%60;return t>=3600?"".concat(r,":").concat(n,":").concat(o):"".concat(n,":").concat(o)},Bt=function(e){var t=e.created_at,r=e.created_timestamp;return Gt(t||1e3*r,{noTodayFlag:!0,noTimeFlag:!0,isConvPreview:!0})},Yt=function(e,t){return Ut.create(e).format("LHD")===Ut.create(t).format("LHD")},Wt={0:"sunday",1:"monday",2:"tuesday",3:"wednesday",4:"thursday",5:"friday",6:"saturday"},Qt=function(e,t){var r=1e3*e;switch(t){case"time":var n=Ut.create(r);return kt(n);case"date":var o=new Date,a=new Date(r);if(o.getFullYear()===a.getFullYear()){if(o.getMonth()===a.getMonth()){var c=o.getDate(),s=a.getDate();if(c===s)return xt("conversation_detail.message_list.today");if(c-1===s)return xt("conversation_detail.message_list.yesterday");if(c-s<7){var i=a.getDay();return xt("common.".concat(Wt[i]))}return Ut.create(r).format("LHDS")}return Ut.create(r).format("LHDS")}return Ut.create(r).format("LHD")}},qt=c(661),Kt=c.n(qt),zt=function(e){return 0===e||1===e?"one":e>=1e6?"many":"other"},Xt=function(e){return 1===e?"one":Number.isInteger(e)?[2,3,4].includes(e%10)&&![12,13,14].includes(e%100)?"few":![2,3,4].includes(e%10)||[12,13,14].includes(e%100)?"many":"other":"other"},Jt=function(e){return e<=1?"one":"other"},$t={fr:zt,pl:Xt,default:Jt},Zt={fr:function(e,t){return"".concat(zt(e),".").concat(zt(t))},pl:function(e,t){return"".concat(Xt(e),".").concat(Xt(t))},default:function(e,t){return"".concat(Jt(e),"_").concat(Jt(t))}},er=["fr","pl"],tr=function(e,t,r){var n=Kt().language||"en",o=er.includes(n)?n:"default";return void 0!==r?"".concat(e,"_").concat(Zt[o](t,r)):"".concat(e,"_").concat($t[o](t))},rr=function(e,t){var r=t||window.location.search,n=null;if(r){var o=r.indexOf("?")+1,a=new RegExp("(^|&)"+e+"=([^&]*)(&|$)");n=r.substr(o).match(a)}return n?unescape(n[2]):null},nr=function(){var e=navigator.userAgent.toLowerCase(),t=null;return e.indexOf("msie")>0&&(t=e.match(/msie [\d.]+;/gi)),e.indexOf("firefox")>0&&(t=e.match(/firefox\/[\d.]+/gi)),e.indexOf("safari")>0&&e.indexOf("chrome")<0&&(t=e.match(/safari\/[\d.]+/gi)),e.indexOf("chrome")>0&&(t=e.match(/chrome\/[\d.]+/gi)),t?t.toString():"unknown"};function or(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ar,cr=["hans","hant"],sr=["en","zh-hans","zh-hant","ms-my","th-th","vi-vn","id-id","zh-cn","pt-br","hi","es-mx","es-co","es-cl","es-es","es-ar","pl","fr","fil"],ir=function(e){return"".concat(e[0].toUpperCase()).concat(e.substring(1))},ur=function(e){if(e.includes("-")){var t=e.split("-");return cr.includes(t[1])?"".concat(t[0],"-").concat(ir(t[1])):"".concat(t[0],"-").concat(t[1].toUpperCase())}return e},lr=function(e){var t,r=(e||"en").toLowerCase(),n="en",o=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return or(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?or(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){s=!0,a=e},f:function(){try{c||null==r.return||r.return()}finally{if(s)throw a}}}}(sr);try{for(o.s();!(t=o.n()).done;){var a=t.value;if(a.includes(r)){n=ur(a);break}}}catch(e){o.e(e)}finally{o.f()}return n},dr=function(e){var t=lr(e);switch(t){case"th-TH":return"th";case"vi-VN":return"vi";case"id-ID":return"id";default:return t}},pr={en:"default","ms-MY":"ms-my","th-TH":"th","zh-Hans":"tw","zh-Hant":"tw","vi-VN":"vn","id-ID":"id","zh-CN":"cn","pt-BR":"pt-br",hi:"hi","es-MX":"es-mx","es-CO":"es-co","es-CL":"es-cl",pl:"pl","es-ES":"es-es",fr:"fr","es-AR":"es-ar",fil:"fil"},_r=function(e){var t=lr(e);return pr[t]||"default"},fr=function(e){var t=e.access,r=e.isSubAccount,n=e.action,o=e.url,a=void 0===o?"":o;t&&(r?n():window.open().location=a)},Er=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,o=Date.now();return function(){for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];t&&(clearTimeout(t),t=null);var i=Date.now();i-o>n?(e.apply(void 0,c),o=Date.now()):t=window.setTimeout((function(){e.apply(void 0,c),o=Date.now()}),r)}},Sr=function(e,t){var r,n,o,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=null,s=0,i=function(){s=!1===a.leading?0:(new Date).getTime(),c=null,o=e.apply(r,n),c||(r=n=null)},u=function(){var u=(new Date).getTime();s||!1!==a.leading||(s=u);var l=t-(u-s);r=this;for(var d=arguments.length,p=new Array(d),_=0;_<d;_++)p[_]=arguments[_];return n=p,l<=0||l>t?(c&&(clearTimeout(c),c=null),s=u,o=e.apply(r,n),c||(r=n=null)):c||!1===a.trailing||(c=window.setTimeout(i,l)),o};return u},Or=function(e,t){var r=0;return{check:function(){for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return e.apply(void 0,_t(o))?r+=1:this.reset(),r>=t&&(this.reset(),!0)},reset:function(){r=0}}},hr="modal",vr=function(e,t){var r=t.superType,n=t.secondaryType,o=e.find((function(e){return e.name===r}));if(o){var a=o.children;if(a.length){var c=a.find((function(e){return e.name===n}));return c||!1}return!1}return!1},Tr=function(e){return vr(e,{superType:"Unreplied-Filter",secondaryType:hr})},mr=function(e){return vr(e,{superType:"MiniChat-Unreplied-Filter",secondaryType:hr})},gr=function(e){return vr(e,{superType:"Import-Template",secondaryType:hr})},br=function(e){return vr(e,{superType:"Auto-Translation",secondaryType:"settings"})},yr=function(e){return vr(e,{superType:"MiniChat-Header",secondaryType:hr})},Rr=function(e){return vr(e,{superType:"MiniChat-Entry",secondaryType:hr})},Ar=c(349),Dr=c.n(Ar),Cr={getItem:function(e,t){try{var r=window.localStorage.getItem(e);return null==r?r:t?JSON.parse(r):r}catch(e){console.warn("*** LocalStorage Error: Can not get LocalStorage *** \n".concat(e))}},setItem:function(e,t,r){try{var n=r?JSON.stringify(t):t;window.localStorage.setItem(e,n)}catch(e){console.warn("*** LocalStorage Error: Can not set LocalStorage *** \n".concat(e))}},removeItem:function(e){try{window.localStorage.removeItem(e)}catch(e){console.warn("*** LocalStorage Error: Can not remove LocalStorage *** \n".concat(e))}}},Ir=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?Cr.getItem(e):Dr().getItem(e)},Pr=function(e,t){return Dr().setItem(e,t)},Nr=function(e,t){return t?Cr.removeItem(e):Dr().removeItem(e)},wr=Dr().supports(Dr().INDEXEDDB)||Dr().supports(Dr().WEBSQL)?1e3:100,xr=c(470).t;function Ur(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Mr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ur(Object(r),!0).forEach((function(t){D(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ur(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var kr=r.MSG_TYPE_TEXT,Lr=r.MSG_TYPE_IMAGE,jr=r.MSG_TYPE_OFFER,Gr=r.MSG_TYPE_PRODUCT,Fr=r.MSG_TYPE_ORDER,Hr=r.MSG_TYPE_STICKER,Vr=r.MSG_TYPE_NOTIFICATION,Br=r.MSG_TYPE_VOUCHER,Yr=r.MSG_TYPE_ITEM_LIST,Wr=r.MSG_TYPE_FAQ,Qr=r.MSG_TYPE_FAQ_QUESTION,qr=r.MSG_TYPE_FAQ_LIVEAGENT,Kr=r.MSG_TYPE_FAQ_FEEDBACK,zr=r.MSG_TYPE_FAQ_UNSUPPORTED,Xr=r.MSG_TYPE_FAQ_FEEDBACK_PROMPT,Jr=r.MSG_TYPE_FAQ_LIVEAGENT_PROMPT,$r=r.MSG_TYPE_BUNDLE_MESSAGE,Zr=r.MSG_TYPE_OPTION_PACK,en=r.MSG_TYPE_SELECTED_OPTION,tn=r.MSG_TYPE_VIDEO,rn=r.MSG_TYPE_IMAGE_WITH_TEXT,nn=r.MSG_TYPE_RATE_CARD,on=r.MSG_TYPE_NEW_FAQ,an=r.MSG_TYPE_FAQ_CATEGORY_CHOICE,cn=r.MSG_TYPE_FAQ_QUESTION_LIST,sn=r.MSG_TYPE_FAQ_TYPE_CHOICE,un=r.MSG_TYPE_FAQ_CATEGORY_LIST,ln=r.MSG_TYPE_FAQ_TYPE_BOT_REQUEST_TEXT_MESSAGE,dn=r.MSG_TYPE_FAQ_TYPE_BOT_REQUEST_ORDER_MESSAGE,pn=r.FAQ_TYPE_BOT_RESPONSE_MESSAGE,_n=r.MSG_TYPE_SECURITY_TIPS,fn=a.FORBIDDEN,En=a.BLACKLIST,Sn=a.UNVERIFIED_PHONE_NUMBER,On=j.PENDING,hn=j.REJECTED,vn="common.unsupported_message",Tn=(D(ar={},r.MSG_TYPE_FAQ_LIVEAGENT,"faq.live_agent"),D(ar,r.MSG_TYPE_FAQ_UNSUPPORTED,"faq.new_unsupport_input"),D(ar,r.MSG_TYPE_FAQ_FEEDBACK_PROMPT,"faq.feedback_prompt"),D(ar,r.MSG_TYPE_FAQ_LIVEAGENT_PROMPT,"faq.new_live_agent_prompt"),D(ar,r.MSG_TYPE_VIDEO,"conversation_detail.input_field.toolbar.video.tip"),D(ar,r.MSG_TYPE_IMAGE_WITH_TEXT,"conversation_list.conversation_cell.new_image_message"),ar),mn=function(e){return xr(Tn[e]||vn)},gn=[Yr],bn=[tn,zr,Xr,Jr,rn],yn=[Lr,$r,dn,jr,Gr,Fr,Br,nn,Hr],Rn=[cn,sn,un],An=function(e){var t=e.message,r=e.enableTranslation,n=e.locale,o=e.conversationShopId;if(!t)return{text:xr(vn)};var a=t.type,c=t.content,s=void 0===c?{}:c,u=t.crm_message_preview,l=void 0===u?{}:u,d=t.message_option,p=t.source,_=t.send_status;if(l.text)return{text:l.text};if(null!=s&&s.preview_text&&a===pn)return{text:s.preview_text};if(Dn(d,i.MSG_OPT_CENSORED_BLACKLIST))return{text:xr("common.blacklist.replaced_text")};if(a){var f,E,S=s||{},O=S.text,h=void 0===O?"":O,v=S.title,T=S.opening,m=S.caption,g=S.translation,b=S.product_name,y=S.sticker_name,R=S.chat_product_infos,A=void 0===R?[]:R,D=S.products,C=void 0===D?[]:D,I=Ao(t,{isAgent:!1,shop_id:o}),P=function(e,t,r,n){var o,a=t||{},c=a.live_agent_text,s=void 0===c?[]:c,i=a.fixed_title,u=a.faq_type_choice_translation;if(bn.includes(e))o=s.length?Nn(s,r):mn(e);else if(Rn.includes(e))o=Nn(e===sn?u:i,r);else{var l=yn.includes(e)?"conversation_list.conversation_cell.new_".concat(e,"_message"):gn.includes(e)?"common.tips.recommended".concat(n?"":"_for_you"):"";o=l?"[".concat(xr(l),"]"):xr(vn)}return o}(a,s,n,I);switch(a){case on:case Wr:E=T||xr("faq.no_set.chat_bot_title");break;case kr:var N=wn(s);E=!r||N||d===i.MSG_OPT_SOCIAL_MESSAGE||["crm","proactive_update"].includes(p)||2===_?h:(null==g?void 0:g.text)||h;break;case qr:case Qr:case Kr:case en:case Zr:case an:case ln:E=h||v;break;case tn:E="[".concat(P,"]");break;case rn:E="[".concat(P,"] ").concat(m||v||h);break;case zr:case Xr:case Jr:case cn:case sn:case un:E=P;break;case Gr:E="".concat(P," ").concat(b);break;case Hr:E=y?"[".concat(y,"]"):P;break;case Yr:var w=A.map((function(e){return e.name})).join("; ");E="".concat(P," ").concat(w);break;case Vr:var x=kn(s||{},n),U=x.notification_for_sender,M=x.notification_for_receiver;E=I?U:M;break;case nn:E="".concat(P," ").concat(xr(I?"conversation_list.preview.rate_card_sender":"rate_card.rate_out_service"));break;case jr:var k=s||{},L=k.status,j=k.products_count,G=k.offer_price;if(L)if(L===On){var F=xr("conversation_list.preview.offer_pending_".concat(I?"sender":"receiver"));E="".concat(P," ").concat(F,": ").concat(G," x ").concat(j),I||(f=!0)}else{var H=L===hn?"declined":L;E="".concat(P," ").concat(xr("conversation_detail.workstation.offer_panel.".concat(H)))}else E=P;break;case Fr:E="".concat(P," ").concat(C.map((function(e){return e.title})).join("; "));break;case Br:var V=s||{},B=V.type,Y=V.rule_text,W=V.discount_text;if(B){var Q="[".concat(xr("conversation_detail.workstation.voucher_panel.".concat(B,"_voucher")),"]");E="".concat(Q," ").concat(W,", ").concat(Y)}else E=P;break;default:E=P}return{text:E,isPendingReceivedOffer:f}}return{text:xr(vn)}},Dn=function(e,t){return(e&t)===t},Cn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Dn(e.message_option,i.MSG_OPT_DELETE)},In=function(e,t){return t.some((function(t){return Dn(e,t)}))},Pn=function(e){return e===nn},Nn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=e.find((function(e){return dr(t).toLocaleLowerCase().includes(e.lang.toLocaleLowerCase())}))||e.find((function(e){return"en"===e.lang}));return(r||{}).text},wn=function(e){var t=e||{},r=t.translation,n=t.mid;if(!r)return!0;var o=(void 0===n?{}:n).source_language,a=void 0===o?"":o,c=r||{},s=c.final,i=c.mid,u=c.target_language,l=void 0===u?"":u,d=c.source_language,p=void 0===d?"":d,_=s?s.target_language:l,f=s?s.source_language:p,E=i?i.source_language:a;return E?E===_:f===_&&"unknown"!==f},xn=function(e,t){return{type:r.MSG_TYPE_SECURITY_TIPS,content:{text:""},id:e,conversation_id:t,to_id:"",from_id:"",shop_id:"",created_timestamp:Math.floor((new Date).getTime()/1e3)}},Un=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.updateMaxGeneralOptionHideTime,n=void 0===r||r,o=t.updateMessageOption,a=void 0===o||o,c=e||{},s=c.created_timestamp,i=c.message_option,u=n?{max_general_option_hide_time:s}:{},l=a?{last_message_option:i}:{};return Mr(Mr({},u),l)},Mn=function(e){var t=e.crm_message_preview,r=void 0===t?{}:t;return r.text?{crm_message_preview:r}:{crm_message_preview:{}}},kn=function(e,t){var r=e.noti_text_of_all_languages,n=void 0===r?[]:r;if(!n.length)return e;var o=n.find((function(e){return dr(t).toLocaleLowerCase().includes(e.language.toLocaleLowerCase())}));if(o)return o;var a=n.find((function(e){return"en"===e.language}));return a||e},Ln=function(e){var t=e.type,r=e.textContent,n=e.content,o={};switch(t){case Fr:o={products:(r||{}).products};break;case Br:var a=r||{};o={rule_text:a.rule_text,discount_text:a.discount_text,type:a.type};break;case jr:var c=r||{};o={status:c.status,products_count:c.products_count,offer_price:c.offer_price};break;case Gr:o={product_name:n.product_name||(null==r?void 0:r.name)}}return Mr(Mr({},e),{},{content:Mr(Mr({},n),o)})},jn=[kr,Lr,rn,tn,Qr,Kr,qr,en,an,sn,ln,on,cn,un,Jr,zr,$r,pn,Xr],Gn=[Vr,_n],Fn=[kr,Lr,tn,$r,on],Hn=function(e){return jn.includes(e)},Vn=function(e,t,r){return Gn.includes(e)||[nn].includes(e)&&t!==r},Bn=function(e){var t=e.groupHeader,r=e.type;return t&&(Fn.includes(r)||Cn(e))},Yn=function(e){return Object.values(r).includes(e)},Wn=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=e.type,o=e.id;return n===kr&&!t&&-1!==r.indexOf(o)},Qn=function(e,t){return t&&(Dn(e,i.MSG_OPT_CANCELORDER_WARNING_NOT_SEND)||Dn(e,i.MSG_OPT_CANCELORDER_WARNING_SENT))},qn=function(e,t,r,n){if([j.ACCEPTED,j.REJECTED].includes(e)){var o=e.slice(0,e.length-2);return t?r?null:xr("conversation_detail.message_list.".concat(o,"_offer")):r?xr("conversation_detail.message_list.".concat(o,"_offer_user"),{username:n}):null}if(j.CANCELLED)return t?xr("conversation_detail.message_list.cancel_offer",{username:n}):xr("conversation_detail.message_list.cancel_offer_self")},Kn=function(e,t,r,n){var o=e.errorCode,a=e.message_option;return[fn,En,Sn].includes(o)||Qn(a,t)||function(e,t,r,n){var o=e.type,a=e.textContent;if(o===jr&&a){var c=a||{},s=c.buyer_id,i=c.status;return!!qn(i,s===t,r,n)}return!1}(e,r,t,n)},zn=function(e){return e>=900?640:e>=800?570:e>=700?500:e>=600?430:360},Xn=function(e,t){return[Hr].includes(e)&&!!t};function Jn(e,t,r,n,o,a,c){try{var s=e[a](c),i=s.value}catch(e){return void r(e)}s.done?t(i):Promise.resolve(i).then(n,o)}function $n(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function c(e){Jn(a,n,o,c,s,"next",e)}function s(e){Jn(a,n,o,c,s,"throw",e)}c(void 0)}))}}var Zn,eo=c(757),to=c.n(eo),ro=c(470).t,no=function(e){return oo(e)?ro(tr("label.exceed_media_limit.video_duration",180),{max:180}):null},oo=function(e){var t=e.type,r=e.duration,n=void 0===r?0:r;return"video"===t&&(n<0||n>180)},ao=function(){return window.createObjectURL||window.URL.createObjectURL},co=function(e){return{type:"video",cover:"",file:e,duration:0}},so=function(e,t){return new Promise((function(r){"image"===t?function(e,t){var r=ao()(e),n=new Image;n.onload=function(){var o=n.width,a=n.height;t({type:"image",cover:r,file:e,width:o,height:a})},n.src=r}(e,r):"video"===t&&function(e,t){var r;try{r=ao()(e)}catch(r){return void t(co(e))}var n=document.createElement("video");n.setAttribute("crossOrigin","anonymous"),n.setAttribute("autoplay","autoplay"),n.muted=!0,n.src=r,n.addEventListener("loadeddata",(function(){n?function(e,t,r,n){var o=document.createElement("canvas"),a=e,c=a.videoWidth,s=a.videoHeight,i=a.duration;o.width=c,o.height=s,o.getContext("2d").drawImage(e,0,0,c,s);var u={type:"video",file:t,duration:Math.ceil(i),width:c,height:s,videoUrl:r};o.toBlob?o.toBlob((function(t){u.cover=t?ao()(t):"",n(u),e=null}),"image/png",.5):(u.cover=o.toDataURL?o.toDataURL("image/png"):"",n(u))}(n,e,r,t):t(co(e))})),n.addEventListener("error",(function(){t(co(e))}))}(e,r)}))},io=function(e){return e.size},uo=function(e){return e.type},lo=function(e){var t=uo(e);return function(e){return e.includes("video")||ke.includes(e)}(t)?"video":function(e){return e.includes("image")}(t)?"image":null},po=function(){var e=$n(to().mark((function e(t){var r;return to().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.map(function(){var e=$n(to().mark((function e(t){return to().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,so(t,lo(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=3,Promise.all(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_o="common.toast.file_unsupport",fo=function(e,t,r,n){var o=lo(e);if("all"===r&&!o||"all"!==r&&o!==r)return ro(_o);if("video"===o){if(!t)return ro(_o);if(!function(e){return io(e)<=je}(e))return ro("label.exceed_media_limit.video_size",{max:30});if(!function(e){var t=function(e){return e.name}(e),r=(t.substr(t.lastIndexOf(".")+1)||"").toUpperCase();return Me.includes(r)}(e))return ro(_o)}else if("image"===o){if(!function(e,t){return io(e)<=(t||Le)}(e,n))return n?ro("ps_feedback_upload_img_size_error"):ro("common.toast.file_size_exceeds",{maxFileSize:"2MB"});if(!function(e){return xe.includes(uo(e))}(e))return ro("feedback_modal.error.upload_image_failed.format")}return null},Eo=function(e,t){var r=new XMLHttpRequest;r.open("get",e),r.responseType="blob",r.onload=function(){t(r.response)},r.send()},So=c(547),Oo=[r.MSG_TYPE_TEXT,r.MSG_TYPE_IMAGE,r.MSG_TYPE_VIDEO,r.MSG_TYPE_STICKER],ho=function(e){return Oo.includes(e)},vo=[i.MSG_OPT_TRIGGER_FAQ,i.MSG_OPT_FAQ_SESSION,i.MSG_OPT_CANCELORDER_WARNING_NOT_SEND],To=[r.MSG_TYPE_TEXT,r.MSG_TYPE_IMAGE,r.MSG_TYPE_VIDEO,r.MSG_TYPE_STICKER,r.MSG_TYPE_ITEM_LIST,r.MSG_TYPE_SHOPPING_CART,r.MSG_TYPE_UNTATED_ORDER_REMINDER,r.MSG_TYPE_ADD_ON_DEAL,r.MSG_TYPE_VOUCHER,r.MSG_TYPE_BUNDLE_DEAL,r.MSG_TYPE_FLASH_SALE,r.MSG_TYPE_OFFER,r.MSG_TYPE_ORDER,r.MSG_TYPE_PRODUCT,r.MSG_TYPE_IMAGE_WITH_TEXT],mo=function(e,t){var n=e.type,c=e.send_status,s=e.errorCode,i=e.status,u=e.message_option;if(!t){var l=To.includes(n)&&!vo.find((function(e){return Dn(u,e)})),d=c!==o.SENDING&&c!==o.FAILED&&i!==f.CENSORED_BLACKLIST&&s!==a.BLACKLIST;if(l&&d){var p=(e||{}).textContent,_=void 0===p?{}:p;if(n===r.MSG_TYPE_ORDER)return!(!_||!_.id);if(n===r.MSG_TYPE_PRODUCT){var E=_,S=E.id,O=E.actual_price;return!(!S||!O)}return!0}}return!1},go=(D(Zn={},r.MSG_TYPE_TEXT,0),D(Zn,r.MSG_TYPE_IMAGE,1),D(Zn,r.MSG_TYPE_OFFER,3),D(Zn,r.MSG_TYPE_PRODUCT,4),D(Zn,r.MSG_TYPE_ORDER,5),D(Zn,r.MSG_TYPE_STICKER,6),D(Zn,r.MSG_TYPE_VIDEO,18),D(Zn,r.MSG_TYPE_ITEM_LIST,1011),D(Zn,r.MSG_TYPE_VOUCHER,1013),D(Zn,r.MSG_TYPE_SHOPPING_CART,1014),D(Zn,r.MSG_TYPE_UNTATED_ORDER_REMINDER,1015),D(Zn,r.MSG_TYPE_BUNDLE_DEAL,1016),D(Zn,r.MSG_TYPE_FLASH_SALE,1017),D(Zn,r.MSG_TYPE_ADD_ON_DEAL,1018),Zn),bo=function(e){return void 0!==go[e]?go[e]:-1},yo=[i.MSG_OPT_AUTO_REPLY,i.MSG_OPT_BLOCKED,i.MSG_OPT_CENSORED_BLACKLIST,i.MSG_OPT_IGNORE_UNREAD_FOR_RECEIVER,i.MSG_OPT_IGNORE_UNREAD_FOR_SENDER,i.MSG_OPT_INVISIBLE_FOR_RECEIVER,i.MSG_OPT_INVISIBLE_FOR_SENDER,i.MSG_OPT_ADS,i.MSG_OPT_FAQ_SESSION,i.MSG_OPT_TRIGGER_FAQ,i.MSG_OPT_OFFWORK_AUTOREPLY,i.MSG_OPT_CANCELORDER_WARNING_RETRACT,i.MSG_OPT_CHATBOT_SESSION,i.MSG_OPT_TRIGGER_CHATBOT,i.MSG_OPT_PRIVATE_MESSAGE,i.MSG_OPT_SILENT_FOR_SENDER],Ro=function(e,t,r){var n=e.type,a=e.send_status,c=e.created_timestamp,s=e.message_option,i=!0;return t&&O.includes(n)&&![o.SENDING,o.FAILED].includes(a)&&!In(s,yo)||(i=!1),(!r||Math.floor((new Date).getTime()/1e3)-c>=r)&&(i=!1),i},Ao=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.isAgent,n=t.to_tob_user_id,o=t.shop_id,a=e.from_id,c=e.to_shop_id;return r?a!==n:c!==o};function Do(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Co(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Do(Object(r),!0).forEach((function(t){D(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Do(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Io,Po,No=function(e,t){return t.map((function(t){return function(e,t){var r=function(e,t){var r=t.trim().toLocaleLowerCase();return e.filter((function(e){return e.trim().toLocaleLowerCase().startsWith(r)})).length}(e.tags,t),n=function(e,t){var r=Mo(t),n=new RegExp(r,"gi");return(e.match(n)||[]).length}(e.content,t);return 1e4*r+1*n}(e,t)})).reduce((function(e,t){return e+t}),0)},wo=function(e){return e.trim().length>=1},xo=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!t)return e.trim()?[e]:[];var r=e.split(",").filter((function(e){return e.trim()})),n=_t(new Set(r));return n.sort((function(e,t){return e.length>t.length?-1:1}))},Uo=function(e,t){return t.length?function(e){return e.sort((function(e,t){return e.weight>t.weight?-1:1}))}(function(e){return e.filter((function(e){return e.weight}))}(e.map((function(e){return Co(Co({},e),{},{weight:No(e,t)})})))):e},Mo=function(e){return e.replace(/[.[\]{}()+?*^\\$?]/g,"\\$&")},ko=c(470).t,Lo=function(e){return"common.order.status.".concat(e)},jo=function(e){var t=e.order,r=e.region,n=e.isOwnOrder,o=e.isNewPrice,a=t.products,c=void 0===a?[]:a,s=t.estimated_escrow,i=void 0===s?0:s,u=t.total_price,l=void 0===u?0:u,d=t.voucher_price,p=void 0===d?0:d,_=t.price_before_discount,f=void 0===_?0:_,E=t.credit_card_promotion,S=void 0===E?0:E,O=c.reduce((function(e,t){return e+(t.coin_offset||0)}),0);return{shopeeCoin:O,payment:It(o?i||l?n?i:l:f||l:f-p-S-O,r)}},Go=be.PAY_CREDIT_CARD,Fo=be.PAY_BANK_TRANSFER,Ho=be.PAY_OFFLINE_PAYMENT,Vo=be.PAY_IPAY88,Bo=be.PAY_FREE,Yo=be.PAY_COD,Wo=be.PAY_ESUN,Qo=be.PAY_BILL_PAYMENT,qo=be.PAY_INDOMARET,Ko=be.PAY_KREDIVO,zo=be.PAY_NICEPAY_CC,Xo=be.PAY_AIRPAY,Jo=be.PAY_SHOPEE_WALLET,$o=be.PAY_SHOPEE_WALLET_V2,Zo=be.PAY_AKULAKU,ea=be.PAY_INSTALLMENT,ta=be.PAY_IBANKING,ra=(D(Io={},Go,"cc"),D(Io,Fo,"bank_transfer"),D(Io,Ho,"offline"),D(Io,Vo,"online"),D(Io,Bo,"waived"),D(Io,Yo,"cod"),D(Io,Wo,"esun"),D(Io,Qo,"bill_payment"),D(Io,qo,"indomaret"),D(Io,Ko,"kredivo"),D(Io,zo,"cc_installment"),D(Io,Xo,"airpay"),D(Io,Jo,"shopee_wallet"),D(Io,$o,"shopee_wallet_v2"),D(Io,Zo,"akulaku"),D(Io,ea,"installment"),D(Io,ta,"ibanking"),Io),na=function(e){var t=ra[e];return t?ko("common.order.pay_method.".concat(t)):""},oa=function(e,t){var r=e.list_type,n=e.status_ext,o=e.order_type,a=e.payment_method,c=e.shipping_method,s=e.logistics_status,i=e.pickup_cutoff_time;if(n===Ae.ORDER_EXT_CANCEL_PENDING)return!1;var u=["MY","TW","VN","PH"].includes(t),l=!!i&&Date.now()>=new Date(i).getTime(),d=!0;switch(r){case De.TOPAY:if(a===be.PAY_OFFLINE_PAYMENT)return d;break;case De.TOSHIP:return l&&u&&a===be.PAY_COD&&s===Pe.LOGISTICS_REQUEST_CREATED||(o===Ce.ESCROW?(n===Ae.ORDER_EXT_RETURN_PROCESSING||c>0&&s===Pe.LOGISTICS_REQUEST_CREATED&&l)&&(d=!1):o===Ce.SIMPLE&&(d=!1)),d}return d},aa=(D(Po={},ue.DELETED,le.DELETED),D(Po,ue.BANNED,le.BANNED),D(Po,ue.SOLD_OUT,le.SOLD_OUT),D(Po,ue.DELISTED,le.DELISTED),Po),ca=function(e){return e===ue.NORMAL?"conversation_detail.conversation_origin.product_origin.product_stock":"common.product.".concat(aa[e])},sa=function(e,t){return!(!e||t!==ue.DELETED)},ia=function(e){return void 0!==e&&e!==ue.NORMAL},ua=function(e){return void 0!==e&&e<=0},la=function(e,t){return ia(e)||ua(t)},da=1e3,pa=1800,_a=86400,fa=[_a,3600,60],Ea=function(e){var t=e,r=fa.map((function(e){var r=t>e?Math.floor(t/e):0;return t-=r*e,r}));return r.push(t),r},Sa=function(e){return"".concat(e>=10?"":"0").concat(e)},Oa=function(){return Math.ceil(Date.now()/1e3).toString()},ha=function(e){return e*Math.pow(10,9)+""},va=["zh-CN","zh-Hant","zh-Hans"],Ta=function(e){var t=Kt().language||"en",r=lr(t);return va.includes(r)?((100-e)/10).toFixed(e%10?1:0):"".concat(e,"%")},ma=function(e,t,r,n,o){return n||t?e:e||o&&!!r},ga=c(470).t,ba=function(e){return e===Q.FINISHED},ya=function(e,t){return e===t},Ra=function(e,t){return It(e,t,{withUnit:e>=1e4})},Aa=function(e,t,r,n){return ga("conversation_detail.workstation.voucher_panel.".concat(n?Q.ONGOING:e,"_time"),{time:e===Q.SCHEDULED?Ht(t,"MM.DD.YYYY h:mm"):Ht(r,"MM.DD.YYYY")})};function Da(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ca(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Da(Object(r),!0).forEach((function(t){D(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Da(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ia=function(e,t,r){var n=e.categories,o=void 0===n?[]:n,a=e.other_faq_types,c=void 0===a?[]:a,s=e.intents,i=void 0===s?[]:s,u=e.questions,l=void 0===u?[]:u,d=[];return o.length&&o.forEach((function(e,r){d.push(Pa({item:e,index:r,type:oe.Categories,isNewFaq:t}))})),c.length&&c.forEach((function(e,n){d.push(Pa({item:e,index:n+o.length,type:oe.OtherFaqType,isNewFaq:t,locale:r}))})),i.length&&i.forEach((function(e,r){d.push(Pa({item:e,index:r+o.length+c.length,type:oe.Intent,isNewFaq:t}))})),l.length&&l.forEach((function(e,r){d.push(Pa({item:e,index:r,type:oe.Question,isNewFaq:t}))})),d},Pa=function(e){var t=e.item,r=e.index,n=e.type,o=e.isNewFaq,a=e.locale,c={};switch(n){case oe.Categories:c={content:t.title,location:r};break;case oe.OtherFaqType:c={content:Nn(t.faq_type_choice_translation,a),location:r};break;case oe.Intent:var s=t;c=Ca(Ca({},JSON.parse(s.pass_through_data)),{},{content:s.text,location:r});break;case oe.Question:c={content:t.text,location:r};break;case oe.ChatWithSeller:c={content:t.content}}return{data:JSON.stringify(Ca(Ca({},c),{},{is_intent_prediction:n===oe.Intent?ne.Intent:ne.Faq,is_default_hq:o?1:0})),type:1}},Na=function(e){var t,r,n,o,a=JSON.parse(e)||{},c=a.message_extra,s=void 0===c?{}:c,i=a.message,u=(i=void 0===i?{}:i).text_value,l=void 0===u?"":u,d=a.reply_type,p=s.task_flow_text||{},_=p.buttons,f=p.content,E=void 0===f?"":f;return(null==_?void 0:_.length)>0||E.includes("<img")||l.includes("<img")?"image":(null===(t=s.cat_intent_list)||void 0===t||null===(r=t.intents)||void 0===r?void 0:r.length)>0||(null===(n=s.task_flow_related_intent)||void 0===n||null===(o=n.intents)||void 0===o?void 0:o.length)>0?"faq":1003===d?"selectOrder":"text"},wa=function(e){var t=document.createElement("span");return t.setAttribute("style","\n  font-size: 12px;\n  line-height: 16px;\n  margin-left: 8px\n"),t.innerText=e,t},xa=function(e,t,r){var n=document.createElement("pre"),o=function(e){return"".concat("\n  margin: 0;\n  box-sizing: border-box;\n  padding: 8px 10px 10px;\n  font-size: 14px;\n  line-height: 20px;\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  position: fixed;\n  left: -1000;\n  right: -1000;\n","max-width: ").concat(e,"px")}(e);if(n.id="chat-text-pre",n.setAttribute("style",o),n.innerText=t,r){var a=wa(r);n.appendChild(a)}return n},Ua=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"height";document.body.appendChild(e);var r=e.getBoundingClientRect(),n="height"===t?r.height:r.width;return document.body.removeChild(e),n},Ma=function(e,t,r){var n=xa(r,e),o=wa(t),a=xa(r,e,t),c=Ua(n);return{conflict:c!==Ua(a),multiLine:c>38,timeWidth:Ua(o,"width"),widthConflict:Ua(a,"width")>Ua(n,"width")}},ka=c(470)})(),s})(),e.exports=n(r(37725),r(14906),r(58518),r(69483))}}]);